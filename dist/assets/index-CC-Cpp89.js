var __defProp=Object.defineProperty;var __typeError=msg=>{throw TypeError(msg)};var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});var __publicField=(obj,key,value)=>__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),__accessCheck=(obj,member,msg)=>member.has(obj)||__typeError("Cannot "+msg);var __privateGet=(obj,member,getter)=>(__accessCheck(obj,member,"read from private field"),getter?getter.call(obj):member.get(obj)),__privateAdd=(obj,member,value)=>member.has(obj)?__typeError("Cannot add the same private member more than once"):member instanceof WeakSet?member.add(obj):member.set(obj,value),__privateSet=(obj,member,value,setter)=>(__accessCheck(obj,member,"write to private field"),setter?setter.call(obj,value):member.set(obj,value),value),__privateMethod=(obj,member,method)=>(__accessCheck(obj,member,"access private method"),method);function _mergeNamespaces(n3,m2){for(var i2=0;i2<m2.length;i2++){const e2=m2[i2];if(typeof e2!="string"&&!Array.isArray(e2)){for(const k2 in e2)if(k2!=="default"&&!(k2 in n3)){const d2=Object.getOwnPropertyDescriptor(e2,k2);d2&&Object.defineProperty(n3,k2,d2.get?d2:{enumerable:!0,get:__name(()=>e2[k2],"get")})}}}return Object.freeze(Object.defineProperty(n3,Symbol.toStringTag,{value:"Module"}))}__name(_mergeNamespaces,"_mergeNamespaces");__name(function(){const relList=document.createElement("link").relList;if(relList&&relList.supports&&relList.supports("modulepreload"))return;for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver(mutations=>{for(const mutation of mutations)if(mutation.type==="childList")for(const node of mutation.addedNodes)node.tagName==="LINK"&&node.rel==="modulepreload"&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){const fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin==="use-credentials"?fetchOpts.credentials="include":link.crossOrigin==="anonymous"?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}__name(getFetchOpts,"getFetchOpts");function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}__name(processPreload,"processPreload")},"polyfill")();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(x2){return x2&&x2.__esModule&&Object.prototype.hasOwnProperty.call(x2,"default")?x2.default:x2}__name(getDefaultExportFromCjs,"getDefaultExportFromCjs");var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var l2=Symbol.for("react.element"),n3=Symbol.for("react.portal"),p2=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),r2=Symbol.for("react.profiler"),t2=Symbol.for("react.provider"),u2=Symbol.for("react.context"),v2=Symbol.for("react.forward_ref"),w2=Symbol.for("react.suspense"),x2=Symbol.for("react.memo"),y2=Symbol.for("react.lazy"),z2=Symbol.iterator;function A2(a2){return a2===null||typeof a2!="object"?null:(a2=z2&&a2[z2]||a2["@@iterator"],typeof a2=="function"?a2:null)}__name(A2,"A");var B2={isMounted:__name(function(){return!1},"isMounted"),enqueueForceUpdate:__name(function(){},"enqueueForceUpdate"),enqueueReplaceState:__name(function(){},"enqueueReplaceState"),enqueueSetState:__name(function(){},"enqueueSetState")},C3=Object.assign,D2={};function E2(a2,b2,e2){this.props=a2,this.context=b2,this.refs=D2,this.updater=e2||B2}__name(E2,"E"),E2.prototype.isReactComponent={},E2.prototype.setState=function(a2,b2){if(typeof a2!="object"&&typeof a2!="function"&&a2!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a2,b2,"setState")},E2.prototype.forceUpdate=function(a2){this.updater.enqueueForceUpdate(this,a2,"forceUpdate")};function F2(){}__name(F2,"F"),F2.prototype=E2.prototype;function G2(a2,b2,e2){this.props=a2,this.context=b2,this.refs=D2,this.updater=e2||B2}__name(G2,"G");var H2=G2.prototype=new F2;H2.constructor=G2,C3(H2,E2.prototype),H2.isPureReactComponent=!0;var I2=Array.isArray,J2=Object.prototype.hasOwnProperty,K2={current:null},L2={key:!0,ref:!0,__self:!0,__source:!0};function M2(a2,b2,e2){var d2,c={},k2=null,h2=null;if(b2!=null)for(d2 in b2.ref!==void 0&&(h2=b2.ref),b2.key!==void 0&&(k2=""+b2.key),b2)J2.call(b2,d2)&&!L2.hasOwnProperty(d2)&&(c[d2]=b2[d2]);var g2=arguments.length-2;if(g2===1)c.children=e2;else if(1<g2){for(var f2=Array(g2),m2=0;m2<g2;m2++)f2[m2]=arguments[m2+2];c.children=f2}if(a2&&a2.defaultProps)for(d2 in g2=a2.defaultProps,g2)c[d2]===void 0&&(c[d2]=g2[d2]);return{$$typeof:l2,type:a2,key:k2,ref:h2,props:c,_owner:K2.current}}__name(M2,"M");function N2(a2,b2){return{$$typeof:l2,type:a2.type,key:b2,ref:a2.ref,props:a2.props,_owner:a2._owner}}__name(N2,"N");function O2(a2){return typeof a2=="object"&&a2!==null&&a2.$$typeof===l2}__name(O2,"O");function escape(a2){var b2={"=":"=0",":":"=2"};return"$"+a2.replace(/[=:]/g,function(a3){return b2[a3]})}__name(escape,"escape");var P2=/\/+/g;function Q2(a2,b2){return typeof a2=="object"&&a2!==null&&a2.key!=null?escape(""+a2.key):b2.toString(36)}__name(Q2,"Q");function R2(a2,b2,e2,d2,c){var k2=typeof a2;(k2==="undefined"||k2==="boolean")&&(a2=null);var h2=!1;if(a2===null)h2=!0;else switch(k2){case"string":case"number":h2=!0;break;case"object":switch(a2.$$typeof){case l2:case n3:h2=!0}}if(h2)return h2=a2,c=c(h2),a2=d2===""?"."+Q2(h2,0):d2,I2(c)?(e2="",a2!=null&&(e2=a2.replace(P2,"$&/")+"/"),R2(c,b2,e2,"",function(a3){return a3})):c!=null&&(O2(c)&&(c=N2(c,e2+(!c.key||h2&&h2.key===c.key?"":(""+c.key).replace(P2,"$&/")+"/")+a2)),b2.push(c)),1;if(h2=0,d2=d2===""?".":d2+":",I2(a2))for(var g2=0;g2<a2.length;g2++){k2=a2[g2];var f2=d2+Q2(k2,g2);h2+=R2(k2,b2,e2,f2,c)}else if(f2=A2(a2),typeof f2=="function")for(a2=f2.call(a2),g2=0;!(k2=a2.next()).done;)k2=k2.value,f2=d2+Q2(k2,g2++),h2+=R2(k2,b2,e2,f2,c);else if(k2==="object")throw b2=String(a2),Error("Objects are not valid as a React child (found: "+(b2==="[object Object]"?"object with keys {"+Object.keys(a2).join(", ")+"}":b2)+"). If you meant to render a collection of children, use an array instead.");return h2}__name(R2,"R");function S2(a2,b2,e2){if(a2==null)return a2;var d2=[],c=0;return R2(a2,d2,"","",function(a3){return b2.call(e2,a3,c++)}),d2}__name(S2,"S");function T2(a2){if(a2._status===-1){var b2=a2._result;b2=b2(),b2.then(function(b3){(a2._status===0||a2._status===-1)&&(a2._status=1,a2._result=b3)},function(b3){(a2._status===0||a2._status===-1)&&(a2._status=2,a2._result=b3)}),a2._status===-1&&(a2._status=0,a2._result=b2)}if(a2._status===1)return a2._result.default;throw a2._result}__name(T2,"T");var U2={current:null},V2={transition:null},W2={ReactCurrentDispatcher:U2,ReactCurrentBatchConfig:V2,ReactCurrentOwner:K2};function X2(){throw Error("act(...) is not supported in production builds of React.")}return __name(X2,"X"),react_production_min.Children={map:S2,forEach:__name(function(a2,b2,e2){S2(a2,function(){b2.apply(this,arguments)},e2)},"forEach"),count:__name(function(a2){var b2=0;return S2(a2,function(){b2++}),b2},"count"),toArray:__name(function(a2){return S2(a2,function(a3){return a3})||[]},"toArray"),only:__name(function(a2){if(!O2(a2))throw Error("React.Children.only expected to receive a single React element child.");return a2},"only")},react_production_min.Component=E2,react_production_min.Fragment=p2,react_production_min.Profiler=r2,react_production_min.PureComponent=G2,react_production_min.StrictMode=q2,react_production_min.Suspense=w2,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W2,react_production_min.act=X2,react_production_min.cloneElement=function(a2,b2,e2){if(a2==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a2+".");var d2=C3({},a2.props),c=a2.key,k2=a2.ref,h2=a2._owner;if(b2!=null){if(b2.ref!==void 0&&(k2=b2.ref,h2=K2.current),b2.key!==void 0&&(c=""+b2.key),a2.type&&a2.type.defaultProps)var g2=a2.type.defaultProps;for(f2 in b2)J2.call(b2,f2)&&!L2.hasOwnProperty(f2)&&(d2[f2]=b2[f2]===void 0&&g2!==void 0?g2[f2]:b2[f2])}var f2=arguments.length-2;if(f2===1)d2.children=e2;else if(1<f2){g2=Array(f2);for(var m2=0;m2<f2;m2++)g2[m2]=arguments[m2+2];d2.children=g2}return{$$typeof:l2,type:a2.type,key:c,ref:k2,props:d2,_owner:h2}},react_production_min.createContext=function(a2){return a2={$$typeof:u2,_currentValue:a2,_currentValue2:a2,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a2.Provider={$$typeof:t2,_context:a2},a2.Consumer=a2},react_production_min.createElement=M2,react_production_min.createFactory=function(a2){var b2=M2.bind(null,a2);return b2.type=a2,b2},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(a2){return{$$typeof:v2,render:a2}},react_production_min.isValidElement=O2,react_production_min.lazy=function(a2){return{$$typeof:y2,_payload:{_status:-1,_result:a2},_init:T2}},react_production_min.memo=function(a2,b2){return{$$typeof:x2,type:a2,compare:b2===void 0?null:b2}},react_production_min.startTransition=function(a2){var b2=V2.transition;V2.transition={};try{a2()}finally{V2.transition=b2}},react_production_min.unstable_act=X2,react_production_min.useCallback=function(a2,b2){return U2.current.useCallback(a2,b2)},react_production_min.useContext=function(a2){return U2.current.useContext(a2)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(a2){return U2.current.useDeferredValue(a2)},react_production_min.useEffect=function(a2,b2){return U2.current.useEffect(a2,b2)},react_production_min.useId=function(){return U2.current.useId()},react_production_min.useImperativeHandle=function(a2,b2,e2){return U2.current.useImperativeHandle(a2,b2,e2)},react_production_min.useInsertionEffect=function(a2,b2){return U2.current.useInsertionEffect(a2,b2)},react_production_min.useLayoutEffect=function(a2,b2){return U2.current.useLayoutEffect(a2,b2)},react_production_min.useMemo=function(a2,b2){return U2.current.useMemo(a2,b2)},react_production_min.useReducer=function(a2,b2,e2){return U2.current.useReducer(a2,b2,e2)},react_production_min.useRef=function(a2){return U2.current.useRef(a2)},react_production_min.useState=function(a2){return U2.current.useState(a2)},react_production_min.useSyncExternalStore=function(a2,b2,e2){return U2.current.useSyncExternalStore(a2,b2,e2)},react_production_min.useTransition=function(){return U2.current.useTransition()},react_production_min.version="18.3.1",react_production_min}__name(requireReact_production_min,"requireReact_production_min");var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}__name(requireReact,"requireReact");/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var f2=requireReact(),k2=Symbol.for("react.element"),l2=Symbol.for("react.fragment"),m2=Object.prototype.hasOwnProperty,n3=f2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p2={key:!0,ref:!0,__self:!0,__source:!0};function q2(c,a2,g2){var b2,d2={},e2=null,h2=null;g2!==void 0&&(e2=""+g2),a2.key!==void 0&&(e2=""+a2.key),a2.ref!==void 0&&(h2=a2.ref);for(b2 in a2)m2.call(a2,b2)&&!p2.hasOwnProperty(b2)&&(d2[b2]=a2[b2]);if(c&&c.defaultProps)for(b2 in a2=c.defaultProps,a2)d2[b2]===void 0&&(d2[b2]=a2[b2]);return{$$typeof:k2,type:c,key:e2,ref:h2,props:d2,_owner:n3.current}}return __name(q2,"q"),reactJsxRuntime_production_min.Fragment=l2,reactJsxRuntime_production_min.jsx=q2,reactJsxRuntime_production_min.jsxs=q2,reactJsxRuntime_production_min}__name(requireReactJsxRuntime_production_min,"requireReactJsxRuntime_production_min");var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}__name(requireJsxRuntime,"requireJsxRuntime");var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(exports){function f2(a2,b2){var c=a2.length;a2.push(b2);a:for(;0<c;){var d2=c-1>>>1,e2=a2[d2];if(0<g2(e2,b2))a2[d2]=b2,a2[c]=e2,c=d2;else break a}}__name(f2,"f");function h2(a2){return a2.length===0?null:a2[0]}__name(h2,"h");function k2(a2){if(a2.length===0)return null;var b2=a2[0],c=a2.pop();if(c!==b2){a2[0]=c;a:for(var d2=0,e2=a2.length,w2=e2>>>1;d2<w2;){var m2=2*(d2+1)-1,C3=a2[m2],n3=m2+1,x2=a2[n3];if(0>g2(C3,c))n3<e2&&0>g2(x2,C3)?(a2[d2]=x2,a2[n3]=c,d2=n3):(a2[d2]=C3,a2[m2]=c,d2=m2);else if(n3<e2&&0>g2(x2,c))a2[d2]=x2,a2[n3]=c,d2=n3;else break a}}return b2}__name(k2,"k");function g2(a2,b2){var c=a2.sortIndex-b2.sortIndex;return c!==0?c:a2.id-b2.id}if(__name(g2,"g"),typeof performance=="object"&&typeof performance.now=="function"){var l2=performance;exports.unstable_now=function(){return l2.now()}}else{var p2=Date,q2=p2.now();exports.unstable_now=function(){return p2.now()-q2}}var r2=[],t2=[],u2=1,v2=null,y2=3,z2=!1,A2=!1,B2=!1,D2=typeof setTimeout=="function"?setTimeout:null,E2=typeof clearTimeout=="function"?clearTimeout:null,F2=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G2(a2){for(var b2=h2(t2);b2!==null;){if(b2.callback===null)k2(t2);else if(b2.startTime<=a2)k2(t2),b2.sortIndex=b2.expirationTime,f2(r2,b2);else break;b2=h2(t2)}}__name(G2,"G");function H2(a2){if(B2=!1,G2(a2),!A2)if(h2(r2)!==null)A2=!0,I2(J2);else{var b2=h2(t2);b2!==null&&K2(H2,b2.startTime-a2)}}__name(H2,"H");function J2(a2,b2){A2=!1,B2&&(B2=!1,E2(L2),L2=-1),z2=!0;var c=y2;try{for(G2(b2),v2=h2(r2);v2!==null&&(!(v2.expirationTime>b2)||a2&&!M2());){var d2=v2.callback;if(typeof d2=="function"){v2.callback=null,y2=v2.priorityLevel;var e2=d2(v2.expirationTime<=b2);b2=exports.unstable_now(),typeof e2=="function"?v2.callback=e2:v2===h2(r2)&&k2(r2),G2(b2)}else k2(r2);v2=h2(r2)}if(v2!==null)var w2=!0;else{var m2=h2(t2);m2!==null&&K2(H2,m2.startTime-b2),w2=!1}return w2}finally{v2=null,y2=c,z2=!1}}__name(J2,"J");var N2=!1,O2=null,L2=-1,P2=5,Q2=-1;function M2(){return!(exports.unstable_now()-Q2<P2)}__name(M2,"M");function R2(){if(O2!==null){var a2=exports.unstable_now();Q2=a2;var b2=!0;try{b2=O2(!0,a2)}finally{b2?S2():(N2=!1,O2=null)}}else N2=!1}__name(R2,"R");var S2;if(typeof F2=="function")S2=__name(function(){F2(R2)},"S");else if(typeof MessageChannel<"u"){var T2=new MessageChannel,U2=T2.port2;T2.port1.onmessage=R2,S2=__name(function(){U2.postMessage(null)},"S")}else S2=__name(function(){D2(R2,0)},"S");function I2(a2){O2=a2,N2||(N2=!0,S2())}__name(I2,"I");function K2(a2,b2){L2=D2(function(){a2(exports.unstable_now())},b2)}__name(K2,"K"),exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(a2){a2.callback=null},exports.unstable_continueExecution=function(){A2||z2||(A2=!0,I2(J2))},exports.unstable_forceFrameRate=function(a2){0>a2||125<a2?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P2=0<a2?Math.floor(1e3/a2):5},exports.unstable_getCurrentPriorityLevel=function(){return y2},exports.unstable_getFirstCallbackNode=function(){return h2(r2)},exports.unstable_next=function(a2){switch(y2){case 1:case 2:case 3:var b2=3;break;default:b2=y2}var c=y2;y2=b2;try{return a2()}finally{y2=c}},exports.unstable_pauseExecution=function(){},exports.unstable_requestPaint=function(){},exports.unstable_runWithPriority=function(a2,b2){switch(a2){case 1:case 2:case 3:case 4:case 5:break;default:a2=3}var c=y2;y2=a2;try{return b2()}finally{y2=c}},exports.unstable_scheduleCallback=function(a2,b2,c){var d2=exports.unstable_now();switch(typeof c=="object"&&c!==null?(c=c.delay,c=typeof c=="number"&&0<c?d2+c:d2):c=d2,a2){case 1:var e2=-1;break;case 2:e2=250;break;case 5:e2=1073741823;break;case 4:e2=1e4;break;default:e2=5e3}return e2=c+e2,a2={id:u2++,callback:b2,priorityLevel:a2,startTime:c,expirationTime:e2,sortIndex:-1},c>d2?(a2.sortIndex=c,f2(t2,a2),h2(r2)===null&&a2===h2(t2)&&(B2?(E2(L2),L2=-1):B2=!0,K2(H2,c-d2))):(a2.sortIndex=e2,f2(r2,a2),A2||z2||(A2=!0,I2(J2))),a2},exports.unstable_shouldYield=M2,exports.unstable_wrapCallback=function(a2){var b2=y2;return function(){var c=y2;y2=b2;try{return a2.apply(this,arguments)}finally{y2=c}}}}(scheduler_production_min)),scheduler_production_min}__name(requireScheduler_production_min,"requireScheduler_production_min");var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}__name(requireScheduler,"requireScheduler");/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var aa=requireReact(),ca=requireScheduler();function p2(a2){for(var b2="https://reactjs.org/docs/error-decoder.html?invariant="+a2,c=1;c<arguments.length;c++)b2+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a2+"; visit "+b2+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}__name(p2,"p");var da=new Set,ea={};function fa(a2,b2){ha(a2,b2),ha(a2+"Capture",b2)}__name(fa,"fa");function ha(a2,b2){for(ea[a2]=b2,a2=0;a2<b2.length;a2++)da.add(b2[a2])}__name(ha,"ha");var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a2){return ja.call(ma,a2)?!0:ja.call(la,a2)?!1:ka.test(a2)?ma[a2]=!0:(la[a2]=!0,!1)}__name(oa,"oa");function pa(a2,b2,c,d2){if(c!==null&&c.type===0)return!1;switch(typeof b2){case"function":case"symbol":return!0;case"boolean":return d2?!1:c!==null?!c.acceptsBooleans:(a2=a2.toLowerCase().slice(0,5),a2!=="data-"&&a2!=="aria-");default:return!1}}__name(pa,"pa");function qa(a2,b2,c,d2){if(b2===null||typeof b2>"u"||pa(a2,b2,c,d2))return!0;if(d2)return!1;if(c!==null)switch(c.type){case 3:return!b2;case 4:return b2===!1;case 5:return isNaN(b2);case 6:return isNaN(b2)||1>b2}return!1}__name(qa,"qa");function v2(a2,b2,c,d2,e2,f2,g2){this.acceptsBooleans=b2===2||b2===3||b2===4,this.attributeName=d2,this.attributeNamespace=e2,this.mustUseProperty=c,this.propertyName=a2,this.type=b2,this.sanitizeURL=f2,this.removeEmptyString=g2}__name(v2,"v");var z2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a2){z2[a2]=new v2(a2,0,!1,a2,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a2){var b2=a2[0];z2[b2]=new v2(b2,1,!1,a2[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a2){z2[a2]=new v2(a2,2,!1,a2.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a2){z2[a2]=new v2(a2,2,!1,a2,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a2){z2[a2]=new v2(a2,3,!1,a2.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a2){z2[a2]=new v2(a2,3,!0,a2,null,!1,!1)}),["capture","download"].forEach(function(a2){z2[a2]=new v2(a2,4,!1,a2,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a2){z2[a2]=new v2(a2,6,!1,a2,null,!1,!1)}),["rowSpan","start"].forEach(function(a2){z2[a2]=new v2(a2,5,!1,a2.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a2){return a2[1].toUpperCase()}__name(sa,"sa"),"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a2){var b2=a2.replace(ra,sa);z2[b2]=new v2(b2,1,!1,a2,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a2){var b2=a2.replace(ra,sa);z2[b2]=new v2(b2,1,!1,a2,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a2){var b2=a2.replace(ra,sa);z2[b2]=new v2(b2,1,!1,a2,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a2){z2[a2]=new v2(a2,1,!1,a2.toLowerCase(),null,!1,!1)}),z2.xlinkHref=new v2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a2){z2[a2]=new v2(a2,1,!1,a2.toLowerCase(),null,!0,!0)});function ta(a2,b2,c,d2){var e2=z2.hasOwnProperty(b2)?z2[b2]:null;(e2!==null?e2.type!==0:d2||!(2<b2.length)||b2[0]!=="o"&&b2[0]!=="O"||b2[1]!=="n"&&b2[1]!=="N")&&(qa(b2,c,e2,d2)&&(c=null),d2||e2===null?oa(b2)&&(c===null?a2.removeAttribute(b2):a2.setAttribute(b2,""+c)):e2.mustUseProperty?a2[e2.propertyName]=c===null?e2.type===3?!1:"":c:(b2=e2.attributeName,d2=e2.attributeNamespace,c===null?a2.removeAttribute(b2):(e2=e2.type,c=e2===3||e2===4&&c===!0?"":""+c,d2?a2.setAttributeNS(d2,b2,c):a2.setAttribute(b2,c))))}__name(ta,"ta");var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a2){return a2===null||typeof a2!="object"?null:(a2=Ja&&a2[Ja]||a2["@@iterator"],typeof a2=="function"?a2:null)}__name(Ka,"Ka");var A2=Object.assign,La;function Ma(a2){if(La===void 0)try{throw Error()}catch(c){var b2=c.stack.trim().match(/\n( *(at )?)/);La=b2&&b2[1]||""}return`
`+La+a2}__name(Ma,"Ma");var Na=!1;function Oa(a2,b2){if(!a2||Na)return"";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b2)if(b2=__name(function(){throw Error()},"b"),Object.defineProperty(b2.prototype,"props",{set:__name(function(){throw Error()},"set")}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b2,[])}catch(l2){var d2=l2}Reflect.construct(a2,[],b2)}else{try{b2.call()}catch(l2){d2=l2}a2.call(b2.prototype)}else{try{throw Error()}catch(l2){d2=l2}a2()}}catch(l2){if(l2&&d2&&typeof l2.stack=="string"){for(var e2=l2.stack.split(`
`),f2=d2.stack.split(`
`),g2=e2.length-1,h2=f2.length-1;1<=g2&&0<=h2&&e2[g2]!==f2[h2];)h2--;for(;1<=g2&&0<=h2;g2--,h2--)if(e2[g2]!==f2[h2]){if(g2!==1||h2!==1)do if(g2--,h2--,0>h2||e2[g2]!==f2[h2]){var k2=`
`+e2[g2].replace(" at new "," at ");return a2.displayName&&k2.includes("<anonymous>")&&(k2=k2.replace("<anonymous>",a2.displayName)),k2}while(1<=g2&&0<=h2);break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a2=a2?a2.displayName||a2.name:"")?Ma(a2):""}__name(Oa,"Oa");function Pa(a2){switch(a2.tag){case 5:return Ma(a2.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a2=Oa(a2.type,!1),a2;case 11:return a2=Oa(a2.type.render,!1),a2;case 1:return a2=Oa(a2.type,!0),a2;default:return""}}__name(Pa,"Pa");function Qa(a2){if(a2==null)return null;if(typeof a2=="function")return a2.displayName||a2.name||null;if(typeof a2=="string")return a2;switch(a2){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a2=="object")switch(a2.$$typeof){case Ca:return(a2.displayName||"Context")+".Consumer";case Ba:return(a2._context.displayName||"Context")+".Provider";case Da:var b2=a2.render;return a2=a2.displayName,a2||(a2=b2.displayName||b2.name||"",a2=a2!==""?"ForwardRef("+a2+")":"ForwardRef"),a2;case Ga:return b2=a2.displayName||null,b2!==null?b2:Qa(a2.type)||"Memo";case Ha:b2=a2._payload,a2=a2._init;try{return Qa(a2(b2))}catch{}}return null}__name(Qa,"Qa");function Ra(a2){var b2=a2.type;switch(a2.tag){case 24:return"Cache";case 9:return(b2.displayName||"Context")+".Consumer";case 10:return(b2._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a2=b2.render,a2=a2.displayName||a2.name||"",b2.displayName||(a2!==""?"ForwardRef("+a2+")":"ForwardRef");case 7:return"Fragment";case 5:return b2;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(b2);case 8:return b2===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b2=="function")return b2.displayName||b2.name||null;if(typeof b2=="string")return b2}return null}__name(Ra,"Ra");function Sa(a2){switch(typeof a2){case"boolean":case"number":case"string":case"undefined":return a2;case"object":return a2;default:return""}}__name(Sa,"Sa");function Ta(a2){var b2=a2.type;return(a2=a2.nodeName)&&a2.toLowerCase()==="input"&&(b2==="checkbox"||b2==="radio")}__name(Ta,"Ta");function Ua(a2){var b2=Ta(a2)?"checked":"value",c=Object.getOwnPropertyDescriptor(a2.constructor.prototype,b2),d2=""+a2[b2];if(!a2.hasOwnProperty(b2)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var e2=c.get,f2=c.set;return Object.defineProperty(a2,b2,{configurable:!0,get:__name(function(){return e2.call(this)},"get"),set:__name(function(a3){d2=""+a3,f2.call(this,a3)},"set")}),Object.defineProperty(a2,b2,{enumerable:c.enumerable}),{getValue:__name(function(){return d2},"getValue"),setValue:__name(function(a3){d2=""+a3},"setValue"),stopTracking:__name(function(){a2._valueTracker=null,delete a2[b2]},"stopTracking")}}}__name(Ua,"Ua");function Va(a2){a2._valueTracker||(a2._valueTracker=Ua(a2))}__name(Va,"Va");function Wa(a2){if(!a2)return!1;var b2=a2._valueTracker;if(!b2)return!0;var c=b2.getValue(),d2="";return a2&&(d2=Ta(a2)?a2.checked?"true":"false":a2.value),a2=d2,a2!==c?(b2.setValue(a2),!0):!1}__name(Wa,"Wa");function Xa(a2){if(a2=a2||(typeof document<"u"?document:void 0),typeof a2>"u")return null;try{return a2.activeElement||a2.body}catch{return a2.body}}__name(Xa,"Xa");function Ya(a2,b2){var c=b2.checked;return A2({},b2,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??a2._wrapperState.initialChecked})}__name(Ya,"Ya");function Za(a2,b2){var c=b2.defaultValue==null?"":b2.defaultValue,d2=b2.checked!=null?b2.checked:b2.defaultChecked;c=Sa(b2.value!=null?b2.value:c),a2._wrapperState={initialChecked:d2,initialValue:c,controlled:b2.type==="checkbox"||b2.type==="radio"?b2.checked!=null:b2.value!=null}}__name(Za,"Za");function ab(a2,b2){b2=b2.checked,b2!=null&&ta(a2,"checked",b2,!1)}__name(ab,"ab");function bb(a2,b2){ab(a2,b2);var c=Sa(b2.value),d2=b2.type;if(c!=null)d2==="number"?(c===0&&a2.value===""||a2.value!=c)&&(a2.value=""+c):a2.value!==""+c&&(a2.value=""+c);else if(d2==="submit"||d2==="reset"){a2.removeAttribute("value");return}b2.hasOwnProperty("value")?cb(a2,b2.type,c):b2.hasOwnProperty("defaultValue")&&cb(a2,b2.type,Sa(b2.defaultValue)),b2.checked==null&&b2.defaultChecked!=null&&(a2.defaultChecked=!!b2.defaultChecked)}__name(bb,"bb");function db(a2,b2,c){if(b2.hasOwnProperty("value")||b2.hasOwnProperty("defaultValue")){var d2=b2.type;if(!(d2!=="submit"&&d2!=="reset"||b2.value!==void 0&&b2.value!==null))return;b2=""+a2._wrapperState.initialValue,c||b2===a2.value||(a2.value=b2),a2.defaultValue=b2}c=a2.name,c!==""&&(a2.name=""),a2.defaultChecked=!!a2._wrapperState.initialChecked,c!==""&&(a2.name=c)}__name(db,"db");function cb(a2,b2,c){(b2!=="number"||Xa(a2.ownerDocument)!==a2)&&(c==null?a2.defaultValue=""+a2._wrapperState.initialValue:a2.defaultValue!==""+c&&(a2.defaultValue=""+c))}__name(cb,"cb");var eb=Array.isArray;function fb(a2,b2,c,d2){if(a2=a2.options,b2){b2={};for(var e2=0;e2<c.length;e2++)b2["$"+c[e2]]=!0;for(c=0;c<a2.length;c++)e2=b2.hasOwnProperty("$"+a2[c].value),a2[c].selected!==e2&&(a2[c].selected=e2),e2&&d2&&(a2[c].defaultSelected=!0)}else{for(c=""+Sa(c),b2=null,e2=0;e2<a2.length;e2++){if(a2[e2].value===c){a2[e2].selected=!0,d2&&(a2[e2].defaultSelected=!0);return}b2!==null||a2[e2].disabled||(b2=a2[e2])}b2!==null&&(b2.selected=!0)}}__name(fb,"fb");function gb(a2,b2){if(b2.dangerouslySetInnerHTML!=null)throw Error(p2(91));return A2({},b2,{value:void 0,defaultValue:void 0,children:""+a2._wrapperState.initialValue})}__name(gb,"gb");function hb(a2,b2){var c=b2.value;if(c==null){if(c=b2.children,b2=b2.defaultValue,c!=null){if(b2!=null)throw Error(p2(92));if(eb(c)){if(1<c.length)throw Error(p2(93));c=c[0]}b2=c}b2==null&&(b2=""),c=b2}a2._wrapperState={initialValue:Sa(c)}}__name(hb,"hb");function ib(a2,b2){var c=Sa(b2.value),d2=Sa(b2.defaultValue);c!=null&&(c=""+c,c!==a2.value&&(a2.value=c),b2.defaultValue==null&&a2.defaultValue!==c&&(a2.defaultValue=c)),d2!=null&&(a2.defaultValue=""+d2)}__name(ib,"ib");function jb(a2){var b2=a2.textContent;b2===a2._wrapperState.initialValue&&b2!==""&&b2!==null&&(a2.value=b2)}__name(jb,"jb");function kb(a2){switch(a2){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}__name(kb,"kb");function lb(a2,b2){return a2==null||a2==="http://www.w3.org/1999/xhtml"?kb(b2):a2==="http://www.w3.org/2000/svg"&&b2==="foreignObject"?"http://www.w3.org/1999/xhtml":a2}__name(lb,"lb");var mb,nb=function(a2){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b2,c,d2,e2){MSApp.execUnsafeLocalFunction(function(){return a2(b2,c,d2,e2)})}:a2}(function(a2,b2){if(a2.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a2)a2.innerHTML=b2;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+b2.valueOf().toString()+"</svg>",b2=mb.firstChild;a2.firstChild;)a2.removeChild(a2.firstChild);for(;b2.firstChild;)a2.appendChild(b2.firstChild)}});function ob(a2,b2){if(b2){var c=a2.firstChild;if(c&&c===a2.lastChild&&c.nodeType===3){c.nodeValue=b2;return}}a2.textContent=b2}__name(ob,"ob");var pb2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb2).forEach(function(a2){qb.forEach(function(b2){b2=b2+a2.charAt(0).toUpperCase()+a2.substring(1),pb2[b2]=pb2[a2]})});function rb(a2,b2,c){return b2==null||typeof b2=="boolean"||b2===""?"":c||typeof b2!="number"||b2===0||pb2.hasOwnProperty(a2)&&pb2[a2]?(""+b2).trim():b2+"px"}__name(rb,"rb");function sb(a2,b2){a2=a2.style;for(var c in b2)if(b2.hasOwnProperty(c)){var d2=c.indexOf("--")===0,e2=rb(c,b2[c],d2);c==="float"&&(c="cssFloat"),d2?a2.setProperty(c,e2):a2[c]=e2}}__name(sb,"sb");var tb=A2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a2,b2){if(b2){if(tb[a2]&&(b2.children!=null||b2.dangerouslySetInnerHTML!=null))throw Error(p2(137,a2));if(b2.dangerouslySetInnerHTML!=null){if(b2.children!=null)throw Error(p2(60));if(typeof b2.dangerouslySetInnerHTML!="object"||!("__html"in b2.dangerouslySetInnerHTML))throw Error(p2(61))}if(b2.style!=null&&typeof b2.style!="object")throw Error(p2(62))}}__name(ub,"ub");function vb(a2,b2){if(a2.indexOf("-")===-1)return typeof b2.is=="string";switch(a2){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}__name(vb,"vb");var wb=null;function xb(a2){return a2=a2.target||a2.srcElement||window,a2.correspondingUseElement&&(a2=a2.correspondingUseElement),a2.nodeType===3?a2.parentNode:a2}__name(xb,"xb");var yb=null,zb=null,Ab=null;function Bb(a2){if(a2=Cb(a2)){if(typeof yb!="function")throw Error(p2(280));var b2=a2.stateNode;b2&&(b2=Db(b2),yb(a2.stateNode,a2.type,b2))}}__name(Bb,"Bb");function Eb(a2){zb?Ab?Ab.push(a2):Ab=[a2]:zb=a2}__name(Eb,"Eb");function Fb(){if(zb){var a2=zb,b2=Ab;if(Ab=zb=null,Bb(a2),b2)for(a2=0;a2<b2.length;a2++)Bb(b2[a2])}}__name(Fb,"Fb");function Gb(a2,b2){return a2(b2)}__name(Gb,"Gb");function Hb(){}__name(Hb,"Hb");var Ib=!1;function Jb(a2,b2,c){if(Ib)return a2(b2,c);Ib=!0;try{return Gb(a2,b2,c)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}__name(Jb,"Jb");function Kb(a2,b2){var c=a2.stateNode;if(c===null)return null;var d2=Db(c);if(d2===null)return null;c=d2[b2];a:switch(b2){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d2=!d2.disabled)||(a2=a2.type,d2=!(a2==="button"||a2==="input"||a2==="select"||a2==="textarea")),a2=!d2;break a;default:a2=!1}if(a2)return null;if(c&&typeof c!="function")throw Error(p2(231,b2,typeof c));return c}__name(Kb,"Kb");var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:__name(function(){Lb=!0},"get")}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a2,b2,c,d2,e2,f2,g2,h2,k2){var l2=Array.prototype.slice.call(arguments,3);try{b2.apply(c,l2)}catch(m2){this.onError(m2)}}__name(Nb,"Nb");var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:__name(function(a2){Ob=!0,Pb=a2},"onError")};function Tb(a2,b2,c,d2,e2,f2,g2,h2,k2){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}__name(Tb,"Tb");function Ub(a2,b2,c,d2,e2,f2,g2,h2,k2){if(Tb.apply(this,arguments),Ob){if(Ob){var l2=Pb;Ob=!1,Pb=null}else throw Error(p2(198));Qb||(Qb=!0,Rb=l2)}}__name(Ub,"Ub");function Vb(a2){var b2=a2,c=a2;if(a2.alternate)for(;b2.return;)b2=b2.return;else{a2=b2;do b2=a2,(b2.flags&4098)!==0&&(c=b2.return),a2=b2.return;while(a2)}return b2.tag===3?c:null}__name(Vb,"Vb");function Wb(a2){if(a2.tag===13){var b2=a2.memoizedState;if(b2===null&&(a2=a2.alternate,a2!==null&&(b2=a2.memoizedState)),b2!==null)return b2.dehydrated}return null}__name(Wb,"Wb");function Xb(a2){if(Vb(a2)!==a2)throw Error(p2(188))}__name(Xb,"Xb");function Yb(a2){var b2=a2.alternate;if(!b2){if(b2=Vb(a2),b2===null)throw Error(p2(188));return b2!==a2?null:a2}for(var c=a2,d2=b2;;){var e2=c.return;if(e2===null)break;var f2=e2.alternate;if(f2===null){if(d2=e2.return,d2!==null){c=d2;continue}break}if(e2.child===f2.child){for(f2=e2.child;f2;){if(f2===c)return Xb(e2),a2;if(f2===d2)return Xb(e2),b2;f2=f2.sibling}throw Error(p2(188))}if(c.return!==d2.return)c=e2,d2=f2;else{for(var g2=!1,h2=e2.child;h2;){if(h2===c){g2=!0,c=e2,d2=f2;break}if(h2===d2){g2=!0,d2=e2,c=f2;break}h2=h2.sibling}if(!g2){for(h2=f2.child;h2;){if(h2===c){g2=!0,c=f2,d2=e2;break}if(h2===d2){g2=!0,d2=f2,c=e2;break}h2=h2.sibling}if(!g2)throw Error(p2(189))}}if(c.alternate!==d2)throw Error(p2(190))}if(c.tag!==3)throw Error(p2(188));return c.stateNode.current===c?a2:b2}__name(Yb,"Yb");function Zb(a2){return a2=Yb(a2),a2!==null?$b(a2):null}__name(Zb,"Zb");function $b(a2){if(a2.tag===5||a2.tag===6)return a2;for(a2=a2.child;a2!==null;){var b2=$b(a2);if(b2!==null)return b2;a2=a2.sibling}return null}__name($b,"$b");var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a2){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a2,void 0,(a2.current.flags&128)===128)}catch{}}__name(mc,"mc");var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a2){return a2>>>=0,a2===0?32:31-(pc(a2)/qc|0)|0}__name(nc,"nc");var rc=64,sc=4194304;function tc(a2){switch(a2&-a2){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a2&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a2&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a2}}__name(tc,"tc");function uc(a2,b2){var c=a2.pendingLanes;if(c===0)return 0;var d2=0,e2=a2.suspendedLanes,f2=a2.pingedLanes,g2=c&268435455;if(g2!==0){var h2=g2&~e2;h2!==0?d2=tc(h2):(f2&=g2,f2!==0&&(d2=tc(f2)))}else g2=c&~e2,g2!==0?d2=tc(g2):f2!==0&&(d2=tc(f2));if(d2===0)return 0;if(b2!==0&&b2!==d2&&(b2&e2)===0&&(e2=d2&-d2,f2=b2&-b2,e2>=f2||e2===16&&(f2&4194240)!==0))return b2;if((d2&4)!==0&&(d2|=c&16),b2=a2.entangledLanes,b2!==0)for(a2=a2.entanglements,b2&=d2;0<b2;)c=31-oc(b2),e2=1<<c,d2|=a2[c],b2&=~e2;return d2}__name(uc,"uc");function vc(a2,b2){switch(a2){case 1:case 2:case 4:return b2+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b2+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}__name(vc,"vc");function wc(a2,b2){for(var c=a2.suspendedLanes,d2=a2.pingedLanes,e2=a2.expirationTimes,f2=a2.pendingLanes;0<f2;){var g2=31-oc(f2),h2=1<<g2,k2=e2[g2];k2===-1?((h2&c)===0||(h2&d2)!==0)&&(e2[g2]=vc(h2,b2)):k2<=b2&&(a2.expiredLanes|=h2),f2&=~h2}}__name(wc,"wc");function xc(a2){return a2=a2.pendingLanes&-1073741825,a2!==0?a2:a2&1073741824?1073741824:0}__name(xc,"xc");function yc(){var a2=rc;return rc<<=1,(rc&4194240)===0&&(rc=64),a2}__name(yc,"yc");function zc(a2){for(var b2=[],c=0;31>c;c++)b2.push(a2);return b2}__name(zc,"zc");function Ac(a2,b2,c){a2.pendingLanes|=b2,b2!==536870912&&(a2.suspendedLanes=0,a2.pingedLanes=0),a2=a2.eventTimes,b2=31-oc(b2),a2[b2]=c}__name(Ac,"Ac");function Bc(a2,b2){var c=a2.pendingLanes&~b2;a2.pendingLanes=b2,a2.suspendedLanes=0,a2.pingedLanes=0,a2.expiredLanes&=b2,a2.mutableReadLanes&=b2,a2.entangledLanes&=b2,b2=a2.entanglements;var d2=a2.eventTimes;for(a2=a2.expirationTimes;0<c;){var e2=31-oc(c),f2=1<<e2;b2[e2]=0,d2[e2]=-1,a2[e2]=-1,c&=~f2}}__name(Bc,"Bc");function Cc(a2,b2){var c=a2.entangledLanes|=b2;for(a2=a2.entanglements;c;){var d2=31-oc(c),e2=1<<d2;e2&b2|a2[d2]&b2&&(a2[d2]|=b2),c&=~e2}}__name(Cc,"Cc");var C3=0;function Dc(a2){return a2&=-a2,1<a2?4<a2?(a2&268435455)!==0?16:536870912:4:1}__name(Dc,"Dc");var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a2,b2){switch(a2){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(b2.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(b2.pointerId)}}__name(Sc,"Sc");function Tc(a2,b2,c,d2,e2,f2){return a2===null||a2.nativeEvent!==f2?(a2={blockedOn:b2,domEventName:c,eventSystemFlags:d2,nativeEvent:f2,targetContainers:[e2]},b2!==null&&(b2=Cb(b2),b2!==null&&Fc(b2)),a2):(a2.eventSystemFlags|=d2,b2=a2.targetContainers,e2!==null&&b2.indexOf(e2)===-1&&b2.push(e2),a2)}__name(Tc,"Tc");function Uc(a2,b2,c,d2,e2){switch(b2){case"focusin":return Lc=Tc(Lc,a2,b2,c,d2,e2),!0;case"dragenter":return Mc=Tc(Mc,a2,b2,c,d2,e2),!0;case"mouseover":return Nc=Tc(Nc,a2,b2,c,d2,e2),!0;case"pointerover":var f2=e2.pointerId;return Oc.set(f2,Tc(Oc.get(f2)||null,a2,b2,c,d2,e2)),!0;case"gotpointercapture":return f2=e2.pointerId,Pc.set(f2,Tc(Pc.get(f2)||null,a2,b2,c,d2,e2)),!0}return!1}__name(Uc,"Uc");function Vc(a2){var b2=Wc(a2.target);if(b2!==null){var c=Vb(b2);if(c!==null){if(b2=c.tag,b2===13){if(b2=Wb(c),b2!==null){a2.blockedOn=b2,Ic(a2.priority,function(){Gc(c)});return}}else if(b2===3&&c.stateNode.current.memoizedState.isDehydrated){a2.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a2.blockedOn=null}__name(Vc,"Vc");function Xc(a2){if(a2.blockedOn!==null)return!1;for(var b2=a2.targetContainers;0<b2.length;){var c=Yc(a2.domEventName,a2.eventSystemFlags,b2[0],a2.nativeEvent);if(c===null){c=a2.nativeEvent;var d2=new c.constructor(c.type,c);wb=d2,c.target.dispatchEvent(d2),wb=null}else return b2=Cb(c),b2!==null&&Fc(b2),a2.blockedOn=c,!1;b2.shift()}return!0}__name(Xc,"Xc");function Zc(a2,b2,c){Xc(a2)&&c.delete(b2)}__name(Zc,"Zc");function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}__name($c,"$c");function ad(a2,b2){a2.blockedOn===b2&&(a2.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}__name(ad,"ad");function bd(a2){function b2(b3){return ad(b3,a2)}if(__name(b2,"b"),0<Kc.length){ad(Kc[0],a2);for(var c=1;c<Kc.length;c++){var d2=Kc[c];d2.blockedOn===a2&&(d2.blockedOn=null)}}for(Lc!==null&&ad(Lc,a2),Mc!==null&&ad(Mc,a2),Nc!==null&&ad(Nc,a2),Oc.forEach(b2),Pc.forEach(b2),c=0;c<Qc.length;c++)d2=Qc[c],d2.blockedOn===a2&&(d2.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],c.blockedOn===null);)Vc(c),c.blockedOn===null&&Qc.shift()}__name(bd,"bd");var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(a2,b2,c,d2){var e2=C3,f2=cd.transition;cd.transition=null;try{C3=1,fd(a2,b2,c,d2)}finally{C3=e2,cd.transition=f2}}__name(ed,"ed");function gd(a2,b2,c,d2){var e2=C3,f2=cd.transition;cd.transition=null;try{C3=4,fd(a2,b2,c,d2)}finally{C3=e2,cd.transition=f2}}__name(gd,"gd");function fd(a2,b2,c,d2){if(dd){var e2=Yc(a2,b2,c,d2);if(e2===null)hd(a2,b2,d2,id,c),Sc(a2,d2);else if(Uc(e2,a2,b2,c,d2))d2.stopPropagation();else if(Sc(a2,d2),b2&4&&-1<Rc.indexOf(a2)){for(;e2!==null;){var f2=Cb(e2);if(f2!==null&&Ec(f2),f2=Yc(a2,b2,c,d2),f2===null&&hd(a2,b2,d2,id,c),f2===e2)break;e2=f2}e2!==null&&d2.stopPropagation()}else hd(a2,b2,d2,null,c)}}__name(fd,"fd");var id=null;function Yc(a2,b2,c,d2){if(id=null,a2=xb(d2),a2=Wc(a2),a2!==null)if(b2=Vb(a2),b2===null)a2=null;else if(c=b2.tag,c===13){if(a2=Wb(b2),a2!==null)return a2;a2=null}else if(c===3){if(b2.stateNode.current.memoizedState.isDehydrated)return b2.tag===3?b2.stateNode.containerInfo:null;a2=null}else b2!==a2&&(a2=null);return id=a2,null}__name(Yc,"Yc");function jd(a2){switch(a2){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}__name(jd,"jd");var kd=null,ld=null,md=null;function nd(){if(md)return md;var a2,b2=ld,c=b2.length,d2,e2="value"in kd?kd.value:kd.textContent,f2=e2.length;for(a2=0;a2<c&&b2[a2]===e2[a2];a2++);var g2=c-a2;for(d2=1;d2<=g2&&b2[c-d2]===e2[f2-d2];d2++);return md=e2.slice(a2,1<d2?1-d2:void 0)}__name(nd,"nd");function od(a2){var b2=a2.keyCode;return"charCode"in a2?(a2=a2.charCode,a2===0&&b2===13&&(a2=13)):a2=b2,a2===10&&(a2=13),32<=a2||a2===13?a2:0}__name(od,"od");function pd(){return!0}__name(pd,"pd");function qd(){return!1}__name(qd,"qd");function rd(a2){function b2(b3,d2,e2,f2,g2){this._reactName=b3,this._targetInst=e2,this.type=d2,this.nativeEvent=f2,this.target=g2,this.currentTarget=null;for(var c in a2)a2.hasOwnProperty(c)&&(b3=a2[c],this[c]=b3?b3(f2):f2[c]);return this.isDefaultPrevented=(f2.defaultPrevented!=null?f2.defaultPrevented:f2.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return __name(b2,"b"),A2(b2.prototype,{preventDefault:__name(function(){this.defaultPrevented=!0;var a3=this.nativeEvent;a3&&(a3.preventDefault?a3.preventDefault():typeof a3.returnValue!="unknown"&&(a3.returnValue=!1),this.isDefaultPrevented=pd)},"preventDefault"),stopPropagation:__name(function(){var a3=this.nativeEvent;a3&&(a3.stopPropagation?a3.stopPropagation():typeof a3.cancelBubble!="unknown"&&(a3.cancelBubble=!0),this.isPropagationStopped=pd)},"stopPropagation"),persist:__name(function(){},"persist"),isPersistent:pd}),b2}__name(rd,"rd");var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:__name(function(a2){return a2.timeStamp||Date.now()},"timeStamp"),defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:__name(function(a2){return a2.relatedTarget===void 0?a2.fromElement===a2.srcElement?a2.toElement:a2.fromElement:a2.relatedTarget},"relatedTarget"),movementX:__name(function(a2){return"movementX"in a2?a2.movementX:(a2!==yd&&(yd&&a2.type==="mousemove"?(wd=a2.screenX-yd.screenX,xd=a2.screenY-yd.screenY):xd=wd=0,yd=a2),wd)},"movementX"),movementY:__name(function(a2){return"movementY"in a2?a2.movementY:xd},"movementY")}),Bd=rd(Ad),Cd=A2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A2({},sd,{clipboardData:__name(function(a2){return"clipboardData"in a2?a2.clipboardData:window.clipboardData},"clipboardData")}),Jd=rd(Id),Kd=A2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a2){var b2=this.nativeEvent;return b2.getModifierState?b2.getModifierState(a2):(a2=Od[a2])?!!b2[a2]:!1}__name(Pd,"Pd");function zd(){return Pd}__name(zd,"zd");var Qd=A2({},ud,{key:__name(function(a2){if(a2.key){var b2=Md[a2.key]||a2.key;if(b2!=="Unidentified")return b2}return a2.type==="keypress"?(a2=od(a2),a2===13?"Enter":String.fromCharCode(a2)):a2.type==="keydown"||a2.type==="keyup"?Nd[a2.keyCode]||"Unidentified":""},"key"),code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:__name(function(a2){return a2.type==="keypress"?od(a2):0},"charCode"),keyCode:__name(function(a2){return a2.type==="keydown"||a2.type==="keyup"?a2.keyCode:0},"keyCode"),which:__name(function(a2){return a2.type==="keypress"?od(a2):a2.type==="keydown"||a2.type==="keyup"?a2.keyCode:0},"which")}),Rd=rd(Qd),Sd=A2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A2({},Ad,{deltaX:__name(function(a2){return"deltaX"in a2?a2.deltaX:"wheelDeltaX"in a2?-a2.wheelDeltaX:0},"deltaX"),deltaY:__name(function(a2){return"deltaY"in a2?a2.deltaY:"wheelDeltaY"in a2?-a2.wheelDeltaY:"wheelDelta"in a2?-a2.wheelDelta:0},"deltaY"),deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae2=ia&&"CompositionEvent"in window,be2=null;ia&&"documentMode"in document&&(be2=document.documentMode);var ce2=ia&&"TextEvent"in window&&!be2,de2=ia&&(!ae2||be2&&8<be2&&11>=be2),ee2=" ",fe2=!1;function ge2(a2,b2){switch(a2){case"keyup":return $d.indexOf(b2.keyCode)!==-1;case"keydown":return b2.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}__name(ge2,"ge");function he2(a2){return a2=a2.detail,typeof a2=="object"&&"data"in a2?a2.data:null}__name(he2,"he");var ie2=!1;function je2(a2,b2){switch(a2){case"compositionend":return he2(b2);case"keypress":return b2.which!==32?null:(fe2=!0,ee2);case"textInput":return a2=b2.data,a2===ee2&&fe2?null:a2;default:return null}}__name(je2,"je");function ke2(a2,b2){if(ie2)return a2==="compositionend"||!ae2&&ge2(a2,b2)?(a2=nd(),md=ld=kd=null,ie2=!1,a2):null;switch(a2){case"paste":return null;case"keypress":if(!(b2.ctrlKey||b2.altKey||b2.metaKey)||b2.ctrlKey&&b2.altKey){if(b2.char&&1<b2.char.length)return b2.char;if(b2.which)return String.fromCharCode(b2.which)}return null;case"compositionend":return de2&&b2.locale!=="ko"?null:b2.data;default:return null}}__name(ke2,"ke");var le2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me2(a2){var b2=a2&&a2.nodeName&&a2.nodeName.toLowerCase();return b2==="input"?!!le2[a2.type]:b2==="textarea"}__name(me2,"me");function ne2(a2,b2,c,d2){Eb(d2),b2=oe2(b2,"onChange"),0<b2.length&&(c=new td("onChange","change",null,c,d2),a2.push({event:c,listeners:b2}))}__name(ne2,"ne");var pe2=null,qe2=null;function re2(a2){se2(a2,0)}__name(re2,"re");function te2(a2){var b2=ue2(a2);if(Wa(b2))return a2}__name(te2,"te");function ve2(a2,b2){if(a2==="change")return b2}__name(ve2,"ve");var we2=!1;if(ia){var xe2;if(ia){var ye2="oninput"in document;if(!ye2){var ze2=document.createElement("div");ze2.setAttribute("oninput","return;"),ye2=typeof ze2.oninput=="function"}xe2=ye2}else xe2=!1;we2=xe2&&(!document.documentMode||9<document.documentMode)}function Ae2(){pe2&&(pe2.detachEvent("onpropertychange",Be2),qe2=pe2=null)}__name(Ae2,"Ae");function Be2(a2){if(a2.propertyName==="value"&&te2(qe2)){var b2=[];ne2(b2,qe2,a2,xb(a2)),Jb(re2,b2)}}__name(Be2,"Be");function Ce2(a2,b2,c){a2==="focusin"?(Ae2(),pe2=b2,qe2=c,pe2.attachEvent("onpropertychange",Be2)):a2==="focusout"&&Ae2()}__name(Ce2,"Ce");function De2(a2){if(a2==="selectionchange"||a2==="keyup"||a2==="keydown")return te2(qe2)}__name(De2,"De");function Ee2(a2,b2){if(a2==="click")return te2(b2)}__name(Ee2,"Ee");function Fe2(a2,b2){if(a2==="input"||a2==="change")return te2(b2)}__name(Fe2,"Fe");function Ge2(a2,b2){return a2===b2&&(a2!==0||1/a2===1/b2)||a2!==a2&&b2!==b2}__name(Ge2,"Ge");var He2=typeof Object.is=="function"?Object.is:Ge2;function Ie2(a2,b2){if(He2(a2,b2))return!0;if(typeof a2!="object"||a2===null||typeof b2!="object"||b2===null)return!1;var c=Object.keys(a2),d2=Object.keys(b2);if(c.length!==d2.length)return!1;for(d2=0;d2<c.length;d2++){var e2=c[d2];if(!ja.call(b2,e2)||!He2(a2[e2],b2[e2]))return!1}return!0}__name(Ie2,"Ie");function Je2(a2){for(;a2&&a2.firstChild;)a2=a2.firstChild;return a2}__name(Je2,"Je");function Ke2(a2,b2){var c=Je2(a2);a2=0;for(var d2;c;){if(c.nodeType===3){if(d2=a2+c.textContent.length,a2<=b2&&d2>=b2)return{node:c,offset:b2-a2};a2=d2}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je2(c)}}__name(Ke2,"Ke");function Le2(a2,b2){return a2&&b2?a2===b2?!0:a2&&a2.nodeType===3?!1:b2&&b2.nodeType===3?Le2(a2,b2.parentNode):"contains"in a2?a2.contains(b2):a2.compareDocumentPosition?!!(a2.compareDocumentPosition(b2)&16):!1:!1}__name(Le2,"Le");function Me2(){for(var a2=window,b2=Xa();b2 instanceof a2.HTMLIFrameElement;){try{var c=typeof b2.contentWindow.location.href=="string"}catch{c=!1}if(c)a2=b2.contentWindow;else break;b2=Xa(a2.document)}return b2}__name(Me2,"Me");function Ne2(a2){var b2=a2&&a2.nodeName&&a2.nodeName.toLowerCase();return b2&&(b2==="input"&&(a2.type==="text"||a2.type==="search"||a2.type==="tel"||a2.type==="url"||a2.type==="password")||b2==="textarea"||a2.contentEditable==="true")}__name(Ne2,"Ne");function Oe2(a2){var b2=Me2(),c=a2.focusedElem,d2=a2.selectionRange;if(b2!==c&&c&&c.ownerDocument&&Le2(c.ownerDocument.documentElement,c)){if(d2!==null&&Ne2(c)){if(b2=d2.start,a2=d2.end,a2===void 0&&(a2=b2),"selectionStart"in c)c.selectionStart=b2,c.selectionEnd=Math.min(a2,c.value.length);else if(a2=(b2=c.ownerDocument||document)&&b2.defaultView||window,a2.getSelection){a2=a2.getSelection();var e2=c.textContent.length,f2=Math.min(d2.start,e2);d2=d2.end===void 0?f2:Math.min(d2.end,e2),!a2.extend&&f2>d2&&(e2=d2,d2=f2,f2=e2),e2=Ke2(c,f2);var g2=Ke2(c,d2);e2&&g2&&(a2.rangeCount!==1||a2.anchorNode!==e2.node||a2.anchorOffset!==e2.offset||a2.focusNode!==g2.node||a2.focusOffset!==g2.offset)&&(b2=b2.createRange(),b2.setStart(e2.node,e2.offset),a2.removeAllRanges(),f2>d2?(a2.addRange(b2),a2.extend(g2.node,g2.offset)):(b2.setEnd(g2.node,g2.offset),a2.addRange(b2)))}}for(b2=[],a2=c;a2=a2.parentNode;)a2.nodeType===1&&b2.push({element:a2,left:a2.scrollLeft,top:a2.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<b2.length;c++)a2=b2[c],a2.element.scrollLeft=a2.left,a2.element.scrollTop=a2.top}}__name(Oe2,"Oe");var Pe2=ia&&"documentMode"in document&&11>=document.documentMode,Qe2=null,Re2=null,Se2=null,Te2=!1;function Ue2(a2,b2,c){var d2=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Te2||Qe2==null||Qe2!==Xa(d2)||(d2=Qe2,"selectionStart"in d2&&Ne2(d2)?d2={start:d2.selectionStart,end:d2.selectionEnd}:(d2=(d2.ownerDocument&&d2.ownerDocument.defaultView||window).getSelection(),d2={anchorNode:d2.anchorNode,anchorOffset:d2.anchorOffset,focusNode:d2.focusNode,focusOffset:d2.focusOffset}),Se2&&Ie2(Se2,d2)||(Se2=d2,d2=oe2(Re2,"onSelect"),0<d2.length&&(b2=new td("onSelect","select",null,b2,c),a2.push({event:b2,listeners:d2}),b2.target=Qe2)))}__name(Ue2,"Ue");function Ve2(a2,b2){var c={};return c[a2.toLowerCase()]=b2.toLowerCase(),c["Webkit"+a2]="webkit"+b2,c["Moz"+a2]="moz"+b2,c}__name(Ve2,"Ve");var We2={animationend:Ve2("Animation","AnimationEnd"),animationiteration:Ve2("Animation","AnimationIteration"),animationstart:Ve2("Animation","AnimationStart"),transitionend:Ve2("Transition","TransitionEnd")},Xe2={},Ye2={};ia&&(Ye2=document.createElement("div").style,"AnimationEvent"in window||(delete We2.animationend.animation,delete We2.animationiteration.animation,delete We2.animationstart.animation),"TransitionEvent"in window||delete We2.transitionend.transition);function Ze2(a2){if(Xe2[a2])return Xe2[a2];if(!We2[a2])return a2;var b2=We2[a2],c;for(c in b2)if(b2.hasOwnProperty(c)&&c in Ye2)return Xe2[a2]=b2[c];return a2}__name(Ze2,"Ze");var $e2=Ze2("animationend"),af=Ze2("animationiteration"),bf=Ze2("animationstart"),cf=Ze2("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a2,b2){df.set(a2,b2),fa(b2,[a2])}__name(ff,"ff");for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e2,"onAnimationEnd"),ff(af,"onAnimationIteration"),ff(bf,"onAnimationStart"),ff("dblclick","onDoubleClick"),ff("focusin","onFocus"),ff("focusout","onBlur"),ff(cf,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a2,b2,c){var d2=a2.type||"unknown-event";a2.currentTarget=c,Ub(d2,b2,void 0,a2),a2.currentTarget=null}__name(nf,"nf");function se2(a2,b2){b2=(b2&4)!==0;for(var c=0;c<a2.length;c++){var d2=a2[c],e2=d2.event;d2=d2.listeners;a:{var f2=void 0;if(b2)for(var g2=d2.length-1;0<=g2;g2--){var h2=d2[g2],k2=h2.instance,l2=h2.currentTarget;if(h2=h2.listener,k2!==f2&&e2.isPropagationStopped())break a;nf(e2,h2,l2),f2=k2}else for(g2=0;g2<d2.length;g2++){if(h2=d2[g2],k2=h2.instance,l2=h2.currentTarget,h2=h2.listener,k2!==f2&&e2.isPropagationStopped())break a;nf(e2,h2,l2),f2=k2}}}if(Qb)throw a2=Rb,Qb=!1,Rb=null,a2}__name(se2,"se");function D2(a2,b2){var c=b2[of];c===void 0&&(c=b2[of]=new Set);var d2=a2+"__bubble";c.has(d2)||(pf(b2,a2,2,!1),c.add(d2))}__name(D2,"D");function qf(a2,b2,c){var d2=0;b2&&(d2|=4),pf(c,a2,d2,b2)}__name(qf,"qf");var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a2){if(!a2[rf]){a2[rf]=!0,da.forEach(function(b3){b3!=="selectionchange"&&(mf.has(b3)||qf(b3,!1,a2),qf(b3,!0,a2))});var b2=a2.nodeType===9?a2:a2.ownerDocument;b2===null||b2[rf]||(b2[rf]=!0,qf("selectionchange",!1,b2))}}__name(sf,"sf");function pf(a2,b2,c,d2){switch(jd(b2)){case 1:var e2=ed;break;case 4:e2=gd;break;default:e2=fd}c=e2.bind(null,b2,c,a2),e2=void 0,!Lb||b2!=="touchstart"&&b2!=="touchmove"&&b2!=="wheel"||(e2=!0),d2?e2!==void 0?a2.addEventListener(b2,c,{capture:!0,passive:e2}):a2.addEventListener(b2,c,!0):e2!==void 0?a2.addEventListener(b2,c,{passive:e2}):a2.addEventListener(b2,c,!1)}__name(pf,"pf");function hd(a2,b2,c,d2,e2){var f2=d2;if((b2&1)===0&&(b2&2)===0&&d2!==null)a:for(;;){if(d2===null)return;var g2=d2.tag;if(g2===3||g2===4){var h2=d2.stateNode.containerInfo;if(h2===e2||h2.nodeType===8&&h2.parentNode===e2)break;if(g2===4)for(g2=d2.return;g2!==null;){var k2=g2.tag;if((k2===3||k2===4)&&(k2=g2.stateNode.containerInfo,k2===e2||k2.nodeType===8&&k2.parentNode===e2))return;g2=g2.return}for(;h2!==null;){if(g2=Wc(h2),g2===null)return;if(k2=g2.tag,k2===5||k2===6){d2=f2=g2;continue a}h2=h2.parentNode}}d2=d2.return}Jb(function(){var d3=f2,e3=xb(c),g3=[];a:{var h3=df.get(a2);if(h3!==void 0){var k3=td,n3=a2;switch(a2){case"keypress":if(od(c)===0)break a;case"keydown":case"keyup":k3=Rd;break;case"focusin":n3="focus",k3=Fd;break;case"focusout":n3="blur",k3=Fd;break;case"beforeblur":case"afterblur":k3=Fd;break;case"click":if(c.button===2)break a;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k3=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k3=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k3=Vd;break;case $e2:case af:case bf:k3=Hd;break;case cf:k3=Xd;break;case"scroll":k3=vd;break;case"wheel":k3=Zd;break;case"copy":case"cut":case"paste":k3=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k3=Td}var t2=(b2&4)!==0,J2=!t2&&a2==="scroll",x2=t2?h3!==null?h3+"Capture":null:h3;t2=[];for(var w2=d3,u2;w2!==null;){u2=w2;var F2=u2.stateNode;if(u2.tag===5&&F2!==null&&(u2=F2,x2!==null&&(F2=Kb(w2,x2),F2!=null&&t2.push(tf(w2,F2,u2)))),J2)break;w2=w2.return}0<t2.length&&(h3=new k3(h3,n3,null,c,e3),g3.push({event:h3,listeners:t2}))}}if((b2&7)===0){a:{if(h3=a2==="mouseover"||a2==="pointerover",k3=a2==="mouseout"||a2==="pointerout",h3&&c!==wb&&(n3=c.relatedTarget||c.fromElement)&&(Wc(n3)||n3[uf]))break a;if((k3||h3)&&(h3=e3.window===e3?e3:(h3=e3.ownerDocument)?h3.defaultView||h3.parentWindow:window,k3?(n3=c.relatedTarget||c.toElement,k3=d3,n3=n3?Wc(n3):null,n3!==null&&(J2=Vb(n3),n3!==J2||n3.tag!==5&&n3.tag!==6)&&(n3=null)):(k3=null,n3=d3),k3!==n3)){if(t2=Bd,F2="onMouseLeave",x2="onMouseEnter",w2="mouse",(a2==="pointerout"||a2==="pointerover")&&(t2=Td,F2="onPointerLeave",x2="onPointerEnter",w2="pointer"),J2=k3==null?h3:ue2(k3),u2=n3==null?h3:ue2(n3),h3=new t2(F2,w2+"leave",k3,c,e3),h3.target=J2,h3.relatedTarget=u2,F2=null,Wc(e3)===d3&&(t2=new t2(x2,w2+"enter",n3,c,e3),t2.target=u2,t2.relatedTarget=J2,F2=t2),J2=F2,k3&&n3)b:{for(t2=k3,x2=n3,w2=0,u2=t2;u2;u2=vf(u2))w2++;for(u2=0,F2=x2;F2;F2=vf(F2))u2++;for(;0<w2-u2;)t2=vf(t2),w2--;for(;0<u2-w2;)x2=vf(x2),u2--;for(;w2--;){if(t2===x2||x2!==null&&t2===x2.alternate)break b;t2=vf(t2),x2=vf(x2)}t2=null}else t2=null;k3!==null&&wf(g3,h3,k3,t2,!1),n3!==null&&J2!==null&&wf(g3,J2,n3,t2,!0)}}a:{if(h3=d3?ue2(d3):window,k3=h3.nodeName&&h3.nodeName.toLowerCase(),k3==="select"||k3==="input"&&h3.type==="file")var na=ve2;else if(me2(h3))if(we2)na=Fe2;else{na=De2;var xa=Ce2}else(k3=h3.nodeName)&&k3.toLowerCase()==="input"&&(h3.type==="checkbox"||h3.type==="radio")&&(na=Ee2);if(na&&(na=na(a2,d3))){ne2(g3,na,c,e3);break a}xa&&xa(a2,h3,d3),a2==="focusout"&&(xa=h3._wrapperState)&&xa.controlled&&h3.type==="number"&&cb(h3,"number",h3.value)}switch(xa=d3?ue2(d3):window,a2){case"focusin":(me2(xa)||xa.contentEditable==="true")&&(Qe2=xa,Re2=d3,Se2=null);break;case"focusout":Se2=Re2=Qe2=null;break;case"mousedown":Te2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te2=!1,Ue2(g3,c,e3);break;case"selectionchange":if(Pe2)break;case"keydown":case"keyup":Ue2(g3,c,e3)}var $a;if(ae2)b:{switch(a2){case"compositionstart":var ba="onCompositionStart";break b;case"compositionend":ba="onCompositionEnd";break b;case"compositionupdate":ba="onCompositionUpdate";break b}ba=void 0}else ie2?ge2(a2,c)&&(ba="onCompositionEnd"):a2==="keydown"&&c.keyCode===229&&(ba="onCompositionStart");ba&&(de2&&c.locale!=="ko"&&(ie2||ba!=="onCompositionStart"?ba==="onCompositionEnd"&&ie2&&($a=nd()):(kd=e3,ld="value"in kd?kd.value:kd.textContent,ie2=!0)),xa=oe2(d3,ba),0<xa.length&&(ba=new Ld(ba,a2,null,c,e3),g3.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he2(c),$a!==null&&(ba.data=$a)))),($a=ce2?je2(a2,c):ke2(a2,c))&&(d3=oe2(d3,"onBeforeInput"),0<d3.length&&(e3=new Ld("onBeforeInput","beforeinput",null,c,e3),g3.push({event:e3,listeners:d3}),e3.data=$a))}se2(g3,b2)})}__name(hd,"hd");function tf(a2,b2,c){return{instance:a2,listener:b2,currentTarget:c}}__name(tf,"tf");function oe2(a2,b2){for(var c=b2+"Capture",d2=[];a2!==null;){var e2=a2,f2=e2.stateNode;e2.tag===5&&f2!==null&&(e2=f2,f2=Kb(a2,c),f2!=null&&d2.unshift(tf(a2,f2,e2)),f2=Kb(a2,b2),f2!=null&&d2.push(tf(a2,f2,e2))),a2=a2.return}return d2}__name(oe2,"oe");function vf(a2){if(a2===null)return null;do a2=a2.return;while(a2&&a2.tag!==5);return a2||null}__name(vf,"vf");function wf(a2,b2,c,d2,e2){for(var f2=b2._reactName,g2=[];c!==null&&c!==d2;){var h2=c,k2=h2.alternate,l2=h2.stateNode;if(k2!==null&&k2===d2)break;h2.tag===5&&l2!==null&&(h2=l2,e2?(k2=Kb(c,f2),k2!=null&&g2.unshift(tf(c,k2,h2))):e2||(k2=Kb(c,f2),k2!=null&&g2.push(tf(c,k2,h2)))),c=c.return}g2.length!==0&&a2.push({event:b2,listeners:g2})}__name(wf,"wf");var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a2){return(typeof a2=="string"?a2:""+a2).replace(xf,`
`).replace(yf,"")}__name(zf,"zf");function Af(a2,b2,c){if(b2=zf(b2),zf(a2)!==b2&&c)throw Error(p2(425))}__name(Af,"Af");function Bf(){}__name(Bf,"Bf");var Cf=null,Df=null;function Ef(a2,b2){return a2==="textarea"||a2==="noscript"||typeof b2.children=="string"||typeof b2.children=="number"||typeof b2.dangerouslySetInnerHTML=="object"&&b2.dangerouslySetInnerHTML!==null&&b2.dangerouslySetInnerHTML.__html!=null}__name(Ef,"Ef");var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a2){return Hf.resolve(null).then(a2).catch(If)}:Ff;function If(a2){setTimeout(function(){throw a2})}__name(If,"If");function Kf(a2,b2){var c=b2,d2=0;do{var e2=c.nextSibling;if(a2.removeChild(c),e2&&e2.nodeType===8)if(c=e2.data,c==="/$"){if(d2===0){a2.removeChild(e2),bd(b2);return}d2--}else c!=="$"&&c!=="$?"&&c!=="$!"||d2++;c=e2}while(c);bd(b2)}__name(Kf,"Kf");function Lf(a2){for(;a2!=null;a2=a2.nextSibling){var b2=a2.nodeType;if(b2===1||b2===3)break;if(b2===8){if(b2=a2.data,b2==="$"||b2==="$!"||b2==="$?")break;if(b2==="/$")return null}}return a2}__name(Lf,"Lf");function Mf(a2){a2=a2.previousSibling;for(var b2=0;a2;){if(a2.nodeType===8){var c=a2.data;if(c==="$"||c==="$!"||c==="$?"){if(b2===0)return a2;b2--}else c==="/$"&&b2++}a2=a2.previousSibling}return null}__name(Mf,"Mf");var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a2){var b2=a2[Of];if(b2)return b2;for(var c=a2.parentNode;c;){if(b2=c[uf]||c[Of]){if(c=b2.alternate,b2.child!==null||c!==null&&c.child!==null)for(a2=Mf(a2);a2!==null;){if(c=a2[Of])return c;a2=Mf(a2)}return b2}a2=c,c=a2.parentNode}return null}__name(Wc,"Wc");function Cb(a2){return a2=a2[Of]||a2[uf],!a2||a2.tag!==5&&a2.tag!==6&&a2.tag!==13&&a2.tag!==3?null:a2}__name(Cb,"Cb");function ue2(a2){if(a2.tag===5||a2.tag===6)return a2.stateNode;throw Error(p2(33))}__name(ue2,"ue");function Db(a2){return a2[Pf]||null}__name(Db,"Db");var Sf=[],Tf=-1;function Uf(a2){return{current:a2}}__name(Uf,"Uf");function E2(a2){0>Tf||(a2.current=Sf[Tf],Sf[Tf]=null,Tf--)}__name(E2,"E");function G2(a2,b2){Tf++,Sf[Tf]=a2.current,a2.current=b2}__name(G2,"G");var Vf={},H2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a2,b2){var c=a2.type.contextTypes;if(!c)return Vf;var d2=a2.stateNode;if(d2&&d2.__reactInternalMemoizedUnmaskedChildContext===b2)return d2.__reactInternalMemoizedMaskedChildContext;var e2={},f2;for(f2 in c)e2[f2]=b2[f2];return d2&&(a2=a2.stateNode,a2.__reactInternalMemoizedUnmaskedChildContext=b2,a2.__reactInternalMemoizedMaskedChildContext=e2),e2}__name(Yf,"Yf");function Zf(a2){return a2=a2.childContextTypes,a2!=null}__name(Zf,"Zf");function $f(){E2(Wf),E2(H2)}__name($f,"$f");function ag(a2,b2,c){if(H2.current!==Vf)throw Error(p2(168));G2(H2,b2),G2(Wf,c)}__name(ag,"ag");function bg(a2,b2,c){var d2=a2.stateNode;if(b2=b2.childContextTypes,typeof d2.getChildContext!="function")return c;d2=d2.getChildContext();for(var e2 in d2)if(!(e2 in b2))throw Error(p2(108,Ra(a2)||"Unknown",e2));return A2({},c,d2)}__name(bg,"bg");function cg(a2){return a2=(a2=a2.stateNode)&&a2.__reactInternalMemoizedMergedChildContext||Vf,Xf=H2.current,G2(H2,a2),G2(Wf,Wf.current),!0}__name(cg,"cg");function dg(a2,b2,c){var d2=a2.stateNode;if(!d2)throw Error(p2(169));c?(a2=bg(a2,b2,Xf),d2.__reactInternalMemoizedMergedChildContext=a2,E2(Wf),E2(H2),G2(H2,a2)):E2(Wf),G2(Wf,c)}__name(dg,"dg");var eg=null,fg=!1,gg=!1;function hg(a2){eg===null?eg=[a2]:eg.push(a2)}__name(hg,"hg");function ig(a2){fg=!0,hg(a2)}__name(ig,"ig");function jg(){if(!gg&&eg!==null){gg=!0;var a2=0,b2=C3;try{var c=eg;for(C3=1;a2<c.length;a2++){var d2=c[a2];do d2=d2(!0);while(d2!==null)}eg=null,fg=!1}catch(e2){throw eg!==null&&(eg=eg.slice(a2+1)),ac(fc,jg),e2}finally{C3=b2,gg=!1}}return null}__name(jg,"jg");var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a2,b2){kg[lg++]=ng,kg[lg++]=mg,mg=a2,ng=b2}__name(tg,"tg");function ug(a2,b2,c){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a2;var d2=rg;a2=sg;var e2=32-oc(d2)-1;d2&=~(1<<e2),c+=1;var f2=32-oc(b2)+e2;if(30<f2){var g2=e2-e2%5;f2=(d2&(1<<g2)-1).toString(32),d2>>=g2,e2-=g2,rg=1<<32-oc(b2)+e2|c<<e2|d2,sg=f2+a2}else rg=1<<f2|c<<e2|d2,sg=a2}__name(ug,"ug");function vg(a2){a2.return!==null&&(tg(a2,1),ug(a2,1,0))}__name(vg,"vg");function wg(a2){for(;a2===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a2===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}__name(wg,"wg");var xg=null,yg=null,I2=!1,zg=null;function Ag(a2,b2){var c=Bg(5,null,null,0);c.elementType="DELETED",c.stateNode=b2,c.return=a2,b2=a2.deletions,b2===null?(a2.deletions=[c],a2.flags|=16):b2.push(c)}__name(Ag,"Ag");function Cg(a2,b2){switch(a2.tag){case 5:var c=a2.type;return b2=b2.nodeType!==1||c.toLowerCase()!==b2.nodeName.toLowerCase()?null:b2,b2!==null?(a2.stateNode=b2,xg=a2,yg=Lf(b2.firstChild),!0):!1;case 6:return b2=a2.pendingProps===""||b2.nodeType!==3?null:b2,b2!==null?(a2.stateNode=b2,xg=a2,yg=null,!0):!1;case 13:return b2=b2.nodeType!==8?null:b2,b2!==null?(c=qg!==null?{id:rg,overflow:sg}:null,a2.memoizedState={dehydrated:b2,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b2,c.return=a2,a2.child=c,xg=a2,yg=null,!0):!1;default:return!1}}__name(Cg,"Cg");function Dg(a2){return(a2.mode&1)!==0&&(a2.flags&128)===0}__name(Dg,"Dg");function Eg(a2){if(I2){var b2=yg;if(b2){var c=b2;if(!Cg(a2,b2)){if(Dg(a2))throw Error(p2(418));b2=Lf(c.nextSibling);var d2=xg;b2&&Cg(a2,b2)?Ag(d2,c):(a2.flags=a2.flags&-4097|2,I2=!1,xg=a2)}}else{if(Dg(a2))throw Error(p2(418));a2.flags=a2.flags&-4097|2,I2=!1,xg=a2}}}__name(Eg,"Eg");function Fg(a2){for(a2=a2.return;a2!==null&&a2.tag!==5&&a2.tag!==3&&a2.tag!==13;)a2=a2.return;xg=a2}__name(Fg,"Fg");function Gg(a2){if(a2!==xg)return!1;if(!I2)return Fg(a2),I2=!0,!1;var b2;if((b2=a2.tag!==3)&&!(b2=a2.tag!==5)&&(b2=a2.type,b2=b2!=="head"&&b2!=="body"&&!Ef(a2.type,a2.memoizedProps)),b2&&(b2=yg)){if(Dg(a2))throw Hg(),Error(p2(418));for(;b2;)Ag(a2,b2),b2=Lf(b2.nextSibling)}if(Fg(a2),a2.tag===13){if(a2=a2.memoizedState,a2=a2!==null?a2.dehydrated:null,!a2)throw Error(p2(317));a:{for(a2=a2.nextSibling,b2=0;a2;){if(a2.nodeType===8){var c=a2.data;if(c==="/$"){if(b2===0){yg=Lf(a2.nextSibling);break a}b2--}else c!=="$"&&c!=="$!"&&c!=="$?"||b2++}a2=a2.nextSibling}yg=null}}else yg=xg?Lf(a2.stateNode.nextSibling):null;return!0}__name(Gg,"Gg");function Hg(){for(var a2=yg;a2;)a2=Lf(a2.nextSibling)}__name(Hg,"Hg");function Ig(){yg=xg=null,I2=!1}__name(Ig,"Ig");function Jg(a2){zg===null?zg=[a2]:zg.push(a2)}__name(Jg,"Jg");var Kg=ua.ReactCurrentBatchConfig;function Lg(a2,b2,c){if(a2=c.ref,a2!==null&&typeof a2!="function"&&typeof a2!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(p2(309));var d2=c.stateNode}if(!d2)throw Error(p2(147,a2));var e2=d2,f2=""+a2;return b2!==null&&b2.ref!==null&&typeof b2.ref=="function"&&b2.ref._stringRef===f2?b2.ref:(b2=__name(function(a3){var b3=e2.refs;a3===null?delete b3[f2]:b3[f2]=a3},"b"),b2._stringRef=f2,b2)}if(typeof a2!="string")throw Error(p2(284));if(!c._owner)throw Error(p2(290,a2))}return a2}__name(Lg,"Lg");function Mg(a2,b2){throw a2=Object.prototype.toString.call(b2),Error(p2(31,a2==="[object Object]"?"object with keys {"+Object.keys(b2).join(", ")+"}":a2))}__name(Mg,"Mg");function Ng(a2){var b2=a2._init;return b2(a2._payload)}__name(Ng,"Ng");function Og(a2){function b2(b3,c2){if(a2){var d3=b3.deletions;d3===null?(b3.deletions=[c2],b3.flags|=16):d3.push(c2)}}__name(b2,"b");function c(c2,d3){if(!a2)return null;for(;d3!==null;)b2(c2,d3),d3=d3.sibling;return null}__name(c,"c");function d2(a3,b3){for(a3=new Map;b3!==null;)b3.key!==null?a3.set(b3.key,b3):a3.set(b3.index,b3),b3=b3.sibling;return a3}__name(d2,"d");function e2(a3,b3){return a3=Pg(a3,b3),a3.index=0,a3.sibling=null,a3}__name(e2,"e");function f2(b3,c2,d3){return b3.index=d3,a2?(d3=b3.alternate,d3!==null?(d3=d3.index,d3<c2?(b3.flags|=2,c2):d3):(b3.flags|=2,c2)):(b3.flags|=1048576,c2)}__name(f2,"f");function g2(b3){return a2&&b3.alternate===null&&(b3.flags|=2),b3}__name(g2,"g");function h2(a3,b3,c2,d3){return b3===null||b3.tag!==6?(b3=Qg(c2,a3.mode,d3),b3.return=a3,b3):(b3=e2(b3,c2),b3.return=a3,b3)}__name(h2,"h");function k2(a3,b3,c2,d3){var f3=c2.type;return f3===ya?m2(a3,b3,c2.props.children,d3,c2.key):b3!==null&&(b3.elementType===f3||typeof f3=="object"&&f3!==null&&f3.$$typeof===Ha&&Ng(f3)===b3.type)?(d3=e2(b3,c2.props),d3.ref=Lg(a3,b3,c2),d3.return=a3,d3):(d3=Rg(c2.type,c2.key,c2.props,null,a3.mode,d3),d3.ref=Lg(a3,b3,c2),d3.return=a3,d3)}__name(k2,"k");function l2(a3,b3,c2,d3){return b3===null||b3.tag!==4||b3.stateNode.containerInfo!==c2.containerInfo||b3.stateNode.implementation!==c2.implementation?(b3=Sg(c2,a3.mode,d3),b3.return=a3,b3):(b3=e2(b3,c2.children||[]),b3.return=a3,b3)}__name(l2,"l");function m2(a3,b3,c2,d3,f3){return b3===null||b3.tag!==7?(b3=Tg(c2,a3.mode,d3,f3),b3.return=a3,b3):(b3=e2(b3,c2),b3.return=a3,b3)}__name(m2,"m");function q2(a3,b3,c2){if(typeof b3=="string"&&b3!==""||typeof b3=="number")return b3=Qg(""+b3,a3.mode,c2),b3.return=a3,b3;if(typeof b3=="object"&&b3!==null){switch(b3.$$typeof){case va:return c2=Rg(b3.type,b3.key,b3.props,null,a3.mode,c2),c2.ref=Lg(a3,null,b3),c2.return=a3,c2;case wa:return b3=Sg(b3,a3.mode,c2),b3.return=a3,b3;case Ha:var d3=b3._init;return q2(a3,d3(b3._payload),c2)}if(eb(b3)||Ka(b3))return b3=Tg(b3,a3.mode,c2,null),b3.return=a3,b3;Mg(a3,b3)}return null}__name(q2,"q");function r2(a3,b3,c2,d3){var e3=b3!==null?b3.key:null;if(typeof c2=="string"&&c2!==""||typeof c2=="number")return e3!==null?null:h2(a3,b3,""+c2,d3);if(typeof c2=="object"&&c2!==null){switch(c2.$$typeof){case va:return c2.key===e3?k2(a3,b3,c2,d3):null;case wa:return c2.key===e3?l2(a3,b3,c2,d3):null;case Ha:return e3=c2._init,r2(a3,b3,e3(c2._payload),d3)}if(eb(c2)||Ka(c2))return e3!==null?null:m2(a3,b3,c2,d3,null);Mg(a3,c2)}return null}__name(r2,"r");function y2(a3,b3,c2,d3,e3){if(typeof d3=="string"&&d3!==""||typeof d3=="number")return a3=a3.get(c2)||null,h2(b3,a3,""+d3,e3);if(typeof d3=="object"&&d3!==null){switch(d3.$$typeof){case va:return a3=a3.get(d3.key===null?c2:d3.key)||null,k2(b3,a3,d3,e3);case wa:return a3=a3.get(d3.key===null?c2:d3.key)||null,l2(b3,a3,d3,e3);case Ha:var f3=d3._init;return y2(a3,b3,c2,f3(d3._payload),e3)}if(eb(d3)||Ka(d3))return a3=a3.get(c2)||null,m2(b3,a3,d3,e3,null);Mg(b3,d3)}return null}__name(y2,"y");function n3(e3,g3,h3,k3){for(var l3=null,m3=null,u2=g3,w2=g3=0,x2=null;u2!==null&&w2<h3.length;w2++){u2.index>w2?(x2=u2,u2=null):x2=u2.sibling;var n4=r2(e3,u2,h3[w2],k3);if(n4===null){u2===null&&(u2=x2);break}a2&&u2&&n4.alternate===null&&b2(e3,u2),g3=f2(n4,g3,w2),m3===null?l3=n4:m3.sibling=n4,m3=n4,u2=x2}if(w2===h3.length)return c(e3,u2),I2&&tg(e3,w2),l3;if(u2===null){for(;w2<h3.length;w2++)u2=q2(e3,h3[w2],k3),u2!==null&&(g3=f2(u2,g3,w2),m3===null?l3=u2:m3.sibling=u2,m3=u2);return I2&&tg(e3,w2),l3}for(u2=d2(e3,u2);w2<h3.length;w2++)x2=y2(u2,e3,w2,h3[w2],k3),x2!==null&&(a2&&x2.alternate!==null&&u2.delete(x2.key===null?w2:x2.key),g3=f2(x2,g3,w2),m3===null?l3=x2:m3.sibling=x2,m3=x2);return a2&&u2.forEach(function(a3){return b2(e3,a3)}),I2&&tg(e3,w2),l3}__name(n3,"n");function t2(e3,g3,h3,k3){var l3=Ka(h3);if(typeof l3!="function")throw Error(p2(150));if(h3=l3.call(h3),h3==null)throw Error(p2(151));for(var u2=l3=null,m3=g3,w2=g3=0,x2=null,n4=h3.next();m3!==null&&!n4.done;w2++,n4=h3.next()){m3.index>w2?(x2=m3,m3=null):x2=m3.sibling;var t3=r2(e3,m3,n4.value,k3);if(t3===null){m3===null&&(m3=x2);break}a2&&m3&&t3.alternate===null&&b2(e3,m3),g3=f2(t3,g3,w2),u2===null?l3=t3:u2.sibling=t3,u2=t3,m3=x2}if(n4.done)return c(e3,m3),I2&&tg(e3,w2),l3;if(m3===null){for(;!n4.done;w2++,n4=h3.next())n4=q2(e3,n4.value,k3),n4!==null&&(g3=f2(n4,g3,w2),u2===null?l3=n4:u2.sibling=n4,u2=n4);return I2&&tg(e3,w2),l3}for(m3=d2(e3,m3);!n4.done;w2++,n4=h3.next())n4=y2(m3,e3,w2,n4.value,k3),n4!==null&&(a2&&n4.alternate!==null&&m3.delete(n4.key===null?w2:n4.key),g3=f2(n4,g3,w2),u2===null?l3=n4:u2.sibling=n4,u2=n4);return a2&&m3.forEach(function(a3){return b2(e3,a3)}),I2&&tg(e3,w2),l3}__name(t2,"t");function J2(a3,d3,f3,h3){if(typeof f3=="object"&&f3!==null&&f3.type===ya&&f3.key===null&&(f3=f3.props.children),typeof f3=="object"&&f3!==null){switch(f3.$$typeof){case va:a:{for(var k3=f3.key,l3=d3;l3!==null;){if(l3.key===k3){if(k3=f3.type,k3===ya){if(l3.tag===7){c(a3,l3.sibling),d3=e2(l3,f3.props.children),d3.return=a3,a3=d3;break a}}else if(l3.elementType===k3||typeof k3=="object"&&k3!==null&&k3.$$typeof===Ha&&Ng(k3)===l3.type){c(a3,l3.sibling),d3=e2(l3,f3.props),d3.ref=Lg(a3,l3,f3),d3.return=a3,a3=d3;break a}c(a3,l3);break}else b2(a3,l3);l3=l3.sibling}f3.type===ya?(d3=Tg(f3.props.children,a3.mode,h3,f3.key),d3.return=a3,a3=d3):(h3=Rg(f3.type,f3.key,f3.props,null,a3.mode,h3),h3.ref=Lg(a3,d3,f3),h3.return=a3,a3=h3)}return g2(a3);case wa:a:{for(l3=f3.key;d3!==null;){if(d3.key===l3)if(d3.tag===4&&d3.stateNode.containerInfo===f3.containerInfo&&d3.stateNode.implementation===f3.implementation){c(a3,d3.sibling),d3=e2(d3,f3.children||[]),d3.return=a3,a3=d3;break a}else{c(a3,d3);break}else b2(a3,d3);d3=d3.sibling}d3=Sg(f3,a3.mode,h3),d3.return=a3,a3=d3}return g2(a3);case Ha:return l3=f3._init,J2(a3,d3,l3(f3._payload),h3)}if(eb(f3))return n3(a3,d3,f3,h3);if(Ka(f3))return t2(a3,d3,f3,h3);Mg(a3,f3)}return typeof f3=="string"&&f3!==""||typeof f3=="number"?(f3=""+f3,d3!==null&&d3.tag===6?(c(a3,d3.sibling),d3=e2(d3,f3),d3.return=a3,a3=d3):(c(a3,d3),d3=Qg(f3,a3.mode,h3),d3.return=a3,a3=d3),g2(a3)):c(a3,d3)}return __name(J2,"J"),J2}__name(Og,"Og");var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}__name($g,"$g");function ah(a2){var b2=Wg.current;E2(Wg),a2._currentValue=b2}__name(ah,"ah");function bh(a2,b2,c){for(;a2!==null;){var d2=a2.alternate;if((a2.childLanes&b2)!==b2?(a2.childLanes|=b2,d2!==null&&(d2.childLanes|=b2)):d2!==null&&(d2.childLanes&b2)!==b2&&(d2.childLanes|=b2),a2===c)break;a2=a2.return}}__name(bh,"bh");function ch(a2,b2){Xg=a2,Zg=Yg=null,a2=a2.dependencies,a2!==null&&a2.firstContext!==null&&((a2.lanes&b2)!==0&&(dh=!0),a2.firstContext=null)}__name(ch,"ch");function eh(a2){var b2=a2._currentValue;if(Zg!==a2)if(a2={context:a2,memoizedValue:b2,next:null},Yg===null){if(Xg===null)throw Error(p2(308));Yg=a2,Xg.dependencies={lanes:0,firstContext:a2}}else Yg=Yg.next=a2;return b2}__name(eh,"eh");var fh=null;function gh(a2){fh===null?fh=[a2]:fh.push(a2)}__name(gh,"gh");function hh(a2,b2,c,d2){var e2=b2.interleaved;return e2===null?(c.next=c,gh(b2)):(c.next=e2.next,e2.next=c),b2.interleaved=c,ih(a2,d2)}__name(hh,"hh");function ih(a2,b2){a2.lanes|=b2;var c=a2.alternate;for(c!==null&&(c.lanes|=b2),c=a2,a2=a2.return;a2!==null;)a2.childLanes|=b2,c=a2.alternate,c!==null&&(c.childLanes|=b2),c=a2,a2=a2.return;return c.tag===3?c.stateNode:null}__name(ih,"ih");var jh=!1;function kh(a2){a2.updateQueue={baseState:a2.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}__name(kh,"kh");function lh(a2,b2){a2=a2.updateQueue,b2.updateQueue===a2&&(b2.updateQueue={baseState:a2.baseState,firstBaseUpdate:a2.firstBaseUpdate,lastBaseUpdate:a2.lastBaseUpdate,shared:a2.shared,effects:a2.effects})}__name(lh,"lh");function mh(a2,b2){return{eventTime:a2,lane:b2,tag:0,payload:null,callback:null,next:null}}__name(mh,"mh");function nh(a2,b2,c){var d2=a2.updateQueue;if(d2===null)return null;if(d2=d2.shared,(K2&2)!==0){var e2=d2.pending;return e2===null?b2.next=b2:(b2.next=e2.next,e2.next=b2),d2.pending=b2,ih(a2,c)}return e2=d2.interleaved,e2===null?(b2.next=b2,gh(d2)):(b2.next=e2.next,e2.next=b2),d2.interleaved=b2,ih(a2,c)}__name(nh,"nh");function oh(a2,b2,c){if(b2=b2.updateQueue,b2!==null&&(b2=b2.shared,(c&4194240)!==0)){var d2=b2.lanes;d2&=a2.pendingLanes,c|=d2,b2.lanes=c,Cc(a2,c)}}__name(oh,"oh");function ph(a2,b2){var c=a2.updateQueue,d2=a2.alternate;if(d2!==null&&(d2=d2.updateQueue,c===d2)){var e2=null,f2=null;if(c=c.firstBaseUpdate,c!==null){do{var g2={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};f2===null?e2=f2=g2:f2=f2.next=g2,c=c.next}while(c!==null);f2===null?e2=f2=b2:f2=f2.next=b2}else e2=f2=b2;c={baseState:d2.baseState,firstBaseUpdate:e2,lastBaseUpdate:f2,shared:d2.shared,effects:d2.effects},a2.updateQueue=c;return}a2=c.lastBaseUpdate,a2===null?c.firstBaseUpdate=b2:a2.next=b2,c.lastBaseUpdate=b2}__name(ph,"ph");function qh(a2,b2,c,d2){var e2=a2.updateQueue;jh=!1;var f2=e2.firstBaseUpdate,g2=e2.lastBaseUpdate,h2=e2.shared.pending;if(h2!==null){e2.shared.pending=null;var k2=h2,l2=k2.next;k2.next=null,g2===null?f2=l2:g2.next=l2,g2=k2;var m2=a2.alternate;m2!==null&&(m2=m2.updateQueue,h2=m2.lastBaseUpdate,h2!==g2&&(h2===null?m2.firstBaseUpdate=l2:h2.next=l2,m2.lastBaseUpdate=k2))}if(f2!==null){var q2=e2.baseState;g2=0,m2=l2=k2=null,h2=f2;do{var r2=h2.lane,y2=h2.eventTime;if((d2&r2)===r2){m2!==null&&(m2=m2.next={eventTime:y2,lane:0,tag:h2.tag,payload:h2.payload,callback:h2.callback,next:null});a:{var n3=a2,t2=h2;switch(r2=b2,y2=c,t2.tag){case 1:if(n3=t2.payload,typeof n3=="function"){q2=n3.call(y2,q2,r2);break a}q2=n3;break a;case 3:n3.flags=n3.flags&-65537|128;case 0:if(n3=t2.payload,r2=typeof n3=="function"?n3.call(y2,q2,r2):n3,r2==null)break a;q2=A2({},q2,r2);break a;case 2:jh=!0}}h2.callback!==null&&h2.lane!==0&&(a2.flags|=64,r2=e2.effects,r2===null?e2.effects=[h2]:r2.push(h2))}else y2={eventTime:y2,lane:r2,tag:h2.tag,payload:h2.payload,callback:h2.callback,next:null},m2===null?(l2=m2=y2,k2=q2):m2=m2.next=y2,g2|=r2;if(h2=h2.next,h2===null){if(h2=e2.shared.pending,h2===null)break;r2=h2,h2=r2.next,r2.next=null,e2.lastBaseUpdate=r2,e2.shared.pending=null}}while(!0);if(m2===null&&(k2=q2),e2.baseState=k2,e2.firstBaseUpdate=l2,e2.lastBaseUpdate=m2,b2=e2.shared.interleaved,b2!==null){e2=b2;do g2|=e2.lane,e2=e2.next;while(e2!==b2)}else f2===null&&(e2.shared.lanes=0);rh|=g2,a2.lanes=g2,a2.memoizedState=q2}}__name(qh,"qh");function sh(a2,b2,c){if(a2=b2.effects,b2.effects=null,a2!==null)for(b2=0;b2<a2.length;b2++){var d2=a2[b2],e2=d2.callback;if(e2!==null){if(d2.callback=null,d2=c,typeof e2!="function")throw Error(p2(191,e2));e2.call(d2)}}}__name(sh,"sh");var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a2){if(a2===th)throw Error(p2(174));return a2}__name(xh,"xh");function yh(a2,b2){switch(G2(wh,b2),G2(vh,a2),G2(uh,th),a2=b2.nodeType,a2){case 9:case 11:b2=(b2=b2.documentElement)?b2.namespaceURI:lb(null,"");break;default:a2=a2===8?b2.parentNode:b2,b2=a2.namespaceURI||null,a2=a2.tagName,b2=lb(b2,a2)}E2(uh),G2(uh,b2)}__name(yh,"yh");function zh(){E2(uh),E2(vh),E2(wh)}__name(zh,"zh");function Ah(a2){xh(wh.current);var b2=xh(uh.current),c=lb(b2,a2.type);b2!==c&&(G2(vh,a2),G2(uh,c))}__name(Ah,"Ah");function Bh(a2){vh.current===a2&&(E2(uh),E2(vh))}__name(Bh,"Bh");var L2=Uf(0);function Ch(a2){for(var b2=a2;b2!==null;){if(b2.tag===13){var c=b2.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return b2}else if(b2.tag===19&&b2.memoizedProps.revealOrder!==void 0){if((b2.flags&128)!==0)return b2}else if(b2.child!==null){b2.child.return=b2,b2=b2.child;continue}if(b2===a2)break;for(;b2.sibling===null;){if(b2.return===null||b2.return===a2)return null;b2=b2.return}b2.sibling.return=b2.return,b2=b2.sibling}return null}__name(Ch,"Ch");var Dh=[];function Eh(){for(var a2=0;a2<Dh.length;a2++)Dh[a2]._workInProgressVersionPrimary=null;Dh.length=0}__name(Eh,"Eh");var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M2=null,N2=null,O2=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P2(){throw Error(p2(321))}__name(P2,"P");function Mh(a2,b2){if(b2===null)return!1;for(var c=0;c<b2.length&&c<a2.length;c++)if(!He2(a2[c],b2[c]))return!1;return!0}__name(Mh,"Mh");function Nh(a2,b2,c,d2,e2,f2){if(Hh=f2,M2=b2,b2.memoizedState=null,b2.updateQueue=null,b2.lanes=0,Fh.current=a2===null||a2.memoizedState===null?Oh:Ph,a2=c(d2,e2),Jh){f2=0;do{if(Jh=!1,Kh=0,25<=f2)throw Error(p2(301));f2+=1,O2=N2=null,b2.updateQueue=null,Fh.current=Qh,a2=c(d2,e2)}while(Jh)}if(Fh.current=Rh,b2=N2!==null&&N2.next!==null,Hh=0,O2=N2=M2=null,Ih=!1,b2)throw Error(p2(300));return a2}__name(Nh,"Nh");function Sh(){var a2=Kh!==0;return Kh=0,a2}__name(Sh,"Sh");function Th(){var a2={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O2===null?M2.memoizedState=O2=a2:O2=O2.next=a2,O2}__name(Th,"Th");function Uh(){if(N2===null){var a2=M2.alternate;a2=a2!==null?a2.memoizedState:null}else a2=N2.next;var b2=O2===null?M2.memoizedState:O2.next;if(b2!==null)O2=b2,N2=a2;else{if(a2===null)throw Error(p2(310));N2=a2,a2={memoizedState:N2.memoizedState,baseState:N2.baseState,baseQueue:N2.baseQueue,queue:N2.queue,next:null},O2===null?M2.memoizedState=O2=a2:O2=O2.next=a2}return O2}__name(Uh,"Uh");function Vh(a2,b2){return typeof b2=="function"?b2(a2):b2}__name(Vh,"Vh");function Wh(a2){var b2=Uh(),c=b2.queue;if(c===null)throw Error(p2(311));c.lastRenderedReducer=a2;var d2=N2,e2=d2.baseQueue,f2=c.pending;if(f2!==null){if(e2!==null){var g2=e2.next;e2.next=f2.next,f2.next=g2}d2.baseQueue=e2=f2,c.pending=null}if(e2!==null){f2=e2.next,d2=d2.baseState;var h2=g2=null,k2=null,l2=f2;do{var m2=l2.lane;if((Hh&m2)===m2)k2!==null&&(k2=k2.next={lane:0,action:l2.action,hasEagerState:l2.hasEagerState,eagerState:l2.eagerState,next:null}),d2=l2.hasEagerState?l2.eagerState:a2(d2,l2.action);else{var q2={lane:m2,action:l2.action,hasEagerState:l2.hasEagerState,eagerState:l2.eagerState,next:null};k2===null?(h2=k2=q2,g2=d2):k2=k2.next=q2,M2.lanes|=m2,rh|=m2}l2=l2.next}while(l2!==null&&l2!==f2);k2===null?g2=d2:k2.next=h2,He2(d2,b2.memoizedState)||(dh=!0),b2.memoizedState=d2,b2.baseState=g2,b2.baseQueue=k2,c.lastRenderedState=d2}if(a2=c.interleaved,a2!==null){e2=a2;do f2=e2.lane,M2.lanes|=f2,rh|=f2,e2=e2.next;while(e2!==a2)}else e2===null&&(c.lanes=0);return[b2.memoizedState,c.dispatch]}__name(Wh,"Wh");function Xh(a2){var b2=Uh(),c=b2.queue;if(c===null)throw Error(p2(311));c.lastRenderedReducer=a2;var d2=c.dispatch,e2=c.pending,f2=b2.memoizedState;if(e2!==null){c.pending=null;var g2=e2=e2.next;do f2=a2(f2,g2.action),g2=g2.next;while(g2!==e2);He2(f2,b2.memoizedState)||(dh=!0),b2.memoizedState=f2,b2.baseQueue===null&&(b2.baseState=f2),c.lastRenderedState=f2}return[f2,d2]}__name(Xh,"Xh");function Yh(){}__name(Yh,"Yh");function Zh(a2,b2){var c=M2,d2=Uh(),e2=b2(),f2=!He2(d2.memoizedState,e2);if(f2&&(d2.memoizedState=e2,dh=!0),d2=d2.queue,$h(ai.bind(null,c,d2,a2),[a2]),d2.getSnapshot!==b2||f2||O2!==null&&O2.memoizedState.tag&1){if(c.flags|=2048,bi(9,ci.bind(null,c,d2,e2,b2),void 0,null),Q2===null)throw Error(p2(349));(Hh&30)!==0||di(c,b2,e2)}return e2}__name(Zh,"Zh");function di(a2,b2,c){a2.flags|=16384,a2={getSnapshot:b2,value:c},b2=M2.updateQueue,b2===null?(b2={lastEffect:null,stores:null},M2.updateQueue=b2,b2.stores=[a2]):(c=b2.stores,c===null?b2.stores=[a2]:c.push(a2))}__name(di,"di");function ci(a2,b2,c,d2){b2.value=c,b2.getSnapshot=d2,ei(b2)&&fi(a2)}__name(ci,"ci");function ai(a2,b2,c){return c(function(){ei(b2)&&fi(a2)})}__name(ai,"ai");function ei(a2){var b2=a2.getSnapshot;a2=a2.value;try{var c=b2();return!He2(a2,c)}catch{return!0}}__name(ei,"ei");function fi(a2){var b2=ih(a2,1);b2!==null&&gi(b2,a2,1,-1)}__name(fi,"fi");function hi(a2){var b2=Th();return typeof a2=="function"&&(a2=a2()),b2.memoizedState=b2.baseState=a2,a2={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a2},b2.queue=a2,a2=a2.dispatch=ii.bind(null,M2,a2),[b2.memoizedState,a2]}__name(hi,"hi");function bi(a2,b2,c,d2){return a2={tag:a2,create:b2,destroy:c,deps:d2,next:null},b2=M2.updateQueue,b2===null?(b2={lastEffect:null,stores:null},M2.updateQueue=b2,b2.lastEffect=a2.next=a2):(c=b2.lastEffect,c===null?b2.lastEffect=a2.next=a2:(d2=c.next,c.next=a2,a2.next=d2,b2.lastEffect=a2)),a2}__name(bi,"bi");function ji(){return Uh().memoizedState}__name(ji,"ji");function ki(a2,b2,c,d2){var e2=Th();M2.flags|=a2,e2.memoizedState=bi(1|b2,c,void 0,d2===void 0?null:d2)}__name(ki,"ki");function li(a2,b2,c,d2){var e2=Uh();d2=d2===void 0?null:d2;var f2=void 0;if(N2!==null){var g2=N2.memoizedState;if(f2=g2.destroy,d2!==null&&Mh(d2,g2.deps)){e2.memoizedState=bi(b2,c,f2,d2);return}}M2.flags|=a2,e2.memoizedState=bi(1|b2,c,f2,d2)}__name(li,"li");function mi(a2,b2){return ki(8390656,8,a2,b2)}__name(mi,"mi");function $h(a2,b2){return li(2048,8,a2,b2)}__name($h,"$h");function ni(a2,b2){return li(4,2,a2,b2)}__name(ni,"ni");function oi(a2,b2){return li(4,4,a2,b2)}__name(oi,"oi");function pi(a2,b2){if(typeof b2=="function")return a2=a2(),b2(a2),function(){b2(null)};if(b2!=null)return a2=a2(),b2.current=a2,function(){b2.current=null}}__name(pi,"pi");function qi(a2,b2,c){return c=c!=null?c.concat([a2]):null,li(4,4,pi.bind(null,b2,a2),c)}__name(qi,"qi");function ri(){}__name(ri,"ri");function si(a2,b2){var c=Uh();b2=b2===void 0?null:b2;var d2=c.memoizedState;return d2!==null&&b2!==null&&Mh(b2,d2[1])?d2[0]:(c.memoizedState=[a2,b2],a2)}__name(si,"si");function ti(a2,b2){var c=Uh();b2=b2===void 0?null:b2;var d2=c.memoizedState;return d2!==null&&b2!==null&&Mh(b2,d2[1])?d2[0]:(a2=a2(),c.memoizedState=[a2,b2],a2)}__name(ti,"ti");function ui(a2,b2,c){return(Hh&21)===0?(a2.baseState&&(a2.baseState=!1,dh=!0),a2.memoizedState=c):(He2(c,b2)||(c=yc(),M2.lanes|=c,rh|=c,a2.baseState=!0),b2)}__name(ui,"ui");function vi(a2,b2){var c=C3;C3=c!==0&&4>c?c:4,a2(!0);var d2=Gh.transition;Gh.transition={};try{a2(!1),b2()}finally{C3=c,Gh.transition=d2}}__name(vi,"vi");function wi(){return Uh().memoizedState}__name(wi,"wi");function xi(a2,b2,c){var d2=yi(a2);if(c={lane:d2,action:c,hasEagerState:!1,eagerState:null,next:null},zi(a2))Ai(b2,c);else if(c=hh(a2,b2,c,d2),c!==null){var e2=R2();gi(c,a2,d2,e2),Bi(c,b2,d2)}}__name(xi,"xi");function ii(a2,b2,c){var d2=yi(a2),e2={lane:d2,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a2))Ai(b2,e2);else{var f2=a2.alternate;if(a2.lanes===0&&(f2===null||f2.lanes===0)&&(f2=b2.lastRenderedReducer,f2!==null))try{var g2=b2.lastRenderedState,h2=f2(g2,c);if(e2.hasEagerState=!0,e2.eagerState=h2,He2(h2,g2)){var k2=b2.interleaved;k2===null?(e2.next=e2,gh(b2)):(e2.next=k2.next,k2.next=e2),b2.interleaved=e2;return}}catch{}finally{}c=hh(a2,b2,e2,d2),c!==null&&(e2=R2(),gi(c,a2,d2,e2),Bi(c,b2,d2))}}__name(ii,"ii");function zi(a2){var b2=a2.alternate;return a2===M2||b2!==null&&b2===M2}__name(zi,"zi");function Ai(a2,b2){Jh=Ih=!0;var c=a2.pending;c===null?b2.next=b2:(b2.next=c.next,c.next=b2),a2.pending=b2}__name(Ai,"Ai");function Bi(a2,b2,c){if((c&4194240)!==0){var d2=b2.lanes;d2&=a2.pendingLanes,c|=d2,b2.lanes=c,Cc(a2,c)}}__name(Bi,"Bi");var Rh={readContext:eh,useCallback:P2,useContext:P2,useEffect:P2,useImperativeHandle:P2,useInsertionEffect:P2,useLayoutEffect:P2,useMemo:P2,useReducer:P2,useRef:P2,useState:P2,useDebugValue:P2,useDeferredValue:P2,useTransition:P2,useMutableSource:P2,useSyncExternalStore:P2,useId:P2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:__name(function(a2,b2){return Th().memoizedState=[a2,b2===void 0?null:b2],a2},"useCallback"),useContext:eh,useEffect:mi,useImperativeHandle:__name(function(a2,b2,c){return c=c!=null?c.concat([a2]):null,ki(4194308,4,pi.bind(null,b2,a2),c)},"useImperativeHandle"),useLayoutEffect:__name(function(a2,b2){return ki(4194308,4,a2,b2)},"useLayoutEffect"),useInsertionEffect:__name(function(a2,b2){return ki(4,2,a2,b2)},"useInsertionEffect"),useMemo:__name(function(a2,b2){var c=Th();return b2=b2===void 0?null:b2,a2=a2(),c.memoizedState=[a2,b2],a2},"useMemo"),useReducer:__name(function(a2,b2,c){var d2=Th();return b2=c!==void 0?c(b2):b2,d2.memoizedState=d2.baseState=b2,a2={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a2,lastRenderedState:b2},d2.queue=a2,a2=a2.dispatch=xi.bind(null,M2,a2),[d2.memoizedState,a2]},"useReducer"),useRef:__name(function(a2){var b2=Th();return a2={current:a2},b2.memoizedState=a2},"useRef"),useState:hi,useDebugValue:ri,useDeferredValue:__name(function(a2){return Th().memoizedState=a2},"useDeferredValue"),useTransition:__name(function(){var a2=hi(!1),b2=a2[0];return a2=vi.bind(null,a2[1]),Th().memoizedState=a2,[b2,a2]},"useTransition"),useMutableSource:__name(function(){},"useMutableSource"),useSyncExternalStore:__name(function(a2,b2,c){var d2=M2,e2=Th();if(I2){if(c===void 0)throw Error(p2(407));c=c()}else{if(c=b2(),Q2===null)throw Error(p2(349));(Hh&30)!==0||di(d2,b2,c)}e2.memoizedState=c;var f2={value:c,getSnapshot:b2};return e2.queue=f2,mi(ai.bind(null,d2,f2,a2),[a2]),d2.flags|=2048,bi(9,ci.bind(null,d2,f2,c,b2),void 0,null),c},"useSyncExternalStore"),useId:__name(function(){var a2=Th(),b2=Q2.identifierPrefix;if(I2){var c=sg,d2=rg;c=(d2&~(1<<32-oc(d2)-1)).toString(32)+c,b2=":"+b2+"R"+c,c=Kh++,0<c&&(b2+="H"+c.toString(32)),b2+=":"}else c=Lh++,b2=":"+b2+"r"+c.toString(32)+":";return a2.memoizedState=b2},"useId"),unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:__name(function(){return Wh(Vh)},"useState"),useDebugValue:ri,useDeferredValue:__name(function(a2){var b2=Uh();return ui(b2,N2.memoizedState,a2)},"useDeferredValue"),useTransition:__name(function(){var a2=Wh(Vh)[0],b2=Uh().memoizedState;return[a2,b2]},"useTransition"),useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:__name(function(){return Xh(Vh)},"useState"),useDebugValue:ri,useDeferredValue:__name(function(a2){var b2=Uh();return N2===null?b2.memoizedState=a2:ui(b2,N2.memoizedState,a2)},"useDeferredValue"),useTransition:__name(function(){var a2=Xh(Vh)[0],b2=Uh().memoizedState;return[a2,b2]},"useTransition"),useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a2,b2){if(a2&&a2.defaultProps){b2=A2({},b2),a2=a2.defaultProps;for(var c in a2)b2[c]===void 0&&(b2[c]=a2[c]);return b2}return b2}__name(Ci,"Ci");function Di(a2,b2,c,d2){b2=a2.memoizedState,c=c(d2,b2),c=c==null?b2:A2({},b2,c),a2.memoizedState=c,a2.lanes===0&&(a2.updateQueue.baseState=c)}__name(Di,"Di");var Ei={isMounted:__name(function(a2){return(a2=a2._reactInternals)?Vb(a2)===a2:!1},"isMounted"),enqueueSetState:__name(function(a2,b2,c){a2=a2._reactInternals;var d2=R2(),e2=yi(a2),f2=mh(d2,e2);f2.payload=b2,c!=null&&(f2.callback=c),b2=nh(a2,f2,e2),b2!==null&&(gi(b2,a2,e2,d2),oh(b2,a2,e2))},"enqueueSetState"),enqueueReplaceState:__name(function(a2,b2,c){a2=a2._reactInternals;var d2=R2(),e2=yi(a2),f2=mh(d2,e2);f2.tag=1,f2.payload=b2,c!=null&&(f2.callback=c),b2=nh(a2,f2,e2),b2!==null&&(gi(b2,a2,e2,d2),oh(b2,a2,e2))},"enqueueReplaceState"),enqueueForceUpdate:__name(function(a2,b2){a2=a2._reactInternals;var c=R2(),d2=yi(a2),e2=mh(c,d2);e2.tag=2,b2!=null&&(e2.callback=b2),b2=nh(a2,e2,d2),b2!==null&&(gi(b2,a2,d2,c),oh(b2,a2,d2))},"enqueueForceUpdate")};function Fi(a2,b2,c,d2,e2,f2,g2){return a2=a2.stateNode,typeof a2.shouldComponentUpdate=="function"?a2.shouldComponentUpdate(d2,f2,g2):b2.prototype&&b2.prototype.isPureReactComponent?!Ie2(c,d2)||!Ie2(e2,f2):!0}__name(Fi,"Fi");function Gi(a2,b2,c){var d2=!1,e2=Vf,f2=b2.contextType;return typeof f2=="object"&&f2!==null?f2=eh(f2):(e2=Zf(b2)?Xf:H2.current,d2=b2.contextTypes,f2=(d2=d2!=null)?Yf(a2,e2):Vf),b2=new b2(c,f2),a2.memoizedState=b2.state!==null&&b2.state!==void 0?b2.state:null,b2.updater=Ei,a2.stateNode=b2,b2._reactInternals=a2,d2&&(a2=a2.stateNode,a2.__reactInternalMemoizedUnmaskedChildContext=e2,a2.__reactInternalMemoizedMaskedChildContext=f2),b2}__name(Gi,"Gi");function Hi(a2,b2,c,d2){a2=b2.state,typeof b2.componentWillReceiveProps=="function"&&b2.componentWillReceiveProps(c,d2),typeof b2.UNSAFE_componentWillReceiveProps=="function"&&b2.UNSAFE_componentWillReceiveProps(c,d2),b2.state!==a2&&Ei.enqueueReplaceState(b2,b2.state,null)}__name(Hi,"Hi");function Ii(a2,b2,c,d2){var e2=a2.stateNode;e2.props=c,e2.state=a2.memoizedState,e2.refs={},kh(a2);var f2=b2.contextType;typeof f2=="object"&&f2!==null?e2.context=eh(f2):(f2=Zf(b2)?Xf:H2.current,e2.context=Yf(a2,f2)),e2.state=a2.memoizedState,f2=b2.getDerivedStateFromProps,typeof f2=="function"&&(Di(a2,b2,f2,c),e2.state=a2.memoizedState),typeof b2.getDerivedStateFromProps=="function"||typeof e2.getSnapshotBeforeUpdate=="function"||typeof e2.UNSAFE_componentWillMount!="function"&&typeof e2.componentWillMount!="function"||(b2=e2.state,typeof e2.componentWillMount=="function"&&e2.componentWillMount(),typeof e2.UNSAFE_componentWillMount=="function"&&e2.UNSAFE_componentWillMount(),b2!==e2.state&&Ei.enqueueReplaceState(e2,e2.state,null),qh(a2,c,e2,d2),e2.state=a2.memoizedState),typeof e2.componentDidMount=="function"&&(a2.flags|=4194308)}__name(Ii,"Ii");function Ji(a2,b2){try{var c="",d2=b2;do c+=Pa(d2),d2=d2.return;while(d2);var e2=c}catch(f2){e2=`
Error generating stack: `+f2.message+`
`+f2.stack}return{value:a2,source:b2,stack:e2,digest:null}}__name(Ji,"Ji");function Ki(a2,b2,c){return{value:a2,source:null,stack:c??null,digest:b2??null}}__name(Ki,"Ki");function Li(a2,b2){try{console.error(b2.value)}catch(c){setTimeout(function(){throw c})}}__name(Li,"Li");var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(a2,b2,c){c=mh(-1,c),c.tag=3,c.payload={element:null};var d2=b2.value;return c.callback=function(){Oi||(Oi=!0,Pi=d2),Li(a2,b2)},c}__name(Ni,"Ni");function Qi(a2,b2,c){c=mh(-1,c),c.tag=3;var d2=a2.type.getDerivedStateFromError;if(typeof d2=="function"){var e2=b2.value;c.payload=function(){return d2(e2)},c.callback=function(){Li(a2,b2)}}var f2=a2.stateNode;return f2!==null&&typeof f2.componentDidCatch=="function"&&(c.callback=function(){Li(a2,b2),typeof d2!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var c2=b2.stack;this.componentDidCatch(b2.value,{componentStack:c2!==null?c2:""})}),c}__name(Qi,"Qi");function Si(a2,b2,c){var d2=a2.pingCache;if(d2===null){d2=a2.pingCache=new Mi;var e2=new Set;d2.set(b2,e2)}else e2=d2.get(b2),e2===void 0&&(e2=new Set,d2.set(b2,e2));e2.has(c)||(e2.add(c),a2=Ti.bind(null,a2,b2,c),b2.then(a2,a2))}__name(Si,"Si");function Ui(a2){do{var b2;if((b2=a2.tag===13)&&(b2=a2.memoizedState,b2=b2!==null?b2.dehydrated!==null:!0),b2)return a2;a2=a2.return}while(a2!==null);return null}__name(Ui,"Ui");function Vi(a2,b2,c,d2,e2){return(a2.mode&1)===0?(a2===b2?a2.flags|=65536:(a2.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(b2=mh(-1,1),b2.tag=2,nh(c,b2,1))),c.lanes|=1),a2):(a2.flags|=65536,a2.lanes=e2,a2)}__name(Vi,"Vi");var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a2,b2,c,d2){b2.child=a2===null?Vg(b2,null,c,d2):Ug(b2,a2.child,c,d2)}__name(Xi,"Xi");function Yi(a2,b2,c,d2,e2){c=c.render;var f2=b2.ref;return ch(b2,e2),d2=Nh(a2,b2,c,d2,f2,e2),c=Sh(),a2!==null&&!dh?(b2.updateQueue=a2.updateQueue,b2.flags&=-2053,a2.lanes&=~e2,Zi(a2,b2,e2)):(I2&&c&&vg(b2),b2.flags|=1,Xi(a2,b2,d2,e2),b2.child)}__name(Yi,"Yi");function $i(a2,b2,c,d2,e2){if(a2===null){var f2=c.type;return typeof f2=="function"&&!aj(f2)&&f2.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(b2.tag=15,b2.type=f2,bj(a2,b2,f2,d2,e2)):(a2=Rg(c.type,null,d2,b2,b2.mode,e2),a2.ref=b2.ref,a2.return=b2,b2.child=a2)}if(f2=a2.child,(a2.lanes&e2)===0){var g2=f2.memoizedProps;if(c=c.compare,c=c!==null?c:Ie2,c(g2,d2)&&a2.ref===b2.ref)return Zi(a2,b2,e2)}return b2.flags|=1,a2=Pg(f2,d2),a2.ref=b2.ref,a2.return=b2,b2.child=a2}__name($i,"$i");function bj(a2,b2,c,d2,e2){if(a2!==null){var f2=a2.memoizedProps;if(Ie2(f2,d2)&&a2.ref===b2.ref)if(dh=!1,b2.pendingProps=d2=f2,(a2.lanes&e2)!==0)(a2.flags&131072)!==0&&(dh=!0);else return b2.lanes=a2.lanes,Zi(a2,b2,e2)}return cj(a2,b2,c,d2,e2)}__name(bj,"bj");function dj(a2,b2,c){var d2=b2.pendingProps,e2=d2.children,f2=a2!==null?a2.memoizedState:null;if(d2.mode==="hidden")if((b2.mode&1)===0)b2.memoizedState={baseLanes:0,cachePool:null,transitions:null},G2(ej,fj),fj|=c;else{if((c&1073741824)===0)return a2=f2!==null?f2.baseLanes|c:c,b2.lanes=b2.childLanes=1073741824,b2.memoizedState={baseLanes:a2,cachePool:null,transitions:null},b2.updateQueue=null,G2(ej,fj),fj|=a2,null;b2.memoizedState={baseLanes:0,cachePool:null,transitions:null},d2=f2!==null?f2.baseLanes:c,G2(ej,fj),fj|=d2}else f2!==null?(d2=f2.baseLanes|c,b2.memoizedState=null):d2=c,G2(ej,fj),fj|=d2;return Xi(a2,b2,e2,c),b2.child}__name(dj,"dj");function gj(a2,b2){var c=b2.ref;(a2===null&&c!==null||a2!==null&&a2.ref!==c)&&(b2.flags|=512,b2.flags|=2097152)}__name(gj,"gj");function cj(a2,b2,c,d2,e2){var f2=Zf(c)?Xf:H2.current;return f2=Yf(b2,f2),ch(b2,e2),c=Nh(a2,b2,c,d2,f2,e2),d2=Sh(),a2!==null&&!dh?(b2.updateQueue=a2.updateQueue,b2.flags&=-2053,a2.lanes&=~e2,Zi(a2,b2,e2)):(I2&&d2&&vg(b2),b2.flags|=1,Xi(a2,b2,c,e2),b2.child)}__name(cj,"cj");function hj(a2,b2,c,d2,e2){if(Zf(c)){var f2=!0;cg(b2)}else f2=!1;if(ch(b2,e2),b2.stateNode===null)ij(a2,b2),Gi(b2,c,d2),Ii(b2,c,d2,e2),d2=!0;else if(a2===null){var g2=b2.stateNode,h2=b2.memoizedProps;g2.props=h2;var k2=g2.context,l2=c.contextType;typeof l2=="object"&&l2!==null?l2=eh(l2):(l2=Zf(c)?Xf:H2.current,l2=Yf(b2,l2));var m2=c.getDerivedStateFromProps,q2=typeof m2=="function"||typeof g2.getSnapshotBeforeUpdate=="function";q2||typeof g2.UNSAFE_componentWillReceiveProps!="function"&&typeof g2.componentWillReceiveProps!="function"||(h2!==d2||k2!==l2)&&Hi(b2,g2,d2,l2),jh=!1;var r2=b2.memoizedState;g2.state=r2,qh(b2,d2,g2,e2),k2=b2.memoizedState,h2!==d2||r2!==k2||Wf.current||jh?(typeof m2=="function"&&(Di(b2,c,m2,d2),k2=b2.memoizedState),(h2=jh||Fi(b2,c,h2,d2,r2,k2,l2))?(q2||typeof g2.UNSAFE_componentWillMount!="function"&&typeof g2.componentWillMount!="function"||(typeof g2.componentWillMount=="function"&&g2.componentWillMount(),typeof g2.UNSAFE_componentWillMount=="function"&&g2.UNSAFE_componentWillMount()),typeof g2.componentDidMount=="function"&&(b2.flags|=4194308)):(typeof g2.componentDidMount=="function"&&(b2.flags|=4194308),b2.memoizedProps=d2,b2.memoizedState=k2),g2.props=d2,g2.state=k2,g2.context=l2,d2=h2):(typeof g2.componentDidMount=="function"&&(b2.flags|=4194308),d2=!1)}else{g2=b2.stateNode,lh(a2,b2),h2=b2.memoizedProps,l2=b2.type===b2.elementType?h2:Ci(b2.type,h2),g2.props=l2,q2=b2.pendingProps,r2=g2.context,k2=c.contextType,typeof k2=="object"&&k2!==null?k2=eh(k2):(k2=Zf(c)?Xf:H2.current,k2=Yf(b2,k2));var y2=c.getDerivedStateFromProps;(m2=typeof y2=="function"||typeof g2.getSnapshotBeforeUpdate=="function")||typeof g2.UNSAFE_componentWillReceiveProps!="function"&&typeof g2.componentWillReceiveProps!="function"||(h2!==q2||r2!==k2)&&Hi(b2,g2,d2,k2),jh=!1,r2=b2.memoizedState,g2.state=r2,qh(b2,d2,g2,e2);var n3=b2.memoizedState;h2!==q2||r2!==n3||Wf.current||jh?(typeof y2=="function"&&(Di(b2,c,y2,d2),n3=b2.memoizedState),(l2=jh||Fi(b2,c,l2,d2,r2,n3,k2)||!1)?(m2||typeof g2.UNSAFE_componentWillUpdate!="function"&&typeof g2.componentWillUpdate!="function"||(typeof g2.componentWillUpdate=="function"&&g2.componentWillUpdate(d2,n3,k2),typeof g2.UNSAFE_componentWillUpdate=="function"&&g2.UNSAFE_componentWillUpdate(d2,n3,k2)),typeof g2.componentDidUpdate=="function"&&(b2.flags|=4),typeof g2.getSnapshotBeforeUpdate=="function"&&(b2.flags|=1024)):(typeof g2.componentDidUpdate!="function"||h2===a2.memoizedProps&&r2===a2.memoizedState||(b2.flags|=4),typeof g2.getSnapshotBeforeUpdate!="function"||h2===a2.memoizedProps&&r2===a2.memoizedState||(b2.flags|=1024),b2.memoizedProps=d2,b2.memoizedState=n3),g2.props=d2,g2.state=n3,g2.context=k2,d2=l2):(typeof g2.componentDidUpdate!="function"||h2===a2.memoizedProps&&r2===a2.memoizedState||(b2.flags|=4),typeof g2.getSnapshotBeforeUpdate!="function"||h2===a2.memoizedProps&&r2===a2.memoizedState||(b2.flags|=1024),d2=!1)}return jj(a2,b2,c,d2,f2,e2)}__name(hj,"hj");function jj(a2,b2,c,d2,e2,f2){gj(a2,b2);var g2=(b2.flags&128)!==0;if(!d2&&!g2)return e2&&dg(b2,c,!1),Zi(a2,b2,f2);d2=b2.stateNode,Wi.current=b2;var h2=g2&&typeof c.getDerivedStateFromError!="function"?null:d2.render();return b2.flags|=1,a2!==null&&g2?(b2.child=Ug(b2,a2.child,null,f2),b2.child=Ug(b2,null,h2,f2)):Xi(a2,b2,h2,f2),b2.memoizedState=d2.state,e2&&dg(b2,c,!0),b2.child}__name(jj,"jj");function kj(a2){var b2=a2.stateNode;b2.pendingContext?ag(a2,b2.pendingContext,b2.pendingContext!==b2.context):b2.context&&ag(a2,b2.context,!1),yh(a2,b2.containerInfo)}__name(kj,"kj");function lj(a2,b2,c,d2,e2){return Ig(),Jg(e2),b2.flags|=256,Xi(a2,b2,c,d2),b2.child}__name(lj,"lj");var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a2){return{baseLanes:a2,cachePool:null,transitions:null}}__name(nj,"nj");function oj(a2,b2,c){var d2=b2.pendingProps,e2=L2.current,f2=!1,g2=(b2.flags&128)!==0,h2;if((h2=g2)||(h2=a2!==null&&a2.memoizedState===null?!1:(e2&2)!==0),h2?(f2=!0,b2.flags&=-129):(a2===null||a2.memoizedState!==null)&&(e2|=1),G2(L2,e2&1),a2===null)return Eg(b2),a2=b2.memoizedState,a2!==null&&(a2=a2.dehydrated,a2!==null)?((b2.mode&1)===0?b2.lanes=1:a2.data==="$!"?b2.lanes=8:b2.lanes=1073741824,null):(g2=d2.children,a2=d2.fallback,f2?(d2=b2.mode,f2=b2.child,g2={mode:"hidden",children:g2},(d2&1)===0&&f2!==null?(f2.childLanes=0,f2.pendingProps=g2):f2=pj(g2,d2,0,null),a2=Tg(a2,d2,c,null),f2.return=b2,a2.return=b2,f2.sibling=a2,b2.child=f2,b2.child.memoizedState=nj(c),b2.memoizedState=mj,a2):qj(b2,g2));if(e2=a2.memoizedState,e2!==null&&(h2=e2.dehydrated,h2!==null))return rj(a2,b2,g2,d2,h2,e2,c);if(f2){f2=d2.fallback,g2=b2.mode,e2=a2.child,h2=e2.sibling;var k2={mode:"hidden",children:d2.children};return(g2&1)===0&&b2.child!==e2?(d2=b2.child,d2.childLanes=0,d2.pendingProps=k2,b2.deletions=null):(d2=Pg(e2,k2),d2.subtreeFlags=e2.subtreeFlags&14680064),h2!==null?f2=Pg(h2,f2):(f2=Tg(f2,g2,c,null),f2.flags|=2),f2.return=b2,d2.return=b2,d2.sibling=f2,b2.child=d2,d2=f2,f2=b2.child,g2=a2.child.memoizedState,g2=g2===null?nj(c):{baseLanes:g2.baseLanes|c,cachePool:null,transitions:g2.transitions},f2.memoizedState=g2,f2.childLanes=a2.childLanes&~c,b2.memoizedState=mj,d2}return f2=a2.child,a2=f2.sibling,d2=Pg(f2,{mode:"visible",children:d2.children}),(b2.mode&1)===0&&(d2.lanes=c),d2.return=b2,d2.sibling=null,a2!==null&&(c=b2.deletions,c===null?(b2.deletions=[a2],b2.flags|=16):c.push(a2)),b2.child=d2,b2.memoizedState=null,d2}__name(oj,"oj");function qj(a2,b2){return b2=pj({mode:"visible",children:b2},a2.mode,0,null),b2.return=a2,a2.child=b2}__name(qj,"qj");function sj(a2,b2,c,d2){return d2!==null&&Jg(d2),Ug(b2,a2.child,null,c),a2=qj(b2,b2.pendingProps.children),a2.flags|=2,b2.memoizedState=null,a2}__name(sj,"sj");function rj(a2,b2,c,d2,e2,f2,g2){if(c)return b2.flags&256?(b2.flags&=-257,d2=Ki(Error(p2(422))),sj(a2,b2,g2,d2)):b2.memoizedState!==null?(b2.child=a2.child,b2.flags|=128,null):(f2=d2.fallback,e2=b2.mode,d2=pj({mode:"visible",children:d2.children},e2,0,null),f2=Tg(f2,e2,g2,null),f2.flags|=2,d2.return=b2,f2.return=b2,d2.sibling=f2,b2.child=d2,(b2.mode&1)!==0&&Ug(b2,a2.child,null,g2),b2.child.memoizedState=nj(g2),b2.memoizedState=mj,f2);if((b2.mode&1)===0)return sj(a2,b2,g2,null);if(e2.data==="$!"){if(d2=e2.nextSibling&&e2.nextSibling.dataset,d2)var h2=d2.dgst;return d2=h2,f2=Error(p2(419)),d2=Ki(f2,d2,void 0),sj(a2,b2,g2,d2)}if(h2=(g2&a2.childLanes)!==0,dh||h2){if(d2=Q2,d2!==null){switch(g2&-g2){case 4:e2=2;break;case 16:e2=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e2=32;break;case 536870912:e2=268435456;break;default:e2=0}e2=(e2&(d2.suspendedLanes|g2))!==0?0:e2,e2!==0&&e2!==f2.retryLane&&(f2.retryLane=e2,ih(a2,e2),gi(d2,a2,e2,-1))}return tj(),d2=Ki(Error(p2(421))),sj(a2,b2,g2,d2)}return e2.data==="$?"?(b2.flags|=128,b2.child=a2.child,b2=uj.bind(null,a2),e2._reactRetry=b2,null):(a2=f2.treeContext,yg=Lf(e2.nextSibling),xg=b2,I2=!0,zg=null,a2!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a2.id,sg=a2.overflow,qg=b2),b2=qj(b2,d2.children),b2.flags|=4096,b2)}__name(rj,"rj");function vj(a2,b2,c){a2.lanes|=b2;var d2=a2.alternate;d2!==null&&(d2.lanes|=b2),bh(a2.return,b2,c)}__name(vj,"vj");function wj(a2,b2,c,d2,e2){var f2=a2.memoizedState;f2===null?a2.memoizedState={isBackwards:b2,rendering:null,renderingStartTime:0,last:d2,tail:c,tailMode:e2}:(f2.isBackwards=b2,f2.rendering=null,f2.renderingStartTime=0,f2.last=d2,f2.tail=c,f2.tailMode=e2)}__name(wj,"wj");function xj(a2,b2,c){var d2=b2.pendingProps,e2=d2.revealOrder,f2=d2.tail;if(Xi(a2,b2,d2.children,c),d2=L2.current,(d2&2)!==0)d2=d2&1|2,b2.flags|=128;else{if(a2!==null&&(a2.flags&128)!==0)a:for(a2=b2.child;a2!==null;){if(a2.tag===13)a2.memoizedState!==null&&vj(a2,c,b2);else if(a2.tag===19)vj(a2,c,b2);else if(a2.child!==null){a2.child.return=a2,a2=a2.child;continue}if(a2===b2)break a;for(;a2.sibling===null;){if(a2.return===null||a2.return===b2)break a;a2=a2.return}a2.sibling.return=a2.return,a2=a2.sibling}d2&=1}if(G2(L2,d2),(b2.mode&1)===0)b2.memoizedState=null;else switch(e2){case"forwards":for(c=b2.child,e2=null;c!==null;)a2=c.alternate,a2!==null&&Ch(a2)===null&&(e2=c),c=c.sibling;c=e2,c===null?(e2=b2.child,b2.child=null):(e2=c.sibling,c.sibling=null),wj(b2,!1,e2,c,f2);break;case"backwards":for(c=null,e2=b2.child,b2.child=null;e2!==null;){if(a2=e2.alternate,a2!==null&&Ch(a2)===null){b2.child=e2;break}a2=e2.sibling,e2.sibling=c,c=e2,e2=a2}wj(b2,!0,c,null,f2);break;case"together":wj(b2,!1,null,null,void 0);break;default:b2.memoizedState=null}return b2.child}__name(xj,"xj");function ij(a2,b2){(b2.mode&1)===0&&a2!==null&&(a2.alternate=null,b2.alternate=null,b2.flags|=2)}__name(ij,"ij");function Zi(a2,b2,c){if(a2!==null&&(b2.dependencies=a2.dependencies),rh|=b2.lanes,(c&b2.childLanes)===0)return null;if(a2!==null&&b2.child!==a2.child)throw Error(p2(153));if(b2.child!==null){for(a2=b2.child,c=Pg(a2,a2.pendingProps),b2.child=c,c.return=b2;a2.sibling!==null;)a2=a2.sibling,c=c.sibling=Pg(a2,a2.pendingProps),c.return=b2;c.sibling=null}return b2.child}__name(Zi,"Zi");function yj(a2,b2,c){switch(b2.tag){case 3:kj(b2),Ig();break;case 5:Ah(b2);break;case 1:Zf(b2.type)&&cg(b2);break;case 4:yh(b2,b2.stateNode.containerInfo);break;case 10:var d2=b2.type._context,e2=b2.memoizedProps.value;G2(Wg,d2._currentValue),d2._currentValue=e2;break;case 13:if(d2=b2.memoizedState,d2!==null)return d2.dehydrated!==null?(G2(L2,L2.current&1),b2.flags|=128,null):(c&b2.child.childLanes)!==0?oj(a2,b2,c):(G2(L2,L2.current&1),a2=Zi(a2,b2,c),a2!==null?a2.sibling:null);G2(L2,L2.current&1);break;case 19:if(d2=(c&b2.childLanes)!==0,(a2.flags&128)!==0){if(d2)return xj(a2,b2,c);b2.flags|=128}if(e2=b2.memoizedState,e2!==null&&(e2.rendering=null,e2.tail=null,e2.lastEffect=null),G2(L2,L2.current),d2)break;return null;case 22:case 23:return b2.lanes=0,dj(a2,b2,c)}return Zi(a2,b2,c)}__name(yj,"yj");var zj,Aj,Bj,Cj;zj=__name(function(a2,b2){for(var c=b2.child;c!==null;){if(c.tag===5||c.tag===6)a2.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===b2)break;for(;c.sibling===null;){if(c.return===null||c.return===b2)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},"zj"),Aj=__name(function(){},"Aj"),Bj=__name(function(a2,b2,c,d2){var e2=a2.memoizedProps;if(e2!==d2){a2=b2.stateNode,xh(uh.current);var f2=null;switch(c){case"input":e2=Ya(a2,e2),d2=Ya(a2,d2),f2=[];break;case"select":e2=A2({},e2,{value:void 0}),d2=A2({},d2,{value:void 0}),f2=[];break;case"textarea":e2=gb(a2,e2),d2=gb(a2,d2),f2=[];break;default:typeof e2.onClick!="function"&&typeof d2.onClick=="function"&&(a2.onclick=Bf)}ub(c,d2);var g2;c=null;for(l2 in e2)if(!d2.hasOwnProperty(l2)&&e2.hasOwnProperty(l2)&&e2[l2]!=null)if(l2==="style"){var h2=e2[l2];for(g2 in h2)h2.hasOwnProperty(g2)&&(c||(c={}),c[g2]="")}else l2!=="dangerouslySetInnerHTML"&&l2!=="children"&&l2!=="suppressContentEditableWarning"&&l2!=="suppressHydrationWarning"&&l2!=="autoFocus"&&(ea.hasOwnProperty(l2)?f2||(f2=[]):(f2=f2||[]).push(l2,null));for(l2 in d2){var k2=d2[l2];if(h2=e2!=null?e2[l2]:void 0,d2.hasOwnProperty(l2)&&k2!==h2&&(k2!=null||h2!=null))if(l2==="style")if(h2){for(g2 in h2)!h2.hasOwnProperty(g2)||k2&&k2.hasOwnProperty(g2)||(c||(c={}),c[g2]="");for(g2 in k2)k2.hasOwnProperty(g2)&&h2[g2]!==k2[g2]&&(c||(c={}),c[g2]=k2[g2])}else c||(f2||(f2=[]),f2.push(l2,c)),c=k2;else l2==="dangerouslySetInnerHTML"?(k2=k2?k2.__html:void 0,h2=h2?h2.__html:void 0,k2!=null&&h2!==k2&&(f2=f2||[]).push(l2,k2)):l2==="children"?typeof k2!="string"&&typeof k2!="number"||(f2=f2||[]).push(l2,""+k2):l2!=="suppressContentEditableWarning"&&l2!=="suppressHydrationWarning"&&(ea.hasOwnProperty(l2)?(k2!=null&&l2==="onScroll"&&D2("scroll",a2),f2||h2===k2||(f2=[])):(f2=f2||[]).push(l2,k2))}c&&(f2=f2||[]).push("style",c);var l2=f2;(b2.updateQueue=l2)&&(b2.flags|=4)}},"Bj"),Cj=__name(function(a2,b2,c,d2){c!==d2&&(b2.flags|=4)},"Cj");function Dj(a2,b2){if(!I2)switch(a2.tailMode){case"hidden":b2=a2.tail;for(var c=null;b2!==null;)b2.alternate!==null&&(c=b2),b2=b2.sibling;c===null?a2.tail=null:c.sibling=null;break;case"collapsed":c=a2.tail;for(var d2=null;c!==null;)c.alternate!==null&&(d2=c),c=c.sibling;d2===null?b2||a2.tail===null?a2.tail=null:a2.tail.sibling=null:d2.sibling=null}}__name(Dj,"Dj");function S2(a2){var b2=a2.alternate!==null&&a2.alternate.child===a2.child,c=0,d2=0;if(b2)for(var e2=a2.child;e2!==null;)c|=e2.lanes|e2.childLanes,d2|=e2.subtreeFlags&14680064,d2|=e2.flags&14680064,e2.return=a2,e2=e2.sibling;else for(e2=a2.child;e2!==null;)c|=e2.lanes|e2.childLanes,d2|=e2.subtreeFlags,d2|=e2.flags,e2.return=a2,e2=e2.sibling;return a2.subtreeFlags|=d2,a2.childLanes=c,b2}__name(S2,"S");function Ej(a2,b2,c){var d2=b2.pendingProps;switch(wg(b2),b2.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S2(b2),null;case 1:return Zf(b2.type)&&$f(),S2(b2),null;case 3:return d2=b2.stateNode,zh(),E2(Wf),E2(H2),Eh(),d2.pendingContext&&(d2.context=d2.pendingContext,d2.pendingContext=null),(a2===null||a2.child===null)&&(Gg(b2)?b2.flags|=4:a2===null||a2.memoizedState.isDehydrated&&(b2.flags&256)===0||(b2.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(a2,b2),S2(b2),null;case 5:Bh(b2);var e2=xh(wh.current);if(c=b2.type,a2!==null&&b2.stateNode!=null)Bj(a2,b2,c,d2,e2),a2.ref!==b2.ref&&(b2.flags|=512,b2.flags|=2097152);else{if(!d2){if(b2.stateNode===null)throw Error(p2(166));return S2(b2),null}if(a2=xh(uh.current),Gg(b2)){d2=b2.stateNode,c=b2.type;var f2=b2.memoizedProps;switch(d2[Of]=b2,d2[Pf]=f2,a2=(b2.mode&1)!==0,c){case"dialog":D2("cancel",d2),D2("close",d2);break;case"iframe":case"object":case"embed":D2("load",d2);break;case"video":case"audio":for(e2=0;e2<lf.length;e2++)D2(lf[e2],d2);break;case"source":D2("error",d2);break;case"img":case"image":case"link":D2("error",d2),D2("load",d2);break;case"details":D2("toggle",d2);break;case"input":Za(d2,f2),D2("invalid",d2);break;case"select":d2._wrapperState={wasMultiple:!!f2.multiple},D2("invalid",d2);break;case"textarea":hb(d2,f2),D2("invalid",d2)}ub(c,f2),e2=null;for(var g2 in f2)if(f2.hasOwnProperty(g2)){var h2=f2[g2];g2==="children"?typeof h2=="string"?d2.textContent!==h2&&(f2.suppressHydrationWarning!==!0&&Af(d2.textContent,h2,a2),e2=["children",h2]):typeof h2=="number"&&d2.textContent!==""+h2&&(f2.suppressHydrationWarning!==!0&&Af(d2.textContent,h2,a2),e2=["children",""+h2]):ea.hasOwnProperty(g2)&&h2!=null&&g2==="onScroll"&&D2("scroll",d2)}switch(c){case"input":Va(d2),db(d2,f2,!0);break;case"textarea":Va(d2),jb(d2);break;case"select":case"option":break;default:typeof f2.onClick=="function"&&(d2.onclick=Bf)}d2=e2,b2.updateQueue=d2,d2!==null&&(b2.flags|=4)}else{g2=e2.nodeType===9?e2:e2.ownerDocument,a2==="http://www.w3.org/1999/xhtml"&&(a2=kb(c)),a2==="http://www.w3.org/1999/xhtml"?c==="script"?(a2=g2.createElement("div"),a2.innerHTML="<script><\/script>",a2=a2.removeChild(a2.firstChild)):typeof d2.is=="string"?a2=g2.createElement(c,{is:d2.is}):(a2=g2.createElement(c),c==="select"&&(g2=a2,d2.multiple?g2.multiple=!0:d2.size&&(g2.size=d2.size))):a2=g2.createElementNS(a2,c),a2[Of]=b2,a2[Pf]=d2,zj(a2,b2,!1,!1),b2.stateNode=a2;a:{switch(g2=vb(c,d2),c){case"dialog":D2("cancel",a2),D2("close",a2),e2=d2;break;case"iframe":case"object":case"embed":D2("load",a2),e2=d2;break;case"video":case"audio":for(e2=0;e2<lf.length;e2++)D2(lf[e2],a2);e2=d2;break;case"source":D2("error",a2),e2=d2;break;case"img":case"image":case"link":D2("error",a2),D2("load",a2),e2=d2;break;case"details":D2("toggle",a2),e2=d2;break;case"input":Za(a2,d2),e2=Ya(a2,d2),D2("invalid",a2);break;case"option":e2=d2;break;case"select":a2._wrapperState={wasMultiple:!!d2.multiple},e2=A2({},d2,{value:void 0}),D2("invalid",a2);break;case"textarea":hb(a2,d2),e2=gb(a2,d2),D2("invalid",a2);break;default:e2=d2}ub(c,e2),h2=e2;for(f2 in h2)if(h2.hasOwnProperty(f2)){var k2=h2[f2];f2==="style"?sb(a2,k2):f2==="dangerouslySetInnerHTML"?(k2=k2?k2.__html:void 0,k2!=null&&nb(a2,k2)):f2==="children"?typeof k2=="string"?(c!=="textarea"||k2!=="")&&ob(a2,k2):typeof k2=="number"&&ob(a2,""+k2):f2!=="suppressContentEditableWarning"&&f2!=="suppressHydrationWarning"&&f2!=="autoFocus"&&(ea.hasOwnProperty(f2)?k2!=null&&f2==="onScroll"&&D2("scroll",a2):k2!=null&&ta(a2,f2,k2,g2))}switch(c){case"input":Va(a2),db(a2,d2,!1);break;case"textarea":Va(a2),jb(a2);break;case"option":d2.value!=null&&a2.setAttribute("value",""+Sa(d2.value));break;case"select":a2.multiple=!!d2.multiple,f2=d2.value,f2!=null?fb(a2,!!d2.multiple,f2,!1):d2.defaultValue!=null&&fb(a2,!!d2.multiple,d2.defaultValue,!0);break;default:typeof e2.onClick=="function"&&(a2.onclick=Bf)}switch(c){case"button":case"input":case"select":case"textarea":d2=!!d2.autoFocus;break a;case"img":d2=!0;break a;default:d2=!1}}d2&&(b2.flags|=4)}b2.ref!==null&&(b2.flags|=512,b2.flags|=2097152)}return S2(b2),null;case 6:if(a2&&b2.stateNode!=null)Cj(a2,b2,a2.memoizedProps,d2);else{if(typeof d2!="string"&&b2.stateNode===null)throw Error(p2(166));if(c=xh(wh.current),xh(uh.current),Gg(b2)){if(d2=b2.stateNode,c=b2.memoizedProps,d2[Of]=b2,(f2=d2.nodeValue!==c)&&(a2=xg,a2!==null))switch(a2.tag){case 3:Af(d2.nodeValue,c,(a2.mode&1)!==0);break;case 5:a2.memoizedProps.suppressHydrationWarning!==!0&&Af(d2.nodeValue,c,(a2.mode&1)!==0)}f2&&(b2.flags|=4)}else d2=(c.nodeType===9?c:c.ownerDocument).createTextNode(d2),d2[Of]=b2,b2.stateNode=d2}return S2(b2),null;case 13:if(E2(L2),d2=b2.memoizedState,a2===null||a2.memoizedState!==null&&a2.memoizedState.dehydrated!==null){if(I2&&yg!==null&&(b2.mode&1)!==0&&(b2.flags&128)===0)Hg(),Ig(),b2.flags|=98560,f2=!1;else if(f2=Gg(b2),d2!==null&&d2.dehydrated!==null){if(a2===null){if(!f2)throw Error(p2(318));if(f2=b2.memoizedState,f2=f2!==null?f2.dehydrated:null,!f2)throw Error(p2(317));f2[Of]=b2}else Ig(),(b2.flags&128)===0&&(b2.memoizedState=null),b2.flags|=4;S2(b2),f2=!1}else zg!==null&&(Fj(zg),zg=null),f2=!0;if(!f2)return b2.flags&65536?b2:null}return(b2.flags&128)!==0?(b2.lanes=c,b2):(d2=d2!==null,d2!==(a2!==null&&a2.memoizedState!==null)&&d2&&(b2.child.flags|=8192,(b2.mode&1)!==0&&(a2===null||(L2.current&1)!==0?T2===0&&(T2=3):tj())),b2.updateQueue!==null&&(b2.flags|=4),S2(b2),null);case 4:return zh(),Aj(a2,b2),a2===null&&sf(b2.stateNode.containerInfo),S2(b2),null;case 10:return ah(b2.type._context),S2(b2),null;case 17:return Zf(b2.type)&&$f(),S2(b2),null;case 19:if(E2(L2),f2=b2.memoizedState,f2===null)return S2(b2),null;if(d2=(b2.flags&128)!==0,g2=f2.rendering,g2===null)if(d2)Dj(f2,!1);else{if(T2!==0||a2!==null&&(a2.flags&128)!==0)for(a2=b2.child;a2!==null;){if(g2=Ch(a2),g2!==null){for(b2.flags|=128,Dj(f2,!1),d2=g2.updateQueue,d2!==null&&(b2.updateQueue=d2,b2.flags|=4),b2.subtreeFlags=0,d2=c,c=b2.child;c!==null;)f2=c,a2=d2,f2.flags&=14680066,g2=f2.alternate,g2===null?(f2.childLanes=0,f2.lanes=a2,f2.child=null,f2.subtreeFlags=0,f2.memoizedProps=null,f2.memoizedState=null,f2.updateQueue=null,f2.dependencies=null,f2.stateNode=null):(f2.childLanes=g2.childLanes,f2.lanes=g2.lanes,f2.child=g2.child,f2.subtreeFlags=0,f2.deletions=null,f2.memoizedProps=g2.memoizedProps,f2.memoizedState=g2.memoizedState,f2.updateQueue=g2.updateQueue,f2.type=g2.type,a2=g2.dependencies,f2.dependencies=a2===null?null:{lanes:a2.lanes,firstContext:a2.firstContext}),c=c.sibling;return G2(L2,L2.current&1|2),b2.child}a2=a2.sibling}f2.tail!==null&&B2()>Gj&&(b2.flags|=128,d2=!0,Dj(f2,!1),b2.lanes=4194304)}else{if(!d2)if(a2=Ch(g2),a2!==null){if(b2.flags|=128,d2=!0,c=a2.updateQueue,c!==null&&(b2.updateQueue=c,b2.flags|=4),Dj(f2,!0),f2.tail===null&&f2.tailMode==="hidden"&&!g2.alternate&&!I2)return S2(b2),null}else 2*B2()-f2.renderingStartTime>Gj&&c!==1073741824&&(b2.flags|=128,d2=!0,Dj(f2,!1),b2.lanes=4194304);f2.isBackwards?(g2.sibling=b2.child,b2.child=g2):(c=f2.last,c!==null?c.sibling=g2:b2.child=g2,f2.last=g2)}return f2.tail!==null?(b2=f2.tail,f2.rendering=b2,f2.tail=b2.sibling,f2.renderingStartTime=B2(),b2.sibling=null,c=L2.current,G2(L2,d2?c&1|2:c&1),b2):(S2(b2),null);case 22:case 23:return Hj(),d2=b2.memoizedState!==null,a2!==null&&a2.memoizedState!==null!==d2&&(b2.flags|=8192),d2&&(b2.mode&1)!==0?(fj&1073741824)!==0&&(S2(b2),b2.subtreeFlags&6&&(b2.flags|=8192)):S2(b2),null;case 24:return null;case 25:return null}throw Error(p2(156,b2.tag))}__name(Ej,"Ej");function Ij(a2,b2){switch(wg(b2),b2.tag){case 1:return Zf(b2.type)&&$f(),a2=b2.flags,a2&65536?(b2.flags=a2&-65537|128,b2):null;case 3:return zh(),E2(Wf),E2(H2),Eh(),a2=b2.flags,(a2&65536)!==0&&(a2&128)===0?(b2.flags=a2&-65537|128,b2):null;case 5:return Bh(b2),null;case 13:if(E2(L2),a2=b2.memoizedState,a2!==null&&a2.dehydrated!==null){if(b2.alternate===null)throw Error(p2(340));Ig()}return a2=b2.flags,a2&65536?(b2.flags=a2&-65537|128,b2):null;case 19:return E2(L2),null;case 4:return zh(),null;case 10:return ah(b2.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}__name(Ij,"Ij");var Jj=!1,U2=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V2=null;function Lj(a2,b2){var c=a2.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d2){W2(a2,b2,d2)}else c.current=null}__name(Lj,"Lj");function Mj(a2,b2,c){try{c()}catch(d2){W2(a2,b2,d2)}}__name(Mj,"Mj");var Nj=!1;function Oj(a2,b2){if(Cf=dd,a2=Me2(),Ne2(a2)){if("selectionStart"in a2)var c={start:a2.selectionStart,end:a2.selectionEnd};else a:{c=(c=a2.ownerDocument)&&c.defaultView||window;var d2=c.getSelection&&c.getSelection();if(d2&&d2.rangeCount!==0){c=d2.anchorNode;var e2=d2.anchorOffset,f2=d2.focusNode;d2=d2.focusOffset;try{c.nodeType,f2.nodeType}catch{c=null;break a}var g2=0,h2=-1,k2=-1,l2=0,m2=0,q2=a2,r2=null;b:for(;;){for(var y2;q2!==c||e2!==0&&q2.nodeType!==3||(h2=g2+e2),q2!==f2||d2!==0&&q2.nodeType!==3||(k2=g2+d2),q2.nodeType===3&&(g2+=q2.nodeValue.length),(y2=q2.firstChild)!==null;)r2=q2,q2=y2;for(;;){if(q2===a2)break b;if(r2===c&&++l2===e2&&(h2=g2),r2===f2&&++m2===d2&&(k2=g2),(y2=q2.nextSibling)!==null)break;q2=r2,r2=q2.parentNode}q2=y2}c=h2===-1||k2===-1?null:{start:h2,end:k2}}else c=null}c=c||{start:0,end:0}}else c=null;for(Df={focusedElem:a2,selectionRange:c},dd=!1,V2=b2;V2!==null;)if(b2=V2,a2=b2.child,(b2.subtreeFlags&1028)!==0&&a2!==null)a2.return=b2,V2=a2;else for(;V2!==null;){b2=V2;try{var n3=b2.alternate;if((b2.flags&1024)!==0)switch(b2.tag){case 0:case 11:case 15:break;case 1:if(n3!==null){var t2=n3.memoizedProps,J2=n3.memoizedState,x2=b2.stateNode,w2=x2.getSnapshotBeforeUpdate(b2.elementType===b2.type?t2:Ci(b2.type,t2),J2);x2.__reactInternalSnapshotBeforeUpdate=w2}break;case 3:var u2=b2.stateNode.containerInfo;u2.nodeType===1?u2.textContent="":u2.nodeType===9&&u2.documentElement&&u2.removeChild(u2.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p2(163))}}catch(F2){W2(b2,b2.return,F2)}if(a2=b2.sibling,a2!==null){a2.return=b2.return,V2=a2;break}V2=b2.return}return n3=Nj,Nj=!1,n3}__name(Oj,"Oj");function Pj(a2,b2,c){var d2=b2.updateQueue;if(d2=d2!==null?d2.lastEffect:null,d2!==null){var e2=d2=d2.next;do{if((e2.tag&a2)===a2){var f2=e2.destroy;e2.destroy=void 0,f2!==void 0&&Mj(b2,c,f2)}e2=e2.next}while(e2!==d2)}}__name(Pj,"Pj");function Qj(a2,b2){if(b2=b2.updateQueue,b2=b2!==null?b2.lastEffect:null,b2!==null){var c=b2=b2.next;do{if((c.tag&a2)===a2){var d2=c.create;c.destroy=d2()}c=c.next}while(c!==b2)}}__name(Qj,"Qj");function Rj(a2){var b2=a2.ref;if(b2!==null){var c=a2.stateNode;switch(a2.tag){case 5:a2=c;break;default:a2=c}typeof b2=="function"?b2(a2):b2.current=a2}}__name(Rj,"Rj");function Sj(a2){var b2=a2.alternate;b2!==null&&(a2.alternate=null,Sj(b2)),a2.child=null,a2.deletions=null,a2.sibling=null,a2.tag===5&&(b2=a2.stateNode,b2!==null&&(delete b2[Of],delete b2[Pf],delete b2[of],delete b2[Qf],delete b2[Rf])),a2.stateNode=null,a2.return=null,a2.dependencies=null,a2.memoizedProps=null,a2.memoizedState=null,a2.pendingProps=null,a2.stateNode=null,a2.updateQueue=null}__name(Sj,"Sj");function Tj(a2){return a2.tag===5||a2.tag===3||a2.tag===4}__name(Tj,"Tj");function Uj(a2){a:for(;;){for(;a2.sibling===null;){if(a2.return===null||Tj(a2.return))return null;a2=a2.return}for(a2.sibling.return=a2.return,a2=a2.sibling;a2.tag!==5&&a2.tag!==6&&a2.tag!==18;){if(a2.flags&2||a2.child===null||a2.tag===4)continue a;a2.child.return=a2,a2=a2.child}if(!(a2.flags&2))return a2.stateNode}}__name(Uj,"Uj");function Vj(a2,b2,c){var d2=a2.tag;if(d2===5||d2===6)a2=a2.stateNode,b2?c.nodeType===8?c.parentNode.insertBefore(a2,b2):c.insertBefore(a2,b2):(c.nodeType===8?(b2=c.parentNode,b2.insertBefore(a2,c)):(b2=c,b2.appendChild(a2)),c=c._reactRootContainer,c!=null||b2.onclick!==null||(b2.onclick=Bf));else if(d2!==4&&(a2=a2.child,a2!==null))for(Vj(a2,b2,c),a2=a2.sibling;a2!==null;)Vj(a2,b2,c),a2=a2.sibling}__name(Vj,"Vj");function Wj(a2,b2,c){var d2=a2.tag;if(d2===5||d2===6)a2=a2.stateNode,b2?c.insertBefore(a2,b2):c.appendChild(a2);else if(d2!==4&&(a2=a2.child,a2!==null))for(Wj(a2,b2,c),a2=a2.sibling;a2!==null;)Wj(a2,b2,c),a2=a2.sibling}__name(Wj,"Wj");var X2=null,Xj=!1;function Yj(a2,b2,c){for(c=c.child;c!==null;)Zj(a2,b2,c),c=c.sibling}__name(Yj,"Yj");function Zj(a2,b2,c){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,c)}catch{}switch(c.tag){case 5:U2||Lj(c,b2);case 6:var d2=X2,e2=Xj;X2=null,Yj(a2,b2,c),X2=d2,Xj=e2,X2!==null&&(Xj?(a2=X2,c=c.stateNode,a2.nodeType===8?a2.parentNode.removeChild(c):a2.removeChild(c)):X2.removeChild(c.stateNode));break;case 18:X2!==null&&(Xj?(a2=X2,c=c.stateNode,a2.nodeType===8?Kf(a2.parentNode,c):a2.nodeType===1&&Kf(a2,c),bd(a2)):Kf(X2,c.stateNode));break;case 4:d2=X2,e2=Xj,X2=c.stateNode.containerInfo,Xj=!0,Yj(a2,b2,c),X2=d2,Xj=e2;break;case 0:case 11:case 14:case 15:if(!U2&&(d2=c.updateQueue,d2!==null&&(d2=d2.lastEffect,d2!==null))){e2=d2=d2.next;do{var f2=e2,g2=f2.destroy;f2=f2.tag,g2!==void 0&&((f2&2)!==0||(f2&4)!==0)&&Mj(c,b2,g2),e2=e2.next}while(e2!==d2)}Yj(a2,b2,c);break;case 1:if(!U2&&(Lj(c,b2),d2=c.stateNode,typeof d2.componentWillUnmount=="function"))try{d2.props=c.memoizedProps,d2.state=c.memoizedState,d2.componentWillUnmount()}catch(h2){W2(c,b2,h2)}Yj(a2,b2,c);break;case 21:Yj(a2,b2,c);break;case 22:c.mode&1?(U2=(d2=U2)||c.memoizedState!==null,Yj(a2,b2,c),U2=d2):Yj(a2,b2,c);break;default:Yj(a2,b2,c)}}__name(Zj,"Zj");function ak(a2){var b2=a2.updateQueue;if(b2!==null){a2.updateQueue=null;var c=a2.stateNode;c===null&&(c=a2.stateNode=new Kj),b2.forEach(function(b3){var d2=bk.bind(null,a2,b3);c.has(b3)||(c.add(b3),b3.then(d2,d2))})}}__name(ak,"ak");function ck(a2,b2){var c=b2.deletions;if(c!==null)for(var d2=0;d2<c.length;d2++){var e2=c[d2];try{var f2=a2,g2=b2,h2=g2;a:for(;h2!==null;){switch(h2.tag){case 5:X2=h2.stateNode,Xj=!1;break a;case 3:X2=h2.stateNode.containerInfo,Xj=!0;break a;case 4:X2=h2.stateNode.containerInfo,Xj=!0;break a}h2=h2.return}if(X2===null)throw Error(p2(160));Zj(f2,g2,e2),X2=null,Xj=!1;var k2=e2.alternate;k2!==null&&(k2.return=null),e2.return=null}catch(l2){W2(e2,b2,l2)}}if(b2.subtreeFlags&12854)for(b2=b2.child;b2!==null;)dk(b2,a2),b2=b2.sibling}__name(ck,"ck");function dk(a2,b2){var c=a2.alternate,d2=a2.flags;switch(a2.tag){case 0:case 11:case 14:case 15:if(ck(b2,a2),ek(a2),d2&4){try{Pj(3,a2,a2.return),Qj(3,a2)}catch(t2){W2(a2,a2.return,t2)}try{Pj(5,a2,a2.return)}catch(t2){W2(a2,a2.return,t2)}}break;case 1:ck(b2,a2),ek(a2),d2&512&&c!==null&&Lj(c,c.return);break;case 5:if(ck(b2,a2),ek(a2),d2&512&&c!==null&&Lj(c,c.return),a2.flags&32){var e2=a2.stateNode;try{ob(e2,"")}catch(t2){W2(a2,a2.return,t2)}}if(d2&4&&(e2=a2.stateNode,e2!=null)){var f2=a2.memoizedProps,g2=c!==null?c.memoizedProps:f2,h2=a2.type,k2=a2.updateQueue;if(a2.updateQueue=null,k2!==null)try{h2==="input"&&f2.type==="radio"&&f2.name!=null&&ab(e2,f2),vb(h2,g2);var l2=vb(h2,f2);for(g2=0;g2<k2.length;g2+=2){var m2=k2[g2],q2=k2[g2+1];m2==="style"?sb(e2,q2):m2==="dangerouslySetInnerHTML"?nb(e2,q2):m2==="children"?ob(e2,q2):ta(e2,m2,q2,l2)}switch(h2){case"input":bb(e2,f2);break;case"textarea":ib(e2,f2);break;case"select":var r2=e2._wrapperState.wasMultiple;e2._wrapperState.wasMultiple=!!f2.multiple;var y2=f2.value;y2!=null?fb(e2,!!f2.multiple,y2,!1):r2!==!!f2.multiple&&(f2.defaultValue!=null?fb(e2,!!f2.multiple,f2.defaultValue,!0):fb(e2,!!f2.multiple,f2.multiple?[]:"",!1))}e2[Pf]=f2}catch(t2){W2(a2,a2.return,t2)}}break;case 6:if(ck(b2,a2),ek(a2),d2&4){if(a2.stateNode===null)throw Error(p2(162));e2=a2.stateNode,f2=a2.memoizedProps;try{e2.nodeValue=f2}catch(t2){W2(a2,a2.return,t2)}}break;case 3:if(ck(b2,a2),ek(a2),d2&4&&c!==null&&c.memoizedState.isDehydrated)try{bd(b2.containerInfo)}catch(t2){W2(a2,a2.return,t2)}break;case 4:ck(b2,a2),ek(a2);break;case 13:ck(b2,a2),ek(a2),e2=a2.child,e2.flags&8192&&(f2=e2.memoizedState!==null,e2.stateNode.isHidden=f2,!f2||e2.alternate!==null&&e2.alternate.memoizedState!==null||(fk=B2())),d2&4&&ak(a2);break;case 22:if(m2=c!==null&&c.memoizedState!==null,a2.mode&1?(U2=(l2=U2)||m2,ck(b2,a2),U2=l2):ck(b2,a2),ek(a2),d2&8192){if(l2=a2.memoizedState!==null,(a2.stateNode.isHidden=l2)&&!m2&&(a2.mode&1)!==0)for(V2=a2,m2=a2.child;m2!==null;){for(q2=V2=m2;V2!==null;){switch(r2=V2,y2=r2.child,r2.tag){case 0:case 11:case 14:case 15:Pj(4,r2,r2.return);break;case 1:Lj(r2,r2.return);var n3=r2.stateNode;if(typeof n3.componentWillUnmount=="function"){d2=r2,c=r2.return;try{b2=d2,n3.props=b2.memoizedProps,n3.state=b2.memoizedState,n3.componentWillUnmount()}catch(t2){W2(d2,c,t2)}}break;case 5:Lj(r2,r2.return);break;case 22:if(r2.memoizedState!==null){gk(q2);continue}}y2!==null?(y2.return=r2,V2=y2):gk(q2)}m2=m2.sibling}a:for(m2=null,q2=a2;;){if(q2.tag===5){if(m2===null){m2=q2;try{e2=q2.stateNode,l2?(f2=e2.style,typeof f2.setProperty=="function"?f2.setProperty("display","none","important"):f2.display="none"):(h2=q2.stateNode,k2=q2.memoizedProps.style,g2=k2!=null&&k2.hasOwnProperty("display")?k2.display:null,h2.style.display=rb("display",g2))}catch(t2){W2(a2,a2.return,t2)}}}else if(q2.tag===6){if(m2===null)try{q2.stateNode.nodeValue=l2?"":q2.memoizedProps}catch(t2){W2(a2,a2.return,t2)}}else if((q2.tag!==22&&q2.tag!==23||q2.memoizedState===null||q2===a2)&&q2.child!==null){q2.child.return=q2,q2=q2.child;continue}if(q2===a2)break a;for(;q2.sibling===null;){if(q2.return===null||q2.return===a2)break a;m2===q2&&(m2=null),q2=q2.return}m2===q2&&(m2=null),q2.sibling.return=q2.return,q2=q2.sibling}}break;case 19:ck(b2,a2),ek(a2),d2&4&&ak(a2);break;case 21:break;default:ck(b2,a2),ek(a2)}}__name(dk,"dk");function ek(a2){var b2=a2.flags;if(b2&2){try{a:{for(var c=a2.return;c!==null;){if(Tj(c)){var d2=c;break a}c=c.return}throw Error(p2(160))}switch(d2.tag){case 5:var e2=d2.stateNode;d2.flags&32&&(ob(e2,""),d2.flags&=-33);var f2=Uj(a2);Wj(a2,f2,e2);break;case 3:case 4:var g2=d2.stateNode.containerInfo,h2=Uj(a2);Vj(a2,h2,g2);break;default:throw Error(p2(161))}}catch(k2){W2(a2,a2.return,k2)}a2.flags&=-3}b2&4096&&(a2.flags&=-4097)}__name(ek,"ek");function hk(a2,b2,c){V2=a2,ik(a2)}__name(hk,"hk");function ik(a2,b2,c){for(var d2=(a2.mode&1)!==0;V2!==null;){var e2=V2,f2=e2.child;if(e2.tag===22&&d2){var g2=e2.memoizedState!==null||Jj;if(!g2){var h2=e2.alternate,k2=h2!==null&&h2.memoizedState!==null||U2;h2=Jj;var l2=U2;if(Jj=g2,(U2=k2)&&!l2)for(V2=e2;V2!==null;)g2=V2,k2=g2.child,g2.tag===22&&g2.memoizedState!==null?jk(e2):k2!==null?(k2.return=g2,V2=k2):jk(e2);for(;f2!==null;)V2=f2,ik(f2),f2=f2.sibling;V2=e2,Jj=h2,U2=l2}kk(a2)}else(e2.subtreeFlags&8772)!==0&&f2!==null?(f2.return=e2,V2=f2):kk(a2)}}__name(ik,"ik");function kk(a2){for(;V2!==null;){var b2=V2;if((b2.flags&8772)!==0){var c=b2.alternate;try{if((b2.flags&8772)!==0)switch(b2.tag){case 0:case 11:case 15:U2||Qj(5,b2);break;case 1:var d2=b2.stateNode;if(b2.flags&4&&!U2)if(c===null)d2.componentDidMount();else{var e2=b2.elementType===b2.type?c.memoizedProps:Ci(b2.type,c.memoizedProps);d2.componentDidUpdate(e2,c.memoizedState,d2.__reactInternalSnapshotBeforeUpdate)}var f2=b2.updateQueue;f2!==null&&sh(b2,f2,d2);break;case 3:var g2=b2.updateQueue;if(g2!==null){if(c=null,b2.child!==null)switch(b2.child.tag){case 5:c=b2.child.stateNode;break;case 1:c=b2.child.stateNode}sh(b2,g2,c)}break;case 5:var h2=b2.stateNode;if(c===null&&b2.flags&4){c=h2;var k2=b2.memoizedProps;switch(b2.type){case"button":case"input":case"select":case"textarea":k2.autoFocus&&c.focus();break;case"img":k2.src&&(c.src=k2.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b2.memoizedState===null){var l2=b2.alternate;if(l2!==null){var m2=l2.memoizedState;if(m2!==null){var q2=m2.dehydrated;q2!==null&&bd(q2)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p2(163))}U2||b2.flags&512&&Rj(b2)}catch(r2){W2(b2,b2.return,r2)}}if(b2===a2){V2=null;break}if(c=b2.sibling,c!==null){c.return=b2.return,V2=c;break}V2=b2.return}}__name(kk,"kk");function gk(a2){for(;V2!==null;){var b2=V2;if(b2===a2){V2=null;break}var c=b2.sibling;if(c!==null){c.return=b2.return,V2=c;break}V2=b2.return}}__name(gk,"gk");function jk(a2){for(;V2!==null;){var b2=V2;try{switch(b2.tag){case 0:case 11:case 15:var c=b2.return;try{Qj(4,b2)}catch(k2){W2(b2,c,k2)}break;case 1:var d2=b2.stateNode;if(typeof d2.componentDidMount=="function"){var e2=b2.return;try{d2.componentDidMount()}catch(k2){W2(b2,e2,k2)}}var f2=b2.return;try{Rj(b2)}catch(k2){W2(b2,f2,k2)}break;case 5:var g2=b2.return;try{Rj(b2)}catch(k2){W2(b2,g2,k2)}}}catch(k2){W2(b2,b2.return,k2)}if(b2===a2){V2=null;break}var h2=b2.sibling;if(h2!==null){h2.return=b2.return,V2=h2;break}V2=b2.return}}__name(jk,"jk");var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok2=ua.ReactCurrentBatchConfig,K2=0,Q2=null,Y2=null,Z2=0,fj=0,ej=Uf(0),T2=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R2(){return(K2&6)!==0?B2():Ak!==-1?Ak:Ak=B2()}__name(R2,"R");function yi(a2){return(a2.mode&1)===0?1:(K2&2)!==0&&Z2!==0?Z2&-Z2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(a2=C3,a2!==0||(a2=window.event,a2=a2===void 0?16:jd(a2.type)),a2)}__name(yi,"yi");function gi(a2,b2,c,d2){if(50<yk)throw yk=0,zk=null,Error(p2(185));Ac(a2,c,d2),((K2&2)===0||a2!==Q2)&&(a2===Q2&&((K2&2)===0&&(qk|=c),T2===4&&Ck(a2,Z2)),Dk(a2,d2),c===1&&K2===0&&(b2.mode&1)===0&&(Gj=B2()+500,fg&&jg()))}__name(gi,"gi");function Dk(a2,b2){var c=a2.callbackNode;wc(a2,b2);var d2=uc(a2,a2===Q2?Z2:0);if(d2===0)c!==null&&bc(c),a2.callbackNode=null,a2.callbackPriority=0;else if(b2=d2&-d2,a2.callbackPriority!==b2){if(c!=null&&bc(c),b2===1)a2.tag===0?ig(Ek.bind(null,a2)):hg(Ek.bind(null,a2)),Jf(function(){(K2&6)===0&&jg()}),c=null;else{switch(Dc(d2)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a2))}a2.callbackPriority=b2,a2.callbackNode=c}}__name(Dk,"Dk");function Gk(a2,b2){if(Ak=-1,Bk=0,(K2&6)!==0)throw Error(p2(327));var c=a2.callbackNode;if(Hk()&&a2.callbackNode!==c)return null;var d2=uc(a2,a2===Q2?Z2:0);if(d2===0)return null;if((d2&30)!==0||(d2&a2.expiredLanes)!==0||b2)b2=Ik(a2,d2);else{b2=d2;var e2=K2;K2|=2;var f2=Jk();(Q2!==a2||Z2!==b2)&&(uk=null,Gj=B2()+500,Kk(a2,b2));do try{Lk();break}catch(h2){Mk(a2,h2)}while(!0);$g(),mk.current=f2,K2=e2,Y2!==null?b2=0:(Q2=null,Z2=0,b2=T2)}if(b2!==0){if(b2===2&&(e2=xc(a2),e2!==0&&(d2=e2,b2=Nk(a2,e2))),b2===1)throw c=pk,Kk(a2,0),Ck(a2,d2),Dk(a2,B2()),c;if(b2===6)Ck(a2,d2);else{if(e2=a2.current.alternate,(d2&30)===0&&!Ok(e2)&&(b2=Ik(a2,d2),b2===2&&(f2=xc(a2),f2!==0&&(d2=f2,b2=Nk(a2,f2))),b2===1))throw c=pk,Kk(a2,0),Ck(a2,d2),Dk(a2,B2()),c;switch(a2.finishedWork=e2,a2.finishedLanes=d2,b2){case 0:case 1:throw Error(p2(345));case 2:Pk(a2,tk,uk);break;case 3:if(Ck(a2,d2),(d2&130023424)===d2&&(b2=fk+500-B2(),10<b2)){if(uc(a2,0)!==0)break;if(e2=a2.suspendedLanes,(e2&d2)!==d2){R2(),a2.pingedLanes|=a2.suspendedLanes&e2;break}a2.timeoutHandle=Ff(Pk.bind(null,a2,tk,uk),b2);break}Pk(a2,tk,uk);break;case 4:if(Ck(a2,d2),(d2&4194240)===d2)break;for(b2=a2.eventTimes,e2=-1;0<d2;){var g2=31-oc(d2);f2=1<<g2,g2=b2[g2],g2>e2&&(e2=g2),d2&=~f2}if(d2=e2,d2=B2()-d2,d2=(120>d2?120:480>d2?480:1080>d2?1080:1920>d2?1920:3e3>d2?3e3:4320>d2?4320:1960*lk(d2/1960))-d2,10<d2){a2.timeoutHandle=Ff(Pk.bind(null,a2,tk,uk),d2);break}Pk(a2,tk,uk);break;case 5:Pk(a2,tk,uk);break;default:throw Error(p2(329))}}}return Dk(a2,B2()),a2.callbackNode===c?Gk.bind(null,a2):null}__name(Gk,"Gk");function Nk(a2,b2){var c=sk;return a2.current.memoizedState.isDehydrated&&(Kk(a2,b2).flags|=256),a2=Ik(a2,b2),a2!==2&&(b2=tk,tk=c,b2!==null&&Fj(b2)),a2}__name(Nk,"Nk");function Fj(a2){tk===null?tk=a2:tk.push.apply(tk,a2)}__name(Fj,"Fj");function Ok(a2){for(var b2=a2;;){if(b2.flags&16384){var c=b2.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d2=0;d2<c.length;d2++){var e2=c[d2],f2=e2.getSnapshot;e2=e2.value;try{if(!He2(f2(),e2))return!1}catch{return!1}}}if(c=b2.child,b2.subtreeFlags&16384&&c!==null)c.return=b2,b2=c;else{if(b2===a2)break;for(;b2.sibling===null;){if(b2.return===null||b2.return===a2)return!0;b2=b2.return}b2.sibling.return=b2.return,b2=b2.sibling}}return!0}__name(Ok,"Ok");function Ck(a2,b2){for(b2&=~rk,b2&=~qk,a2.suspendedLanes|=b2,a2.pingedLanes&=~b2,a2=a2.expirationTimes;0<b2;){var c=31-oc(b2),d2=1<<c;a2[c]=-1,b2&=~d2}}__name(Ck,"Ck");function Ek(a2){if((K2&6)!==0)throw Error(p2(327));Hk();var b2=uc(a2,0);if((b2&1)===0)return Dk(a2,B2()),null;var c=Ik(a2,b2);if(a2.tag!==0&&c===2){var d2=xc(a2);d2!==0&&(b2=d2,c=Nk(a2,d2))}if(c===1)throw c=pk,Kk(a2,0),Ck(a2,b2),Dk(a2,B2()),c;if(c===6)throw Error(p2(345));return a2.finishedWork=a2.current.alternate,a2.finishedLanes=b2,Pk(a2,tk,uk),Dk(a2,B2()),null}__name(Ek,"Ek");function Qk(a2,b2){var c=K2;K2|=1;try{return a2(b2)}finally{K2=c,K2===0&&(Gj=B2()+500,fg&&jg())}}__name(Qk,"Qk");function Rk(a2){wk!==null&&wk.tag===0&&(K2&6)===0&&Hk();var b2=K2;K2|=1;var c=ok2.transition,d2=C3;try{if(ok2.transition=null,C3=1,a2)return a2()}finally{C3=d2,ok2.transition=c,K2=b2,(K2&6)===0&&jg()}}__name(Rk,"Rk");function Hj(){fj=ej.current,E2(ej)}__name(Hj,"Hj");function Kk(a2,b2){a2.finishedWork=null,a2.finishedLanes=0;var c=a2.timeoutHandle;if(c!==-1&&(a2.timeoutHandle=-1,Gf(c)),Y2!==null)for(c=Y2.return;c!==null;){var d2=c;switch(wg(d2),d2.tag){case 1:d2=d2.type.childContextTypes,d2!=null&&$f();break;case 3:zh(),E2(Wf),E2(H2),Eh();break;case 5:Bh(d2);break;case 4:zh();break;case 13:E2(L2);break;case 19:E2(L2);break;case 10:ah(d2.type._context);break;case 22:case 23:Hj()}c=c.return}if(Q2=a2,Y2=a2=Pg(a2.current,null),Z2=fj=b2,T2=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(b2=0;b2<fh.length;b2++)if(c=fh[b2],d2=c.interleaved,d2!==null){c.interleaved=null;var e2=d2.next,f2=c.pending;if(f2!==null){var g2=f2.next;f2.next=e2,d2.next=g2}c.pending=d2}fh=null}return a2}__name(Kk,"Kk");function Mk(a2,b2){do{var c=Y2;try{if($g(),Fh.current=Rh,Ih){for(var d2=M2.memoizedState;d2!==null;){var e2=d2.queue;e2!==null&&(e2.pending=null),d2=d2.next}Ih=!1}if(Hh=0,O2=N2=M2=null,Jh=!1,Kh=0,nk.current=null,c===null||c.return===null){T2=1,pk=b2,Y2=null;break}a:{var f2=a2,g2=c.return,h2=c,k2=b2;if(b2=Z2,h2.flags|=32768,k2!==null&&typeof k2=="object"&&typeof k2.then=="function"){var l2=k2,m2=h2,q2=m2.tag;if((m2.mode&1)===0&&(q2===0||q2===11||q2===15)){var r2=m2.alternate;r2?(m2.updateQueue=r2.updateQueue,m2.memoizedState=r2.memoizedState,m2.lanes=r2.lanes):(m2.updateQueue=null,m2.memoizedState=null)}var y2=Ui(g2);if(y2!==null){y2.flags&=-257,Vi(y2,g2,h2,f2,b2),y2.mode&1&&Si(f2,l2,b2),b2=y2,k2=l2;var n3=b2.updateQueue;if(n3===null){var t2=new Set;t2.add(k2),b2.updateQueue=t2}else n3.add(k2);break a}else{if((b2&1)===0){Si(f2,l2,b2),tj();break a}k2=Error(p2(426))}}else if(I2&&h2.mode&1){var J2=Ui(g2);if(J2!==null){(J2.flags&65536)===0&&(J2.flags|=256),Vi(J2,g2,h2,f2,b2),Jg(Ji(k2,h2));break a}}f2=k2=Ji(k2,h2),T2!==4&&(T2=2),sk===null?sk=[f2]:sk.push(f2),f2=g2;do{switch(f2.tag){case 3:f2.flags|=65536,b2&=-b2,f2.lanes|=b2;var x2=Ni(f2,k2,b2);ph(f2,x2);break a;case 1:h2=k2;var w2=f2.type,u2=f2.stateNode;if((f2.flags&128)===0&&(typeof w2.getDerivedStateFromError=="function"||u2!==null&&typeof u2.componentDidCatch=="function"&&(Ri===null||!Ri.has(u2)))){f2.flags|=65536,b2&=-b2,f2.lanes|=b2;var F2=Qi(f2,h2,b2);ph(f2,F2);break a}}f2=f2.return}while(f2!==null)}Sk(c)}catch(na){b2=na,Y2===c&&c!==null&&(Y2=c=c.return);continue}break}while(!0)}__name(Mk,"Mk");function Jk(){var a2=mk.current;return mk.current=Rh,a2===null?Rh:a2}__name(Jk,"Jk");function tj(){(T2===0||T2===3||T2===2)&&(T2=4),Q2===null||(rh&268435455)===0&&(qk&268435455)===0||Ck(Q2,Z2)}__name(tj,"tj");function Ik(a2,b2){var c=K2;K2|=2;var d2=Jk();(Q2!==a2||Z2!==b2)&&(uk=null,Kk(a2,b2));do try{Tk();break}catch(e2){Mk(a2,e2)}while(!0);if($g(),K2=c,mk.current=d2,Y2!==null)throw Error(p2(261));return Q2=null,Z2=0,T2}__name(Ik,"Ik");function Tk(){for(;Y2!==null;)Uk(Y2)}__name(Tk,"Tk");function Lk(){for(;Y2!==null&&!cc();)Uk(Y2)}__name(Lk,"Lk");function Uk(a2){var b2=Vk(a2.alternate,a2,fj);a2.memoizedProps=a2.pendingProps,b2===null?Sk(a2):Y2=b2,nk.current=null}__name(Uk,"Uk");function Sk(a2){var b2=a2;do{var c=b2.alternate;if(a2=b2.return,(b2.flags&32768)===0){if(c=Ej(c,b2,fj),c!==null){Y2=c;return}}else{if(c=Ij(c,b2),c!==null){c.flags&=32767,Y2=c;return}if(a2!==null)a2.flags|=32768,a2.subtreeFlags=0,a2.deletions=null;else{T2=6,Y2=null;return}}if(b2=b2.sibling,b2!==null){Y2=b2;return}Y2=b2=a2}while(b2!==null);T2===0&&(T2=5)}__name(Sk,"Sk");function Pk(a2,b2,c){var d2=C3,e2=ok2.transition;try{ok2.transition=null,C3=1,Wk(a2,b2,c,d2)}finally{ok2.transition=e2,C3=d2}return null}__name(Pk,"Pk");function Wk(a2,b2,c,d2){do Hk();while(wk!==null);if((K2&6)!==0)throw Error(p2(327));c=a2.finishedWork;var e2=a2.finishedLanes;if(c===null)return null;if(a2.finishedWork=null,a2.finishedLanes=0,c===a2.current)throw Error(p2(177));a2.callbackNode=null,a2.callbackPriority=0;var f2=c.lanes|c.childLanes;if(Bc(a2,f2),a2===Q2&&(Y2=Q2=null,Z2=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),f2=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||f2){f2=ok2.transition,ok2.transition=null;var g2=C3;C3=1;var h2=K2;K2|=4,nk.current=null,Oj(a2,c),dk(c,a2),Oe2(Df),dd=!!Cf,Df=Cf=null,a2.current=c,hk(c),dc(),K2=h2,C3=g2,ok2.transition=f2}else a2.current=c;if(vk&&(vk=!1,wk=a2,xk=e2),f2=a2.pendingLanes,f2===0&&(Ri=null),mc(c.stateNode),Dk(a2,B2()),b2!==null)for(d2=a2.onRecoverableError,c=0;c<b2.length;c++)e2=b2[c],d2(e2.value,{componentStack:e2.stack,digest:e2.digest});if(Oi)throw Oi=!1,a2=Pi,Pi=null,a2;return(xk&1)!==0&&a2.tag!==0&&Hk(),f2=a2.pendingLanes,(f2&1)!==0?a2===zk?yk++:(yk=0,zk=a2):yk=0,jg(),null}__name(Wk,"Wk");function Hk(){if(wk!==null){var a2=Dc(xk),b2=ok2.transition,c=C3;try{if(ok2.transition=null,C3=16>a2?16:a2,wk===null)var d2=!1;else{if(a2=wk,wk=null,xk=0,(K2&6)!==0)throw Error(p2(331));var e2=K2;for(K2|=4,V2=a2.current;V2!==null;){var f2=V2,g2=f2.child;if((V2.flags&16)!==0){var h2=f2.deletions;if(h2!==null){for(var k2=0;k2<h2.length;k2++){var l2=h2[k2];for(V2=l2;V2!==null;){var m2=V2;switch(m2.tag){case 0:case 11:case 15:Pj(8,m2,f2)}var q2=m2.child;if(q2!==null)q2.return=m2,V2=q2;else for(;V2!==null;){m2=V2;var r2=m2.sibling,y2=m2.return;if(Sj(m2),m2===l2){V2=null;break}if(r2!==null){r2.return=y2,V2=r2;break}V2=y2}}}var n3=f2.alternate;if(n3!==null){var t2=n3.child;if(t2!==null){n3.child=null;do{var J2=t2.sibling;t2.sibling=null,t2=J2}while(t2!==null)}}V2=f2}}if((f2.subtreeFlags&2064)!==0&&g2!==null)g2.return=f2,V2=g2;else b:for(;V2!==null;){if(f2=V2,(f2.flags&2048)!==0)switch(f2.tag){case 0:case 11:case 15:Pj(9,f2,f2.return)}var x2=f2.sibling;if(x2!==null){x2.return=f2.return,V2=x2;break b}V2=f2.return}}var w2=a2.current;for(V2=w2;V2!==null;){g2=V2;var u2=g2.child;if((g2.subtreeFlags&2064)!==0&&u2!==null)u2.return=g2,V2=u2;else b:for(g2=w2;V2!==null;){if(h2=V2,(h2.flags&2048)!==0)try{switch(h2.tag){case 0:case 11:case 15:Qj(9,h2)}}catch(na){W2(h2,h2.return,na)}if(h2===g2){V2=null;break b}var F2=h2.sibling;if(F2!==null){F2.return=h2.return,V2=F2;break b}V2=h2.return}}if(K2=e2,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a2)}catch{}d2=!0}return d2}finally{C3=c,ok2.transition=b2}}return!1}__name(Hk,"Hk");function Xk(a2,b2,c){b2=Ji(c,b2),b2=Ni(a2,b2,1),a2=nh(a2,b2,1),b2=R2(),a2!==null&&(Ac(a2,1,b2),Dk(a2,b2))}__name(Xk,"Xk");function W2(a2,b2,c){if(a2.tag===3)Xk(a2,a2,c);else for(;b2!==null;){if(b2.tag===3){Xk(b2,a2,c);break}else if(b2.tag===1){var d2=b2.stateNode;if(typeof b2.type.getDerivedStateFromError=="function"||typeof d2.componentDidCatch=="function"&&(Ri===null||!Ri.has(d2))){a2=Ji(c,a2),a2=Qi(b2,a2,1),b2=nh(b2,a2,1),a2=R2(),b2!==null&&(Ac(b2,1,a2),Dk(b2,a2));break}}b2=b2.return}}__name(W2,"W");function Ti(a2,b2,c){var d2=a2.pingCache;d2!==null&&d2.delete(b2),b2=R2(),a2.pingedLanes|=a2.suspendedLanes&c,Q2===a2&&(Z2&c)===c&&(T2===4||T2===3&&(Z2&130023424)===Z2&&500>B2()-fk?Kk(a2,0):rk|=c),Dk(a2,b2)}__name(Ti,"Ti");function Yk(a2,b2){b2===0&&((a2.mode&1)===0?b2=1:(b2=sc,sc<<=1,(sc&130023424)===0&&(sc=4194304)));var c=R2();a2=ih(a2,b2),a2!==null&&(Ac(a2,b2,c),Dk(a2,c))}__name(Yk,"Yk");function uj(a2){var b2=a2.memoizedState,c=0;b2!==null&&(c=b2.retryLane),Yk(a2,c)}__name(uj,"uj");function bk(a2,b2){var c=0;switch(a2.tag){case 13:var d2=a2.stateNode,e2=a2.memoizedState;e2!==null&&(c=e2.retryLane);break;case 19:d2=a2.stateNode;break;default:throw Error(p2(314))}d2!==null&&d2.delete(b2),Yk(a2,c)}__name(bk,"bk");var Vk;Vk=__name(function(a2,b2,c){if(a2!==null)if(a2.memoizedProps!==b2.pendingProps||Wf.current)dh=!0;else{if((a2.lanes&c)===0&&(b2.flags&128)===0)return dh=!1,yj(a2,b2,c);dh=(a2.flags&131072)!==0}else dh=!1,I2&&(b2.flags&1048576)!==0&&ug(b2,ng,b2.index);switch(b2.lanes=0,b2.tag){case 2:var d2=b2.type;ij(a2,b2),a2=b2.pendingProps;var e2=Yf(b2,H2.current);ch(b2,c),e2=Nh(null,b2,d2,a2,e2,c);var f2=Sh();return b2.flags|=1,typeof e2=="object"&&e2!==null&&typeof e2.render=="function"&&e2.$$typeof===void 0?(b2.tag=1,b2.memoizedState=null,b2.updateQueue=null,Zf(d2)?(f2=!0,cg(b2)):f2=!1,b2.memoizedState=e2.state!==null&&e2.state!==void 0?e2.state:null,kh(b2),e2.updater=Ei,b2.stateNode=e2,e2._reactInternals=b2,Ii(b2,d2,a2,c),b2=jj(null,b2,d2,!0,f2,c)):(b2.tag=0,I2&&f2&&vg(b2),Xi(null,b2,e2,c),b2=b2.child),b2;case 16:d2=b2.elementType;a:{switch(ij(a2,b2),a2=b2.pendingProps,e2=d2._init,d2=e2(d2._payload),b2.type=d2,e2=b2.tag=Zk(d2),a2=Ci(d2,a2),e2){case 0:b2=cj(null,b2,d2,a2,c);break a;case 1:b2=hj(null,b2,d2,a2,c);break a;case 11:b2=Yi(null,b2,d2,a2,c);break a;case 14:b2=$i(null,b2,d2,Ci(d2.type,a2),c);break a}throw Error(p2(306,d2,""))}return b2;case 0:return d2=b2.type,e2=b2.pendingProps,e2=b2.elementType===d2?e2:Ci(d2,e2),cj(a2,b2,d2,e2,c);case 1:return d2=b2.type,e2=b2.pendingProps,e2=b2.elementType===d2?e2:Ci(d2,e2),hj(a2,b2,d2,e2,c);case 3:a:{if(kj(b2),a2===null)throw Error(p2(387));d2=b2.pendingProps,f2=b2.memoizedState,e2=f2.element,lh(a2,b2),qh(b2,d2,null,c);var g2=b2.memoizedState;if(d2=g2.element,f2.isDehydrated)if(f2={element:d2,isDehydrated:!1,cache:g2.cache,pendingSuspenseBoundaries:g2.pendingSuspenseBoundaries,transitions:g2.transitions},b2.updateQueue.baseState=f2,b2.memoizedState=f2,b2.flags&256){e2=Ji(Error(p2(423)),b2),b2=lj(a2,b2,d2,c,e2);break a}else if(d2!==e2){e2=Ji(Error(p2(424)),b2),b2=lj(a2,b2,d2,c,e2);break a}else for(yg=Lf(b2.stateNode.containerInfo.firstChild),xg=b2,I2=!0,zg=null,c=Vg(b2,null,d2,c),b2.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ig(),d2===e2){b2=Zi(a2,b2,c);break a}Xi(a2,b2,d2,c)}b2=b2.child}return b2;case 5:return Ah(b2),a2===null&&Eg(b2),d2=b2.type,e2=b2.pendingProps,f2=a2!==null?a2.memoizedProps:null,g2=e2.children,Ef(d2,e2)?g2=null:f2!==null&&Ef(d2,f2)&&(b2.flags|=32),gj(a2,b2),Xi(a2,b2,g2,c),b2.child;case 6:return a2===null&&Eg(b2),null;case 13:return oj(a2,b2,c);case 4:return yh(b2,b2.stateNode.containerInfo),d2=b2.pendingProps,a2===null?b2.child=Ug(b2,null,d2,c):Xi(a2,b2,d2,c),b2.child;case 11:return d2=b2.type,e2=b2.pendingProps,e2=b2.elementType===d2?e2:Ci(d2,e2),Yi(a2,b2,d2,e2,c);case 7:return Xi(a2,b2,b2.pendingProps,c),b2.child;case 8:return Xi(a2,b2,b2.pendingProps.children,c),b2.child;case 12:return Xi(a2,b2,b2.pendingProps.children,c),b2.child;case 10:a:{if(d2=b2.type._context,e2=b2.pendingProps,f2=b2.memoizedProps,g2=e2.value,G2(Wg,d2._currentValue),d2._currentValue=g2,f2!==null)if(He2(f2.value,g2)){if(f2.children===e2.children&&!Wf.current){b2=Zi(a2,b2,c);break a}}else for(f2=b2.child,f2!==null&&(f2.return=b2);f2!==null;){var h2=f2.dependencies;if(h2!==null){g2=f2.child;for(var k2=h2.firstContext;k2!==null;){if(k2.context===d2){if(f2.tag===1){k2=mh(-1,c&-c),k2.tag=2;var l2=f2.updateQueue;if(l2!==null){l2=l2.shared;var m2=l2.pending;m2===null?k2.next=k2:(k2.next=m2.next,m2.next=k2),l2.pending=k2}}f2.lanes|=c,k2=f2.alternate,k2!==null&&(k2.lanes|=c),bh(f2.return,c,b2),h2.lanes|=c;break}k2=k2.next}}else if(f2.tag===10)g2=f2.type===b2.type?null:f2.child;else if(f2.tag===18){if(g2=f2.return,g2===null)throw Error(p2(341));g2.lanes|=c,h2=g2.alternate,h2!==null&&(h2.lanes|=c),bh(g2,c,b2),g2=f2.sibling}else g2=f2.child;if(g2!==null)g2.return=f2;else for(g2=f2;g2!==null;){if(g2===b2){g2=null;break}if(f2=g2.sibling,f2!==null){f2.return=g2.return,g2=f2;break}g2=g2.return}f2=g2}Xi(a2,b2,e2.children,c),b2=b2.child}return b2;case 9:return e2=b2.type,d2=b2.pendingProps.children,ch(b2,c),e2=eh(e2),d2=d2(e2),b2.flags|=1,Xi(a2,b2,d2,c),b2.child;case 14:return d2=b2.type,e2=Ci(d2,b2.pendingProps),e2=Ci(d2.type,e2),$i(a2,b2,d2,e2,c);case 15:return bj(a2,b2,b2.type,b2.pendingProps,c);case 17:return d2=b2.type,e2=b2.pendingProps,e2=b2.elementType===d2?e2:Ci(d2,e2),ij(a2,b2),b2.tag=1,Zf(d2)?(a2=!0,cg(b2)):a2=!1,ch(b2,c),Gi(b2,d2,e2),Ii(b2,d2,e2,c),jj(null,b2,d2,!0,a2,c);case 19:return xj(a2,b2,c);case 22:return dj(a2,b2,c)}throw Error(p2(156,b2.tag))},"Vk");function Fk(a2,b2){return ac(a2,b2)}__name(Fk,"Fk");function $k(a2,b2,c,d2){this.tag=a2,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b2,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d2,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}__name($k,"$k");function Bg(a2,b2,c,d2){return new $k(a2,b2,c,d2)}__name(Bg,"Bg");function aj(a2){return a2=a2.prototype,!(!a2||!a2.isReactComponent)}__name(aj,"aj");function Zk(a2){if(typeof a2=="function")return aj(a2)?1:0;if(a2!=null){if(a2=a2.$$typeof,a2===Da)return 11;if(a2===Ga)return 14}return 2}__name(Zk,"Zk");function Pg(a2,b2){var c=a2.alternate;return c===null?(c=Bg(a2.tag,b2,a2.key,a2.mode),c.elementType=a2.elementType,c.type=a2.type,c.stateNode=a2.stateNode,c.alternate=a2,a2.alternate=c):(c.pendingProps=b2,c.type=a2.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a2.flags&14680064,c.childLanes=a2.childLanes,c.lanes=a2.lanes,c.child=a2.child,c.memoizedProps=a2.memoizedProps,c.memoizedState=a2.memoizedState,c.updateQueue=a2.updateQueue,b2=a2.dependencies,c.dependencies=b2===null?null:{lanes:b2.lanes,firstContext:b2.firstContext},c.sibling=a2.sibling,c.index=a2.index,c.ref=a2.ref,c}__name(Pg,"Pg");function Rg(a2,b2,c,d2,e2,f2){var g2=2;if(d2=a2,typeof a2=="function")aj(a2)&&(g2=1);else if(typeof a2=="string")g2=5;else a:switch(a2){case ya:return Tg(c.children,e2,f2,b2);case za:g2=8,e2|=8;break;case Aa:return a2=Bg(12,c,b2,e2|2),a2.elementType=Aa,a2.lanes=f2,a2;case Ea:return a2=Bg(13,c,b2,e2),a2.elementType=Ea,a2.lanes=f2,a2;case Fa:return a2=Bg(19,c,b2,e2),a2.elementType=Fa,a2.lanes=f2,a2;case Ia:return pj(c,e2,f2,b2);default:if(typeof a2=="object"&&a2!==null)switch(a2.$$typeof){case Ba:g2=10;break a;case Ca:g2=9;break a;case Da:g2=11;break a;case Ga:g2=14;break a;case Ha:g2=16,d2=null;break a}throw Error(p2(130,a2==null?a2:typeof a2,""))}return b2=Bg(g2,c,b2,e2),b2.elementType=a2,b2.type=d2,b2.lanes=f2,b2}__name(Rg,"Rg");function Tg(a2,b2,c,d2){return a2=Bg(7,a2,d2,b2),a2.lanes=c,a2}__name(Tg,"Tg");function pj(a2,b2,c,d2){return a2=Bg(22,a2,d2,b2),a2.elementType=Ia,a2.lanes=c,a2.stateNode={isHidden:!1},a2}__name(pj,"pj");function Qg(a2,b2,c){return a2=Bg(6,a2,null,b2),a2.lanes=c,a2}__name(Qg,"Qg");function Sg(a2,b2,c){return b2=Bg(4,a2.children!==null?a2.children:[],a2.key,b2),b2.lanes=c,b2.stateNode={containerInfo:a2.containerInfo,pendingChildren:null,implementation:a2.implementation},b2}__name(Sg,"Sg");function al(a2,b2,c,d2,e2){this.tag=b2,this.containerInfo=a2,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d2,this.onRecoverableError=e2,this.mutableSourceEagerHydrationData=null}__name(al,"al");function bl(a2,b2,c,d2,e2,f2,g2,h2,k2){return a2=new al(a2,b2,c,h2,k2),b2===1?(b2=1,f2===!0&&(b2|=8)):b2=0,f2=Bg(3,null,null,b2),a2.current=f2,f2.stateNode=a2,f2.memoizedState={element:d2,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(f2),a2}__name(bl,"bl");function cl(a2,b2,c){var d2=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d2==null?null:""+d2,children:a2,containerInfo:b2,implementation:c}}__name(cl,"cl");function dl(a2){if(!a2)return Vf;a2=a2._reactInternals;a:{if(Vb(a2)!==a2||a2.tag!==1)throw Error(p2(170));var b2=a2;do{switch(b2.tag){case 3:b2=b2.stateNode.context;break a;case 1:if(Zf(b2.type)){b2=b2.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b2=b2.return}while(b2!==null);throw Error(p2(171))}if(a2.tag===1){var c=a2.type;if(Zf(c))return bg(a2,c,b2)}return b2}__name(dl,"dl");function el(a2,b2,c,d2,e2,f2,g2,h2,k2){return a2=bl(c,d2,!0,a2,e2,f2,g2,h2,k2),a2.context=dl(null),c=a2.current,d2=R2(),e2=yi(c),f2=mh(d2,e2),f2.callback=b2??null,nh(c,f2,e2),a2.current.lanes=e2,Ac(a2,e2,d2),Dk(a2,d2),a2}__name(el,"el");function fl(a2,b2,c,d2){var e2=b2.current,f2=R2(),g2=yi(e2);return c=dl(c),b2.context===null?b2.context=c:b2.pendingContext=c,b2=mh(f2,g2),b2.payload={element:a2},d2=d2===void 0?null:d2,d2!==null&&(b2.callback=d2),a2=nh(e2,b2,g2),a2!==null&&(gi(a2,e2,g2,f2),oh(a2,e2,g2)),g2}__name(fl,"fl");function gl2(a2){if(a2=a2.current,!a2.child)return null;switch(a2.child.tag){case 5:return a2.child.stateNode;default:return a2.child.stateNode}}__name(gl2,"gl");function hl(a2,b2){if(a2=a2.memoizedState,a2!==null&&a2.dehydrated!==null){var c=a2.retryLane;a2.retryLane=c!==0&&c<b2?c:b2}}__name(hl,"hl");function il(a2,b2){hl(a2,b2),(a2=a2.alternate)&&hl(a2,b2)}__name(il,"il");function jl(){return null}__name(jl,"jl");var kl=typeof reportError=="function"?reportError:function(a2){console.error(a2)};function ll(a2){this._internalRoot=a2}__name(ll,"ll"),ml.prototype.render=ll.prototype.render=function(a2){var b2=this._internalRoot;if(b2===null)throw Error(p2(409));fl(a2,b2,null,null)},ml.prototype.unmount=ll.prototype.unmount=function(){var a2=this._internalRoot;if(a2!==null){this._internalRoot=null;var b2=a2.containerInfo;Rk(function(){fl(null,a2,null,null)}),b2[uf]=null}};function ml(a2){this._internalRoot=a2}__name(ml,"ml"),ml.prototype.unstable_scheduleHydration=function(a2){if(a2){var b2=Hc();a2={blockedOn:null,target:a2,priority:b2};for(var c=0;c<Qc.length&&b2!==0&&b2<Qc[c].priority;c++);Qc.splice(c,0,a2),c===0&&Vc(a2)}};function nl(a2){return!(!a2||a2.nodeType!==1&&a2.nodeType!==9&&a2.nodeType!==11)}__name(nl,"nl");function ol(a2){return!(!a2||a2.nodeType!==1&&a2.nodeType!==9&&a2.nodeType!==11&&(a2.nodeType!==8||a2.nodeValue!==" react-mount-point-unstable "))}__name(ol,"ol");function pl(){}__name(pl,"pl");function ql(a2,b2,c,d2,e2){if(e2){if(typeof d2=="function"){var f2=d2;d2=__name(function(){var a3=gl2(g2);f2.call(a3)},"d")}var g2=el(b2,d2,a2,0,null,!1,!1,"",pl);return a2._reactRootContainer=g2,a2[uf]=g2.current,sf(a2.nodeType===8?a2.parentNode:a2),Rk(),g2}for(;e2=a2.lastChild;)a2.removeChild(e2);if(typeof d2=="function"){var h2=d2;d2=__name(function(){var a3=gl2(k2);h2.call(a3)},"d")}var k2=bl(a2,0,!1,null,null,!1,!1,"",pl);return a2._reactRootContainer=k2,a2[uf]=k2.current,sf(a2.nodeType===8?a2.parentNode:a2),Rk(function(){fl(b2,k2,c,d2)}),k2}__name(ql,"ql");function rl(a2,b2,c,d2,e2){var f2=c._reactRootContainer;if(f2){var g2=f2;if(typeof e2=="function"){var h2=e2;e2=__name(function(){var a3=gl2(g2);h2.call(a3)},"e")}fl(b2,g2,a2,e2)}else g2=ql(c,b2,a2,e2,d2);return gl2(g2)}__name(rl,"rl"),Ec=__name(function(a2){switch(a2.tag){case 3:var b2=a2.stateNode;if(b2.current.memoizedState.isDehydrated){var c=tc(b2.pendingLanes);c!==0&&(Cc(b2,c|1),Dk(b2,B2()),(K2&6)===0&&(Gj=B2()+500,jg()))}break;case 13:Rk(function(){var b3=ih(a2,1);if(b3!==null){var c2=R2();gi(b3,a2,1,c2)}}),il(a2,1)}},"Ec"),Fc=__name(function(a2){if(a2.tag===13){var b2=ih(a2,134217728);if(b2!==null){var c=R2();gi(b2,a2,134217728,c)}il(a2,134217728)}},"Fc"),Gc=__name(function(a2){if(a2.tag===13){var b2=yi(a2),c=ih(a2,b2);if(c!==null){var d2=R2();gi(c,a2,b2,d2)}il(a2,b2)}},"Gc"),Hc=__name(function(){return C3},"Hc"),Ic=__name(function(a2,b2){var c=C3;try{return C3=a2,b2()}finally{C3=c}},"Ic"),yb=__name(function(a2,b2,c){switch(b2){case"input":if(bb(a2,c),b2=c.name,c.type==="radio"&&b2!=null){for(c=a2;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+b2)+'][type="radio"]'),b2=0;b2<c.length;b2++){var d2=c[b2];if(d2!==a2&&d2.form===a2.form){var e2=Db(d2);if(!e2)throw Error(p2(90));Wa(d2),bb(d2,e2)}}}break;case"textarea":ib(a2,c);break;case"select":b2=c.value,b2!=null&&fb(a2,!!c.multiple,b2,!1)}},"yb"),Gb=Qk,Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue2,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:__name(function(a2){return a2=Zb(a2),a2===null?null:a2.stateNode},"findHostInstanceByFiber"),findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl,reactDom_production_min.createPortal=function(a2,b2){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(b2))throw Error(p2(200));return cl(a2,b2,null,c)},reactDom_production_min.createRoot=function(a2,b2){if(!nl(a2))throw Error(p2(299));var c=!1,d2="",e2=kl;return b2!=null&&(b2.unstable_strictMode===!0&&(c=!0),b2.identifierPrefix!==void 0&&(d2=b2.identifierPrefix),b2.onRecoverableError!==void 0&&(e2=b2.onRecoverableError)),b2=bl(a2,1,!1,null,null,c,!1,d2,e2),a2[uf]=b2.current,sf(a2.nodeType===8?a2.parentNode:a2),new ll(b2)},reactDom_production_min.findDOMNode=function(a2){if(a2==null)return null;if(a2.nodeType===1)return a2;var b2=a2._reactInternals;if(b2===void 0)throw typeof a2.render=="function"?Error(p2(188)):(a2=Object.keys(a2).join(","),Error(p2(268,a2)));return a2=Zb(b2),a2=a2===null?null:a2.stateNode,a2},reactDom_production_min.flushSync=function(a2){return Rk(a2)},reactDom_production_min.hydrate=function(a2,b2,c){if(!ol(b2))throw Error(p2(200));return rl(null,a2,b2,!0,c)},reactDom_production_min.hydrateRoot=function(a2,b2,c){if(!nl(a2))throw Error(p2(405));var d2=c!=null&&c.hydratedSources||null,e2=!1,f2="",g2=kl;if(c!=null&&(c.unstable_strictMode===!0&&(e2=!0),c.identifierPrefix!==void 0&&(f2=c.identifierPrefix),c.onRecoverableError!==void 0&&(g2=c.onRecoverableError)),b2=el(b2,null,a2,1,c??null,e2,!1,f2,g2),a2[uf]=b2.current,sf(a2),d2)for(a2=0;a2<d2.length;a2++)c=d2[a2],e2=c._getVersion,e2=e2(c._source),b2.mutableSourceEagerHydrationData==null?b2.mutableSourceEagerHydrationData=[c,e2]:b2.mutableSourceEagerHydrationData.push(c,e2);return new ml(b2)},reactDom_production_min.render=function(a2,b2,c){if(!ol(b2))throw Error(p2(200));return rl(null,a2,b2,!1,c)},reactDom_production_min.unmountComponentAtNode=function(a2){if(!ol(a2))throw Error(p2(40));return a2._reactRootContainer?(Rk(function(){rl(null,null,a2,!1,function(){a2._reactRootContainer=null,a2[uf]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Qk,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a2,b2,c,d2){if(!ol(c))throw Error(p2(200));if(a2==null||a2._reactInternals===void 0)throw Error(p2(38));return rl(a2,b2,c,!1,d2)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}__name(requireReactDom_production_min,"requireReactDom_production_min");var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}return __name(checkDCE,"checkDCE"),checkDCE(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}__name(requireReactDom,"requireReactDom");var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var m2=requireReactDom();return client.createRoot=m2.createRoot,client.hydrateRoot=m2.hydrateRoot,client}__name(requireClient,"requireClient");var clientExports=requireClient(),dist$1={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist$1;hasRequiredDist=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.parse=parse2,dist$1.serialize=serialize;const cookieNameRegExp=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,cookieValueRegExp=/^[\u0021-\u003A\u003C-\u007E]*$/,domainValueRegExp=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,pathValueRegExp=/^[\u0020-\u003A\u003D-\u007E]*$/,__toString=Object.prototype.toString,NullObject=(()=>{const C3=__name(function(){},"C");return C3.prototype=Object.create(null),C3})();function parse2(str,options){const obj=new NullObject,len=str.length;if(len<2)return obj;const dec=(options==null?void 0:options.decode)||decode;let index=0;do{const eqIdx=str.indexOf("=",index);if(eqIdx===-1)break;const colonIdx=str.indexOf(";",index),endIdx=colonIdx===-1?len:colonIdx;if(eqIdx>endIdx){index=str.lastIndexOf(";",eqIdx-1)+1;continue}const keyStartIdx=startIndex(str,index,eqIdx),keyEndIdx=endIndex(str,eqIdx,keyStartIdx),key=str.slice(keyStartIdx,keyEndIdx);if(obj[key]===void 0){let valStartIdx=startIndex(str,eqIdx+1,endIdx),valEndIdx=endIndex(str,endIdx,valStartIdx);const value=dec(str.slice(valStartIdx,valEndIdx));obj[key]=value}index=endIdx+1}while(index<len);return obj}__name(parse2,"parse");function startIndex(str,index,max2){do{const code=str.charCodeAt(index);if(code!==32&&code!==9)return index}while(++index<max2);return max2}__name(startIndex,"startIndex");function endIndex(str,index,min2){for(;index>min2;){const code=str.charCodeAt(--index);if(code!==32&&code!==9)return index+1}return min2}__name(endIndex,"endIndex");function serialize(name2,val,options){const enc=(options==null?void 0:options.encode)||encodeURIComponent;if(!cookieNameRegExp.test(name2))throw new TypeError(`argument name is invalid: ${name2}`);const value=enc(val);if(!cookieValueRegExp.test(value))throw new TypeError(`argument val is invalid: ${val}`);let str=name2+"="+value;if(!options)return str;if(options.maxAge!==void 0){if(!Number.isInteger(options.maxAge))throw new TypeError(`option maxAge is invalid: ${options.maxAge}`);str+="; Max-Age="+options.maxAge}if(options.domain){if(!domainValueRegExp.test(options.domain))throw new TypeError(`option domain is invalid: ${options.domain}`);str+="; Domain="+options.domain}if(options.path){if(!pathValueRegExp.test(options.path))throw new TypeError(`option path is invalid: ${options.path}`);str+="; Path="+options.path}if(options.expires){if(!isDate2(options.expires)||!Number.isFinite(options.expires.valueOf()))throw new TypeError(`option expires is invalid: ${options.expires}`);str+="; Expires="+options.expires.toUTCString()}if(options.httpOnly&&(str+="; HttpOnly"),options.secure&&(str+="; Secure"),options.partitioned&&(str+="; Partitioned"),options.priority)switch(typeof options.priority=="string"?options.priority.toLowerCase():void 0){case"low":str+="; Priority=Low";break;case"medium":str+="; Priority=Medium";break;case"high":str+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${options.priority}`)}if(options.sameSite)switch(typeof options.sameSite=="string"?options.sameSite.toLowerCase():options.sameSite){case!0:case"strict":str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"none":str+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${options.sameSite}`)}return str}__name(serialize,"serialize");function decode(str){if(str.indexOf("%")===-1)return str;try{return decodeURIComponent(str)}catch{return str}}__name(decode,"decode");function isDate2(val){return __toString.call(val)==="[object Date]"}return __name(isDate2,"isDate"),dist$1}__name(requireDist,"requireDist");requireDist();var PopStateEventType="popstate";function createHashHistory(options={}){function createHashLocation(window2,globalHistory){let{pathname="/",search="",hash=""}=parsePath(window2.location.hash.substring(1));return!pathname.startsWith("/")&&!pathname.startsWith(".")&&(pathname="/"+pathname),createLocation("",{pathname,search,hash},globalHistory.state&&globalHistory.state.usr||null,globalHistory.state&&globalHistory.state.key||"default")}__name(createHashLocation,"createHashLocation");function createHashHref(window2,to){let base=window2.document.querySelector("base"),href2="";if(base&&base.getAttribute("href")){let url2=window2.location.href,hashIndex=url2.indexOf("#");href2=hashIndex===-1?url2:url2.slice(0,hashIndex)}return href2+"#"+(typeof to=="string"?to:createPath(to))}__name(createHashHref,"createHashHref");function validateHashLocation(location,to){warning(location.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(to)})`)}return __name(validateHashLocation,"validateHashLocation"),getUrlBasedHistory(createHashLocation,createHashHref,validateHashLocation,options)}__name(createHashHistory,"createHashHistory");function invariant(value,message){if(value===!1||value===null||typeof value>"u")throw new Error(message)}__name(invariant,"invariant");function warning(cond,message){if(!cond){typeof console<"u"&&console.warn(message);try{throw new Error(message)}catch{}}}__name(warning,"warning");function createKey(){return Math.random().toString(36).substring(2,10)}__name(createKey,"createKey");function getHistoryState(location,index){return{usr:location.state,key:location.key,idx:index}}__name(getHistoryState,"getHistoryState");function createLocation(current,to,state=null,key){return{pathname:typeof current=="string"?current:current.pathname,search:"",hash:"",...typeof to=="string"?parsePath(to):to,state,key:to&&to.key||key||createKey()}}__name(createLocation,"createLocation");function createPath({pathname="/",search="",hash=""}){return search&&search!=="?"&&(pathname+=search.charAt(0)==="?"?search:"?"+search),hash&&hash!=="#"&&(pathname+=hash.charAt(0)==="#"?hash:"#"+hash),pathname}__name(createPath,"createPath");function parsePath(path){let parsedPath={};if(path){let hashIndex=path.indexOf("#");hashIndex>=0&&(parsedPath.hash=path.substring(hashIndex),path=path.substring(0,hashIndex));let searchIndex=path.indexOf("?");searchIndex>=0&&(parsedPath.search=path.substring(searchIndex),path=path.substring(0,searchIndex)),path&&(parsedPath.pathname=path)}return parsedPath}__name(parsePath,"parsePath");function getUrlBasedHistory(getLocation,createHref2,validateLocation,options={}){let{window:window2=document.defaultView,v5Compat=!1}=options,globalHistory=window2.history,action="POP",listener=null,index=getIndex();index==null&&(index=0,globalHistory.replaceState({...globalHistory.state,idx:index},""));function getIndex(){return(globalHistory.state||{idx:null}).idx}__name(getIndex,"getIndex");function handlePop(){action="POP";let nextIndex=getIndex(),delta=nextIndex==null?null:nextIndex-index;index=nextIndex,listener&&listener({action,location:history.location,delta})}__name(handlePop,"handlePop");function push(to,state){action="PUSH";let location=createLocation(history.location,to,state);validateLocation&&validateLocation(location,to),index=getIndex()+1;let historyState=getHistoryState(location,index),url2=history.createHref(location);try{globalHistory.pushState(historyState,"",url2)}catch(error){if(error instanceof DOMException&&error.name==="DataCloneError")throw error;window2.location.assign(url2)}v5Compat&&listener&&listener({action,location:history.location,delta:1})}__name(push,"push");function replace2(to,state){action="REPLACE";let location=createLocation(history.location,to,state);validateLocation&&validateLocation(location,to),index=getIndex();let historyState=getHistoryState(location,index),url2=history.createHref(location);globalHistory.replaceState(historyState,"",url2),v5Compat&&listener&&listener({action,location:history.location,delta:0})}__name(replace2,"replace2");function createURL(to){return createBrowserURLImpl(to)}__name(createURL,"createURL");let history={get action(){return action},get location(){return getLocation(window2,globalHistory)},listen(fn){if(listener)throw new Error("A history only accepts one active listener");return window2.addEventListener(PopStateEventType,handlePop),listener=fn,()=>{window2.removeEventListener(PopStateEventType,handlePop),listener=null}},createHref(to){return createHref2(window2,to)},createURL,encodeLocation(to){let url2=createURL(to);return{pathname:url2.pathname,search:url2.search,hash:url2.hash}},push,replace:replace2,go(n3){return globalHistory.go(n3)}};return history}__name(getUrlBasedHistory,"getUrlBasedHistory");function createBrowserURLImpl(to,isAbsolute=!1){let base="http://localhost";typeof window<"u"&&(base=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(base,"No window.location.(origin|href) available to create URL");let href2=typeof to=="string"?to:createPath(to);return href2=href2.replace(/ $/,"%20"),!isAbsolute&&href2.startsWith("//")&&(href2=base+href2),new URL(href2,base)}__name(createBrowserURLImpl,"createBrowserURLImpl");function matchRoutes(routes,locationArg,basename="/"){return matchRoutesImpl(routes,locationArg,basename,!1)}__name(matchRoutes,"matchRoutes");function matchRoutesImpl(routes,locationArg,basename,allowPartial){let location=typeof locationArg=="string"?parsePath(locationArg):locationArg,pathname=stripBasename(location.pathname||"/",basename);if(pathname==null)return null;let branches=flattenRoutes(routes);rankRouteBranches(branches);let matches=null;for(let i2=0;matches==null&&i2<branches.length;++i2){let decoded=decodePath(pathname);matches=matchRouteBranch(branches[i2],decoded,allowPartial)}return matches}__name(matchRoutesImpl,"matchRoutesImpl");function flattenRoutes(routes,branches=[],parentsMeta=[],parentPath=""){let flattenRoute=__name((route,index,relativePath)=>{let meta={relativePath:relativePath===void 0?route.path||"":relativePath,caseSensitive:route.caseSensitive===!0,childrenIndex:index,route};meta.relativePath.startsWith("/")&&(invariant(meta.relativePath.startsWith(parentPath),`Absolute route path "${meta.relativePath}" nested under path "${parentPath}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),meta.relativePath=meta.relativePath.slice(parentPath.length));let path=joinPaths([parentPath,meta.relativePath]),routesMeta=parentsMeta.concat(meta);route.children&&route.children.length>0&&(invariant(route.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${path}".`),flattenRoutes(route.children,branches,routesMeta,path)),!(route.path==null&&!route.index)&&branches.push({path,score:computeScore(path,route.index),routesMeta})},"flattenRoute");return routes.forEach((route,index)=>{var _a26;if(route.path===""||!((_a26=route.path)!=null&&_a26.includes("?")))flattenRoute(route,index);else for(let exploded of explodeOptionalSegments(route.path))flattenRoute(route,index,exploded)}),branches}__name(flattenRoutes,"flattenRoutes");function explodeOptionalSegments(path){let segments=path.split("/");if(segments.length===0)return[];let[first,...rest]=segments,isOptional=first.endsWith("?"),required=first.replace(/\?$/,"");if(rest.length===0)return isOptional?[required,""]:[required];let restExploded=explodeOptionalSegments(rest.join("/")),result=[];return result.push(...restExploded.map(subpath=>subpath===""?required:[required,subpath].join("/"))),isOptional&&result.push(...restExploded),result.map(exploded=>path.startsWith("/")&&exploded===""?"/":exploded)}__name(explodeOptionalSegments,"explodeOptionalSegments");function rankRouteBranches(branches){branches.sort((a2,b2)=>a2.score!==b2.score?b2.score-a2.score:compareIndexes(a2.routesMeta.map(meta=>meta.childrenIndex),b2.routesMeta.map(meta=>meta.childrenIndex)))}__name(rankRouteBranches,"rankRouteBranches");var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=__name(s2=>s2==="*","isSplat");function computeScore(path,index){let segments=path.split("/"),initialScore=segments.length;return segments.some(isSplat)&&(initialScore+=splatPenalty),index&&(initialScore+=indexRouteValue),segments.filter(s2=>!isSplat(s2)).reduce((score,segment)=>score+(paramRe.test(segment)?dynamicSegmentValue:segment===""?emptySegmentValue:staticSegmentValue),initialScore)}__name(computeScore,"computeScore");function compareIndexes(a2,b2){return a2.length===b2.length&&a2.slice(0,-1).every((n3,i2)=>n3===b2[i2])?a2[a2.length-1]-b2[b2.length-1]:0}__name(compareIndexes,"compareIndexes");function matchRouteBranch(branch,pathname,allowPartial=!1){let{routesMeta}=branch,matchedParams={},matchedPathname="/",matches=[];for(let i2=0;i2<routesMeta.length;++i2){let meta=routesMeta[i2],end=i2===routesMeta.length-1,remainingPathname=matchedPathname==="/"?pathname:pathname.slice(matchedPathname.length)||"/",match=matchPath({path:meta.relativePath,caseSensitive:meta.caseSensitive,end},remainingPathname),route=meta.route;if(!match&&end&&allowPartial&&!routesMeta[routesMeta.length-1].route.index&&(match=matchPath({path:meta.relativePath,caseSensitive:meta.caseSensitive,end:!1},remainingPathname)),!match)return null;Object.assign(matchedParams,match.params),matches.push({params:matchedParams,pathname:joinPaths([matchedPathname,match.pathname]),pathnameBase:normalizePathname(joinPaths([matchedPathname,match.pathnameBase])),route}),match.pathnameBase!=="/"&&(matchedPathname=joinPaths([matchedPathname,match.pathnameBase]))}return matches}__name(matchRouteBranch,"matchRouteBranch");function matchPath(pattern,pathname){typeof pattern=="string"&&(pattern={path:pattern,caseSensitive:!1,end:!0});let[matcher,compiledParams]=compilePath(pattern.path,pattern.caseSensitive,pattern.end),match=pathname.match(matcher);if(!match)return null;let matchedPathname=match[0],pathnameBase=matchedPathname.replace(/(.)\/+$/,"$1"),captureGroups=match.slice(1);return{params:compiledParams.reduce((memo2,{paramName,isOptional},index)=>{if(paramName==="*"){let splatValue=captureGroups[index]||"";pathnameBase=matchedPathname.slice(0,matchedPathname.length-splatValue.length).replace(/(.)\/+$/,"$1")}const value=captureGroups[index];return isOptional&&!value?memo2[paramName]=void 0:memo2[paramName]=(value||"").replace(/%2F/g,"/"),memo2},{}),pathname:matchedPathname,pathnameBase,pattern}}__name(matchPath,"matchPath");function compilePath(path,caseSensitive=!1,end=!0){warning(path==="*"||!path.endsWith("*")||path.endsWith("/*"),`Route path "${path}" will be treated as if it were "${path.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${path.replace(/\*$/,"/*")}".`);let params=[],regexpSource="^"+path.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_2,paramName,isOptional)=>(params.push({paramName,isOptional:isOptional!=null}),isOptional?"/?([^\\/]+)?":"/([^\\/]+)"));return path.endsWith("*")?(params.push({paramName:"*"}),regexpSource+=path==="*"||path==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):end?regexpSource+="\\/*$":path!==""&&path!=="/"&&(regexpSource+="(?:(?=\\/|$))"),[new RegExp(regexpSource,caseSensitive?void 0:"i"),params]}__name(compilePath,"compilePath");function decodePath(value){try{return value.split("/").map(v2=>decodeURIComponent(v2).replace(/\//g,"%2F")).join("/")}catch(error){return warning(!1,`The URL path "${value}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${error}).`),value}}__name(decodePath,"decodePath");function stripBasename(pathname,basename){if(basename==="/")return pathname;if(!pathname.toLowerCase().startsWith(basename.toLowerCase()))return null;let startIndex=basename.endsWith("/")?basename.length-1:basename.length,nextChar=pathname.charAt(startIndex);return nextChar&&nextChar!=="/"?null:pathname.slice(startIndex)||"/"}__name(stripBasename,"stripBasename");function resolvePath(to,fromPathname="/"){let{pathname:toPathname,search="",hash=""}=typeof to=="string"?parsePath(to):to;return{pathname:toPathname?toPathname.startsWith("/")?toPathname:resolvePathname(toPathname,fromPathname):fromPathname,search:normalizeSearch(search),hash:normalizeHash(hash)}}__name(resolvePath,"resolvePath");function resolvePathname(relativePath,fromPathname){let segments=fromPathname.replace(/\/+$/,"").split("/");return relativePath.split("/").forEach(segment=>{segment===".."?segments.length>1&&segments.pop():segment!=="."&&segments.push(segment)}),segments.length>1?segments.join("/"):"/"}__name(resolvePathname,"resolvePathname");function getInvalidPathError(char,field,dest,path){return`Cannot include a '${char}' character in a manually specified \`to.${field}\` field [${JSON.stringify(path)}].  Please separate it out to the \`to.${dest}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}__name(getInvalidPathError,"getInvalidPathError");function getPathContributingMatches(matches){return matches.filter((match,index)=>index===0||match.route.path&&match.route.path.length>0)}__name(getPathContributingMatches,"getPathContributingMatches");function getResolveToMatches(matches){let pathMatches=getPathContributingMatches(matches);return pathMatches.map((match,idx)=>idx===pathMatches.length-1?match.pathname:match.pathnameBase)}__name(getResolveToMatches,"getResolveToMatches");function resolveTo(toArg,routePathnames,locationPathname,isPathRelative=!1){let to;typeof toArg=="string"?to=parsePath(toArg):(to={...toArg},invariant(!to.pathname||!to.pathname.includes("?"),getInvalidPathError("?","pathname","search",to)),invariant(!to.pathname||!to.pathname.includes("#"),getInvalidPathError("#","pathname","hash",to)),invariant(!to.search||!to.search.includes("#"),getInvalidPathError("#","search","hash",to)));let isEmptyPath=toArg===""||to.pathname==="",toPathname=isEmptyPath?"/":to.pathname,from;if(toPathname==null)from=locationPathname;else{let routePathnameIndex=routePathnames.length-1;if(!isPathRelative&&toPathname.startsWith("..")){let toSegments=toPathname.split("/");for(;toSegments[0]==="..";)toSegments.shift(),routePathnameIndex-=1;to.pathname=toSegments.join("/")}from=routePathnameIndex>=0?routePathnames[routePathnameIndex]:"/"}let path=resolvePath(to,from),hasExplicitTrailingSlash=toPathname&&toPathname!=="/"&&toPathname.endsWith("/"),hasCurrentTrailingSlash=(isEmptyPath||toPathname===".")&&locationPathname.endsWith("/");return!path.pathname.endsWith("/")&&(hasExplicitTrailingSlash||hasCurrentTrailingSlash)&&(path.pathname+="/"),path}__name(resolveTo,"resolveTo");var joinPaths=__name(paths=>paths.join("/").replace(/\/\/+/g,"/"),"joinPaths"),normalizePathname=__name(pathname=>pathname.replace(/\/+$/,"").replace(/^\/*/,"/"),"normalizePathname"),normalizeSearch=__name(search=>!search||search==="?"?"":search.startsWith("?")?search:"?"+search,"normalizeSearch"),normalizeHash=__name(hash=>!hash||hash==="#"?"":hash.startsWith("#")?hash:"#"+hash,"normalizeHash");function isRouteErrorResponse(error){return error!=null&&typeof error.status=="number"&&typeof error.statusText=="string"&&typeof error.internal=="boolean"&&"data"in error}__name(isRouteErrorResponse,"isRouteErrorResponse");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(to,{relative}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename,navigator:navigator2}=reactExports.useContext(NavigationContext),{hash,pathname,search}=useResolvedPath(to,{relative}),joinedPathname=pathname;return basename!=="/"&&(joinedPathname=pathname==="/"?basename:joinPaths([basename,pathname])),navigator2.createHref({pathname:joinedPathname,search,hash})}__name(useHref,"useHref");function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}__name(useInRouterContext,"useInRouterContext");function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}__name(useLocation,"useLocation");var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(cb){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(cb)}__name(useIsomorphicLayoutEffect,"useIsomorphicLayoutEffect");function useNavigate(){let{isDataRoute}=reactExports.useContext(RouteContext);return isDataRoute?useNavigateStable():useNavigateUnstable()}__name(useNavigate,"useNavigate");function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let dataRouterContext=reactExports.useContext(DataRouterContext),{basename,navigator:navigator2}=reactExports.useContext(NavigationContext),{matches}=reactExports.useContext(RouteContext),{pathname:locationPathname}=useLocation(),routePathnamesJson=JSON.stringify(getResolveToMatches(matches)),activeRef=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{activeRef.current=!0}),reactExports.useCallback((to,options={})=>{if(warning(activeRef.current,navigateEffectWarning),!activeRef.current)return;if(typeof to=="number"){navigator2.go(to);return}let path=resolveTo(to,JSON.parse(routePathnamesJson),locationPathname,options.relative==="path");dataRouterContext==null&&basename!=="/"&&(path.pathname=path.pathname==="/"?basename:joinPaths([basename,path.pathname])),(options.replace?navigator2.replace:navigator2.push)(path,options.state,options)},[basename,navigator2,routePathnamesJson,locationPathname,dataRouterContext])}__name(useNavigateUnstable,"useNavigateUnstable");reactExports.createContext(null);function useResolvedPath(to,{relative}={}){let{matches}=reactExports.useContext(RouteContext),{pathname:locationPathname}=useLocation(),routePathnamesJson=JSON.stringify(getResolveToMatches(matches));return reactExports.useMemo(()=>resolveTo(to,JSON.parse(routePathnamesJson),locationPathname,relative==="path"),[to,routePathnamesJson,locationPathname,relative])}__name(useResolvedPath,"useResolvedPath");function useRoutes(routes,locationArg){return useRoutesImpl(routes,locationArg)}__name(useRoutes,"useRoutes");function useRoutesImpl(routes,locationArg,dataRouterState,future){var _a26;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:navigator2,static:isStatic}=reactExports.useContext(NavigationContext),{matches:parentMatches}=reactExports.useContext(RouteContext),routeMatch=parentMatches[parentMatches.length-1],parentParams=routeMatch?routeMatch.params:{},parentPathname=routeMatch?routeMatch.pathname:"/",parentPathnameBase=routeMatch?routeMatch.pathnameBase:"/",parentRoute=routeMatch&&routeMatch.route;{let parentPath=parentRoute&&parentRoute.path||"";warningOnce(parentPathname,!parentRoute||parentPath.endsWith("*")||parentPath.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${parentPathname}" (under <Route path="${parentPath}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${parentPath}"> to <Route path="${parentPath==="/"?"*":`${parentPath}/*`}">.`)}let locationFromContext=useLocation(),location;if(locationArg){let parsedLocationArg=typeof locationArg=="string"?parsePath(locationArg):locationArg;invariant(parentPathnameBase==="/"||((_a26=parsedLocationArg.pathname)==null?void 0:_a26.startsWith(parentPathnameBase)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${parentPathnameBase}" but pathname "${parsedLocationArg.pathname}" was given in the \`location\` prop.`),location=parsedLocationArg}else location=locationFromContext;let pathname=location.pathname||"/",remainingPathname=pathname;if(parentPathnameBase!=="/"){let parentSegments=parentPathnameBase.replace(/^\//,"").split("/");remainingPathname="/"+pathname.replace(/^\//,"").split("/").slice(parentSegments.length).join("/")}let matches=!isStatic&&dataRouterState&&dataRouterState.matches&&dataRouterState.matches.length>0?dataRouterState.matches:matchRoutes(routes,{pathname:remainingPathname});warning(parentRoute||matches!=null,`No routes matched location "${location.pathname}${location.search}${location.hash}" `),warning(matches==null||matches[matches.length-1].route.element!==void 0||matches[matches.length-1].route.Component!==void 0||matches[matches.length-1].route.lazy!==void 0,`Matched leaf route at location "${location.pathname}${location.search}${location.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let renderedMatches=_renderMatches(matches&&matches.map(match=>Object.assign({},match,{params:Object.assign({},parentParams,match.params),pathname:joinPaths([parentPathnameBase,navigator2.encodeLocation?navigator2.encodeLocation(match.pathname).pathname:match.pathname]),pathnameBase:match.pathnameBase==="/"?parentPathnameBase:joinPaths([parentPathnameBase,navigator2.encodeLocation?navigator2.encodeLocation(match.pathnameBase).pathname:match.pathnameBase])})),parentMatches,dataRouterState,future);return locationArg&&renderedMatches?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...location},navigationType:"POP"}},renderedMatches):renderedMatches}__name(useRoutesImpl,"useRoutesImpl");function DefaultErrorComponent(){let error=useRouteError(),message=isRouteErrorResponse(error)?`${error.status} ${error.statusText}`:error instanceof Error?error.message:JSON.stringify(error),stack=error instanceof Error?error.stack:null,lightgrey="rgba(200,200,200, 0.5)",preStyles={padding:"0.5rem",backgroundColor:lightgrey},codeStyles={padding:"2px 4px",backgroundColor:lightgrey},devInfo=null;return console.error("Error handled by React Router default ErrorBoundary:",error),devInfo=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:codeStyles},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:codeStyles},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},message),stack?reactExports.createElement("pre",{style:preStyles},stack):null,devInfo)}__name(DefaultErrorComponent,"DefaultErrorComponent");var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),_a,RenderErrorBoundary=(_a=class extends reactExports.Component{constructor(props){super(props),this.state={location:props.location,revalidation:props.revalidation,error:props.error}}static getDerivedStateFromError(error){return{error}}static getDerivedStateFromProps(props,state){return state.location!==props.location||state.revalidation!=="idle"&&props.revalidation==="idle"?{error:props.error,location:props.location,revalidation:props.revalidation}:{error:props.error!==void 0?props.error:state.error,location:state.location,revalidation:props.revalidation||state.revalidation}}componentDidCatch(error,errorInfo){console.error("React Router caught the following error during render",error,errorInfo)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}},__name(_a,"RenderErrorBoundary"),_a);function RenderedRoute({routeContext,match,children}){let dataRouterContext=reactExports.useContext(DataRouterContext);return dataRouterContext&&dataRouterContext.static&&dataRouterContext.staticContext&&(match.route.errorElement||match.route.ErrorBoundary)&&(dataRouterContext.staticContext._deepestRenderedBoundaryId=match.route.id),reactExports.createElement(RouteContext.Provider,{value:routeContext},children)}__name(RenderedRoute,"RenderedRoute");function _renderMatches(matches,parentMatches=[],dataRouterState=null,future=null){if(matches==null){if(!dataRouterState)return null;if(dataRouterState.errors)matches=dataRouterState.matches;else if(parentMatches.length===0&&!dataRouterState.initialized&&dataRouterState.matches.length>0)matches=dataRouterState.matches;else return null}let renderedMatches=matches,errors=dataRouterState==null?void 0:dataRouterState.errors;if(errors!=null){let errorIndex=renderedMatches.findIndex(m2=>m2.route.id&&(errors==null?void 0:errors[m2.route.id])!==void 0);invariant(errorIndex>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(errors).join(",")}`),renderedMatches=renderedMatches.slice(0,Math.min(renderedMatches.length,errorIndex+1))}let renderFallback=!1,fallbackIndex=-1;if(dataRouterState)for(let i2=0;i2<renderedMatches.length;i2++){let match=renderedMatches[i2];if((match.route.HydrateFallback||match.route.hydrateFallbackElement)&&(fallbackIndex=i2),match.route.id){let{loaderData,errors:errors2}=dataRouterState,needsToRunLoader=match.route.loader&&!loaderData.hasOwnProperty(match.route.id)&&(!errors2||errors2[match.route.id]===void 0);if(match.route.lazy||needsToRunLoader){renderFallback=!0,fallbackIndex>=0?renderedMatches=renderedMatches.slice(0,fallbackIndex+1):renderedMatches=[renderedMatches[0]];break}}}return renderedMatches.reduceRight((outlet,match,index)=>{let error,shouldRenderHydrateFallback=!1,errorElement=null,hydrateFallbackElement=null;dataRouterState&&(error=errors&&match.route.id?errors[match.route.id]:void 0,errorElement=match.route.errorElement||defaultErrorElement,renderFallback&&(fallbackIndex<0&&index===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),shouldRenderHydrateFallback=!0,hydrateFallbackElement=null):fallbackIndex===index&&(shouldRenderHydrateFallback=!0,hydrateFallbackElement=match.route.hydrateFallbackElement||null)));let matches2=parentMatches.concat(renderedMatches.slice(0,index+1)),getChildren=__name(()=>{let children;return error?children=errorElement:shouldRenderHydrateFallback?children=hydrateFallbackElement:match.route.Component?children=reactExports.createElement(match.route.Component,null):match.route.element?children=match.route.element:children=outlet,reactExports.createElement(RenderedRoute,{match,routeContext:{outlet,matches:matches2,isDataRoute:dataRouterState!=null},children})},"getChildren");return dataRouterState&&(match.route.ErrorBoundary||match.route.errorElement||index===0)?reactExports.createElement(RenderErrorBoundary,{location:dataRouterState.location,revalidation:dataRouterState.revalidation,component:errorElement,error,children:getChildren(),routeContext:{outlet:null,matches:matches2,isDataRoute:!0}}):getChildren()},null)}__name(_renderMatches,"_renderMatches");function getDataRouterConsoleError(hookName){return`${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}__name(getDataRouterConsoleError,"getDataRouterConsoleError");function useDataRouterContext(hookName){let ctx=reactExports.useContext(DataRouterContext);return invariant(ctx,getDataRouterConsoleError(hookName)),ctx}__name(useDataRouterContext,"useDataRouterContext");function useDataRouterState(hookName){let state=reactExports.useContext(DataRouterStateContext);return invariant(state,getDataRouterConsoleError(hookName)),state}__name(useDataRouterState,"useDataRouterState");function useRouteContext(hookName){let route=reactExports.useContext(RouteContext);return invariant(route,getDataRouterConsoleError(hookName)),route}__name(useRouteContext,"useRouteContext");function useCurrentRouteId(hookName){let route=useRouteContext(hookName),thisRoute=route.matches[route.matches.length-1];return invariant(thisRoute.route.id,`${hookName} can only be used on routes that contain a unique "id"`),thisRoute.route.id}__name(useCurrentRouteId,"useCurrentRouteId");function useRouteId(){return useCurrentRouteId("useRouteId")}__name(useRouteId,"useRouteId");function useRouteError(){var _a26;let error=reactExports.useContext(RouteErrorContext),state=useDataRouterState("useRouteError"),routeId=useCurrentRouteId("useRouteError");return error!==void 0?error:(_a26=state.errors)==null?void 0:_a26[routeId]}__name(useRouteError,"useRouteError");function useNavigateStable(){let{router}=useDataRouterContext("useNavigate"),id=useCurrentRouteId("useNavigate"),activeRef=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{activeRef.current=!0}),reactExports.useCallback(async(to,options={})=>{warning(activeRef.current,navigateEffectWarning),activeRef.current&&(typeof to=="number"?router.navigate(to):await router.navigate(to,{fromRouteId:id,...options}))},[router,id])}__name(useNavigateStable,"useNavigateStable");var alreadyWarned={};function warningOnce(key,cond,message){!cond&&!alreadyWarned[key]&&(alreadyWarned[key]=!0,warning(!1,message))}__name(warningOnce,"warningOnce");reactExports.memo(DataRoutes);function DataRoutes({routes,future,state}){return useRoutesImpl(routes,void 0,state,future)}__name(DataRoutes,"DataRoutes");function Route(_props){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}__name(Route,"Route");function Router({basename:basenameProp="/",children=null,location:locationProp,navigationType="POP",navigator:navigator2,static:staticProp=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let basename=basenameProp.replace(/^\/*/,"/"),navigationContext=reactExports.useMemo(()=>({basename,navigator:navigator2,static:staticProp,future:{}}),[basename,navigator2,staticProp]);typeof locationProp=="string"&&(locationProp=parsePath(locationProp));let{pathname="/",search="",hash="",state=null,key="default"}=locationProp,locationContext=reactExports.useMemo(()=>{let trailingPathname=stripBasename(pathname,basename);return trailingPathname==null?null:{location:{pathname:trailingPathname,search,hash,state,key},navigationType}},[basename,pathname,search,hash,state,key,navigationType]);return warning(locationContext!=null,`<Router basename="${basename}"> is not able to match the URL "${pathname}${search}${hash}" because it does not start with the basename, so the <Router> won't render anything.`),locationContext==null?null:reactExports.createElement(NavigationContext.Provider,{value:navigationContext},reactExports.createElement(LocationContext.Provider,{children,value:locationContext}))}__name(Router,"Router");function Routes({children,location}){return useRoutes(createRoutesFromChildren(children),location)}__name(Routes,"Routes");function createRoutesFromChildren(children,parentPath=[]){let routes=[];return reactExports.Children.forEach(children,(element,index)=>{if(!reactExports.isValidElement(element))return;let treePath=[...parentPath,index];if(element.type===reactExports.Fragment){routes.push.apply(routes,createRoutesFromChildren(element.props.children,treePath));return}invariant(element.type===Route,`[${typeof element.type=="string"?element.type:element.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!element.props.index||!element.props.children,"An index route cannot have child routes.");let route={id:element.props.id||treePath.join("-"),caseSensitive:element.props.caseSensitive,element:element.props.element,Component:element.props.Component,index:element.props.index,path:element.props.path,loader:element.props.loader,action:element.props.action,hydrateFallbackElement:element.props.hydrateFallbackElement,HydrateFallback:element.props.HydrateFallback,errorElement:element.props.errorElement,ErrorBoundary:element.props.ErrorBoundary,hasErrorBoundary:element.props.hasErrorBoundary===!0||element.props.ErrorBoundary!=null||element.props.errorElement!=null,shouldRevalidate:element.props.shouldRevalidate,handle:element.props.handle,lazy:element.props.lazy};element.props.children&&(route.children=createRoutesFromChildren(element.props.children,treePath)),routes.push(route)}),routes}__name(createRoutesFromChildren,"createRoutesFromChildren");var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(object){return object!=null&&typeof object.tagName=="string"}__name(isHtmlElement,"isHtmlElement");function isButtonElement(object){return isHtmlElement(object)&&object.tagName.toLowerCase()==="button"}__name(isButtonElement,"isButtonElement");function isFormElement(object){return isHtmlElement(object)&&object.tagName.toLowerCase()==="form"}__name(isFormElement,"isFormElement");function isInputElement(object){return isHtmlElement(object)&&object.tagName.toLowerCase()==="input"}__name(isInputElement,"isInputElement");function isModifiedEvent(event){return!!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey)}__name(isModifiedEvent,"isModifiedEvent");function shouldProcessLinkClick(event,target){return event.button===0&&(!target||target==="_self")&&!isModifiedEvent(event)}__name(shouldProcessLinkClick,"shouldProcessLinkClick");var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}__name(isFormDataSubmitterSupported,"isFormDataSubmitterSupported");var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(encType){return encType!=null&&!supportedFormEncTypes.has(encType)?(warning(!1,`"${encType}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):encType}__name(getFormEncType,"getFormEncType");function getFormSubmissionInfo(target,basename){let method,action,encType,formData,body;if(isFormElement(target)){let attr=target.getAttribute("action");action=attr?stripBasename(attr,basename):null,method=target.getAttribute("method")||defaultMethod,encType=getFormEncType(target.getAttribute("enctype"))||defaultEncType,formData=new FormData(target)}else if(isButtonElement(target)||isInputElement(target)&&(target.type==="submit"||target.type==="image")){let form=target.form;if(form==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let attr=target.getAttribute("formaction")||form.getAttribute("action");if(action=attr?stripBasename(attr,basename):null,method=target.getAttribute("formmethod")||form.getAttribute("method")||defaultMethod,encType=getFormEncType(target.getAttribute("formenctype"))||getFormEncType(form.getAttribute("enctype"))||defaultEncType,formData=new FormData(form,target),!isFormDataSubmitterSupported()){let{name:name2,type,value}=target;if(type==="image"){let prefix=name2?`${name2}.`:"";formData.append(`${prefix}x`,"0"),formData.append(`${prefix}y`,"0")}else name2&&formData.append(name2,value)}}else{if(isHtmlElement(target))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');method=defaultMethod,action=null,encType=defaultEncType,body=target}return formData&&encType==="text/plain"&&(body=formData,formData=void 0),{action,method:method.toLowerCase(),encType,formData,body}}__name(getFormSubmissionInfo,"getFormSubmissionInfo");function invariant2(value,message){if(value===!1||value===null||typeof value>"u")throw new Error(message)}__name(invariant2,"invariant2");async function loadRouteModule(route,routeModulesCache){if(route.id in routeModulesCache)return routeModulesCache[route.id];try{let routeModule=await import(route.module);return routeModulesCache[route.id]=routeModule,routeModule}catch(error){return console.error(`Error loading route module \`${route.module}\`, reloading page...`),console.error(error),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}__name(loadRouteModule,"loadRouteModule");function isHtmlLinkDescriptor(object){return object==null?!1:object.href==null?object.rel==="preload"&&typeof object.imageSrcSet=="string"&&typeof object.imageSizes=="string":typeof object.rel=="string"&&typeof object.href=="string"}__name(isHtmlLinkDescriptor,"isHtmlLinkDescriptor");async function getKeyedPrefetchLinks(matches,manifest,routeModules){let links=await Promise.all(matches.map(async match=>{let route=manifest.routes[match.route.id];if(route){let mod2=await loadRouteModule(route,routeModules);return mod2.links?mod2.links():[]}return[]}));return dedupeLinkDescriptors(links.flat(1).filter(isHtmlLinkDescriptor).filter(link=>link.rel==="stylesheet"||link.rel==="preload").map(link=>link.rel==="stylesheet"?{...link,rel:"prefetch",as:"style"}:{...link,rel:"prefetch"}))}__name(getKeyedPrefetchLinks,"getKeyedPrefetchLinks");function getNewMatchesForLinks(page,nextMatches,currentMatches,manifest,location,mode){let isNew=__name((match,index)=>currentMatches[index]?match.route.id!==currentMatches[index].route.id:!0,"isNew"),matchPathChanged=__name((match,index)=>{var _a26;return currentMatches[index].pathname!==match.pathname||((_a26=currentMatches[index].route.path)==null?void 0:_a26.endsWith("*"))&&currentMatches[index].params["*"]!==match.params["*"]},"matchPathChanged");return mode==="assets"?nextMatches.filter((match,index)=>isNew(match,index)||matchPathChanged(match,index)):mode==="data"?nextMatches.filter((match,index)=>{var _a26;let manifestRoute=manifest.routes[match.route.id];if(!manifestRoute||!manifestRoute.hasLoader)return!1;if(isNew(match,index)||matchPathChanged(match,index))return!0;if(match.route.shouldRevalidate){let routeChoice=match.route.shouldRevalidate({currentUrl:new URL(location.pathname+location.search+location.hash,window.origin),currentParams:((_a26=currentMatches[0])==null?void 0:_a26.params)||{},nextUrl:new URL(page,window.origin),nextParams:match.params,defaultShouldRevalidate:!0});if(typeof routeChoice=="boolean")return routeChoice}return!0}):[]}__name(getNewMatchesForLinks,"getNewMatchesForLinks");function getModuleLinkHrefs(matches,manifest,{includeHydrateFallback}={}){return dedupeHrefs(matches.map(match=>{let route=manifest.routes[match.route.id];if(!route)return[];let hrefs=[route.module];return route.clientActionModule&&(hrefs=hrefs.concat(route.clientActionModule)),route.clientLoaderModule&&(hrefs=hrefs.concat(route.clientLoaderModule)),includeHydrateFallback&&route.hydrateFallbackModule&&(hrefs=hrefs.concat(route.hydrateFallbackModule)),route.imports&&(hrefs=hrefs.concat(route.imports)),hrefs}).flat(1))}__name(getModuleLinkHrefs,"getModuleLinkHrefs");function dedupeHrefs(hrefs){return[...new Set(hrefs)]}__name(dedupeHrefs,"dedupeHrefs");function sortKeys(obj){let sorted={},keys=Object.keys(obj).sort();for(let key of keys)sorted[key]=obj[key];return sorted}__name(sortKeys,"sortKeys");function dedupeLinkDescriptors(descriptors,preloads){let set=new Set;return new Set(preloads),descriptors.reduce((deduped,descriptor)=>{let key=JSON.stringify(sortKeys(descriptor));return set.has(key)||(set.add(key),deduped.push({key,link:descriptor})),deduped},[])}__name(dedupeLinkDescriptors,"dedupeLinkDescriptors");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(reqUrl,basename){let url2=typeof reqUrl=="string"?new URL(reqUrl,typeof window>"u"?"server://singlefetch/":window.location.origin):reqUrl;return url2.pathname==="/"?url2.pathname="_root.data":basename&&stripBasename(url2.pathname,basename)==="/"?url2.pathname=`${basename.replace(/\/$/,"")}/_root.data`:url2.pathname=`${url2.pathname.replace(/\/$/,"")}.data`,url2}__name(singleFetchUrl,"singleFetchUrl");function useDataRouterContext2(){let context=reactExports.useContext(DataRouterContext);return invariant2(context,"You must render this element inside a <DataRouterContext.Provider> element"),context}__name(useDataRouterContext2,"useDataRouterContext2");function useDataRouterStateContext(){let context=reactExports.useContext(DataRouterStateContext);return invariant2(context,"You must render this element inside a <DataRouterStateContext.Provider> element"),context}__name(useDataRouterStateContext,"useDataRouterStateContext");var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let context=reactExports.useContext(FrameworkContext);return invariant2(context,"You must render this element inside a <HydratedRouter> element"),context}__name(useFrameworkContext,"useFrameworkContext");function usePrefetchBehavior(prefetch,theirElementProps){let frameworkContext=reactExports.useContext(FrameworkContext),[maybePrefetch,setMaybePrefetch]=reactExports.useState(!1),[shouldPrefetch,setShouldPrefetch]=reactExports.useState(!1),{onFocus,onBlur,onMouseEnter,onMouseLeave,onTouchStart}=theirElementProps,ref=reactExports.useRef(null);reactExports.useEffect(()=>{if(prefetch==="render"&&setShouldPrefetch(!0),prefetch==="viewport"){let callback=__name(entries=>{entries.forEach(entry=>{setShouldPrefetch(entry.isIntersecting)})},"callback"),observer=new IntersectionObserver(callback,{threshold:.5});return ref.current&&observer.observe(ref.current),()=>{observer.disconnect()}}},[prefetch]),reactExports.useEffect(()=>{if(maybePrefetch){let id=setTimeout(()=>{setShouldPrefetch(!0)},100);return()=>{clearTimeout(id)}}},[maybePrefetch]);let setIntent=__name(()=>{setMaybePrefetch(!0)},"setIntent"),cancelIntent=__name(()=>{setMaybePrefetch(!1),setShouldPrefetch(!1)},"cancelIntent");return frameworkContext?prefetch!=="intent"?[shouldPrefetch,ref,{}]:[shouldPrefetch,ref,{onFocus:composeEventHandlers$2(onFocus,setIntent),onBlur:composeEventHandlers$2(onBlur,cancelIntent),onMouseEnter:composeEventHandlers$2(onMouseEnter,setIntent),onMouseLeave:composeEventHandlers$2(onMouseLeave,cancelIntent),onTouchStart:composeEventHandlers$2(onTouchStart,setIntent)}]:[!1,ref,{}]}__name(usePrefetchBehavior,"usePrefetchBehavior");function composeEventHandlers$2(theirHandler,ourHandler){return event=>{theirHandler&&theirHandler(event),event.defaultPrevented||ourHandler(event)}}__name(composeEventHandlers$2,"composeEventHandlers$2");function PrefetchPageLinks({page,...dataLinkProps}){let{router}=useDataRouterContext2(),matches=reactExports.useMemo(()=>matchRoutes(router.routes,page,router.basename),[router.routes,page,router.basename]);return matches?reactExports.createElement(PrefetchPageLinksImpl,{page,matches,...dataLinkProps}):null}__name(PrefetchPageLinks,"PrefetchPageLinks");function useKeyedPrefetchLinks(matches){let{manifest,routeModules}=useFrameworkContext(),[keyedPrefetchLinks,setKeyedPrefetchLinks]=reactExports.useState([]);return reactExports.useEffect(()=>{let interrupted=!1;return getKeyedPrefetchLinks(matches,manifest,routeModules).then(links=>{interrupted||setKeyedPrefetchLinks(links)}),()=>{interrupted=!0}},[matches,manifest,routeModules]),keyedPrefetchLinks}__name(useKeyedPrefetchLinks,"useKeyedPrefetchLinks");function PrefetchPageLinksImpl({page,matches:nextMatches,...linkProps}){let location=useLocation(),{manifest,routeModules}=useFrameworkContext(),{basename}=useDataRouterContext2(),{loaderData,matches}=useDataRouterStateContext(),newMatchesForData=reactExports.useMemo(()=>getNewMatchesForLinks(page,nextMatches,matches,manifest,location,"data"),[page,nextMatches,matches,manifest,location]),newMatchesForAssets=reactExports.useMemo(()=>getNewMatchesForLinks(page,nextMatches,matches,manifest,location,"assets"),[page,nextMatches,matches,manifest,location]),dataHrefs=reactExports.useMemo(()=>{if(page===location.pathname+location.search+location.hash)return[];let routesParams=new Set,foundOptOutRoute=!1;if(nextMatches.forEach(m2=>{var _a26;let manifestRoute=manifest.routes[m2.route.id];!manifestRoute||!manifestRoute.hasLoader||(!newMatchesForData.some(m22=>m22.route.id===m2.route.id)&&m2.route.id in loaderData&&((_a26=routeModules[m2.route.id])!=null&&_a26.shouldRevalidate)||manifestRoute.hasClientLoader?foundOptOutRoute=!0:routesParams.add(m2.route.id))}),routesParams.size===0)return[];let url2=singleFetchUrl(page,basename);return foundOptOutRoute&&routesParams.size>0&&url2.searchParams.set("_routes",nextMatches.filter(m2=>routesParams.has(m2.route.id)).map(m2=>m2.route.id).join(",")),[url2.pathname+url2.search]},[basename,loaderData,location,manifest,newMatchesForData,nextMatches,page,routeModules]),moduleHrefs=reactExports.useMemo(()=>getModuleLinkHrefs(newMatchesForAssets,manifest),[newMatchesForAssets,manifest]),keyedPrefetchLinks=useKeyedPrefetchLinks(newMatchesForAssets);return reactExports.createElement(reactExports.Fragment,null,dataHrefs.map(href2=>reactExports.createElement("link",{key:href2,rel:"prefetch",as:"fetch",href:href2,...linkProps})),moduleHrefs.map(href2=>reactExports.createElement("link",{key:href2,rel:"modulepreload",href:href2,...linkProps})),keyedPrefetchLinks.map(({key,link})=>reactExports.createElement("link",{key,...link})))}__name(PrefetchPageLinksImpl,"PrefetchPageLinksImpl");function mergeRefs(...refs){return value=>{refs.forEach(ref=>{typeof ref=="function"?ref(value):ref!=null&&(ref.current=value)})}}__name(mergeRefs,"mergeRefs");var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.6.0")}catch{}function HashRouter({basename,children,window:window2}){let historyRef=reactExports.useRef();historyRef.current==null&&(historyRef.current=createHashHistory({window:window2,v5Compat:!0}));let history=historyRef.current,[state,setStateImpl]=reactExports.useState({action:history.action,location:history.location}),setState=reactExports.useCallback(newState=>{reactExports.startTransition(()=>setStateImpl(newState))},[setStateImpl]);return reactExports.useLayoutEffect(()=>history.listen(setState),[history,setState]),reactExports.createElement(Router,{basename,children,location:state.location,navigationType:state.action,navigator:history})}__name(HashRouter,"HashRouter");var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(__name(function({onClick,discover="render",prefetch="none",relative,reloadDocument,replace:replace2,state,target,to,preventScrollReset,viewTransition,...rest},forwardedRef){let{basename}=reactExports.useContext(NavigationContext),isAbsolute=typeof to=="string"&&ABSOLUTE_URL_REGEX2.test(to),absoluteHref,isExternal=!1;if(typeof to=="string"&&isAbsolute&&(absoluteHref=to,isBrowser))try{let currentUrl=new URL(window.location.href),targetUrl=to.startsWith("//")?new URL(currentUrl.protocol+to):new URL(to),path=stripBasename(targetUrl.pathname,basename);targetUrl.origin===currentUrl.origin&&path!=null?to=path+targetUrl.search+targetUrl.hash:isExternal=!0}catch{warning(!1,`<Link to="${to}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let href2=useHref(to,{relative}),[shouldPrefetch,prefetchRef,prefetchHandlers]=usePrefetchBehavior(prefetch,rest),internalOnClick=useLinkClickHandler(to,{replace:replace2,state,target,preventScrollReset,relative,viewTransition});function handleClick(event){onClick&&onClick(event),event.defaultPrevented||internalOnClick(event)}__name(handleClick,"handleClick");let link=reactExports.createElement("a",{...rest,...prefetchHandlers,href:absoluteHref||href2,onClick:isExternal||reloadDocument?onClick:handleClick,ref:mergeRefs(forwardedRef,prefetchRef),target,"data-discover":!isAbsolute&&discover==="render"?"true":void 0});return shouldPrefetch&&!isAbsolute?reactExports.createElement(reactExports.Fragment,null,link,reactExports.createElement(PrefetchPageLinks,{page:href2})):link},"LinkWithRef"));Link.displayName="Link";var NavLink=reactExports.forwardRef(__name(function({"aria-current":ariaCurrentProp="page",caseSensitive=!1,className:classNameProp="",end=!1,style:styleProp,to,viewTransition,children,...rest},ref){let path=useResolvedPath(to,{relative:rest.relative}),location=useLocation(),routerState=reactExports.useContext(DataRouterStateContext),{navigator:navigator2,basename}=reactExports.useContext(NavigationContext),isTransitioning=routerState!=null&&useViewTransitionState(path)&&viewTransition===!0,toPathname=navigator2.encodeLocation?navigator2.encodeLocation(path).pathname:path.pathname,locationPathname=location.pathname,nextLocationPathname=routerState&&routerState.navigation&&routerState.navigation.location?routerState.navigation.location.pathname:null;caseSensitive||(locationPathname=locationPathname.toLowerCase(),nextLocationPathname=nextLocationPathname?nextLocationPathname.toLowerCase():null,toPathname=toPathname.toLowerCase()),nextLocationPathname&&basename&&(nextLocationPathname=stripBasename(nextLocationPathname,basename)||nextLocationPathname);const endSlashPosition=toPathname!=="/"&&toPathname.endsWith("/")?toPathname.length-1:toPathname.length;let isActive=locationPathname===toPathname||!end&&locationPathname.startsWith(toPathname)&&locationPathname.charAt(endSlashPosition)==="/",isPending=nextLocationPathname!=null&&(nextLocationPathname===toPathname||!end&&nextLocationPathname.startsWith(toPathname)&&nextLocationPathname.charAt(toPathname.length)==="/"),renderProps={isActive,isPending,isTransitioning},ariaCurrent=isActive?ariaCurrentProp:void 0,className;typeof classNameProp=="function"?className=classNameProp(renderProps):className=[classNameProp,isActive?"active":null,isPending?"pending":null,isTransitioning?"transitioning":null].filter(Boolean).join(" ");let style=typeof styleProp=="function"?styleProp(renderProps):styleProp;return reactExports.createElement(Link,{...rest,"aria-current":ariaCurrent,className,ref,style,to,viewTransition},typeof children=="function"?children(renderProps):children)},"NavLinkWithRef"));NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover="render",fetcherKey,navigate,reloadDocument,replace:replace2,state,method=defaultMethod,action,onSubmit,relative,preventScrollReset,viewTransition,...props},forwardedRef)=>{let submit=useSubmit(),formAction=useFormAction(action,{relative}),formMethod=method.toLowerCase()==="get"?"get":"post",isAbsolute=typeof action=="string"&&ABSOLUTE_URL_REGEX2.test(action),submitHandler=__name(event=>{if(onSubmit&&onSubmit(event),event.defaultPrevented)return;event.preventDefault();let submitter=event.nativeEvent.submitter,submitMethod=(submitter==null?void 0:submitter.getAttribute("formmethod"))||method;submit(submitter||event.currentTarget,{fetcherKey,method:submitMethod,navigate,replace:replace2,state,relative,preventScrollReset,viewTransition})},"submitHandler");return reactExports.createElement("form",{ref:forwardedRef,method:formMethod,action:formAction,onSubmit:reloadDocument?onSubmit:submitHandler,...props,"data-discover":!isAbsolute&&discover==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(hookName){return`${hookName} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}__name(getDataRouterConsoleError2,"getDataRouterConsoleError2");function useDataRouterContext3(hookName){let ctx=reactExports.useContext(DataRouterContext);return invariant(ctx,getDataRouterConsoleError2(hookName)),ctx}__name(useDataRouterContext3,"useDataRouterContext3");function useLinkClickHandler(to,{target,replace:replaceProp,state,preventScrollReset,relative,viewTransition}={}){let navigate=useNavigate(),location=useLocation(),path=useResolvedPath(to,{relative});return reactExports.useCallback(event=>{if(shouldProcessLinkClick(event,target)){event.preventDefault();let replace2=replaceProp!==void 0?replaceProp:createPath(location)===createPath(path);navigate(to,{replace:replace2,state,preventScrollReset,relative,viewTransition})}},[location,navigate,path,replaceProp,state,target,to,preventScrollReset,relative,viewTransition])}__name(useLinkClickHandler,"useLinkClickHandler");var fetcherId=0,getUniqueFetcherId=__name(()=>`__${String(++fetcherId)}__`,"getUniqueFetcherId");function useSubmit(){let{router}=useDataRouterContext3("useSubmit"),{basename}=reactExports.useContext(NavigationContext),currentRouteId=useRouteId();return reactExports.useCallback(async(target,options={})=>{let{action,method,encType,formData,body}=getFormSubmissionInfo(target,basename);if(options.navigate===!1){let key=options.fetcherKey||getUniqueFetcherId();await router.fetch(key,currentRouteId,options.action||action,{preventScrollReset:options.preventScrollReset,formData,body,formMethod:options.method||method,formEncType:options.encType||encType,flushSync:options.flushSync})}else await router.navigate(options.action||action,{preventScrollReset:options.preventScrollReset,formData,body,formMethod:options.method||method,formEncType:options.encType||encType,replace:options.replace,state:options.state,fromRouteId:currentRouteId,flushSync:options.flushSync,viewTransition:options.viewTransition})},[router,basename,currentRouteId])}__name(useSubmit,"useSubmit");function useFormAction(action,{relative}={}){let{basename}=reactExports.useContext(NavigationContext),routeContext=reactExports.useContext(RouteContext);invariant(routeContext,"useFormAction must be used inside a RouteContext");let[match]=routeContext.matches.slice(-1),path={...useResolvedPath(action||".",{relative})},location=useLocation();if(action==null){path.search=location.search;let params=new URLSearchParams(path.search),indexValues=params.getAll("index");if(indexValues.some(v2=>v2==="")){params.delete("index"),indexValues.filter(v2=>v2).forEach(v2=>params.append("index",v2));let qs=params.toString();path.search=qs?`?${qs}`:""}}return(!action||action===".")&&match.route.index&&(path.search=path.search?path.search.replace(/^\?/,"?index&"):"?index"),basename!=="/"&&(path.pathname=path.pathname==="/"?basename:joinPaths([basename,path.pathname])),createPath(path)}__name(useFormAction,"useFormAction");function useViewTransitionState(to,opts={}){let vtContext=reactExports.useContext(ViewTransitionContext);invariant(vtContext!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename}=useDataRouterContext3("useViewTransitionState"),path=useResolvedPath(to,{relative:opts.relative});if(!vtContext.isTransitioning)return!1;let currentPath=stripBasename(vtContext.currentLocation.pathname,basename)||vtContext.currentLocation.pathname,nextPath=stripBasename(vtContext.nextLocation.pathname,basename)||vtContext.nextLocation.pathname;return matchPath(path.pathname,nextPath)!=null||matchPath(path.pathname,currentPath)!=null}__name(useViewTransitionState,"useViewTransitionState");[...NO_BODY_STATUS_CODES];var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function SimpleCommittedTextInput(t2){var n3=t2.onCommit,o2=n3===void 0?function(e2){}:n3,i2=t2.isValid,a2=i2===void 0?function(e2){return!0}:i2,l2=t2.initialValue,s2=l2===void 0?"":l2,c=t2.color,u2=c===void 0?"var(--gray7)":c,d2=t2.bgColor,f2=d2===void 0?"var(--gray3)":d2,p2=t2.bgActive,g2=p2===void 0?"var(--gray4)":p2,m2=t2.bgInvalidInput,h2=m2===void 0?"var(--danger)":m2,v2=t2.invalidInputColor,y2=v2===void 0?"var(--gray2)":v2,b2=t2.charSize,w2=b2===void 0?void 0:b2,x2=t2.maxCharSize,C3=x2===void 0?50:x2,S2=React.useState(!1),E2=S2[0],R2=S2[1],A2=React.useState(!0),P2=A2[0],O2=A2[1],generateId=__name(function(){return Math.random().toString(36).substring(7)},"generateId"),N2=React.useState(generateId()),_2=N2[0],T2=N2[1],k2=React.useState(w2||(s2.length<=C3?s2.length:C3)),M2=k2[0],L2=k2[1],reset=__name(function(){R2(!1),O2(!0),T2(generateId())},"reset");return jsxRuntimeExports.jsx("input",{type:"text",defaultValue:s2,size:M2,style:{backgroundColor:E2?P2?g2:h2:f2,color:P2?u2:y2,border:"none",padding:"5px",paddingLeft:"10px",borderRadius:"var(--borderRadiusSmall)",minWidth:"100px",fontSize:"16px"},readOnly:!E2,onFocus:__name(function(){return R2(!0)},"onFocus"),onChange:__name(function(e2){O2(a2(e2.target.value)),w2||(e2.target.value.length<=C3?L2(e2.target.value.length):L2(C3))},"onChange"),onBlur:__name(function(e2){P2?(reset(),o2(e2.target.value)):(e2.target.value=s2,reset())},"onBlur"),onKeyDown:__name(function(e2){e2.key==="Enter"&&(P2?(reset(),o2(e2.target.value)):reset())},"onKeyDown")},_2)}__name(SimpleCommittedTextInput,"SimpleCommittedTextInput");var __assign=__name(function(){return __assign=Object.assign||__name(function(e2){for(var t2,n3=1,o2=arguments.length;n3<o2;n3++)for(var r2 in t2=arguments[n3])Object.prototype.hasOwnProperty.call(t2,r2)&&(e2[r2]=t2[r2]);return e2},"__assign"),__assign.apply(this,arguments)},"__assign");function __rest(e2,t2){var n3={};for(var o2 in e2)Object.prototype.hasOwnProperty.call(e2,o2)&&t2.indexOf(o2)<0&&(n3[o2]=e2[o2]);if(e2!=null&&typeof Object.getOwnPropertySymbols=="function"){var r2=0;for(o2=Object.getOwnPropertySymbols(e2);r2<o2.length;r2++)t2.indexOf(o2[r2])<0&&Object.prototype.propertyIsEnumerable.call(e2,o2[r2])&&(n3[o2[r2]]=e2[o2[r2]])}return n3}__name(__rest,"__rest");function __spreadArray(e2,t2,n3){if(n3||arguments.length===2)for(var o2,r2=0,i2=t2.length;r2<i2;r2++)!o2&&r2 in t2||(o2||(o2=Array.prototype.slice.call(t2,0,r2)),o2[r2]=t2[r2]);return e2.concat(o2||Array.prototype.slice.call(t2))}__name(__spreadArray,"__spreadArray");function Icon(n3){var o2=n3.iconName,i2=o2===void 0?"home":o2,a2=n3.bgColor,l2=a2===void 0?"transparent":a2,s2=n3.hoverBgColor,c=s2===void 0?"var(--gray3)":s2,u2=n3.color,d2=u2===void 0?"var(--gray6)":u2,f2=n3.hoverColor,p2=f2===void 0?"var(--gray7)":f2,g2=n3.cursor,m2=g2===void 0?"pointer":g2,h2=n3.onClick,v2=h2===void 0?function(){}:h2,y2=n3.style,b2=y2===void 0?{}:y2,w2=React.useState(!1),x2=w2[0],C3=w2[1];return jsxRuntimeExports.jsx("div",{style:__assign({userSelect:"none",width:"35px",height:"35px",margin:"5px",cursor:m2,borderRadius:"50%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",backgroundColor:x2?c:l2,transition:"background-color 0.2s",fontSize:"20px",color:x2?p2:d2},b2),className:"materialSymbols",onMouseOver:__name(function(){return C3(!0)},"onMouseOver"),onMouseOut:__name(function(){return C3(!1)},"onMouseOut"),onClick:v2,children:jsxRuntimeExports.jsxs("div",{children:[" ",i2]})})}__name(Icon,"Icon");function Button(n3){var o2=n3.text,i2=o2===void 0?void 0:o2,a2=n3.iconName,l2=a2===void 0?void 0:a2,s2=n3.bgColor,c=s2===void 0?"var(--gray3)":s2,u2=n3.hoverBgColor,d2=u2===void 0?"var(--gray4)":u2,f2=n3.color,p2=f2===void 0?"var(--gray7)":f2,g2=n3.hoverColor,m2=g2===void 0?"var(--gray8)":g2,h2=n3.cursor,v2=h2===void 0?"pointer":h2,y2=n3.onClick,b2=y2===void 0?function(){}:y2,w2=n3.style,x2=w2===void 0?{}:w2;__rest(n3,["text","iconName","bgColor","hoverBgColor","color","hoverColor","cursor","onClick","style"]);var C3=React.useState(!1),S2=C3[0],E2=C3[1];return jsxRuntimeExports.jsxs("button",{onMouseOver:__name(function(){return E2(!0)},"onMouseOver"),onMouseOut:__name(function(){return E2(!1)},"onMouseOut"),onClick:b2,style:__assign({overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",padding:"0px",cursor:v2,height:"35px",margin:"5px",userSelect:"none",backgroundColor:S2?d2:c,transition:"background-color 0.2s",fontSize:"var(--defaultFontSize)",color:S2?m2:p2,border:"none",borderRadius:"5px"},x2),children:[i2?jsxRuntimeExports.jsx("div",{style:{marginTop:"2px",marginRight:l2?"2px":"15px",marginLeft:"15px"},children:i2}):null,l2?jsxRuntimeExports.jsx("div",{style:{marginRight:i2?"0px":"10px",marginLeft:i2?"0px":"10px"},children:jsxRuntimeExports.jsx(Icon,{iconName:l2,color:S2?m2:p2,hoverColor:S2?m2:p2,bgColor:"transparent",hoverBgColor:"transparent"})}):null]})}__name(Button,"Button");function styleInject(e2,t2){t2===void 0&&(t2={});var n3=t2.insertAt;if(e2&&typeof document<"u"){var o2=document.head||document.getElementsByTagName("head")[0],r2=document.createElement("style");r2.type="text/css",n3==="top"&&o2.firstChild?o2.insertBefore(r2,o2.firstChild):o2.appendChild(r2),r2.styleSheet?r2.styleSheet.cssText=e2:r2.appendChild(document.createTextNode(e2))}}__name(styleInject,"styleInject");function StyleProvider(t2){var o2=t2.children;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o2})}__name(StyleProvider,"StyleProvider");styleInject(`
/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Prevent font size inflation */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

/* Remove default margin in favour of better control in authored CSS */
body, h1, h2, h3, h4, p,
figure, blockquote, dl, dd {
  margin-block-end: 0;
}

/* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */
ul[role='list'],
ol[role='list'] {
  list-style: none;
}

/* Set core body defaults */
body {
  min-height: 100vh;
  line-height: 1.5;
}

/* Set shorter line heights on headings and interactive elements */
h1, h2, h3, h4,
button, input, label {
  line-height: 1.1;
}

/* Balance text wrapping on headings */
h1, h2,
h3, h4 {
  text-wrap: balance;
}

/* A elements that don't have a class get default styles */
a:not([class]) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}

/* Make images easier to work with */
img,
picture {
  max-width: 100%;
  display: block;
}

/* Inherit fonts for inputs and buttons */
input, button,
textarea, select {
  font-family: inherit;
  font-size: inherit;
}

input:focus {
    outline: none;
  }
  

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
  min-height: 10em;
}

/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 5ex;
}




@font-face {
    font-family: 'Material Symbols';
    src: url('https://storage.googleapis.com/pinsandcurvesfontservice/MaterialSymbolsSharp%5BFILL%2CGRAD%2Copsz%2Cwght%5D.woff2') format('woff');
    font-weight: normal;
    font-style: normal;
}

.PinsAndCurvesStylesheet_materialSymbols__hO5CY {
    font-family: 'Material Symbols';
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 48;
}

:root {
    --gray1: #1D2126;
    --gray2: #2C333A;
    --gray3: #3B434B;
    --gray4: #49525B;
    --gray5: #59646E;
    --gray6: #708090;
    --gray7 : #C6D6E6;
    --gray8 : white;
    --danger: pink;

    --green2: #6EBD6F;
    --green1: #84D585;
    --green3: #429A44;
    --green4: #1D471E;

    --yellow1: #FFF8D3;
    --yellow2: #FFF1A8;
    --yellow3: #E6C622;
    --yellow4: #A48E20;

    --borderRadiusSmall: 5px;

    --defaultFontSize: 16px;

    --continuousBlue1: #243157;
    --continuousBlue2: #4A5F9D;
    --continuousBlue3: #94a3d0;
    --discreteRed1: #562F2F;
    --discreteRed2: #915050;


    font-family: 'Roboto', sans-serif;
}

hr {
    border: none;
    border-top: 2px solid var(--gray3);
    margin: 1em 0;
  
}`);var f$1=150;function SimpleCommittedNumberInput(t2){var n3,o2=__name(function(e2){var t3=reactExports.useState(e2),n4=t3[0],o3=t3[1],r3=reactExports.useState(!1),l3=r3[0],s3=r3[1];return reactExports.useLayoutEffect(function(){l3||e2!==n4&&o3(e2)},[e2,l3,n4]),{setValue:o3,value:n4,setActive:s3,active:l3}},"useHybridState$1")((n3=t2.initialValue)!==null&&n3!==void 0?n3:0),r2=o2.value,l2=o2.setValue,s2=o2.setActive,c=reactExports.useState("inactive"),u2=c[0],d2=c[1],setInactive=__name(function(){d2("inactive"),s2(!1)},"setInactive");return u2==="inactive"?jsxRuntimeExports.jsx(InactiveNumberInput,__assign({value:r2,setValue:l2,setEditing:__name(function(){d2("editing"),s2(!0)},"setEditing"),setDragging:__name(function(){d2("dragging"),s2(!0)},"setDragging")},t2)):u2==="editing"?jsxRuntimeExports.jsx(EditingNumberInput,__assign({value:r2,setValue:l2,setInactive},t2)):u2==="dragging"?jsxRuntimeExports.jsx(DraggingNumberInput,__assign({value:r2,setValue:l2,setInactive},t2)):null}__name(SimpleCommittedNumberInput,"SimpleCommittedNumberInput");function InactiveNumberInput(t2){var n3=t2.value;t2.setValue;var o2=t2.setEditing,r2=t2.setDragging,a2=__rest(t2,["value","setValue","setEditing","setDragging"]),l2=reactExports.useState(null),s2=l2[0],c=l2[1],u2=reactExports.useState(!1),d2=u2[0],f2=u2[1];return jsxRuntimeExports.jsx("div",{style:{display:"inline-block",padding:"5px 10px",borderRadius:"var(--borderRadiusSmall)",backgroundColor:a2.bgColor||"var(--gray3)",color:a2.color||"var(--gray7)",cursor:"ns-resize",width:"10ch",height:"2em",userSelect:"none"},onPointerDown:__name(function(e2){e2.preventDefault(),e2.button===0&&c({x:e2.clientX,y:e2.clientY})},"onPointerDown"),onPointerMove:__name(function(e2){if(s2){var t3=e2.clientX-s2.x,n4=e2.clientY-s2.y;!d2&&(Math.abs(t3)>3||Math.abs(n4)>3)&&(f2(!0),r2())}},"onPointerMove"),onPointerUp:__name(function(e2){s2&&(d2||o2(),c(null),f2(!1))},"onPointerUp"),children:n3})}__name(InactiveNumberInput,"InactiveNumberInput");function EditingNumberInput(t2){var n3=t2.value,o2=t2.setValue,a2=t2.setInactive,s2=__rest(t2,["value","setValue","setInactive"]),c=reactExports.useState(!0),u2=c[0],d2=c[1],isValid=__name(function(e2){return!Number.isNaN(e2)&&(s2.min==null||e2>=s2.min)&&(s2.max==null||e2<=s2.max)},"isValid"),f2=React.useRef(null);reactExports.useEffect(function(){var e2,t3;(e2=f2.current)===null||e2===void 0||e2.focus(),(t3=f2.current)===null||t3===void 0||t3.select()},[]);var onInputCommit=__name(function(){var e2,n4,r2=((e2=f2.current)===null||e2===void 0?void 0:e2.value)||"",i2=parseFloat(r2);isValid(i2)&&o2(i2),(t2.onCommit||t2.onChange)&&isValid(i2)&&(t2.onCommit?t2.onCommit(i2):(n4=t2.onChange)===null||n4===void 0||n4.call(t2,i2)),a2()},"onInputCommit");return jsxRuntimeExports.jsx("input",{ref:f2,type:"text",defaultValue:String(n3),onChange:__name(function(e2){var t3=e2.target.value,n4=parseFloat(t3);d2(isValid(n4))},"onChange"),onBlur:onInputCommit,onKeyDown:__name(function(e2){e2.key==="Enter"?onInputCommit():e2.key==="Escape"&&a2()},"onKeyDown"),style:{padding:"5px",borderRadius:"var(--borderRadiusSmall)",backgroundColor:s2.bgActive||"var(--gray4)",color:u2?s2.color||"var(--gray7)":s2.invalidInputColor||"var(--danger)",border:"1px solid",borderColor:u2?s2.color||"var(--gray7)":s2.invalidInputColor||"var(--danger)",width:"10ch",height:"2em"}})}__name(EditingNumberInput,"EditingNumberInput");function ProgressDisplayPortal(n3){var o2,i2,a2,s2=n3.value,c=n3.setValue,u2=n3.setInactive,p2=__rest(n3,["value","setValue","setInactive"]),g2=React.useRef(null),m2=React.useRef(null),h2=React.useRef(s2).current,v2=(o2=p2.min)!==null&&o2!==void 0?o2:0,y2=(s2-v2)/(((i2=p2.max)!==null&&i2!==void 0?i2:100)-v2),b2=(a2=p2.step)!==null&&a2!==void 0?a2:.01,w2=React.useMemo(function(){if(b2==null)return 6;var e2=b2.toString(),t2=e2.indexOf(".");return t2>=0?e2.length-t2-1:0},[b2]),computeNewValue=__name(function(e2,t2){var n4,o3,r2=e2.y-t2.y,clamp2=__name(function(e3,t3,n5){return Math.max(t3,Math.min(n5,e3))},"clamp");r2=clamp2(r2,-150,f$1),r2/=f$1;var i3=(n4=p2.min)!==null&&n4!==void 0?n4:0,a3=(o3=p2.max)!==null&&o3!==void 0?o3:100,l2=clamp2(h2+(a3-i3)*r2,i3,a3);return parseFloat(l2.toFixed(w2))},"computeNewValue");return reactExports.useEffect(function(){console.log("DraggingNumberInput useEffect called");var up=__name(function(e3){if(g2.current?g2.current.releasePointerCapture(e3.pointerId):console.warn("captureRef.current is null, cannot release pointer capture"),m2.current!==null){var t2={x:e3.clientX,y:e3.clientY},n4=computeNewValue(m2.current,t2);c(n4),p2.onCommit?p2.onCommit(n4):p2.onChange&&p2.onChange(n4),m2.current=null,u2()}else u2()},"up"),move=__name(function(e3){if(m2.current!==null){var t2={x:e3.clientX,y:e3.clientY},n4=computeNewValue(m2.current,t2);c(n4),p2.onChange&&p2.onChange(n4)}else{console.log("startPosition is null, setting it now",{x:e3.clientX,y:e3.clientY}),m2.current={x:e3.clientX,y:e3.clientY};var o3=e3.pointerId;g2.current?g2.current.setPointerCapture(o3):console.warn("captureRef.current is null, cannot set pointer capture")}},"move"),e2=g2.current;if(e2)return e2.addEventListener("pointerup",up),e2.addEventListener("pointermove",move),function(){e2.removeEventListener("pointermove",move),e2.removeEventListener("pointerup",up)}},[g2.current]),reactDomExports.createPortal(jsxRuntimeExports.jsxs("div",{ref:g2,style:{borderRadius:"25px",backgroundColor:p2.bgColor||"var(--gray3)",color:p2.color||"var(--gray7)",cursor:"ns-resize",height:"".concat(f$1,"px"),position:"absolute",top:"calc(".concat(p2.top,"px + calc(1em - ").concat(75,"px))"),left:p2.left,width:"10ch",boxShadow:"0 0 15px rgba(0,0,0,0.3)",overflow:"hidden"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",boxShadow:"inset 0 0 3px ".concat(p2.color||"var(--gray7)"),borderRadius:"25px",opacity:.3}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",background:"linear-gradient(to top, transparent -20%, ".concat(p2.color||"var(--gray7)"," 100%)"),opacity:.5,width:"100%",height:"".concat(f$1*y2,"px"),bottom:0,left:0}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) scale(".concat(p2.hoverScale||1.8,")"),transformOrigin:"center",color:p2.hoverColor||"var(--gray7)",textShadow:"0 0px 8px rgba(0,0,0,0.35)",fontWeight:500,pointerEvents:"none",userSelect:"none"},children:s2})]}),document.body)}__name(ProgressDisplayPortal,"ProgressDisplayPortal");function DraggingNumberInput(t2){var n3=t2.value;t2.setValue,t2.setInactive;var o2=__rest(t2,["value","setValue","setInactive"]),l2=React.useRef(null),s2=reactExports.useState({top:0,left:0}),c=s2[0],u2=s2[1];return reactExports.useLayoutEffect(function(){if(l2.current){var e2=l2.current.getBoundingClientRect();u2({top:e2.top,left:e2.left})}else console.warn("captureRef.current is null, cannot get bounding rect")},[l2.current]),jsxRuntimeExports.jsx("div",{ref:l2,style:{display:"inline-block",padding:"5px 10px",borderRadius:"var(--borderRadiusSmall)",color:o2.color||"var(--gray7)",cursor:"ns-resize",width:"10ch",height:"2em",position:"relative"},children:jsxRuntimeExports.jsx(ProgressDisplayPortal,__assign({top:c.top,left:c.left},t2,{value:n3}))})}__name(DraggingNumberInput,"DraggingNumberInput");var p$1="CollapsibleSection-modules_collapsibleSection__rrUX-",g$1="CollapsibleSection-modules_collapsibleSectionClosed__bn2x7",m="CollapsibleSection-modules_collapsibleHeader__9m5Zn",h="CollapsibleSection-modules_collapsibleTitle__3MbqI",v$1="CollapsibleSection-modules_collapsibleArrow__kSTsT",y$1="CollapsibleSection-modules_collapsibleArrowOpen__y1sRM",b$1="CollapsibleSection-modules_collapsibleContent__-D89D",w$1="CollapsibleSection-modules_collapsibleContentClosed__WJoKk",x$1="CollapsibleSection-modules_collapsibleInner__9YJk2",C$1="CollapsibleSection-modules_collapsibleInnerClosed__-oM2n";function CollapsibleSection(n3){var o2=n3.title,i2=n3.children,a2=n3.iconName,l2=n3.defaultOpen,s2=n3.titleStyle,c=React.useState(l2!=null&&l2),u2=c[0],d2=c[1];return jsxRuntimeExports.jsxs("div",{className:"".concat(p$1," ").concat(u2?"":g$1),children:[jsxRuntimeExports.jsxs("div",{className:m,onClick:__name(function(){return d2(function(e2){return!e2})},"onClick"),children:[jsxRuntimeExports.jsxs("span",{className:h,style:__assign({display:"flex",alignItems:"center",gap:"0.5rem"},s2),children:[a2?jsxRuntimeExports.jsx(Icon,{iconName:a2,hoverBgColor:"transparent",hoverColor:"var(--gray6)"}):null,o2]}),jsxRuntimeExports.jsx("span",{className:"materialSymbols ".concat(v$1," ").concat(u2?y$1:""),children:"arrow_drop_down"})]}),jsxRuntimeExports.jsx("div",{className:"".concat(b$1," ").concat(u2?"":w$1),style:{maxHeight:u2?"none":0},children:jsxRuntimeExports.jsx("div",{className:"".concat(x$1," ").concat(u2?"":C$1),children:i2})})]})}__name(CollapsibleSection,"CollapsibleSection");function setRef$1(e2,t2){if(typeof e2=="function")return e2(t2);e2!=null&&(e2.current=t2)}__name(setRef$1,"setRef$1");function composeRefs$1(...e2){return t2=>{let n3=!1;const o2=e2.map(e3=>{const o3=setRef$1(e3,t2);return n3||typeof o3!="function"||(n3=!0),o3});if(n3)return()=>{for(let t3=0;t3<o2.length;t3++){const n4=o2[t3];typeof n4=="function"?n4():setRef$1(e2[t3],null)}}}}__name(composeRefs$1,"composeRefs$1");function useComposedRefs$1(...e2){return reactExports.useCallback(composeRefs$1(...e2),e2)}__name(useComposedRefs$1,"useComposedRefs$1");function createSlot$1(t2){const n3=createSlotClone$1(t2),r2=reactExports.forwardRef((t3,r3)=>{const{children:i2,...a2}=t3,l2=reactExports.Children.toArray(i2),s2=l2.find(isSlottable$1);if(s2){const t4=s2.props.children,i3=l2.map(e2=>e2===s2?reactExports.Children.count(t4)>1?reactExports.Children.only(null):reactExports.isValidElement(t4)?t4.props.children:null:e2);return jsxRuntimeExports.jsx(n3,{...a2,ref:r3,children:reactExports.isValidElement(t4)?reactExports.cloneElement(t4,void 0,i3):null})}return jsxRuntimeExports.jsx(n3,{...a2,ref:r3,children:i2})});return r2.displayName=`${t2}.Slot`,r2}__name(createSlot$1,"createSlot$1");function createSlotClone$1(e2){const t2=reactExports.forwardRef((e3,t3)=>{const{children:n3,...r2}=e3;if(reactExports.isValidElement(n3)){const e4=__name(function(e5){var _a26,_b;let t4=(_a26=Object.getOwnPropertyDescriptor(e5.props,"ref"))==null?void 0:_a26.get,n4=t4&&"isReactWarning"in t4&&t4.isReactWarning;return n4?e5.ref:(t4=(_b=Object.getOwnPropertyDescriptor(e5,"ref"))==null?void 0:_b.get,n4=t4&&"isReactWarning"in t4&&t4.isReactWarning,n4?e5.props.ref:e5.props.ref||e5.ref)},"getElementRef$1")(n3),i2=__name(function(e5,t4){const n4={...t4};for(const o2 in t4){const r3=e5[o2],i3=t4[o2];/^on[A-Z]/.test(o2)?r3&&i3?n4[o2]=(...e6)=>{const t5=i3(...e6);return r3(...e6),t5}:r3&&(n4[o2]=r3):o2==="style"?n4[o2]={...r3,...i3}:o2==="className"&&(n4[o2]=[r3,i3].filter(Boolean).join(" "))}return{...e5,...n4}},"mergeProps")(r2,n3.props);return n3.type!==reactExports.Fragment&&(i2.ref=t3?composeRefs$1(t3,e4):e4),reactExports.cloneElement(n3,i2)}return reactExports.Children.count(n3)>1?reactExports.Children.only(null):null});return t2.displayName=`${e2}.SlotClone`,t2}__name(createSlotClone$1,"createSlotClone$1");styleInject(`.CollapsibleSection-modules_collapsibleSection__rrUX- {
  border-radius: var(--borderRadiusSmall);
  margin-bottom: 16px;
  border: 2px solid var(--gray3);
}
.CollapsibleSection-modules_collapsibleSectionClosed__bn2x7 {
  box-shadow: none;
}
.CollapsibleSection-modules_collapsibleHeader__9m5Zn {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.5rem 1rem;
  user-select: none;
}
.CollapsibleSection-modules_collapsibleTitle__3MbqI {
  color: white;
  font-size: 1.15rem;
  font-weight: 600;
  flex: 1;
}
.CollapsibleSection-modules_collapsibleArrow__kSTsT {
  font-size: 30px;
  color: var(--gray6);
  margin-left: 8px;
  transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
}
.CollapsibleSection-modules_collapsibleArrowOpen__y1sRM {
  transform: rotate(180deg);
}
.CollapsibleSection-modules_collapsibleContent__-D89D {
  padding: 0.75rem 1rem 1rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: none;
  overflow: hidden;
}
.CollapsibleSection-modules_collapsibleContentClosed__WJoKk {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
}
.CollapsibleSection-modules_collapsibleInner__9YJk2 {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.CollapsibleSection-modules_collapsibleInnerClosed__-oM2n {
  display: none;
}
`);var S$1=Symbol("radix.slottable");function isSlottable$1(e2){return reactExports.isValidElement(e2)&&typeof e2.type=="function"&&"__radixId"in e2.type&&e2.type.__radixId===S$1}__name(isSlottable$1,"isSlottable$1");var E$1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((t2,n3)=>{const r2=createSlot$1(`Primitive.${n3}`),i2=reactExports.forwardRef((t3,o2)=>{const{asChild:i3,...a2}=t3,l2=i3?r2:n3;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(l2,{...a2,ref:o2})});return i2.displayName=`Primitive.${n3}`,{...t2,[n3]:i2}},{});function createContextScope$1(t2,n3=[]){let r2=[];const createScope=__name(()=>{const e2=r2.map(e3=>reactExports.createContext(e3));return __name(function(n4){const r3=(n4==null?void 0:n4[t2])||e2;return reactExports.useMemo(()=>({[`__scope${t2}`]:{...n4,[t2]:r3}}),[n4,r3])},"useScope")},"createScope");return createScope.scopeName=t2,[__name(function(n4,i2){const a2=reactExports.createContext(i2),l2=r2.length;r2=[...r2,i2];const Provider=__name(n5=>{var _a26;const{scope:r3,children:i3,...s2}=n5,c=((_a26=r3==null?void 0:r3[t2])==null?void 0:_a26[l2])||a2,u2=reactExports.useMemo(()=>s2,Object.values(s2));return jsxRuntimeExports.jsx(c.Provider,{value:u2,children:i3})},"Provider");return Provider.displayName=n4+"Provider",[Provider,__name(function(e2,r3){var _a26;const s2=((_a26=r3==null?void 0:r3[t2])==null?void 0:_a26[l2])||a2,c=reactExports.useContext(s2);if(c)return c;if(i2!==void 0)return i2;throw new Error(`\`${e2}\` must be used within \`${n4}\``)},"useContext2")]},"createContext3"),composeContextScopes$1(createScope,...n3)]}__name(createContextScope$1,"createContextScope$1");function composeContextScopes$1(...e2){const t2=e2[0];if(e2.length===1)return t2;const createScope=__name(()=>{const n3=e2.map(e3=>({useScope:e3(),scopeName:e3.scopeName}));return __name(function(e3){const r2=n3.reduce((t3,{useScope:n4,scopeName:o2})=>({...t3,...n4(e3)[`__scope${o2}`]}),{});return reactExports.useMemo(()=>({[`__scope${t2.scopeName}`]:r2}),[r2])},"useComposedScopes")},"createScope");return createScope.scopeName=t2.scopeName,createScope}__name(composeContextScopes$1,"composeContextScopes$1");function composeEventHandlers$1(e2,t2,{checkForDefaultPrevented:n3=!0}={}){return __name(function(o2){if(e2==null||e2(o2),n3===!1||!o2.defaultPrevented)return t2==null?void 0:t2(o2)},"handleEvent")}__name(composeEventHandlers$1,"composeEventHandlers$1");var R$1=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},A$1=React$1[" useInsertionEffect ".trim().toString()]||R$1;function useControllableState$1({prop:e2,defaultProp:t2,onChange:n3=__name(()=>{},"n"),caller:r2}){const[i2,a2,l2]=__name(function({defaultProp:e3,onChange:t3}){const[n4,r3]=reactExports.useState(e3),i3=reactExports.useRef(n4),a3=reactExports.useRef(t3);return A$1(()=>{a3.current=t3},[t3]),reactExports.useEffect(()=>{var _a26;i3.current!==n4&&((_a26=a3.current)==null||_a26.call(a3,n4),i3.current=n4)},[n4,i3]),[n4,r3,a3]},"useUncontrolledState")({defaultProp:t2,onChange:n3}),s2=e2!==void 0,c=s2?e2:i2;{const t3=reactExports.useRef(e2!==void 0);reactExports.useEffect(()=>{const e3=t3.current;e3!==s2&&console.warn(`${r2} is changing from ${e3?"controlled":"uncontrolled"} to ${s2?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),t3.current=s2},[s2,r2])}const u2=reactExports.useCallback(t3=>{var _a26;if(s2){const n4=__name(function(e3){return typeof e3=="function"},"isFunction")(t3)?t3(e2):t3;n4!==e2&&((_a26=l2.current)==null||_a26.call(l2,n4))}else a2(t3)},[s2,e2,a2,l2]);return[c,u2]}__name(useControllableState$1,"useControllableState$1");var Presence=__name(e2=>{const{present:t2,children:n3}=e2,r2=__name(function(e3){const[t3,n4]=reactExports.useState(),r3=reactExports.useRef(null),i3=reactExports.useRef(e3),a3=reactExports.useRef("none"),l2=e3?"mounted":"unmounted",[s2,c]=__name(function(e4,t4){return reactExports.useReducer((e5,n5)=>t4[e5][n5]??e5,e4)},"useStateMachine")(l2,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const e4=getAnimationName(r3.current);a3.current=s2==="mounted"?e4:"none"},[s2]),R$1(()=>{const t4=r3.current,n5=i3.current;if(n5!==e3){const o2=a3.current,r4=getAnimationName(t4);e3?c("MOUNT"):r4==="none"||(t4==null?void 0:t4.display)==="none"?c("UNMOUNT"):c(n5&&o2!==r4?"ANIMATION_OUT":"UNMOUNT"),i3.current=e3}},[e3,c]),R$1(()=>{if(t3){let e4;const n5=t3.ownerDocument.defaultView??window,handleAnimationEnd=__name(o2=>{const a4=getAnimationName(r3.current).includes(o2.animationName);if(o2.target===t3&&a4&&(c("ANIMATION_END"),!i3.current)){const o3=t3.style.animationFillMode;t3.style.animationFillMode="forwards",e4=n5.setTimeout(()=>{t3.style.animationFillMode==="forwards"&&(t3.style.animationFillMode=o3)})}},"handleAnimationEnd"),handleAnimationStart=__name(e5=>{e5.target===t3&&(a3.current=getAnimationName(r3.current))},"handleAnimationStart");return t3.addEventListener("animationstart",handleAnimationStart),t3.addEventListener("animationcancel",handleAnimationEnd),t3.addEventListener("animationend",handleAnimationEnd),()=>{n5.clearTimeout(e4),t3.removeEventListener("animationstart",handleAnimationStart),t3.removeEventListener("animationcancel",handleAnimationEnd),t3.removeEventListener("animationend",handleAnimationEnd)}}c("ANIMATION_END")},[t3,c]),{isPresent:["mounted","unmountSuspended"].includes(s2),ref:reactExports.useCallback(e4=>{r3.current=e4?getComputedStyle(e4):null,n4(e4)},[])}},"usePresence")(t2),i2=typeof n3=="function"?n3({present:r2.isPresent}):reactExports.Children.only(n3),a2=useComposedRefs$1(r2.ref,__name(function(e3){var _a26,_b;let t3=(_a26=Object.getOwnPropertyDescriptor(e3.props,"ref"))==null?void 0:_a26.get,n4=t3&&"isReactWarning"in t3&&t3.isReactWarning;return n4?e3.ref:(t3=(_b=Object.getOwnPropertyDescriptor(e3,"ref"))==null?void 0:_b.get,n4=t3&&"isReactWarning"in t3&&t3.isReactWarning,n4?e3.props.ref:e3.props.ref||e3.ref)},"getElementRef")(i2));return typeof n3=="function"||r2.isPresent?reactExports.cloneElement(i2,{ref:a2}):null},"Presence");function getAnimationName(e2){return(e2==null?void 0:e2.animationName)||"none"}__name(getAnimationName,"getAnimationName");Presence.displayName="Presence";var P$4=React$1[" useId ".trim().toString()]||(()=>{}),O$1=0;function useId(e2){const[t2,n3]=reactExports.useState(P$4());return R$1(()=>{n3(e3=>e3??String(O$1++))},[e2]),e2||(t2?`radix-${t2}`:"")}__name(useId,"useId");function useCallbackRef$1(e2){const t2=reactExports.useRef(e2);return reactExports.useEffect(()=>{t2.current=e2}),reactExports.useMemo(()=>(...e3)=>{var _a26;return(_a26=t2.current)==null?void 0:_a26.call(t2,...e3)},[])}__name(useCallbackRef$1,"useCallbackRef$1");var N$1,_$1="dismissableLayer.update",T$1="dismissableLayer.pointerDownOutside",k$1="dismissableLayer.focusOutside",M$1=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),L$1=reactExports.forwardRef((t2,n3)=>{const{disableOutsidePointerEvents:r2=!1,onEscapeKeyDown:i2,onPointerDownOutside:a2,onFocusOutside:l2,onInteractOutside:s2,onDismiss:c,...u2}=t2,d2=reactExports.useContext(M$1),[f2,p2]=reactExports.useState(null),g2=(f2==null?void 0:f2.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m2]=reactExports.useState({}),h2=useComposedRefs$1(n3,e2=>p2(e2)),v2=Array.from(d2.layers),[y2]=[...d2.layersWithOutsidePointerEventsDisabled].slice(-1),b2=v2.indexOf(y2),w2=f2?v2.indexOf(f2):-1,x2=d2.layersWithOutsidePointerEventsDisabled.size>0,C3=w2>=b2,S2=__name(function(e2,t3=globalThis==null?void 0:globalThis.document){const n4=useCallbackRef$1(e2),r3=reactExports.useRef(!1),i3=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const handlePointerDown=__name(e4=>{if(e4.target&&!r3.current){let handleAndDispatchPointerDownOutsideEvent2=__name(function(){handleAndDispatchCustomEvent(T$1,n4,o2,{discrete:!0})},"handleAndDispatchPointerDownOutsideEvent2");const o2={originalEvent:e4};e4.pointerType==="touch"?(t3.removeEventListener("click",i3.current),i3.current=handleAndDispatchPointerDownOutsideEvent2,t3.addEventListener("click",i3.current,{once:!0})):handleAndDispatchPointerDownOutsideEvent2()}else t3.removeEventListener("click",i3.current);r3.current=!1},"handlePointerDown"),e3=window.setTimeout(()=>{t3.addEventListener("pointerdown",handlePointerDown)},0);return()=>{window.clearTimeout(e3),t3.removeEventListener("pointerdown",handlePointerDown),t3.removeEventListener("click",i3.current)}},[t3,n4]),{onPointerDownCapture:__name(()=>r3.current=!0,"onPointerDownCapture")}},"usePointerDownOutside")(e2=>{const t3=e2.target,n4=[...d2.branches].some(e3=>e3.contains(t3));C3&&!n4&&(a2==null||a2(e2),s2==null||s2(e2),e2.defaultPrevented||(c==null||c()))},g2),R2=__name(function(e2,t3=globalThis==null?void 0:globalThis.document){const n4=useCallbackRef$1(e2),r3=reactExports.useRef(!1);return reactExports.useEffect(()=>{const handleFocus=__name(e3=>{e3.target&&!r3.current&&handleAndDispatchCustomEvent(k$1,n4,{originalEvent:e3},{discrete:!1})},"handleFocus");return t3.addEventListener("focusin",handleFocus),()=>t3.removeEventListener("focusin",handleFocus)},[t3,n4]),{onFocusCapture:__name(()=>r3.current=!0,"onFocusCapture"),onBlurCapture:__name(()=>r3.current=!1,"onBlurCapture")}},"useFocusOutside")(e2=>{const t3=e2.target;[...d2.branches].some(e3=>e3.contains(t3))||(l2==null||l2(e2),s2==null||s2(e2),e2.defaultPrevented||(c==null||c()))},g2);return __name(function(e2,t3=globalThis==null?void 0:globalThis.document){const n4=useCallbackRef$1(e2);reactExports.useEffect(()=>{const handleKeyDown=__name(e3=>{e3.key==="Escape"&&n4(e3)},"handleKeyDown");return t3.addEventListener("keydown",handleKeyDown,{capture:!0}),()=>t3.removeEventListener("keydown",handleKeyDown,{capture:!0})},[n4,t3])},"useEscapeKeydown")(e2=>{w2===d2.layers.size-1&&(i2==null||i2(e2),!e2.defaultPrevented&&c&&(e2.preventDefault(),c()))},g2),reactExports.useEffect(()=>{if(f2)return r2&&(d2.layersWithOutsidePointerEventsDisabled.size===0&&(N$1=g2.body.style.pointerEvents,g2.body.style.pointerEvents="none"),d2.layersWithOutsidePointerEventsDisabled.add(f2)),d2.layers.add(f2),dispatchUpdate(),()=>{r2&&d2.layersWithOutsidePointerEventsDisabled.size===1&&(g2.body.style.pointerEvents=N$1)}},[f2,g2,r2,d2]),reactExports.useEffect(()=>()=>{f2&&(d2.layers.delete(f2),d2.layersWithOutsidePointerEventsDisabled.delete(f2),dispatchUpdate())},[f2,d2]),reactExports.useEffect(()=>{const handleUpdate=__name(()=>m2({}),"handleUpdate");return document.addEventListener(_$1,handleUpdate),()=>document.removeEventListener(_$1,handleUpdate)},[]),jsxRuntimeExports.jsx(E$1.div,{...u2,ref:h2,style:{pointerEvents:x2?C3?"auto":"none":void 0,...t2.style},onFocusCapture:composeEventHandlers$1(t2.onFocusCapture,R2.onFocusCapture),onBlurCapture:composeEventHandlers$1(t2.onBlurCapture,R2.onBlurCapture),onPointerDownCapture:composeEventHandlers$1(t2.onPointerDownCapture,S2.onPointerDownCapture)})});L$1.displayName="DismissableLayer";function dispatchUpdate(){const e2=new CustomEvent(_$1);document.dispatchEvent(e2)}__name(dispatchUpdate,"dispatchUpdate");function handleAndDispatchCustomEvent(e2,t2,n3,{discrete:o2}){const r2=n3.originalEvent.target,i2=new CustomEvent(e2,{bubbles:!1,cancelable:!0,detail:n3});t2&&r2.addEventListener(e2,t2,{once:!0}),o2?__name(function(e3,t3){e3&&reactDomExports.flushSync(()=>e3.dispatchEvent(t3))},"dispatchDiscreteCustomEvent")(r2,i2):r2.dispatchEvent(i2)}__name(handleAndDispatchCustomEvent,"handleAndDispatchCustomEvent");reactExports.forwardRef((t2,n3)=>{const r2=reactExports.useContext(M$1),i2=reactExports.useRef(null),a2=useComposedRefs$1(n3,i2);return reactExports.useEffect(()=>{const e2=i2.current;if(e2)return r2.branches.add(e2),()=>{r2.branches.delete(e2)}},[r2.branches]),jsxRuntimeExports.jsx(E$1.div,{...t2,ref:a2})}).displayName="DismissableLayerBranch";var D$2="focusScope.autoFocusOnMount",I$1="focusScope.autoFocusOnUnmount",F$1={bubbles:!1,cancelable:!0},B$2=reactExports.forwardRef((t2,n3)=>{const{loop:r2=!1,trapped:i2=!1,onMountAutoFocus:a2,onUnmountAutoFocus:l2,...s2}=t2,[c,u2]=reactExports.useState(null),d2=useCallbackRef$1(a2),f2=useCallbackRef$1(l2),p2=reactExports.useRef(null),g2=useComposedRefs$1(n3,e2=>u2(e2)),m2=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(i2){let handleFocusIn2=__name(function(e3){if(m2.paused||!c)return;const t3=e3.target;c.contains(t3)?p2.current=t3:focus(p2.current,{select:!0})},"handleFocusIn2"),handleFocusOut2=__name(function(e3){if(m2.paused||!c)return;const t3=e3.relatedTarget;t3!==null&&(c.contains(t3)||focus(p2.current,{select:!0}))},"handleFocusOut2"),handleMutations2=__name(function(e3){if(document.activeElement===document.body)for(const t3 of e3)t3.removedNodes.length>0&&focus(c)},"handleMutations2");document.addEventListener("focusin",handleFocusIn2),document.addEventListener("focusout",handleFocusOut2);const e2=new MutationObserver(handleMutations2);return c&&e2.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",handleFocusIn2),document.removeEventListener("focusout",handleFocusOut2),e2.disconnect()}}},[i2,c,m2.paused]),reactExports.useEffect(()=>{if(c){W$1.add(m2);const e2=document.activeElement;if(!c.contains(e2)){const t3=new CustomEvent(D$2,F$1);c.addEventListener(D$2,d2),c.dispatchEvent(t3),t3.defaultPrevented||(__name(function(e3,{select:t4=!1}={}){const n4=document.activeElement;for(const o2 of e3)if(focus(o2,{select:t4}),document.activeElement!==n4)return},"focusFirst")(__name(function(e3){return e3.filter(e4=>e4.tagName!=="A")},"removeLinks")(getTabbableCandidates(c)),{select:!0}),document.activeElement===e2&&focus(c))}return()=>{c.removeEventListener(D$2,d2),setTimeout(()=>{const t3=new CustomEvent(I$1,F$1);c.addEventListener(I$1,f2),c.dispatchEvent(t3),t3.defaultPrevented||focus(e2??document.body,{select:!0}),c.removeEventListener(I$1,f2),W$1.remove(m2)},0)}}},[c,d2,f2,m2]);const h2=reactExports.useCallback(e2=>{if(!r2&&!i2||m2.paused)return;const t3=e2.key==="Tab"&&!e2.altKey&&!e2.ctrlKey&&!e2.metaKey,n4=document.activeElement;if(t3&&n4){const t4=e2.currentTarget,[o2,i3]=__name(function(e3){const t5=getTabbableCandidates(e3),n5=findVisible(t5,e3),o3=findVisible(t5.reverse(),e3);return[n5,o3]},"getTabbableEdges")(t4);o2&&i3?e2.shiftKey||n4!==i3?e2.shiftKey&&n4===o2&&(e2.preventDefault(),r2&&focus(i3,{select:!0})):(e2.preventDefault(),r2&&focus(o2,{select:!0})):n4===t4&&e2.preventDefault()}},[r2,i2,m2.paused]);return jsxRuntimeExports.jsx(E$1.div,{tabIndex:-1,...s2,ref:g2,onKeyDown:h2})});function getTabbableCandidates(e2){const t2=[],n3=document.createTreeWalker(e2,NodeFilter.SHOW_ELEMENT,{acceptNode:__name(e3=>{const t3=e3.tagName==="INPUT"&&e3.type==="hidden";return e3.disabled||e3.hidden||t3?NodeFilter.FILTER_SKIP:e3.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},"acceptNode")});for(;n3.nextNode();)t2.push(n3.currentNode);return t2}__name(getTabbableCandidates,"getTabbableCandidates");function findVisible(e2,t2){for(const n3 of e2)if(!isHidden(n3,{upTo:t2}))return n3}__name(findVisible,"findVisible");function isHidden(e2,{upTo:t2}){if(getComputedStyle(e2).visibility==="hidden")return!0;for(;e2;){if(t2!==void 0&&e2===t2)return!1;if(getComputedStyle(e2).display==="none")return!0;e2=e2.parentElement}return!1}__name(isHidden,"isHidden");function focus(e2,{select:t2=!1}={}){if(e2&&e2.focus){const n3=document.activeElement;e2.focus({preventScroll:!0}),e2!==n3&&__name(function(e3){return e3 instanceof HTMLInputElement&&"select"in e3},"isSelectableInput")(e2)&&t2&&e2.select()}}__name(focus,"focus");B$2.displayName="FocusScope";var W$1=__name(function(){let e2=[];return{add(t2){const n3=e2[0];t2!==n3&&(n3==null||n3.pause()),e2=arrayRemove(e2,t2),e2.unshift(t2)},remove(t2){var _a26;e2=arrayRemove(e2,t2),(_a26=e2[0])==null||_a26.resume()}}},"createFocusScopesStack")();function arrayRemove(e2,t2){const n3=[...e2],o2=n3.indexOf(t2);return o2!==-1&&n3.splice(o2,1),n3}__name(arrayRemove,"arrayRemove");var H$1=reactExports.forwardRef((t2,n3)=>{var _a26;const{container:r2,...i2}=t2,[a2,l2]=reactExports.useState(!1);R$1(()=>l2(!0),[]);const s2=r2||a2&&((_a26=globalThis==null?void 0:globalThis.document)==null?void 0:_a26.body);return s2?ReactDOM.createPortal(jsxRuntimeExports.jsx(E$1.div,{...i2,ref:n3}),s2):null});H$1.displayName="Portal";var $$1=0;function createFocusGuard(){const e2=document.createElement("span");return e2.setAttribute("data-radix-focus-guard",""),e2.tabIndex=0,e2.style.outline="none",e2.style.opacity="0",e2.style.position="fixed",e2.style.pointerEvents="none",e2}__name(createFocusGuard,"createFocusGuard");var V$1="right-scroll-bar-position",z$1="width-before-scroll-bar";function assignRef(e2,t2){return typeof e2=="function"?e2(t2):e2&&(e2.current=t2),e2}__name(assignRef,"assignRef");var j$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,X$1=new WeakMap;function useMergeRefs(e2,t2){var n3=__name(function(e3,t3){var n4=reactExports.useState(function(){return{value:e3,callback:t3,facade:{get current(){return n4.value},set current(e4){var t4=n4.value;t4!==e4&&(n4.value=e4,n4.callback(e4,t4))}}}})[0];return n4.callback=t3,n4.facade},"useCallbackRef")(null,function(t3){return e2.forEach(function(e3){return assignRef(e3,t3)})});return j$1(function(){var t3=X$1.get(n3);if(t3){var o2=new Set(t3),r2=new Set(e2),i2=n3.current;o2.forEach(function(e3){r2.has(e3)||assignRef(e3,null)}),r2.forEach(function(e3){o2.has(e3)||assignRef(e3,i2)})}X$1.set(n3,e2)},[e2]),n3}__name(useMergeRefs,"useMergeRefs");function ItoI(e2){return e2}__name(ItoI,"ItoI");var SideCar$1=__name(function(e2){var t2=e2.sideCar,n3=__rest(e2,["sideCar"]);if(!t2)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r2=t2.read();if(!r2)throw new Error("Sidecar medium not found");return reactExports.createElement(r2,__assign({},n3))},"SideCar$1");SideCar$1.isSideCarExport=!0;var U$1=__name(function(e2){e2===void 0&&(e2={});var t2=__name(function(e3,t3){t3===void 0&&(t3=ItoI);var n3=[],o2=!1;return{read:__name(function(){if(o2)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n3.length?n3[n3.length-1]:e3},"read"),useMedium:__name(function(e4){var r2=t3(e4,o2);return n3.push(r2),function(){n3=n3.filter(function(e5){return e5!==r2})}},"useMedium"),assignSyncMedium:__name(function(e4){for(o2=!0;n3.length;){var t4=n3;n3=[],t4.forEach(e4)}n3={push:__name(function(t5){return e4(t5)},"push"),filter:__name(function(){return n3},"filter")}},"assignSyncMedium"),assignMedium:__name(function(e4){o2=!0;var t4=[];if(n3.length){var r2=n3;n3=[],r2.forEach(e4),t4=n3}var executeQueue=__name(function(){var n4=t4;t4=[],n4.forEach(e4)},"executeQueue"),cycle=__name(function(){return Promise.resolve().then(executeQueue)},"cycle");cycle(),n3={push:__name(function(e5){t4.push(e5),cycle()},"push"),filter:__name(function(e5){return t4=t4.filter(e5),n3},"filter")}},"assignMedium")}},"innerCreateMedium")(null);return t2.options=__assign({async:!0,ssr:!1},e2),t2},"createSidecarMedium")(),nothing=__name(function(){},"nothing"),Y$1=reactExports.forwardRef(function(e2,t2){var n3=reactExports.useRef(null),r2=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),i2=r2[0],a2=r2[1],l2=e2.forwardProps,s2=e2.children,c=e2.className,u2=e2.removeScrollBar,d2=e2.enabled,f2=e2.shards,p2=e2.sideCar,g2=e2.noRelative,m2=e2.noIsolation,h2=e2.inert,v2=e2.allowPinchZoom,y2=e2.as,b2=y2===void 0?"div":y2,w2=e2.gapMode,x2=__rest(e2,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C3=p2,S2=useMergeRefs([n3,t2]),E2=__assign(__assign({},x2),i2);return reactExports.createElement(reactExports.Fragment,null,d2&&reactExports.createElement(C3,{sideCar:U$1,removeScrollBar:u2,shards:f2,noRelative:g2,noIsolation:m2,inert:h2,setCallbacks:a2,allowPinchZoom:!!v2,lockRef:n3,gapMode:w2}),l2?reactExports.cloneElement(reactExports.Children.only(s2),__assign(__assign({},E2),{ref:S2})):reactExports.createElement(b2,__assign({},E2,{className:c,ref:S2}),s2))});Y$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Y$1.classNames={fullWidth:z$1,zeroRight:V$1};function makeStyleTag(){if(!document)return null;var e2=document.createElement("style");e2.type="text/css";var t2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__}();return t2&&e2.setAttribute("nonce",t2),e2}__name(makeStyleTag,"makeStyleTag");var stylesheetSingleton=__name(function(){var e2=0,t2=null;return{add:__name(function(n3){e2==0&&(t2=makeStyleTag())&&(__name(function(e3,t3){e3.styleSheet?e3.styleSheet.cssText=t3:e3.appendChild(document.createTextNode(t3))},"injectStyles")(t2,n3),__name(function(e3){(document.head||document.getElementsByTagName("head")[0]).appendChild(e3)},"insertStyleTag")(t2)),e2++},"add"),remove:__name(function(){!--e2&&t2&&(t2.parentNode&&t2.parentNode.removeChild(t2),t2=null)},"remove")}},"stylesheetSingleton"),styleSingleton=__name(function(){var e2,t2=(e2=stylesheetSingleton(),function(t3,n3){reactExports.useEffect(function(){return e2.add(t3),function(){e2.remove()}},[t3&&n3])});return function(e3){var n3=e3.styles,o2=e3.dynamic;return t2(n3,o2),null}},"styleSingleton"),K$1={left:0,top:0,right:0,gap:0},parse$2=__name(function(e2){return parseInt(e2||"",10)||0},"parse$2"),getGapWidth=__name(function(e2){if(e2===void 0&&(e2="margin"),typeof window>"u")return K$1;var t2=function(e3){var t3=window.getComputedStyle(document.body),n4=t3[e3==="padding"?"paddingLeft":"marginLeft"],o3=t3[e3==="padding"?"paddingTop":"marginTop"],r2=t3[e3==="padding"?"paddingRight":"marginRight"];return[parse$2(n4),parse$2(o3),parse$2(r2)]}(e2),n3=document.documentElement.clientWidth,o2=window.innerWidth;return{left:t2[0],top:t2[1],right:t2[2],gap:Math.max(0,o2-n3+t2[2]-t2[0])}},"getGapWidth"),q$1=styleSingleton(),G$1="data-scroll-locked",getStyles=__name(function(e2,t2,n3,o2){var r2=e2.left,i2=e2.top,a2=e2.right,l2=e2.gap;return n3===void 0&&(n3="margin"),`
  .`.concat("with-scroll-bars-hidden",` {
   overflow: hidden `).concat(o2,`;
   padding-right: `).concat(l2,"px ").concat(o2,`;
  }
  body[`).concat(G$1,`] {
    overflow: hidden `).concat(o2,`;
    overscroll-behavior: contain;
    `).concat([t2&&"position: relative ".concat(o2,";"),n3==="margin"&&`
    padding-left: `.concat(r2,`px;
    padding-top: `).concat(i2,`px;
    padding-right: `).concat(a2,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l2,"px ").concat(o2,`;
    `),n3==="padding"&&"padding-right: ".concat(l2,"px ").concat(o2,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(V$1,` {
    right: `).concat(l2,"px ").concat(o2,`;
  }
  
  .`).concat(z$1,` {
    margin-right: `).concat(l2,"px ").concat(o2,`;
  }
  
  .`).concat(V$1," .").concat(V$1,` {
    right: 0 `).concat(o2,`;
  }
  
  .`).concat(z$1," .").concat(z$1,` {
    margin-right: 0 `).concat(o2,`;
  }
  
  body[`).concat(G$1,`] {
    `).concat("--removed-body-scroll-bar-size",": ").concat(l2,`px;
  }
`)},"getStyles"),getCurrentUseCounter=__name(function(){var e2=parseInt(document.body.getAttribute(G$1)||"0",10);return isFinite(e2)?e2:0},"getCurrentUseCounter"),RemoveScrollBar=__name(function(e2){var t2=e2.noRelative,n3=e2.noImportant,r2=e2.gapMode,i2=r2===void 0?"margin":r2;reactExports.useEffect(function(){return document.body.setAttribute(G$1,(getCurrentUseCounter()+1).toString()),function(){var e3=getCurrentUseCounter()-1;e3<=0?document.body.removeAttribute(G$1):document.body.setAttribute(G$1,e3.toString())}},[]);var a2=reactExports.useMemo(function(){return getGapWidth(i2)},[i2]);return reactExports.createElement(q$1,{styles:getStyles(a2,!t2,i2,n3?"":"!important")})},"RemoveScrollBar"),Z$1=!1;if(typeof window<"u")try{var J$1=Object.defineProperty({},"passive",{get:__name(function(){return Z$1=!0,!0},"get")});window.addEventListener("test",J$1,J$1),window.removeEventListener("test",J$1,J$1)}catch{Z$1=!1}var Q$1=!!Z$1&&{passive:!1},elementCanBeScrolled=__name(function(e2,t2){if(!(e2 instanceof Element))return!1;var n3=window.getComputedStyle(e2);return n3[t2]!=="hidden"&&!(n3.overflowY===n3.overflowX&&!function(e3){return e3.tagName==="TEXTAREA"}(e2)&&n3[t2]==="visible")},"elementCanBeScrolled"),locationCouldBeScrolled=__name(function(e2,t2){var n3=t2.ownerDocument,o2=t2;do{if(typeof ShadowRoot<"u"&&o2 instanceof ShadowRoot&&(o2=o2.host),elementCouldBeScrolled(e2,o2)){var r2=getScrollVariables(e2,o2);if(r2[1]>r2[2])return!0}o2=o2.parentNode}while(o2&&o2!==n3.body);return!1},"locationCouldBeScrolled"),elementCouldBeScrolled=__name(function(e2,t2){return e2==="v"?function(e3){return elementCanBeScrolled(e3,"overflowY")}(t2):function(e3){return elementCanBeScrolled(e3,"overflowX")}(t2)},"elementCouldBeScrolled"),getScrollVariables=__name(function(e2,t2){return e2==="v"?[(n3=t2).scrollTop,n3.scrollHeight,n3.clientHeight]:function(e3){return[e3.scrollLeft,e3.scrollWidth,e3.clientWidth]}(t2);var n3},"getScrollVariables"),getTouchXY=__name(function(e2){return"changedTouches"in e2?[e2.changedTouches[0].clientX,e2.changedTouches[0].clientY]:[0,0]},"getTouchXY"),getDeltaXY=__name(function(e2){return[e2.deltaX,e2.deltaY]},"getDeltaXY"),extractRef=__name(function(e2){return e2&&"current"in e2?e2.current:e2},"extractRef"),generateStyle=__name(function(e2){return`
  .block-interactivity-`.concat(e2,` {pointer-events: none;}
  .allow-interactivity-`).concat(e2,` {pointer-events: all;}
`)},"generateStyle"),ee$1=0,te$1=[];function getOutermostShadowParent(e2){for(var t2=null;e2!==null;)e2 instanceof ShadowRoot&&(t2=e2.host,e2=e2.host),e2=e2.parentNode;return t2}__name(getOutermostShadowParent,"getOutermostShadowParent");var ne$1=__name(function(e2,t2){return e2.useMedium(t2),SideCar$1},"exportSidecar")(U$1,__name(function(e2){var t2=reactExports.useRef([]),n3=reactExports.useRef([0,0]),r2=reactExports.useRef(),i2=reactExports.useState(ee$1++)[0],a2=reactExports.useState(styleSingleton)[0],l2=reactExports.useRef(e2);reactExports.useEffect(function(){l2.current=e2},[e2]),reactExports.useEffect(function(){if(e2.inert){document.body.classList.add("block-interactivity-".concat(i2));var t3=__spreadArray([e2.lockRef.current],(e2.shards||[]).map(extractRef),!0).filter(Boolean);return t3.forEach(function(e3){return e3.classList.add("allow-interactivity-".concat(i2))}),function(){document.body.classList.remove("block-interactivity-".concat(i2)),t3.forEach(function(e3){return e3.classList.remove("allow-interactivity-".concat(i2))})}}},[e2.inert,e2.lockRef.current,e2.shards]);var s2=reactExports.useCallback(function(e3,t3){if("touches"in e3&&e3.touches.length===2||e3.type==="wheel"&&e3.ctrlKey)return!l2.current.allowPinchZoom;var o2,i3=getTouchXY(e3),a3=n3.current,s3="deltaX"in e3?e3.deltaX:a3[0]-i3[0],c2="deltaY"in e3?e3.deltaY:a3[1]-i3[1],u3=e3.target,d3=Math.abs(s3)>Math.abs(c2)?"h":"v";if("touches"in e3&&d3==="h"&&u3.type==="range")return!1;var f3=locationCouldBeScrolled(d3,u3);if(!f3)return!0;if(f3?o2=d3:(o2=d3==="v"?"h":"v",f3=locationCouldBeScrolled(d3,u3)),!f3)return!1;if(!r2.current&&"changedTouches"in e3&&(s3||c2)&&(r2.current=o2),!o2)return!0;var p3=r2.current||o2;return function(e4,t4,n4,o3){var r3=function(e5,t5){return e5==="h"&&t5==="rtl"?-1:1}(e4,window.getComputedStyle(t4).direction),i4=r3*o3,a4=n4.target,l3=t4.contains(a4),s4=!1,c3=i4>0,u4=0,d4=0;do{if(!a4)break;var f4=getScrollVariables(e4,a4),p4=f4[0],g3=f4[1]-f4[2]-r3*p4;(p4||g3)&&elementCouldBeScrolled(e4,a4)&&(u4+=g3,d4+=p4);var m3=a4.parentNode;a4=m3&&m3.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m3.host:m3}while(!l3&&a4!==document.body||l3&&(t4.contains(a4)||t4===a4));return(c3&&Math.abs(u4)<1||!c3&&Math.abs(d4)<1)&&(s4=!0),s4}(p3,t3,e3,p3==="h"?s3:c2)},[]),c=reactExports.useCallback(function(e3){var n4=e3;if(te$1.length&&te$1[te$1.length-1]===a2){var o2="deltaY"in n4?getDeltaXY(n4):getTouchXY(n4),r3=t2.current.filter(function(e4){return e4.name===n4.type&&(e4.target===n4.target||n4.target===e4.shadowParent)&&(t3=e4.delta,r4=o2,t3[0]===r4[0]&&t3[1]===r4[1]);var t3,r4})[0];if(r3&&r3.should)n4.cancelable&&n4.preventDefault();else if(!r3){var i3=(l2.current.shards||[]).map(extractRef).filter(Boolean).filter(function(e4){return e4.contains(n4.target)});(i3.length>0?s2(n4,i3[0]):!l2.current.noIsolation)&&n4.cancelable&&n4.preventDefault()}}},[]),u2=reactExports.useCallback(function(e3,n4,o2,r3){var i3={name:e3,delta:n4,target:o2,should:r3,shadowParent:getOutermostShadowParent(o2)};t2.current.push(i3),setTimeout(function(){t2.current=t2.current.filter(function(e4){return e4!==i3})},1)},[]),d2=reactExports.useCallback(function(e3){n3.current=getTouchXY(e3),r2.current=void 0},[]),f2=reactExports.useCallback(function(t3){u2(t3.type,getDeltaXY(t3),t3.target,s2(t3,e2.lockRef.current))},[]),p2=reactExports.useCallback(function(t3){u2(t3.type,getTouchXY(t3),t3.target,s2(t3,e2.lockRef.current))},[]);reactExports.useEffect(function(){return te$1.push(a2),e2.setCallbacks({onScrollCapture:f2,onWheelCapture:f2,onTouchMoveCapture:p2}),document.addEventListener("wheel",c,Q$1),document.addEventListener("touchmove",c,Q$1),document.addEventListener("touchstart",d2,Q$1),function(){te$1=te$1.filter(function(e3){return e3!==a2}),document.removeEventListener("wheel",c,Q$1),document.removeEventListener("touchmove",c,Q$1),document.removeEventListener("touchstart",d2,Q$1)}},[]);var g2=e2.removeScrollBar,m2=e2.inert;return reactExports.createElement(reactExports.Fragment,null,m2?reactExports.createElement(a2,{styles:generateStyle(i2)}):null,g2?reactExports.createElement(RemoveScrollBar,{noRelative:e2.noRelative,gapMode:e2.gapMode}):null)},"RemoveScrollSideCar")),oe$1=reactExports.forwardRef(function(e2,t2){return reactExports.createElement(Y$1,__assign({},e2,{ref:t2,sideCar:ne$1}))});oe$1.classNames=Y$1.classNames;var re$1=new WeakMap,ie$1=new WeakMap,ae$1={},le=0,unwrapHost=__name(function(e2){return e2&&(e2.host||unwrapHost(e2.parentNode))},"unwrapHost"),applyAttributeToOthers=__name(function(e2,t2,n3,o2){var r2=function(e3,t3){return t3.map(function(t4){if(e3.contains(t4))return t4;var n4=unwrapHost(t4);return n4&&e3.contains(n4)?n4:(console.error("aria-hidden",t4,"in not contained inside",e3,". Doing nothing"),null)}).filter(function(e4){return!!e4})}(t2,Array.isArray(e2)?e2:[e2]);ae$1[n3]||(ae$1[n3]=new WeakMap);var i2=ae$1[n3],a2=[],l2=new Set,s2=new Set(r2),keep=__name(function(e3){e3&&!l2.has(e3)&&(l2.add(e3),keep(e3.parentNode))},"keep");r2.forEach(keep);var deep=__name(function(e3){e3&&!s2.has(e3)&&Array.prototype.forEach.call(e3.children,function(e4){if(l2.has(e4))deep(e4);else try{var t3=e4.getAttribute(o2),r3=t3!==null&&t3!=="false",s3=(re$1.get(e4)||0)+1,c=(i2.get(e4)||0)+1;re$1.set(e4,s3),i2.set(e4,c),a2.push(e4),s3===1&&r3&&ie$1.set(e4,!0),c===1&&e4.setAttribute(n3,"true"),r3||e4.setAttribute(o2,"true")}catch(t4){console.error("aria-hidden: cannot operate on ",e4,t4)}})},"deep");return deep(t2),l2.clear(),le++,function(){a2.forEach(function(e3){var t3=re$1.get(e3)-1,r3=i2.get(e3)-1;re$1.set(e3,t3),i2.set(e3,r3),t3||(ie$1.has(e3)||e3.removeAttribute(o2),ie$1.delete(e3)),r3||e3.removeAttribute(n3)}),--le||(re$1=new WeakMap,re$1=new WeakMap,ie$1=new WeakMap,ae$1={})}},"applyAttributeToOthers"),hideOthers=__name(function(e2,t2,n3){n3===void 0&&(n3="data-aria-hidden");var o2=Array.from(Array.isArray(e2)?e2:[e2]),r2=function(e3){return typeof document>"u"?null:(Array.isArray(e3)?e3[0]:e3).ownerDocument.body}(e2);return r2?(o2.push.apply(o2,Array.from(r2.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(o2,r2,n3,"aria-hidden")):function(){return null}},"hideOthers");const se$1=["top","right","bottom","left"],ce=Math.min,ue$1=Math.max,de$1=Math.round,fe$1=Math.floor,createCoords=__name(e2=>({x:e2,y:e2}),"createCoords"),pe$1={left:"right",right:"left",bottom:"top",top:"bottom"},ge$1={start:"end",end:"start"};function clamp$1(e2,t2,n3){return ue$1(e2,ce(t2,n3))}__name(clamp$1,"clamp$1");function evaluate(e2,t2){return typeof e2=="function"?e2(t2):e2}__name(evaluate,"evaluate");function getSide(e2){return e2.split("-")[0]}__name(getSide,"getSide");function getAlignment(e2){return e2.split("-")[1]}__name(getAlignment,"getAlignment");function getOppositeAxis(e2){return e2==="x"?"y":"x"}__name(getOppositeAxis,"getOppositeAxis");function getAxisLength(e2){return e2==="y"?"height":"width"}__name(getAxisLength,"getAxisLength");const me$1=new Set(["top","bottom"]);function getSideAxis(e2){return me$1.has(getSide(e2))?"y":"x"}__name(getSideAxis,"getSideAxis");function getAlignmentAxis(e2){return getOppositeAxis(getSideAxis(e2))}__name(getAlignmentAxis,"getAlignmentAxis");function getOppositeAlignmentPlacement(e2){return e2.replace(/start|end/g,e3=>ge$1[e3])}__name(getOppositeAlignmentPlacement,"getOppositeAlignmentPlacement");const he$1=["left","right"],ve$1=["right","left"],ye$1=["top","bottom"],be=["bottom","top"];function getOppositeAxisPlacements(e2,t2,n3,o2){const r2=getAlignment(e2);let i2=__name(function(e3,t3,n4){switch(e3){case"top":case"bottom":return n4?t3?ve$1:he$1:t3?he$1:ve$1;case"left":case"right":return t3?ye$1:be;default:return[]}},"getSideList")(getSide(e2),n3==="start",o2);return r2&&(i2=i2.map(e3=>e3+"-"+r2),t2&&(i2=i2.concat(i2.map(getOppositeAlignmentPlacement)))),i2}__name(getOppositeAxisPlacements,"getOppositeAxisPlacements");function getOppositePlacement(e2){return e2.replace(/left|right|bottom|top/g,e3=>pe$1[e3])}__name(getOppositePlacement,"getOppositePlacement");function getPaddingObject(e2){return typeof e2!="number"?__name(function(e3){return{top:0,right:0,bottom:0,left:0,...e3}},"expandPaddingObject")(e2):{top:e2,right:e2,bottom:e2,left:e2}}__name(getPaddingObject,"getPaddingObject");function rectToClientRect(e2){const{x:t2,y:n3,width:o2,height:r2}=e2;return{width:o2,height:r2,top:n3,left:t2,right:t2+o2,bottom:n3+r2,x:t2,y:n3}}__name(rectToClientRect,"rectToClientRect");function computeCoordsFromPlacement(e2,t2,n3){let{reference:o2,floating:r2}=e2;const i2=getSideAxis(t2),a2=getAlignmentAxis(t2),l2=getAxisLength(a2),s2=getSide(t2),c=i2==="y",u2=o2.x+o2.width/2-r2.width/2,d2=o2.y+o2.height/2-r2.height/2,f2=o2[l2]/2-r2[l2]/2;let p2;switch(s2){case"top":p2={x:u2,y:o2.y-r2.height};break;case"bottom":p2={x:u2,y:o2.y+o2.height};break;case"right":p2={x:o2.x+o2.width,y:d2};break;case"left":p2={x:o2.x-r2.width,y:d2};break;default:p2={x:o2.x,y:o2.y}}switch(getAlignment(t2)){case"start":p2[a2]-=f2*(n3&&c?-1:1);break;case"end":p2[a2]+=f2*(n3&&c?-1:1)}return p2}__name(computeCoordsFromPlacement,"computeCoordsFromPlacement");async function detectOverflow(e2,t2){var n3;t2===void 0&&(t2={});const{x:o2,y:r2,platform:i2,rects:a2,elements:l2,strategy:s2}=e2,{boundary:c="clippingAncestors",rootBoundary:u2="viewport",elementContext:d2="floating",altBoundary:f2=!1,padding:p2=0}=evaluate(t2,e2),g2=getPaddingObject(p2),m2=l2[f2?d2==="floating"?"reference":"floating":d2],h2=rectToClientRect(await i2.getClippingRect({element:(n3=await(i2.isElement==null?void 0:i2.isElement(m2)))==null||n3?m2:m2.contextElement||await(i2.getDocumentElement==null?void 0:i2.getDocumentElement(l2.floating)),boundary:c,rootBoundary:u2,strategy:s2})),v2=d2==="floating"?{x:o2,y:r2,width:a2.floating.width,height:a2.floating.height}:a2.reference,y2=await(i2.getOffsetParent==null?void 0:i2.getOffsetParent(l2.floating)),b2=await(i2.isElement==null?void 0:i2.isElement(y2))&&await(i2.getScale==null?void 0:i2.getScale(y2))||{x:1,y:1},w2=rectToClientRect(i2.convertOffsetParentRelativeRectToViewportRelativeRect?await i2.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l2,rect:v2,offsetParent:y2,strategy:s2}):v2);return{top:(h2.top-w2.top+g2.top)/b2.y,bottom:(w2.bottom-h2.bottom+g2.bottom)/b2.y,left:(h2.left-w2.left+g2.left)/b2.x,right:(w2.right-h2.right+g2.right)/b2.x}}__name(detectOverflow,"detectOverflow");function getSideOffsets(e2,t2){return{top:e2.top-t2.height,right:e2.right-t2.width,bottom:e2.bottom-t2.height,left:e2.left-t2.width}}__name(getSideOffsets,"getSideOffsets");function isAnySideFullyClipped(e2){return se$1.some(t2=>e2[t2]>=0)}__name(isAnySideFullyClipped,"isAnySideFullyClipped");const we=new Set(["left","top"]);function hasWindow(){return typeof window<"u"}__name(hasWindow,"hasWindow");function getNodeName(e2){return isNode$1(e2)?(e2.nodeName||"").toLowerCase():"#document"}__name(getNodeName,"getNodeName");function getWindow(e2){var t2;return(e2==null||(t2=e2.ownerDocument)==null?void 0:t2.defaultView)||window}__name(getWindow,"getWindow");function getDocumentElement(e2){var t2;return(t2=(isNode$1(e2)?e2.ownerDocument:e2.document)||window.document)==null?void 0:t2.documentElement}__name(getDocumentElement,"getDocumentElement");function isNode$1(e2){return!!hasWindow()&&(e2 instanceof Node||e2 instanceof getWindow(e2).Node)}__name(isNode$1,"isNode$1");function isElement(e2){return!!hasWindow()&&(e2 instanceof Element||e2 instanceof getWindow(e2).Element)}__name(isElement,"isElement");function isHTMLElement(e2){return!!hasWindow()&&(e2 instanceof HTMLElement||e2 instanceof getWindow(e2).HTMLElement)}__name(isHTMLElement,"isHTMLElement");function isShadowRoot(e2){return!(!hasWindow()||typeof ShadowRoot>"u")&&(e2 instanceof ShadowRoot||e2 instanceof getWindow(e2).ShadowRoot)}__name(isShadowRoot,"isShadowRoot");const xe=new Set(["inline","contents"]);function isOverflowElement(e2){const{overflow:t2,overflowX:n3,overflowY:o2,display:r2}=getComputedStyle$1(e2);return/auto|scroll|overlay|hidden|clip/.test(t2+o2+n3)&&!xe.has(r2)}__name(isOverflowElement,"isOverflowElement");const Ce=new Set(["table","td","th"]);function isTableElement(e2){return Ce.has(getNodeName(e2))}__name(isTableElement,"isTableElement");const Se=[":popover-open",":modal"];function isTopLayer(e2){return Se.some(t2=>{try{return e2.matches(t2)}catch{return!1}})}__name(isTopLayer,"isTopLayer");const Ee=["transform","translate","scale","rotate","perspective"],Re=["transform","translate","scale","rotate","perspective","filter"],Ae=["paint","layout","strict","content"];function isContainingBlock(e2){const t2=isWebKit(),n3=isElement(e2)?getComputedStyle$1(e2):e2;return Ee.some(e3=>!!n3[e3]&&n3[e3]!=="none")||!!n3.containerType&&n3.containerType!=="normal"||!t2&&!!n3.backdropFilter&&n3.backdropFilter!=="none"||!t2&&!!n3.filter&&n3.filter!=="none"||Re.some(e3=>(n3.willChange||"").includes(e3))||Ae.some(e3=>(n3.contain||"").includes(e3))}__name(isContainingBlock,"isContainingBlock");function isWebKit(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}__name(isWebKit,"isWebKit");const Pe=new Set(["html","body","#document"]);function isLastTraversableNode(e2){return Pe.has(getNodeName(e2))}__name(isLastTraversableNode,"isLastTraversableNode");function getComputedStyle$1(e2){return getWindow(e2).getComputedStyle(e2)}__name(getComputedStyle$1,"getComputedStyle$1");function getNodeScroll(e2){return isElement(e2)?{scrollLeft:e2.scrollLeft,scrollTop:e2.scrollTop}:{scrollLeft:e2.scrollX,scrollTop:e2.scrollY}}__name(getNodeScroll,"getNodeScroll");function getParentNode(e2){if(getNodeName(e2)==="html")return e2;const t2=e2.assignedSlot||e2.parentNode||isShadowRoot(e2)&&e2.host||getDocumentElement(e2);return isShadowRoot(t2)?t2.host:t2}__name(getParentNode,"getParentNode");function getNearestOverflowAncestor(e2){const t2=getParentNode(e2);return isLastTraversableNode(t2)?e2.ownerDocument?e2.ownerDocument.body:e2.body:isHTMLElement(t2)&&isOverflowElement(t2)?t2:getNearestOverflowAncestor(t2)}__name(getNearestOverflowAncestor,"getNearestOverflowAncestor");function getOverflowAncestors(e2,t2,n3){var o2;t2===void 0&&(t2=[]),n3===void 0&&(n3=!0);const r2=getNearestOverflowAncestor(e2),i2=r2===((o2=e2.ownerDocument)==null?void 0:o2.body),a2=getWindow(r2);if(i2){const e3=getFrameElement(a2);return t2.concat(a2,a2.visualViewport||[],isOverflowElement(r2)?r2:[],e3&&n3?getOverflowAncestors(e3):[])}return t2.concat(r2,getOverflowAncestors(r2,[],n3))}__name(getOverflowAncestors,"getOverflowAncestors");function getFrameElement(e2){return e2.parent&&Object.getPrototypeOf(e2.parent)?e2.frameElement:null}__name(getFrameElement,"getFrameElement");function getCssDimensions(e2){const t2=getComputedStyle$1(e2);let n3=parseFloat(t2.width)||0,o2=parseFloat(t2.height)||0;const r2=isHTMLElement(e2),i2=r2?e2.offsetWidth:n3,a2=r2?e2.offsetHeight:o2,l2=de$1(n3)!==i2||de$1(o2)!==a2;return l2&&(n3=i2,o2=a2),{width:n3,height:o2,$:l2}}__name(getCssDimensions,"getCssDimensions");function unwrapElement(e2){return isElement(e2)?e2:e2.contextElement}__name(unwrapElement,"unwrapElement");function getScale(e2){const t2=unwrapElement(e2);if(!isHTMLElement(t2))return createCoords(1);const n3=t2.getBoundingClientRect(),{width:o2,height:r2,$:i2}=getCssDimensions(t2);let a2=(i2?de$1(n3.width):n3.width)/o2,l2=(i2?de$1(n3.height):n3.height)/r2;return a2&&Number.isFinite(a2)||(a2=1),l2&&Number.isFinite(l2)||(l2=1),{x:a2,y:l2}}__name(getScale,"getScale");const Oe=createCoords(0);function getVisualOffsets(e2){const t2=getWindow(e2);return isWebKit()&&t2.visualViewport?{x:t2.visualViewport.offsetLeft,y:t2.visualViewport.offsetTop}:Oe}__name(getVisualOffsets,"getVisualOffsets");function getBoundingClientRect(e2,t2,n3,o2){t2===void 0&&(t2=!1),n3===void 0&&(n3=!1);const r2=e2.getBoundingClientRect(),i2=unwrapElement(e2);let a2=createCoords(1);t2&&(o2?isElement(o2)&&(a2=getScale(o2)):a2=getScale(e2));const l2=__name(function(e3,t3,n4){return t3===void 0&&(t3=!1),!(!n4||t3&&n4!==getWindow(e3))&&t3},"shouldAddVisualOffsets")(i2,n3,o2)?getVisualOffsets(i2):createCoords(0);let s2=(r2.left+l2.x)/a2.x,c=(r2.top+l2.y)/a2.y,u2=r2.width/a2.x,d2=r2.height/a2.y;if(i2){const e3=getWindow(i2),t3=o2&&isElement(o2)?getWindow(o2):o2;let n4=e3,r3=getFrameElement(n4);for(;r3&&o2&&t3!==n4;){const e4=getScale(r3),t4=r3.getBoundingClientRect(),o3=getComputedStyle$1(r3),i3=t4.left+(r3.clientLeft+parseFloat(o3.paddingLeft))*e4.x,a3=t4.top+(r3.clientTop+parseFloat(o3.paddingTop))*e4.y;s2*=e4.x,c*=e4.y,u2*=e4.x,d2*=e4.y,s2+=i3,c+=a3,n4=getWindow(r3),r3=getFrameElement(n4)}}return rectToClientRect({width:u2,height:d2,x:s2,y:c})}__name(getBoundingClientRect,"getBoundingClientRect");function getWindowScrollBarX(e2,t2){const n3=getNodeScroll(e2).scrollLeft;return t2?t2.left+n3:getBoundingClientRect(getDocumentElement(e2)).left+n3}__name(getWindowScrollBarX,"getWindowScrollBarX");function getHTMLOffset(e2,t2,n3){n3===void 0&&(n3=!1);const o2=e2.getBoundingClientRect();return{x:o2.left+t2.scrollLeft-(n3?0:getWindowScrollBarX(e2,o2)),y:o2.top+t2.scrollTop}}__name(getHTMLOffset,"getHTMLOffset");const Ne=new Set(["absolute","fixed"]);function getClientRectFromClippingAncestor(e2,t2,n3){let o2;if(t2==="viewport")o2=__name(function(e3,t3){const n4=getWindow(e3),o3=getDocumentElement(e3),r2=n4.visualViewport;let i2=o3.clientWidth,a2=o3.clientHeight,l2=0,s2=0;if(r2){i2=r2.width,a2=r2.height;const e4=isWebKit();(!e4||e4&&t3==="fixed")&&(l2=r2.offsetLeft,s2=r2.offsetTop)}return{width:i2,height:a2,x:l2,y:s2}},"getViewportRect")(e2,n3);else if(t2==="document")o2=__name(function(e3){const t3=getDocumentElement(e3),n4=getNodeScroll(e3),o3=e3.ownerDocument.body,r2=ue$1(t3.scrollWidth,t3.clientWidth,o3.scrollWidth,o3.clientWidth),i2=ue$1(t3.scrollHeight,t3.clientHeight,o3.scrollHeight,o3.clientHeight);let a2=-n4.scrollLeft+getWindowScrollBarX(e3);const l2=-n4.scrollTop;return getComputedStyle$1(o3).direction==="rtl"&&(a2+=ue$1(t3.clientWidth,o3.clientWidth)-r2),{width:r2,height:i2,x:a2,y:l2}},"getDocumentRect")(getDocumentElement(e2));else if(isElement(t2))o2=__name(function(e3,t3){const n4=getBoundingClientRect(e3,!0,t3==="fixed"),o3=n4.top+e3.clientTop,r2=n4.left+e3.clientLeft,i2=isHTMLElement(e3)?getScale(e3):createCoords(1);return{width:e3.clientWidth*i2.x,height:e3.clientHeight*i2.y,x:r2*i2.x,y:o3*i2.y}},"getInnerBoundingClientRect")(t2,n3);else{const n4=getVisualOffsets(e2);o2={x:t2.x-n4.x,y:t2.y-n4.y,width:t2.width,height:t2.height}}return rectToClientRect(o2)}__name(getClientRectFromClippingAncestor,"getClientRectFromClippingAncestor");function hasFixedPositionAncestor(e2,t2){const n3=getParentNode(e2);return!(n3===t2||!isElement(n3)||isLastTraversableNode(n3))&&(getComputedStyle$1(n3).position==="fixed"||hasFixedPositionAncestor(n3,t2))}__name(hasFixedPositionAncestor,"hasFixedPositionAncestor");function getRectRelativeToOffsetParent(e2,t2,n3){const o2=isHTMLElement(t2),r2=getDocumentElement(t2),i2=n3==="fixed",a2=getBoundingClientRect(e2,!0,i2,t2);let l2={scrollLeft:0,scrollTop:0};const s2=createCoords(0);function setLeftRTLScrollbarOffset(){s2.x=getWindowScrollBarX(r2)}if(__name(setLeftRTLScrollbarOffset,"setLeftRTLScrollbarOffset"),o2||!o2&&!i2)if((getNodeName(t2)!=="body"||isOverflowElement(r2))&&(l2=getNodeScroll(t2)),o2){const e3=getBoundingClientRect(t2,!0,i2,t2);s2.x=e3.x+t2.clientLeft,s2.y=e3.y+t2.clientTop}else r2&&setLeftRTLScrollbarOffset();i2&&!o2&&r2&&setLeftRTLScrollbarOffset();const c=!r2||o2||i2?createCoords(0):getHTMLOffset(r2,l2);return{x:a2.left+l2.scrollLeft-s2.x-c.x,y:a2.top+l2.scrollTop-s2.y-c.y,width:a2.width,height:a2.height}}__name(getRectRelativeToOffsetParent,"getRectRelativeToOffsetParent");function isStaticPositioned(e2){return getComputedStyle$1(e2).position==="static"}__name(isStaticPositioned,"isStaticPositioned");function getTrueOffsetParent(e2,t2){if(!isHTMLElement(e2)||getComputedStyle$1(e2).position==="fixed")return null;if(t2)return t2(e2);let n3=e2.offsetParent;return getDocumentElement(e2)===n3&&(n3=n3.ownerDocument.body),n3}__name(getTrueOffsetParent,"getTrueOffsetParent");function getOffsetParent(e2,t2){const n3=getWindow(e2);if(isTopLayer(e2))return n3;if(!isHTMLElement(e2)){let t3=getParentNode(e2);for(;t3&&!isLastTraversableNode(t3);){if(isElement(t3)&&!isStaticPositioned(t3))return t3;t3=getParentNode(t3)}return n3}let o2=getTrueOffsetParent(e2,t2);for(;o2&&isTableElement(o2)&&isStaticPositioned(o2);)o2=getTrueOffsetParent(o2,t2);return o2&&isLastTraversableNode(o2)&&isStaticPositioned(o2)&&!isContainingBlock(o2)?n3:o2||__name(function(e3){let t3=getParentNode(e3);for(;isHTMLElement(t3)&&!isLastTraversableNode(t3);){if(isContainingBlock(t3))return t3;if(isTopLayer(t3))return null;t3=getParentNode(t3)}return null},"getContainingBlock")(e2)||n3}__name(getOffsetParent,"getOffsetParent");const _e$1={convertOffsetParentRelativeRectToViewportRelativeRect:__name(function(e2){let{elements:t2,rect:n3,offsetParent:o2,strategy:r2}=e2;const i2=r2==="fixed",a2=getDocumentElement(o2),l2=!!t2&&isTopLayer(t2.floating);if(o2===a2||l2&&i2)return n3;let s2={scrollLeft:0,scrollTop:0},c=createCoords(1);const u2=createCoords(0),d2=isHTMLElement(o2);if((d2||!d2&&!i2)&&((getNodeName(o2)!=="body"||isOverflowElement(a2))&&(s2=getNodeScroll(o2)),isHTMLElement(o2))){const e3=getBoundingClientRect(o2);c=getScale(o2),u2.x=e3.x+o2.clientLeft,u2.y=e3.y+o2.clientTop}const f2=!a2||d2||i2?createCoords(0):getHTMLOffset(a2,s2,!0);return{width:n3.width*c.x,height:n3.height*c.y,x:n3.x*c.x-s2.scrollLeft*c.x+u2.x+f2.x,y:n3.y*c.y-s2.scrollTop*c.y+u2.y+f2.y}},"convertOffsetParentRelativeRectToViewportRelativeRect"),getDocumentElement,getClippingRect:__name(function(e2){let{element:t2,boundary:n3,rootBoundary:o2,strategy:r2}=e2;const i2=[...n3==="clippingAncestors"?isTopLayer(t2)?[]:__name(function(e3,t3){const n4=t3.get(e3);if(n4)return n4;let o3=getOverflowAncestors(e3,[],!1).filter(e4=>isElement(e4)&&getNodeName(e4)!=="body"),r3=null;const i3=getComputedStyle$1(e3).position==="fixed";let a3=i3?getParentNode(e3):e3;for(;isElement(a3)&&!isLastTraversableNode(a3);){const t4=getComputedStyle$1(a3),n5=isContainingBlock(a3);n5||t4.position!=="fixed"||(r3=null),(i3?!n5&&!r3:!n5&&t4.position==="static"&&r3&&Ne.has(r3.position)||isOverflowElement(a3)&&!n5&&hasFixedPositionAncestor(e3,a3))?o3=o3.filter(e4=>e4!==a3):r3=t4,a3=getParentNode(a3)}return t3.set(e3,o3),o3},"getClippingElementAncestors")(t2,this._c):[].concat(n3),o2],a2=i2[0],l2=i2.reduce((e3,n4)=>{const o3=getClientRectFromClippingAncestor(t2,n4,r2);return e3.top=ue$1(o3.top,e3.top),e3.right=ce(o3.right,e3.right),e3.bottom=ce(o3.bottom,e3.bottom),e3.left=ue$1(o3.left,e3.left),e3},getClientRectFromClippingAncestor(t2,a2,r2));return{width:l2.right-l2.left,height:l2.bottom-l2.top,x:l2.left,y:l2.top}},"getClippingRect"),getOffsetParent,getElementRects:__name(async function(e2){const t2=this.getOffsetParent||getOffsetParent,n3=this.getDimensions,o2=await n3(e2.floating);return{reference:getRectRelativeToOffsetParent(e2.reference,await t2(e2.floating),e2.strategy),floating:{x:0,y:0,width:o2.width,height:o2.height}}},"getElementRects"),getClientRects:__name(function(e2){return Array.from(e2.getClientRects())},"getClientRects"),getDimensions:__name(function(e2){const{width:t2,height:n3}=getCssDimensions(e2);return{width:t2,height:n3}},"getDimensions"),getScale,isElement,isRTL:__name(function(e2){return getComputedStyle$1(e2).direction==="rtl"},"isRTL")};function rectsAreEqual(e2,t2){return e2.x===t2.x&&e2.y===t2.y&&e2.width===t2.width&&e2.height===t2.height}__name(rectsAreEqual,"rectsAreEqual");function autoUpdate(e2,t2,n3,o2){o2===void 0&&(o2={});const{ancestorScroll:r2=!0,ancestorResize:i2=!0,elementResize:a2=typeof ResizeObserver=="function",layoutShift:l2=typeof IntersectionObserver=="function",animationFrame:s2=!1}=o2,c=unwrapElement(e2),u2=r2||i2?[...c?getOverflowAncestors(c):[],...getOverflowAncestors(t2)]:[];u2.forEach(e3=>{r2&&e3.addEventListener("scroll",n3,{passive:!0}),i2&&e3.addEventListener("resize",n3)});const d2=c&&l2?__name(function(e3,t3){let n4,o3=null;const r3=getDocumentElement(e3);function cleanup(){var e4;clearTimeout(n4),(e4=o3)==null||e4.disconnect(),o3=null}return __name(cleanup,"cleanup"),__name(function refresh(i3,a3){i3===void 0&&(i3=!1),a3===void 0&&(a3=1),cleanup();const l3=e3.getBoundingClientRect(),{left:s3,top:c2,width:u3,height:d3}=l3;if(i3||t3(),!u3||!d3)return;const f3={rootMargin:-fe$1(c2)+"px "+-fe$1(r3.clientWidth-(s3+u3))+"px "+-fe$1(r3.clientHeight-(c2+d3))+"px "+-fe$1(s3)+"px",threshold:ue$1(0,ce(1,a3))||1};let p3=!0;function handleObserve(t4){const o4=t4[0].intersectionRatio;if(o4!==a3){if(!p3)return refresh();o4?refresh(!1,o4):n4=setTimeout(()=>{refresh(!1,1e-7)},1e3)}o4!==1||rectsAreEqual(l3,e3.getBoundingClientRect())||refresh(),p3=!1}__name(handleObserve,"handleObserve");try{o3=new IntersectionObserver(handleObserve,{...f3,root:r3.ownerDocument})}catch{o3=new IntersectionObserver(handleObserve,f3)}o3.observe(e3)},"refresh")(!0),cleanup},"observeMove")(c,n3):null;let f2,p2=-1,g2=null;a2&&(g2=new ResizeObserver(e3=>{let[o3]=e3;o3&&o3.target===c&&g2&&(g2.unobserve(t2),cancelAnimationFrame(p2),p2=requestAnimationFrame(()=>{var e4;(e4=g2)==null||e4.observe(t2)})),n3()}),c&&!s2&&g2.observe(c),g2.observe(t2));let m2=s2?getBoundingClientRect(e2):null;return s2&&__name(function frameLoop(){const t3=getBoundingClientRect(e2);m2&&!rectsAreEqual(m2,t3)&&n3(),m2=t3,f2=requestAnimationFrame(frameLoop)},"frameLoop")(),n3(),()=>{var e3;u2.forEach(e4=>{r2&&e4.removeEventListener("scroll",n3),i2&&e4.removeEventListener("resize",n3)}),d2==null||d2(),(e3=g2)==null||e3.disconnect(),g2=null,s2&&cancelAnimationFrame(f2)}}__name(autoUpdate,"autoUpdate");const offset$1=__name(function(e2){return e2===void 0&&(e2=0),{name:"offset",options:e2,async fn(t2){var n3,o2;const{x:r2,y:i2,placement:a2,middlewareData:l2}=t2,s2=await __name(async function(e3,t3){const{placement:n4,platform:o3,elements:r3}=e3,i3=await(o3.isRTL==null?void 0:o3.isRTL(r3.floating)),a3=getSide(n4),l3=getAlignment(n4),s3=getSideAxis(n4)==="y",c=we.has(a3)?-1:1,u2=i3&&s3?-1:1,d2=evaluate(t3,e3);let{mainAxis:f2,crossAxis:p2,alignmentAxis:g2}=typeof d2=="number"?{mainAxis:d2,crossAxis:0,alignmentAxis:null}:{mainAxis:d2.mainAxis||0,crossAxis:d2.crossAxis||0,alignmentAxis:d2.alignmentAxis};return l3&&typeof g2=="number"&&(p2=l3==="end"?-1*g2:g2),s3?{x:p2*u2,y:f2*c}:{x:f2*c,y:p2*u2}},"convertValueToCoords")(t2,e2);return a2===((n3=l2.offset)==null?void 0:n3.placement)&&(o2=l2.arrow)!=null&&o2.alignmentOffset?{}:{x:r2+s2.x,y:i2+s2.y,data:{...s2,placement:a2}}}}},"offset$1"),shift$1=__name(function(e2){return e2===void 0&&(e2={}),{name:"shift",options:e2,async fn(t2){const{x:n3,y:o2,placement:r2}=t2,{mainAxis:i2=!0,crossAxis:a2=!1,limiter:l2={fn:__name(e3=>{let{x:t3,y:n4}=e3;return{x:t3,y:n4}},"fn")},...s2}=evaluate(e2,t2),c={x:n3,y:o2},u2=await detectOverflow(t2,s2),d2=getSideAxis(getSide(r2)),f2=getOppositeAxis(d2);let p2=c[f2],g2=c[d2];if(i2){const e3=f2==="y"?"bottom":"right";p2=clamp$1(p2+u2[f2==="y"?"top":"left"],p2,p2-u2[e3])}if(a2){const e3=d2==="y"?"bottom":"right";g2=clamp$1(g2+u2[d2==="y"?"top":"left"],g2,g2-u2[e3])}const m2=l2.fn({...t2,[f2]:p2,[d2]:g2});return{...m2,data:{x:m2.x-n3,y:m2.y-o2,enabled:{[f2]:i2,[d2]:a2}}}}}},"shift$1"),flip$1=__name(function(e2){return e2===void 0&&(e2={}),{name:"flip",options:e2,async fn(t2){var n3,o2;const{placement:r2,middlewareData:i2,rects:a2,initialPlacement:l2,platform:s2,elements:c}=t2,{mainAxis:u2=!0,crossAxis:d2=!0,fallbackPlacements:f2,fallbackStrategy:p2="bestFit",fallbackAxisSideDirection:g2="none",flipAlignment:m2=!0,...h2}=evaluate(e2,t2);if((n3=i2.arrow)!=null&&n3.alignmentOffset)return{};const v2=getSide(r2),y2=getSideAxis(l2),b2=getSide(l2)===l2,w2=await(s2.isRTL==null?void 0:s2.isRTL(c.floating)),x2=f2||(b2||!m2?[getOppositePlacement(l2)]:__name(function(e3){const t3=getOppositePlacement(e3);return[getOppositeAlignmentPlacement(e3),t3,getOppositeAlignmentPlacement(t3)]},"getExpandedPlacements")(l2)),C3=g2!=="none";!f2&&C3&&x2.push(...getOppositeAxisPlacements(l2,m2,g2,w2));const S2=[l2,...x2],E2=await detectOverflow(t2,h2),R2=[];let A2=((o2=i2.flip)==null?void 0:o2.overflows)||[];if(u2&&R2.push(E2[v2]),d2){const e3=__name(function(e4,t3,n4){n4===void 0&&(n4=!1);const o3=getAlignment(e4),r3=getAlignmentAxis(e4),i3=getAxisLength(r3);let a3=r3==="x"?o3===(n4?"end":"start")?"right":"left":o3==="start"?"bottom":"top";return t3.reference[i3]>t3.floating[i3]&&(a3=getOppositePlacement(a3)),[a3,getOppositePlacement(a3)]},"getAlignmentSides")(r2,a2,w2);R2.push(E2[e3[0]],E2[e3[1]])}if(A2=[...A2,{placement:r2,overflows:R2}],!R2.every(e3=>e3<=0)){var P2,O2;const e3=(((P2=i2.flip)==null?void 0:P2.index)||0)+1,t3=S2[e3];if(t3&&(!(d2==="alignment"&&y2!==getSideAxis(t3))||A2.every(e4=>e4.overflows[0]>0&&getSideAxis(e4.placement)===y2)))return{data:{index:e3,overflows:A2},reset:{placement:t3}};let n4=(O2=A2.filter(e4=>e4.overflows[0]<=0).sort((e4,t4)=>e4.overflows[1]-t4.overflows[1])[0])==null?void 0:O2.placement;if(!n4)switch(p2){case"bestFit":{var N2;const e4=(N2=A2.filter(e5=>{if(C3){const t4=getSideAxis(e5.placement);return t4===y2||t4==="y"}return!0}).map(e5=>[e5.placement,e5.overflows.filter(e6=>e6>0).reduce((e6,t4)=>e6+t4,0)]).sort((e5,t4)=>e5[1]-t4[1])[0])==null?void 0:N2[0];e4&&(n4=e4);break}case"initialPlacement":n4=l2}if(r2!==n4)return{reset:{placement:n4}}}return{}}}},"flip$1"),size$1=__name(function(e2){return e2===void 0&&(e2={}),{name:"size",options:e2,async fn(t2){var n3,o2;const{placement:r2,rects:i2,platform:a2,elements:l2}=t2,{apply:s2=__name(()=>{},"s"),...c}=evaluate(e2,t2),u2=await detectOverflow(t2,c),d2=getSide(r2),f2=getAlignment(r2),p2=getSideAxis(r2)==="y",{width:g2,height:m2}=i2.floating;let h2,v2;d2==="top"||d2==="bottom"?(h2=d2,v2=f2===(await(a2.isRTL==null?void 0:a2.isRTL(l2.floating))?"start":"end")?"left":"right"):(v2=d2,h2=f2==="end"?"top":"bottom");const y2=m2-u2.top-u2.bottom,b2=g2-u2.left-u2.right,w2=ce(m2-u2[h2],y2),x2=ce(g2-u2[v2],b2),C3=!t2.middlewareData.shift;let S2=w2,E2=x2;if((n3=t2.middlewareData.shift)!=null&&n3.enabled.x&&(E2=b2),(o2=t2.middlewareData.shift)!=null&&o2.enabled.y&&(S2=y2),C3&&!f2){const e3=ue$1(u2.left,0),t3=ue$1(u2.right,0),n4=ue$1(u2.top,0),o3=ue$1(u2.bottom,0);p2?E2=g2-2*(e3!==0||t3!==0?e3+t3:ue$1(u2.left,u2.right)):S2=m2-2*(n4!==0||o3!==0?n4+o3:ue$1(u2.top,u2.bottom))}await s2({...t2,availableWidth:E2,availableHeight:S2});const R2=await a2.getDimensions(l2.floating);return g2!==R2.width||m2!==R2.height?{reset:{rects:!0}}:{}}}},"size$1"),hide$1=__name(function(e2){return e2===void 0&&(e2={}),{name:"hide",options:e2,async fn(t2){const{rects:n3}=t2,{strategy:o2="referenceHidden",...r2}=evaluate(e2,t2);switch(o2){case"referenceHidden":{const e3=getSideOffsets(await detectOverflow(t2,{...r2,elementContext:"reference"}),n3.reference);return{data:{referenceHiddenOffsets:e3,referenceHidden:isAnySideFullyClipped(e3)}}}case"escaped":{const e3=getSideOffsets(await detectOverflow(t2,{...r2,altBoundary:!0}),n3.floating);return{data:{escapedOffsets:e3,escaped:isAnySideFullyClipped(e3)}}}default:return{}}}}},"hide$1"),arrow$2=__name(e2=>({name:"arrow",options:e2,async fn(t2){const{x:n3,y:o2,placement:r2,rects:i2,platform:a2,elements:l2,middlewareData:s2}=t2,{element:c,padding:u2=0}=evaluate(e2,t2)||{};if(c==null)return{};const d2=getPaddingObject(u2),f2={x:n3,y:o2},p2=getAlignmentAxis(r2),g2=getAxisLength(p2),m2=await a2.getDimensions(c),h2=p2==="y",v2=h2?"top":"left",y2=h2?"bottom":"right",b2=h2?"clientHeight":"clientWidth",w2=i2.reference[g2]+i2.reference[p2]-f2[p2]-i2.floating[g2],x2=f2[p2]-i2.reference[p2],C3=await(a2.getOffsetParent==null?void 0:a2.getOffsetParent(c));let S2=C3?C3[b2]:0;S2&&await(a2.isElement==null?void 0:a2.isElement(C3))||(S2=l2.floating[b2]||i2.floating[g2]);const E2=w2/2-x2/2,R2=S2/2-m2[g2]/2-1,A2=ce(d2[v2],R2),P2=ce(d2[y2],R2),O2=A2,N2=S2-m2[g2]-P2,_2=S2/2-m2[g2]/2+E2,T2=clamp$1(O2,_2,N2),k2=!s2.arrow&&getAlignment(r2)!=null&&_2!==T2&&i2.reference[g2]/2-(_2<O2?A2:P2)-m2[g2]/2<0,M2=k2?_2<O2?_2-O2:_2-N2:0;return{[p2]:f2[p2]+M2,data:{[p2]:T2,centerOffset:_2-T2-M2,...k2&&{alignmentOffset:M2}},reset:k2}}}),"arrow$2"),limitShift$1=__name(function(e2){return e2===void 0&&(e2={}),{options:e2,fn(t2){const{x:n3,y:o2,placement:r2,rects:i2,middlewareData:a2}=t2,{offset:l2=0,mainAxis:s2=!0,crossAxis:c=!0}=evaluate(e2,t2),u2={x:n3,y:o2},d2=getSideAxis(r2),f2=getOppositeAxis(d2);let p2=u2[f2],g2=u2[d2];const m2=evaluate(l2,t2),h2=typeof m2=="number"?{mainAxis:m2,crossAxis:0}:{mainAxis:0,crossAxis:0,...m2};if(s2){const e3=f2==="y"?"height":"width",t3=i2.reference[f2]-i2.floating[e3]+h2.mainAxis,n4=i2.reference[f2]+i2.reference[e3]-h2.mainAxis;p2<t3?p2=t3:p2>n4&&(p2=n4)}if(c){var v2,y2;const e3=f2==="y"?"width":"height",t3=we.has(getSide(r2)),n4=i2.reference[d2]-i2.floating[e3]+(t3&&((v2=a2.offset)==null?void 0:v2[d2])||0)+(t3?0:h2.crossAxis),o3=i2.reference[d2]+i2.reference[e3]+(t3?0:((y2=a2.offset)==null?void 0:y2[d2])||0)-(t3?h2.crossAxis:0);g2<n4?g2=n4:g2>o3&&(g2=o3)}return{[f2]:p2,[d2]:g2}}}},"limitShift$1"),computePosition=__name((e2,t2,n3)=>{const o2=new Map,r2={platform:_e$1,...n3},i2={...r2.platform,_c:o2};return(async(e3,t3,n4)=>{const{placement:o3="bottom",strategy:r3="absolute",middleware:i3=[],platform:a2}=n4,l2=i3.filter(Boolean),s2=await(a2.isRTL==null?void 0:a2.isRTL(t3));let c=await a2.getElementRects({reference:e3,floating:t3,strategy:r3}),{x:u2,y:d2}=computeCoordsFromPlacement(c,o3,s2),f2=o3,p2={},g2=0;for(let n5=0;n5<l2.length;n5++){const{name:i4,fn:m2}=l2[n5],{x:h2,y:v2,data:y2,reset:b2}=await m2({x:u2,y:d2,initialPlacement:o3,placement:f2,strategy:r3,middlewareData:p2,rects:c,platform:a2,elements:{reference:e3,floating:t3}});u2=h2??u2,d2=v2??d2,p2={...p2,[i4]:{...p2[i4],...y2}},b2&&g2<=50&&(g2++,typeof b2=="object"&&(b2.placement&&(f2=b2.placement),b2.rects&&(c=b2.rects===!0?await a2.getElementRects({reference:e3,floating:t3,strategy:r3}):b2.rects),{x:u2,y:d2}=computeCoordsFromPlacement(c,f2,s2)),n5=-1)}return{x:u2,y:d2,placement:f2,strategy:r3,middlewareData:p2}})(e2,t2,{...r2,platform:i2})},"computePosition");var Te=typeof document<"u"?reactExports.useLayoutEffect:__name(function(){},"noop");function deepEqual(e2,t2){if(e2===t2)return!0;if(typeof e2!=typeof t2)return!1;if(typeof e2=="function"&&e2.toString()===t2.toString())return!0;let n3,o2,r2;if(e2&&t2&&typeof e2=="object"){if(Array.isArray(e2)){if(n3=e2.length,n3!==t2.length)return!1;for(o2=n3;o2--!=0;)if(!deepEqual(e2[o2],t2[o2]))return!1;return!0}if(r2=Object.keys(e2),n3=r2.length,n3!==Object.keys(t2).length)return!1;for(o2=n3;o2--!=0;)if(!{}.hasOwnProperty.call(t2,r2[o2]))return!1;for(o2=n3;o2--!=0;){const n4=r2[o2];if((n4!=="_owner"||!e2.$$typeof)&&!deepEqual(e2[n4],t2[n4]))return!1}return!0}return e2!=e2&&t2!=t2}__name(deepEqual,"deepEqual");function getDPR(e2){return typeof window>"u"?1:(e2.ownerDocument.defaultView||window).devicePixelRatio||1}__name(getDPR,"getDPR");function roundByDPR(e2,t2){const n3=getDPR(e2);return Math.round(t2*n3)/n3}__name(roundByDPR,"roundByDPR");function useLatestRef(e2){const t2=reactExports.useRef(e2);return Te(()=>{t2.current=e2}),t2}__name(useLatestRef,"useLatestRef");const arrow$1=__name(e2=>({name:"arrow",options:e2,fn(t2){const{element:n3,padding:o2}=typeof e2=="function"?e2(t2):e2;return n3&&__name(function(e3){return{}.hasOwnProperty.call(e3,"current")},"isRef")(n3)?n3.current!=null?arrow$2({element:n3.current,padding:o2}).fn(t2):{}:n3?arrow$2({element:n3,padding:o2}).fn(t2):{}}}),"arrow$1"),offset=__name((e2,t2)=>({...offset$1(e2),options:[e2,t2]}),"offset"),shift=__name((e2,t2)=>({...shift$1(e2),options:[e2,t2]}),"shift"),limitShift=__name((e2,t2)=>({...limitShift$1(e2),options:[e2,t2]}),"limitShift"),flip=__name((e2,t2)=>({...flip$1(e2),options:[e2,t2]}),"flip"),size$2=__name((e2,t2)=>({...size$1(e2),options:[e2,t2]}),"size$2"),hide=__name((e2,t2)=>({...hide$1(e2),options:[e2,t2]}),"hide"),arrow=__name((e2,t2)=>({...arrow$1(e2),options:[e2,t2]}),"arrow");var ke=reactExports.forwardRef((t2,n3)=>{const{children:o2,width:r2=10,height:i2=5,...a2}=t2;return jsxRuntimeExports.jsx(E$1.svg,{...a2,ref:n3,width:r2,height:i2,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t2.asChild?o2:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});ke.displayName="Arrow";var Me=ke,Le="Popper",[De,Ie]=createContextScope$1(Le),[Fe,Be]=De(Le),Popper=__name(t2=>{const{__scopePopper:n3,children:r2}=t2,[i2,a2]=reactExports.useState(null);return jsxRuntimeExports.jsx(Fe,{scope:n3,anchor:i2,onAnchorChange:a2,children:r2})},"Popper");Popper.displayName=Le;var We="PopperAnchor",He=reactExports.forwardRef((t2,n3)=>{const{__scopePopper:r2,virtualRef:i2,...a2}=t2,l2=Be(We,r2),s2=reactExports.useRef(null),c=useComposedRefs$1(n3,s2);return reactExports.useEffect(()=>{l2.onAnchorChange((i2==null?void 0:i2.current)||s2.current)}),i2?null:jsxRuntimeExports.jsx(E$1.div,{...a2,ref:c})});He.displayName=We;var $e="PopperContent",[Ve,ze]=De($e),je=reactExports.forwardRef((t2,n3)=>{var _a26,_b,_c,_d,_e2,_f;const{__scopePopper:r2,side:i2="bottom",sideOffset:a2=0,align:l2="center",alignOffset:s2=0,arrowPadding:u2=0,avoidCollisions:d2=!0,collisionBoundary:f2=[],collisionPadding:p2=0,sticky:g2="partial",hideWhenDetached:m2=!1,updatePositionStrategy:h2="optimized",onPlaced:v2,...y2}=t2,b2=Be($e,r2),[w2,x2]=reactExports.useState(null),C3=useComposedRefs$1(n3,e2=>x2(e2)),[S2,A2]=reactExports.useState(null),P2=__name(function(e2){const[t3,n4]=reactExports.useState(void 0);return R$1(()=>{if(e2){n4({width:e2.offsetWidth,height:e2.offsetHeight});const t4=new ResizeObserver(t5=>{if(!Array.isArray(t5)||!t5.length)return;const o2=t5[0];let r3,i3;if("borderBoxSize"in o2){const e3=o2.borderBoxSize,t6=Array.isArray(e3)?e3[0]:e3;r3=t6.inlineSize,i3=t6.blockSize}else r3=e2.offsetWidth,i3=e2.offsetHeight;n4({width:r3,height:i3})});return t4.observe(e2,{box:"border-box"}),()=>t4.unobserve(e2)}n4(void 0)},[e2]),t3},"useSize")(S2),O2=(P2==null?void 0:P2.width)??0,N2=(P2==null?void 0:P2.height)??0,_2=i2+(l2!=="center"?"-"+l2:""),T2=typeof p2=="number"?p2:{top:0,right:0,bottom:0,left:0,...p2},k2=Array.isArray(f2)?f2:[f2],M2=k2.length>0,L2={padding:T2,boundary:k2.filter(isNotNull),altBoundary:M2},{refs:D2,floatingStyles:I2,placement:F2,isPositioned:B2,middlewareData:W2}=__name(function(e2){e2===void 0&&(e2={});const{placement:t3="bottom",strategy:n4="absolute",middleware:r3=[],platform:i3,elements:{reference:a3,floating:l3}={},transform:s3=!0,whileElementsMounted:u3,open:d3}=e2,[f3,p3]=reactExports.useState({x:0,y:0,strategy:n4,placement:t3,middlewareData:{},isPositioned:!1}),[g3,m3]=reactExports.useState(r3);deepEqual(g3,r3)||m3(r3);const[h3,v3]=reactExports.useState(null),[y3,b3]=reactExports.useState(null),w3=reactExports.useCallback(e3=>{e3!==E2.current&&(E2.current=e3,v3(e3))},[]),x3=reactExports.useCallback(e3=>{e3!==R2.current&&(R2.current=e3,b3(e3))},[]),C4=a3||h3,S3=l3||y3,E2=reactExports.useRef(null),R2=reactExports.useRef(null),A3=reactExports.useRef(f3),P3=u3!=null,O3=useLatestRef(u3),N3=useLatestRef(i3),_3=useLatestRef(d3),T3=reactExports.useCallback(()=>{if(!E2.current||!R2.current)return;const e3={placement:t3,strategy:n4,middleware:g3};N3.current&&(e3.platform=N3.current),computePosition(E2.current,R2.current,e3).then(e4=>{const t4={...e4,isPositioned:_3.current!==!1};k3.current&&!deepEqual(A3.current,t4)&&(A3.current=t4,reactDomExports.flushSync(()=>{p3(t4)}))})},[g3,t3,n4,N3,_3]);Te(()=>{d3===!1&&A3.current.isPositioned&&(A3.current.isPositioned=!1,p3(e3=>({...e3,isPositioned:!1})))},[d3]);const k3=reactExports.useRef(!1);Te(()=>(k3.current=!0,()=>{k3.current=!1}),[]),Te(()=>{if(C4&&(E2.current=C4),S3&&(R2.current=S3),C4&&S3){if(O3.current)return O3.current(C4,S3,T3);T3()}},[C4,S3,T3,O3,P3]);const M3=reactExports.useMemo(()=>({reference:E2,floating:R2,setReference:w3,setFloating:x3}),[w3,x3]),L3=reactExports.useMemo(()=>({reference:C4,floating:S3}),[C4,S3]),D3=reactExports.useMemo(()=>{const e3={position:n4,left:0,top:0};if(!L3.floating)return e3;const t4=roundByDPR(L3.floating,f3.x),o2=roundByDPR(L3.floating,f3.y);return s3?{...e3,transform:"translate("+t4+"px, "+o2+"px)",...getDPR(L3.floating)>=1.5&&{willChange:"transform"}}:{position:n4,left:t4,top:o2}},[n4,s3,L3.floating,f3.x,f3.y]);return reactExports.useMemo(()=>({...f3,update:T3,refs:M3,elements:L3,floatingStyles:D3}),[f3,T3,M3,L3,D3])},"useFloating")({strategy:"fixed",placement:_2,whileElementsMounted:__name((...e2)=>autoUpdate(...e2,{animationFrame:h2==="always"}),"whileElementsMounted"),elements:{reference:b2.anchor},middleware:[offset({mainAxis:a2+N2,alignmentAxis:s2}),d2&&shift({mainAxis:!0,crossAxis:!1,limiter:g2==="partial"?limitShift():void 0,...L2}),d2&&flip({...L2}),size$2({...L2,apply:__name(({elements:e2,rects:t3,availableWidth:n4,availableHeight:o2})=>{const{width:r3,height:i3}=t3.reference,a3=e2.floating.style;a3.setProperty("--radix-popper-available-width",`${n4}px`),a3.setProperty("--radix-popper-available-height",`${o2}px`),a3.setProperty("--radix-popper-anchor-width",`${r3}px`),a3.setProperty("--radix-popper-anchor-height",`${i3}px`)},"apply")}),S2&&arrow({element:S2,padding:u2}),transformOrigin({arrowWidth:O2,arrowHeight:N2}),m2&&hide({strategy:"referenceHidden",...L2})]}),[H2,$2]=getSideAndAlignFromPlacement(F2),V2=useCallbackRef$1(v2);R$1(()=>{B2&&(V2==null||V2())},[B2,V2]);const z2=(_a26=W2.arrow)==null?void 0:_a26.x,j2=(_b=W2.arrow)==null?void 0:_b.y,X2=((_c=W2.arrow)==null?void 0:_c.centerOffset)!==0,[U2,Y2]=reactExports.useState();return R$1(()=>{w2&&Y2(window.getComputedStyle(w2).zIndex)},[w2]),jsxRuntimeExports.jsx("div",{ref:D2.setFloating,"data-radix-popper-content-wrapper":"",style:{...I2,transform:B2?I2.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U2,"--radix-popper-transform-origin":[(_d=W2.transformOrigin)==null?void 0:_d.x,(_e2=W2.transformOrigin)==null?void 0:_e2.y].join(" "),...((_f=W2.hide)==null?void 0:_f.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t2.dir,children:jsxRuntimeExports.jsx(Ve,{scope:r2,placedSide:H2,onArrowChange:A2,arrowX:z2,arrowY:j2,shouldHideArrow:X2,children:jsxRuntimeExports.jsx(E$1.div,{"data-side":H2,"data-align":$2,...y2,ref:C3,style:{...y2.style,animation:B2?void 0:"none"}})})})});je.displayName=$e;var Xe="PopperArrow",Ue={top:"bottom",right:"left",bottom:"top",left:"right"},Ye=reactExports.forwardRef(__name(function(t2,n3){const{__scopePopper:o2,...r2}=t2,i2=ze(Xe,o2),a2=Ue[i2.placedSide];return jsxRuntimeExports.jsx("span",{ref:i2.onArrowChange,style:{position:"absolute",left:i2.arrowX,top:i2.arrowY,[a2]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i2.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i2.placedSide],visibility:i2.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Me,{...r2,ref:n3,style:{...r2.style,display:"block"}})})},"PopperArrow2"));function isNotNull(e2){return e2!==null}__name(isNotNull,"isNotNull");Ye.displayName=Xe;var transformOrigin=__name(e2=>({name:"transformOrigin",options:e2,fn(t2){var _a26,_b,_c;const{placement:n3,rects:o2,middlewareData:r2}=t2,i2=((_a26=r2.arrow)==null?void 0:_a26.centerOffset)!==0,a2=i2?0:e2.arrowWidth,l2=i2?0:e2.arrowHeight,[s2,c]=getSideAndAlignFromPlacement(n3),u2={start:"0%",center:"50%",end:"100%"}[c],d2=(((_b=r2.arrow)==null?void 0:_b.x)??0)+a2/2,f2=(((_c=r2.arrow)==null?void 0:_c.y)??0)+l2/2;let p2="",g2="";return s2==="bottom"?(p2=i2?u2:`${d2}px`,g2=-l2+"px"):s2==="top"?(p2=i2?u2:`${d2}px`,g2=`${o2.floating.height+l2}px`):s2==="right"?(p2=-l2+"px",g2=i2?u2:`${f2}px`):s2==="left"&&(p2=`${o2.floating.width+l2}px`,g2=i2?u2:`${f2}px`),{data:{x:p2,y:g2}}}}),"transformOrigin");function getSideAndAlignFromPlacement(e2){const[t2,n3="center"]=e2.split("-");return[t2,n3]}__name(getSideAndAlignFromPlacement,"getSideAndAlignFromPlacement");var Ke=Popper,qe=He,Ge=je,Ze=Ye,Je="Popover",[Qe,et$1]=createContextScope$1(Je,[Ie]),tt$1=Ie(),[nt$1,ot$1]=Qe(Je),Popover=__name(t2=>{const{__scopePopover:n3,children:r2,open:i2,defaultOpen:a2,onOpenChange:l2,modal:s2=!1}=t2,c=tt$1(n3),u2=reactExports.useRef(null),[d2,f2]=reactExports.useState(!1),[p2,g2]=useControllableState$1({prop:i2,defaultProp:a2??!1,onChange:l2,caller:Je});return jsxRuntimeExports.jsx(Ke,{...c,children:jsxRuntimeExports.jsx(nt$1,{scope:n3,contentId:useId(),triggerRef:u2,open:p2,onOpenChange:g2,onOpenToggle:reactExports.useCallback(()=>g2(e2=>!e2),[g2]),hasCustomAnchor:d2,onCustomAnchorAdd:reactExports.useCallback(()=>f2(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>f2(!1),[]),modal:s2,children:r2})})},"Popover");Popover.displayName=Je;var rt$1="PopoverAnchor";reactExports.forwardRef((t2,n3)=>{const{__scopePopover:r2,...i2}=t2,a2=ot$1(rt$1,r2),l2=tt$1(r2),{onCustomAnchorAdd:s2,onCustomAnchorRemove:c}=a2;return reactExports.useEffect(()=>(s2(),()=>c()),[s2,c]),jsxRuntimeExports.jsx(qe,{...l2,...i2,ref:n3})}).displayName=rt$1;var it$1="PopoverTrigger",at$1=reactExports.forwardRef((t2,n3)=>{const{__scopePopover:o2,...r2}=t2,i2=ot$1(it$1,o2),a2=tt$1(o2),l2=useComposedRefs$1(n3,i2.triggerRef),s2=jsxRuntimeExports.jsx(E$1.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i2.open,"aria-controls":i2.contentId,"data-state":getState$1(i2.open),...r2,ref:l2,onClick:composeEventHandlers$1(t2.onClick,i2.onOpenToggle)});return i2.hasCustomAnchor?s2:jsxRuntimeExports.jsx(qe,{asChild:!0,...a2,children:s2})});at$1.displayName=it$1;var lt$1="PopoverPortal",[st,ct$1]=Qe(lt$1,{forceMount:void 0}),PopoverPortal=__name(t2=>{const{__scopePopover:n3,forceMount:o2,children:r2,container:i2}=t2,a2=ot$1(lt$1,n3);return jsxRuntimeExports.jsx(st,{scope:n3,forceMount:o2,children:jsxRuntimeExports.jsx(Presence,{present:o2||a2.open,children:jsxRuntimeExports.jsx(H$1,{asChild:!0,container:i2,children:r2})})})},"PopoverPortal");PopoverPortal.displayName=lt$1;var ut$1="PopoverContent",dt$1=reactExports.forwardRef((t2,n3)=>{const o2=ct$1(ut$1,t2.__scopePopover),{forceMount:r2=o2.forceMount,...i2}=t2,a2=ot$1(ut$1,t2.__scopePopover);return jsxRuntimeExports.jsx(Presence,{present:r2||a2.open,children:a2.modal?jsxRuntimeExports.jsx(pt$1,{...i2,ref:n3}):jsxRuntimeExports.jsx(gt$1,{...i2,ref:n3})})});dt$1.displayName=ut$1;var ft$1=createSlot$1("PopoverContent.RemoveScroll"),pt$1=reactExports.forwardRef((t2,n3)=>{const r2=ot$1(ut$1,t2.__scopePopover),i2=reactExports.useRef(null),a2=useComposedRefs$1(n3,i2),l2=reactExports.useRef(!1);return reactExports.useEffect(()=>{const e2=i2.current;if(e2)return hideOthers(e2)},[]),jsxRuntimeExports.jsx(oe$1,{as:ft$1,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(mt,{...t2,ref:a2,trapFocus:r2.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers$1(t2.onCloseAutoFocus,e2=>{var _a26;e2.preventDefault(),l2.current||((_a26=r2.triggerRef.current)==null||_a26.focus())}),onPointerDownOutside:composeEventHandlers$1(t2.onPointerDownOutside,e2=>{const t3=e2.detail.originalEvent,n4=t3.button===0&&t3.ctrlKey===!0,o2=t3.button===2||n4;l2.current=o2},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers$1(t2.onFocusOutside,e2=>e2.preventDefault(),{checkForDefaultPrevented:!1})})})}),gt$1=reactExports.forwardRef((t2,n3)=>{const r2=ot$1(ut$1,t2.__scopePopover),i2=reactExports.useRef(!1),a2=reactExports.useRef(!1);return jsxRuntimeExports.jsx(mt,{...t2,ref:n3,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:__name(e2=>{var _a26,_b;(_a26=t2.onCloseAutoFocus)==null||_a26.call(t2,e2),e2.defaultPrevented||(i2.current||((_b=r2.triggerRef.current)==null||_b.focus()),e2.preventDefault()),i2.current=!1,a2.current=!1},"onCloseAutoFocus"),onInteractOutside:__name(e2=>{var _a26,_b;(_a26=t2.onInteractOutside)==null||_a26.call(t2,e2),e2.defaultPrevented||(i2.current=!0,e2.detail.originalEvent.type==="pointerdown"&&(a2.current=!0));const n4=e2.target;((_b=r2.triggerRef.current)==null?void 0:_b.contains(n4))&&e2.preventDefault(),e2.detail.originalEvent.type==="focusin"&&a2.current&&e2.preventDefault()},"onInteractOutside")})}),mt=reactExports.forwardRef((t2,n3)=>{const{__scopePopover:r2,trapFocus:i2,onOpenAutoFocus:a2,onCloseAutoFocus:l2,disableOutsidePointerEvents:s2,onEscapeKeyDown:c,onPointerDownOutside:u2,onFocusOutside:d2,onInteractOutside:f2,...p2}=t2,g2=ot$1(ut$1,r2),m2=tt$1(r2);return __name(function(){reactExports.useEffect(()=>{const e2=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e2[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",e2[1]??createFocusGuard()),$$1++,()=>{$$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e3=>e3.remove()),$$1--}},[])},"useFocusGuards")(),jsxRuntimeExports.jsx(B$2,{asChild:!0,loop:!0,trapped:i2,onMountAutoFocus:a2,onUnmountAutoFocus:l2,children:jsxRuntimeExports.jsx(L$1,{asChild:!0,disableOutsidePointerEvents:s2,onInteractOutside:f2,onEscapeKeyDown:c,onPointerDownOutside:u2,onFocusOutside:d2,onDismiss:__name(()=>g2.onOpenChange(!1),"onDismiss"),children:jsxRuntimeExports.jsx(Ge,{"data-state":getState$1(g2.open),role:"dialog",id:g2.contentId,...m2,...p2,ref:n3,style:{...p2.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ht$1="PopoverClose";reactExports.forwardRef((t2,n3)=>{const{__scopePopover:o2,...r2}=t2,i2=ot$1(ht$1,o2);return jsxRuntimeExports.jsx(E$1.button,{type:"button",...r2,ref:n3,onClick:composeEventHandlers$1(t2.onClick,()=>i2.onOpenChange(!1))})}).displayName=ht$1;var vt$1=reactExports.forwardRef((t2,n3)=>{const{__scopePopover:o2,...r2}=t2,i2=tt$1(o2);return jsxRuntimeExports.jsx(Ze,{...i2,...r2,ref:n3})});function getState$1(e2){return e2?"open":"closed"}__name(getState$1,"getState$1");vt$1.displayName="PopoverArrow";var yt=Popover,bt$1=at$1,wt=PopoverPortal,xt$1=dt$1,Ct$1=vt$1,rgbToHsv=__name(function(e2){var t2,n3,o2=e2.r,r2=e2.g,i2=e2.b,a2=Math.max(o2,r2,i2),l2=Math.min(o2,r2,i2),s2=a2,c=a2-l2;if(n3=a2===0?0:c/a2,a2===l2)t2=void 0;else{switch(a2){case o2:t2=(r2-i2)/c+(r2<i2?6:0);break;case r2:t2=(i2-o2)/c+2;break;case i2:t2=(o2-r2)/c+4}t2!==void 0&&(t2/=6)}return{h:t2,s:n3,v:s2}},"rgbToHsv"),hsvToRgb=__name(function(e2){var t2,n3,o2,r2=e2.h,i2=e2.s,a2=e2.v,l2=Math.floor(6*r2),s2=6*r2-l2,c=a2*(1-i2),u2=a2*(1-s2*i2),d2=a2*(1-(1-s2)*i2);switch(l2%6){case 0:t2=a2,n3=d2,o2=c;break;case 1:t2=u2,n3=a2,o2=c;break;case 2:t2=c,n3=a2,o2=d2;break;case 3:t2=c,n3=u2,o2=a2;break;case 4:t2=d2,n3=c,o2=a2;break;case 5:t2=a2,n3=c,o2=u2;break;default:throw new Error("Invalid HSV color")}return{r:t2,g:n3,b:o2}},"hsvToRgb"),rgbToHex$2=__name(function(e2){var t2=e2.r,n3=e2.g,o2=e2.b;if(t2=Math.round(255*t2),n3=Math.round(255*n3),o2=Math.round(255*o2),isNaN(t2)||isNaN(n3)||isNaN(o2))throw new Error("Invalid RGB color");return"#".concat(((1<<24)+(t2<<16)+(n3<<8)+o2).toString(16).slice(1).toUpperCase())},"rgbToHex$2"),hexToRgb$2=__name(function(e2){var t2=parseInt(e2.slice(1),16);return{r:(t2>>16&255)/255,g:(t2>>8&255)/255,b:(255&t2)/255}},"hexToRgb$2");function ColorCircle(t2){return jsxRuntimeExports.jsx("div",{style:{width:t2.radius?"".concat(t2.radius,"px"):"20px",height:t2.radius?"".concat(t2.radius,"px"):"20px",borderRadius:"50%",backgroundColor:t2.color,border:"2px solid var(--gray7)",boxShadow:"0 0 2px 2px rgba(0, 0, 0, 0.2)"}})}__name(ColorCircle,"ColorCircle");function ColorInputWrapper(t2){var n3=t2.colorMode,o2=t2.color,r2=t2.onChange,a2=t2.onCommit,l2=reactExports.useRef({h:0,s:0,v:0}),c=function(e2,t3){if(t3==="hex")return rgbToHsv(hexToRgb$2(e2));if(t3==="rgb")return rgbToHsv(e2);if(t3==="hsv")return e2;throw new Error("Unsupported color mode: ".concat(t3))}(o2,n3);c.h===void 0&&(c.h=l2.current.h),c.s===void 0&&(c.s=l2.current.s),c.v===void 0&&(c.v=l2.current.v);var u2=reactExports.useState(0);u2[0];var d2=u2[1];return jsxRuntimeExports.jsx(ColorInputCore,{hsv:c,onHSVChange:__name(function(e2,t3){l2.current=e2;var o3=function(e3,t4){if(t4==="hex")return rgbToHex$2(hsvToRgb(e3));if(t4==="rgb")return hsvToRgb(e3);if(t4==="hsv")return e3;throw new Error("Unsupported color mode: ".concat(t4))}(e2,n3);t3&&a2?a2(o3):r2?r2(o3):d2(function(e3){return e3+1})},"onHSVChange")})}__name(ColorInputWrapper,"ColorInputWrapper");function ColorInputCore(n3){var o2=n3.hsv,l2=n3.onHSVChange,s2=reactExports.useState(!1),c=s2[0],u2=s2[1],d2=reactExports.useState(!1),f2=d2[0],p2=d2[1],clamp2=__name(function(e2,t2,n4){return Math.max(t2,Math.min(n4,e2))},"clamp"),g2=reactExports.useState(!1),m2=g2[0],h2=g2[1],v2=React.useRef(null),y2=React.useRef(null);reactExports.useLayoutEffect(function(){var e2=v2.current;if(e2){var t2=e2.getContext("2d");if(t2){for(var n4=e2.width,r2=e2.height,i2=t2.createImageData(n4,r2),a2=0;a2<r2;a2++)for(var l3=0;l3<n4;l3++){var s3=hsvToRgb({h:o2.h,s:l3/n4,v:1-a2/r2}),c2=s3.r,u3=s3.g,d3=s3.b,f3=4*(a2*n4+l3);i2.data[f3]=Math.round(255*c2),i2.data[f3+1]=Math.round(255*u3),i2.data[f3+2]=Math.round(255*d3),i2.data[f3+3]=255}t2.putImageData(i2,0,0)}}},[o2.h]),reactExports.useLayoutEffect(function(){var e2=y2.current;if(e2){var t2=e2.getContext("2d");if(t2){for(var n4=e2.width,o3=e2.height,r2=t2.createImageData(n4,o3),i2=0;i2<n4;i2++)for(var a2=0;a2<o3;a2++){var l3=hsvToRgb({h:i2/n4,s:1,v:1}),s3=4*(a2*n4+i2);r2.data[s3]=Math.round(255*l3.r),r2.data[s3+1]=Math.round(255*l3.g),r2.data[s3+2]=Math.round(255*l3.b),r2.data[s3+3]=255}t2.putImageData(r2,0,0)}}},[o2.s,o2.v]);var b2=hsvToRgb(o2);return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",backgroundColor:"var(--gray2)",width:"250px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:[jsxRuntimeExports.jsxs("div",{style:{height:"250px",backgroundColor:"var(--gray3)",borderRadius:"var(--borderRadiusSmall)",position:"relative",border:"2px solid var(--gray5)",cursor:"move"},onPointerDown:__name(function(e2){p2(!0),e2.currentTarget.setPointerCapture(e2.pointerId),document.body.style.cursor="move"},"onPointerDown"),onPointerMove:__name(function(e2){if(f2){var t2=e2.currentTarget.getBoundingClientRect(),n4=e2.clientX-t2.left,r2=e2.clientY-t2.top,i2=clamp2(n4/t2.width,.01,1),a2=clamp2(1-r2/t2.height,.01,1);e2.currentTarget.style.cursor="none",u2(!0),l2({h:o2.h,s:i2,v:a2})}},"onPointerMove"),onPointerUp:__name(function(e2){var t2=e2.currentTarget.getBoundingClientRect(),n4=e2.clientX-t2.left,r2=e2.clientY-t2.top,i2=clamp2(n4/t2.width,.01,1),a2=clamp2(1-r2/t2.height,.01,1);l2({h:o2.h,s:i2,v:a2},!0),e2.currentTarget.releasePointerCapture(e2.pointerId),e2.currentTarget.style.cursor="move",document.body.style.cursor="default",p2(!1),u2(!1)},"onPointerUp"),children:[jsxRuntimeExports.jsx("div",{style:{left:"".concat(100*o2.s,"%"),top:"".concat(100*(1-o2.v),"%"),position:"absolute",transform:"translate(-50%, -50%)"},children:jsxRuntimeExports.jsx(ColorCircle,{color:rgbToHex$2(hsvToRgb(o2)),radius:c?30:20})}),jsxRuntimeExports.jsx("canvas",{ref:v2,style:{width:"100%",height:"100%"},width:250,height:250})]}),jsxRuntimeExports.jsxs("div",{style:{width:"100%",height:"15px",backgroundColor:"var(--gray4)",borderRadius:"var(--borderRadiusSmall)",position:"relative",cursor:"move"},onPointerDown:__name(function(e2){h2(!0),e2.currentTarget.setPointerCapture(e2.pointerId),document.body.style.cursor="ew-resize"},"onPointerDown"),onPointerMove:__name(function(e2){if(m2){var t2=e2.currentTarget.getBoundingClientRect(),n4=e2.clientX-t2.left,r2=clamp2(n4/t2.width,0,.99);l2({h:r2,s:o2.s,v:o2.v})}},"onPointerMove"),onPointerUp:__name(function(e2){var t2=e2.currentTarget.getBoundingClientRect(),n4=e2.clientX-t2.left,r2=clamp2(n4/t2.width,0,.99);l2({h:r2,s:o2.s,v:o2.v},!0),h2(!1),e2.currentTarget.releasePointerCapture(e2.pointerId),document.body.style.cursor="default"},"onPointerUp"),children:[jsxRuntimeExports.jsx("canvas",{ref:y2,width:250,height:15,style:{width:"100%",height:"100%",top:"0",left:"0",position:"absolute",border:"2px solid var(--gray5)",borderRadius:"var(--borderRadiusSmall)"}}),jsxRuntimeExports.jsx("div",{style:{left:"".concat(100*o2.h,"%"),top:"50%",position:"absolute",transform:"translate(-50%, -50%)"},children:jsxRuntimeExports.jsx(ColorCircle,{color:rgbToHex$2(hsvToRgb({h:o2.h,s:1,v:1}))})})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"10px",width:"100%"},children:[jsxRuntimeExports.jsx(SimpleCommittedTextInput,{initialValue:"".concat(Math.round(255*b2.r),", ").concat(Math.round(255*b2.g),", ").concat(Math.round(255*b2.b)),onCommit:__name(function(e2){var t2=e2.match(/^\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*$/);if(t2){var n4=t2.map(Number);n4[0];var r2=n4[1],i2=n4[2],a2=n4[3];if(i2/=255,a2/=255,!((r2/=255)<0||r2>1||i2<0||i2>1||a2<0||a2>1)){var s3=rgbToHsv({r:r2,g:i2,b:a2}),c2=s3.h,u3=s3.s,d3=s3.v;c2||(c2=o2.h),u3||(u3=o2.s),d3||(d3=o2.v),l2({h:c2,s:u3,v:d3},!0)}}},"onCommit"),isValid:__name(function(e2){var t2=e2.match(/^\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*$/);if(!t2)return!1;var n4=t2.map(Number);n4[0];var o3=n4[1],r2=n4[2],i2=n4[3];return o3>=0&&o3<=255&&r2>=0&&r2<=255&&i2>=0&&i2<=255},"isValid")},"".concat(Math.round(255*b2.r),", ").concat(Math.round(255*b2.g),", ").concat(Math.round(255*b2.b))),jsxRuntimeExports.jsx(SimpleCommittedTextInput,{initialValue:rgbToHex$2(hsvToRgb(o2)),onCommit:__name(function(e2){var t2=hexToRgb$2(e2),n4=t2.r,r2=t2.g,i2=t2.b,a2=rgbToHsv({r:n4,g:r2,b:i2}),s3=a2.h,c2=a2.s,u3=a2.v;s3||(s3=o2.h),c2||(c2=o2.s),u3||(u3=o2.v),l2({h:s3,s:c2,v:u3},!0)},"onCommit"),isValid:__name(function(e2){var t2=hexToRgb$2(e2),n4=t2.r,o3=t2.g,r2=t2.b;return n4>=0&&n4<=255&&o3>=0&&o3<=255&&r2>=0&&r2<=255},"isValid")},rgbToHex$2(hsvToRgb(o2)))]})]})}__name(ColorInputCore,"ColorInputCore");var St$1="styles-modules_Content__k1G29",Et$1="styles-modules_Arrow__6BQL5";function ColorInput(n3){var o2=n3.color,r2=n3.colorMode,i2=r2===void 0?"hex":r2,a2=n3.onChange,l2=n3.onCommit,s2=n3.styleTrigger,c=s2===void 0?null:s2,u2=i2==="hex"?hexToRgb$2(o2):i2==="rgb"?o2:hsvToRgb(o2.h,o2.s,o2.v);return jsxRuntimeExports.jsxs(yt,{open:n3.open,onOpenChange:n3.onOpenChange,children:[jsxRuntimeExports.jsx(bt$1,{asChild:!0,children:jsxRuntimeExports.jsx("div",{style:__assign({backgroundColor:"rgb(".concat(Math.round(255*u2.r),", ").concat(Math.round(255*u2.g),", ").concat(Math.round(255*u2.b),")"),width:"35px",height:"35px",cursor:"pointer",border:"2px solid var(--gray6)",boxShadow:"inset 0 0 0 2px var(--gray1)",borderRadius:"var(--borderRadiusSmall)"},c)})}),jsxRuntimeExports.jsx(wt,{children:jsxRuntimeExports.jsxs(xt$1,{sideOffset:5,className:St$1,children:[jsxRuntimeExports.jsx("div",{style:{},children:jsxRuntimeExports.jsx(ColorInputWrapper,{colorMode:"rgb",color:u2,onChange:a2,onCommit:l2})}),jsxRuntimeExports.jsx(Ct$1,{className:Et$1})]})})]})}__name(ColorInput,"ColorInput");styleInject(`
.styles-modules_Content__k1G29 {
    background-color: var(--gray2);
    border: 2px solid var(--gray4);
    padding: 16px;
    border-radius: var(--borderRadiusSmall);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

.styles-modules_Arrow__6BQL5 {
    fill: var(--gray4);
    width: 16px;
    height: 8px;
}`);var clamp$2=__name(function(e2,t2,n3){return Math.max(t2,Math.min(n3,e2))},"clamp$2");function ColorStop(n3){var o2=reactExports.useRef(null),r2=n3.stop,a2=n3.onColorChange,c=n3.onPositionChange,u2=n3.gradientContainerRef,d2=n3.isSelected,f2=n3.onSelect,p2=reactExports.useState(!1),g2=p2[0],m2=p2[1],h2=reactExports.useState(!1),v2=h2[0],y2=h2[1],b2=reactExports.useState({x:0,y:0}),w2=b2[0],x2=b2[1];return reactExports.useEffect(function(){var e2=!1,handlePointerMove=__name(function(t2){if(u2.current!==null&&!g2)if(e2){var n4=u2.current.getBoundingClientRect(),o3=(t2.clientX-n4.left)/n4.width;o3=clamp$2(o3,0,.99),c(o3,!1)}else{var r3={x:t2.clientX,y:t2.clientY},i2=r3.x-w2.x,a3=r3.y-w2.y;Math.sqrt(i2*i2+a3*a3)>5&&(e2=!0,f2())}},"handlePointerMove"),handlePointerUp=__name(function(t2){if(u2.current!==null){if(e2){var n4=u2.current.getBoundingClientRect(),o3=(t2.clientX-n4.left)/n4.width;o3=clamp$2(o3,0,.99),c(o3,!0)}else g2||(m2(!0),f2());x2({x:0,y:0}),e2&&(e2=!1),y2(!1)}},"handlePointerUp");return v2&&(window.addEventListener("pointermove",handlePointerMove),window.addEventListener("pointerup",handlePointerUp)),function(){v2&&(window.removeEventListener("pointermove",handlePointerMove),window.removeEventListener("pointerup",handlePointerUp))}},[v2]),jsxRuntimeExports.jsxs("div",{style:{position:"absolute",left:"".concat(100*r2.position,"%"),transform:"translateX(-50%) translateY(50%)",bottom:"0px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",cursor:"pointer",zIndex:d2?10:1},onPointerDown:__name(function(e2){x2({x:e2.clientX,y:e2.clientY}),y2(!0)},"onPointerDown"),ref:o2,children:[jsxRuntimeExports.jsxs("div",{style:{position:"relative",width:"10px",height:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",width:"10px",height:"8px",backgroundColor:"var(--gray6)",clipPath:"polygon(50% 0,100% 100%,0 100%)"}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"0px",left:"1px",width:"8px",height:"6px",backgroundColor:"var(--gray1)",clipPath:"polygon(50% 0,100% 100%,0 100%)"}})]}),jsxRuntimeExports.jsx("div",{style:{pointerEvents:"none"},children:jsxRuntimeExports.jsx(ColorInput,{color:{r:r2.color.r,g:r2.color.g,b:r2.color.b},colorMode:"rgb",onChange:__name(function(e2){a2(e2,!1)},"onChange"),onCommit:__name(function(e2){a2(e2,!0)},"onCommit"),open:g2,onOpenChange:m2,styleTrigger:{border:d2?"2px solid var(--gray8)":"2px solid var(--gray6)"}})})]})}__name(ColorStop,"ColorStop");function GradientPicker(n3){var o2=n3.stops,r2=n3.onChange,l2=n3.onCommit;n3.style;var c=reactExports.useState(null),u2=c[0],d2=c[1],f2=__name(function(e2){var t2=reactExports.useState(e2),n4=t2[0],o3=t2[1];return reactExports.useLayoutEffect(function(){(function(e3,t3){if(e3.length!==t3.length)return!0;for(var n5=0;n5<e3.length;n5++)if(e3[n5].id!==t3[n5].id||e3[n5].position!==t3[n5].position||e3[n5].color.r!==t3[n5].color.r||e3[n5].color.g!==t3[n5].color.g||e3[n5].color.b!==t3[n5].color.b)return!0;return!1})(n4,e2)&&o3(e2)},[e2]),{setValue:o3,value:n4}},"useHybridState")(o2),p2=f2.value,g2=f2.setValue,getOnColorStopPositionChange=__name(function(e2){return function(t2,n4){var i2=__spreadArray([],o2,!0),a2=i2.findIndex(function(t3){return t3.id===e2});i2[a2]=__assign(__assign({},i2[a2]),{position:t2}),i2.sort(function(e3,t3){return e3.position-t3.position}),n4&&l2?l2(i2):r2?r2==null||r2(i2):g2(i2)}},"getOnColorStopPositionChange"),m2=reactExports.useRef(null),h2=__spreadArray([],o2,!0).sort(function(e2,t2){return e2.position-t2.position});return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"10px",width:"100%"},children:[jsxRuntimeExports.jsxs("div",{style:{height:"50px",width:"100%",borderRadius:"var(--borderRadiusSmall)",boxShadow:"inset 0 0 0 2px var(--gray2)",border:"2px solid var(--gray5)",background:"linear-gradient(to right, ".concat(h2.map(function(e2){return"rgb(".concat(Math.round(255*e2.color.r),", ").concat(Math.round(255*e2.color.g),", ").concat(Math.round(255*e2.color.b),") ").concat(100*e2.position,"%")}).join(", "),",rgb(").concat(Math.round(255*h2[0].color.r),", ").concat(Math.round(255*h2[0].color.g),", ").concat(Math.round(255*h2[0].color.b),") 100%)"),position:"relative",cursor:"crosshair"},ref:m2,children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",cursor:"crosshair"},onClick:__name(function(e2){if(m2.current!==null){var t2=m2.current.getBoundingClientRect(),n4=(e2.clientX-t2.left)/t2.width,i2={color:{r:1,g:1,b:1},position:n4=clamp$2(n4,0,.99),id:crypto.randomUUID()},a2=__spreadArray(__spreadArray([],o2,!0),[i2],!1);a2.sort(function(e3,t3){return e3.position-t3.position}),d2(i2.id),l2?l2(a2):r2?r2==null||r2(a2):g2(a2)}},"onClick")}),p2.map(function(t2,n4){return jsxRuntimeExports.jsx(ColorStop,{stop:t2,onColorChange:(i2=t2.id,function(e2,t3){var n5=__spreadArray([],o2,!0),a2=n5.findIndex(function(e3){return e3.id===i2});n5[a2]=__assign(__assign({},n5[a2]),{color:e2}),t3&&l2?l2(n5):r2?r2==null||r2(n5):g2(n5)}),onPositionChange:getOnColorStopPositionChange(t2.id),gradientContainerRef:m2,isSelected:u2===t2.id,onSelect:__name(function(){return d2(t2.id)},"onSelect")},t2.id);var i2})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Icon,{iconName:"delete",color:u2?"var(--gray8)":"var(--gray3)",bgColor:u2?"var(--gray4)":"transparent",onClick:__name(function(){if(u2!==null&&!(o2.length<2)){var e2=o2.filter(function(e3){return e3.id!==u2});d2(null),l2?l2(e2):r2?r2==null||r2(e2):g2(e2)}},"onClick")})})]})}__name(GradientPicker,"GradientPicker");var t=__name(function(e2,n22){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t2,e3){t2.__proto__=e3}||function(t2,e3){for(var n3 in e3)Object.prototype.hasOwnProperty.call(e3,n3)&&(t2[n3]=e3[n3])},t(e2,n22)},"t");function e(e2,n22){if(typeof n22!="function"&&n22!==null)throw new TypeError("Class extends value "+String(n22)+" is not a constructor or null");function r2(){this.constructor=e2}__name(r2,"r2"),t(e2,n22),e2.prototype=n22===null?Object.create(n22):(r2.prototype=n22.prototype,new r2)}__name(e,"e");var n=__name(function(){return n=Object.assign||function(t2){for(var e2,n22=1,r2=arguments.length;n22<r2;n22++)for(var i2 in e2=arguments[n22])Object.prototype.hasOwnProperty.call(e2,i2)&&(t2[i2]=e2[i2]);return t2},n.apply(this,arguments)},"n");function r(t2){var e2=typeof Symbol=="function"&&Symbol.iterator,n22=e2&&t2[e2],r2=0;if(n22)return n22.call(t2);if(t2&&typeof t2.length=="number")return{next:__name(function(){return t2&&r2>=t2.length&&(t2=void 0),{value:t2&&t2[r2++],done:!t2}},"next")};throw new TypeError(e2?"Object is not iterable.":"Symbol.iterator is not defined.")}__name(r,"r");function i(t2,e2){var n22=typeof Symbol=="function"&&t2[Symbol.iterator];if(!n22)return t2;var r2,i2,a2=n22.call(t2),o2=[];try{for(;(e2===void 0||e2-- >0)&&!(r2=a2.next()).done;)o2.push(r2.value)}catch(t3){i2={error:t3}}finally{try{r2&&!r2.done&&(n22=a2.return)&&n22.call(a2)}finally{if(i2)throw i2.error}}return o2}__name(i,"i");function a(t2,e2,n22){if(arguments.length===2)for(var r2,i2=0,a2=e2.length;i2<a2;i2++)!r2&&i2 in e2||(r2||(r2=Array.prototype.slice.call(e2,0,i2)),r2[i2]=e2[i2]);return t2.concat(r2||Array.prototype.slice.call(e2))}__name(a,"a");var o=function(){function t2(){this._project={metaData:{name:"Empty Project",pinsAndCurvesVersion:"0.0.1"},orgData:{signalIds:[],signalIdByPinId:{},pinIds:[],signalNames:{},signalTypes:{},activeSignalIds:[]},timelineData:{numberOfFrames:100,framesPerSecond:30,playheadPosition:0,focusRange:[0,100],playing:!1,playingTimestamp:0},signalData:{},templateData:{}}}return __name(t2,"t2"),t2.prototype.setName=function(t3){this._project.metaData.name=t3},t2.prototype.addStaticStringSignal=function(t3,e2,n22){this._project.orgData.signalIds.push(t3),this._project.orgData.signalNames[t3]=e2,this._project.orgData.signalTypes[t3]="discrete",this._project.signalData[t3]={id:t3,type:"discrete",pinIds:[],pinTimes:{},pinValues:{},defaultValue:n22,isStatic:!0}},t2.prototype.addStaticNumberSignal=function(t3,e2,n22,r2){this._project.orgData.signalIds.push(t3),this._project.orgData.signalNames[t3]=e2,this._project.orgData.signalTypes[t3]="continuous",this._project.signalData[t3]={id:t3,type:"continuous",pinIds:[],pinTimes:{},pinValues:{},defaultValue:r2,isStatic:!0,range:n22,defaultCurve:"return easyLinear();",curves:{}}},t2.prototype.addDiscreteSignal=function(t3,e2){this._project.orgData.signalIds.push(t3),this._project.orgData.signalNames[t3]=e2,this._project.orgData.signalTypes[t3]="discrete",this._project.signalData[t3]={id:t3,type:"discrete",pinIds:[],pinTimes:{},pinValues:{},defaultValue:"default value",displayValues:!0}},t2.prototype.addContinuousSignal=function(t3,e2,n22){this._project.orgData.signalIds.push(t3),this._project.orgData.signalNames[t3]=e2,this._project.orgData.signalTypes[t3]="continuous",this._project.signalData[t3]={id:t3,type:"continuous",range:n22,pinIds:[],pinTimes:{},pinValues:{},curves:{},defaultCurve:"return easyLinear();",defaultValue:n22[0]}},t2.prototype.addContinuousBezierSignal=function(t3,e2,n22){this._project.orgData.signalIds.push(t3),this._project.orgData.signalNames[t3]=e2,this._project.orgData.signalTypes[t3]="continuous",this._project.signalData[t3]={id:t3,type:"continuous",range:n22,pinIds:[],pinTimes:{},pinValues:{},curves:{},defaultCurve:"return bezier();",defaultValue:n22[0],bezierControlPoints:{},bezier:!0}},t2.prototype.addPin=function(t3,e2,n22,r2){var i2=this._project.signalData[t3],a2=Math.random().toString(36).substring(7);if(this._project.orgData.pinIds.push(a2),this._project.orgData.signalIdByPinId[a2]=t3,i2.type==="continuous"){if(i2.pinIds.push(a2),i2.pinTimes[a2]=e2,typeof n22!="number")throw new Error("Continuous signal pin value must be a number");if(i2.pinValues[a2]=n22,r2)i2.curves[a2]=r2;else{var o2=i2.defaultCurve;i2.curves[a2]=o2}"bezier"in i2&&(this._project.timelineData.numberOfFrames,i2.bezierControlPoints[a2]=[-5,0,5,0])}if(i2.type==="discrete"){if(i2.pinIds.push(a2),i2.pinTimes[a2]=e2,typeof n22!="string")throw new Error("Discrete signal pin value must be a string");i2.pinValues[a2]=n22}},t2.prototype.setTimelineData=function(t3,e2,r2,i2){this._project.timelineData=n(n({},this._project.timelineData),{numberOfFrames:t3,framesPerSecond:e2,playheadPosition:r2,focusRange:i2||this._project.timelineData.focusRange})},t2.prototype.setSignalActiveStatus=function(t3,e2){e2?this._project.orgData.activeSignalIds.push(t3):this._project.orgData.activeSignalIds=this._project.orgData.activeSignalIds.filter(function(e3){return e3!==t3})},t2.prototype.getProject=function(){return this._project},t2.prototype.addCurveTemplate=function(t3,e2){this._project.templateData[t3]=e2},t2}(),u$1=Object.freeze({__proto__:null,ProjectBuilder:o,defaultProject:__name(function(){var t2=new o;return t2.addDiscreteSignal("signal1","Signal 1"),t2.addContinuousSignal("signal2","Signal 2",[0,1]),t2.addPin("signal1",100,"VALUE"),t2.addPin("signal2",100,0,"return easyLinear();"),t2.setSignalActiveStatus("signal1",!0),t2.setSignalActiveStatus("signal2",!0),t2.getProject()},"defaultProject")}),s=function(){function t2(t3,e2,n22){if(n22===void 0&&(n22=1e4),this.content=t3,this.__transformer=e2,typeof n22=="number"){if(n22<1)throw new Error("Max size must be greater than 0");this.__internal={namedStates:{},states:{initial:{forward:[],backward:[],nextState:void 0,previousState:void 0}},cursor:"initial",maxSize:n22}}else this.__internal=n22;this.__MAX_ITERATIONS=this.__internal.maxSize+1}return __name(t2,"t2"),t2.deserialize=function(e2,n22){var r2=JSON.parse(e2);return new t2(r2.content,n22,r2.__internal)},t2.prototype.serialize=function(){return JSON.stringify({content:this.content,__internal:this.__internal})},t2.prototype.next=function(){var t3=this.__internal.states[this.__internal.cursor].nextState;if(!t3)return{success:!1,message:"No next state"};var e2=this.__internal.cursor,n22=this.__internal.states[e2].forward;return this.__internal.cursor=t3,this.content=this.__transformer(this.content,n22),{success:!0,message:"Next state reached"}},t2.prototype.previous=function(){var t3=this.__internal.states[this.__internal.cursor].previousState;if(!t3)return{success:!1,message:"No previous state"};var e2=this.__internal.cursor,n22=this.__internal.states[e2].backward;return this.__internal.cursor=t3,this.content=this.__transformer(this.content,n22),{success:!0,message:"Previous state reached"}},t2.prototype.goToNamedState=function(t3){var e2=this.__internal.namedStates[t3];if(!e2)return{success:!1,message:"Named state not found"};if(!this.__internal.states[e2])throw new Error("Named state has no corresponding state");var n22=this.__internal.cursor;if(e2===n22)return{success:!0,message:"Already at named state"};for(var r2="forward",i2=n22,a2=0;i2&&a2<this.__MAX_ITERATIONS;)a2++,i2===e2&&(r2="backward"),i2=this.__internal.states[i2].previousState;if(r2==="forward"){for(a2=0;this.__internal.cursor!==e2&&a2<this.__MAX_ITERATIONS;)if(a2++,!(o2=this.next()).success)throw new Error(o2.message)}else for(a2=0;this.__internal.cursor!==e2&&a2<this.__MAX_ITERATIONS;){var o2;if(a2++,!(o2=this.previous()).success)throw new Error(o2.message)}return{success:!0,message:"Moved to named state"}},t2.prototype.saveAsNamedState=function(t3){this.__internal.namedStates[t3]=this.__internal.cursor},t2.prototype.appendToCurrentState=function(t3,e2){this.content=this.__transformer(this.content,t3);var n22=this.__internal.cursor,r2=this.__internal.states[n22].forward,i2=this.__internal.states[n22].backward;this.__internal.states[n22].forward=r2.concat(t3),this.__internal.states[n22].backward=e2.concat(i2)},t2.prototype.addNextState=function(t3,e2){for(var n22=this,r2=[],i2=o2=this.__internal.cursor,a2=0;i2&&a2<this.__MAX_ITERATIONS;)a2++,(i2=this.__internal.states[i2].nextState)&&r2.push(i2);r2.forEach(function(t4){delete n22.__internal.states[t4]});var o2=this.__internal.cursor,u2="state".concat(function(){for(var t4="",e3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n3=0;n3<10;n3++)t4+=e3.charAt(Math.floor(52*Math.random()));return t4}());this.__internal.states[u2]={forward:t3,backward:e2,nextState:void 0,previousState:o2},this.__internal.states[o2].nextState=u2,this.__internal.cursor=u2,this.content=this.__transformer(this.content,t3);var s2=1,c2=(i2=o2=this.__internal.cursor,[o2]);for(a2=0;i2&&s2<this.__internal.maxSize&&a2<this.__MAX_ITERATIONS;)a2++,(i2=this.__internal.states[i2].previousState)&&c2.push(i2),s2++;var l2=Object.keys(this.__internal.states).filter(function(t4){return!c2.includes(t4)});l2.forEach(function(t4){delete n22.__internal.states[t4]}),c2.forEach(function(t4,e3){var r3=n22.__internal.states[t4].previousState,i3=n22.__internal.states[t4].nextState;r3&&!n22.__internal.states[r3]&&(n22.__internal.states[t4].previousState=void 0),i3&&!n22.__internal.states[i3]&&(n22.__internal.states[t4].nextState=void 0)}),Object.keys(this.__internal.namedStates).forEach(function(t4){var e3=n22.__internal.namedStates[t4];if(!e3)throw new Error("Named state has no corresponding state");n22.__internal.states[e3]||delete n22.__internal.namedStates[t4]})},t2.prototype.executeCommand=function(t3){switch(t3.type){case"next":this.next();break;case"previous":this.previous();break;case"goToNamedState":this.goToNamedState(t3.namedState);break;case"saveAsNamedState":this.saveAsNamedState(t3.namedState);break;case"addNextState":this.addNextState(t3.forward,t3.backward);break;case"appendToCurrentState":this.appendToCurrentState(t3.forward,t3.backward);break;default:throw new Error("Invalid command")}},t2.prototype.executeCommands=function(t3){var e2=this;t3.forEach(function(t4){return e2.executeCommand(t4)})},t2}(),l=function(){function t2(t3){this.subscribers=[],this.update=[],this.dispatch=t3,this.authorId="a".concat(d())}return __name(t2,"t2"),t2.prototype.subscribeToProjectUpdates=function(t3){var e2=this;if(!this.worm||!this.projectStateId)throw new Error("Worm not initialized");return this.subscribers.push(t3),function(){e2.subscribers=e2.subscribers.filter(function(e3){return e3!==t3})}},t2.prototype.getProject=function(){if(!this.worm||!this.projectStateId)throw new Error("Worm not initialized");return this.worm.content},t2.prototype.pushCommand=function(t3){if(!this.worm||!this.projectStateId)throw new Error("Worm not initialized");try{var e2=t3();this.worm.executeCommand(e2),this.update.push(e2)}catch(t4){console.error(t4)}},t2.prototype.pushCommands=function(t3){var e2;if(!this.worm||!this.projectStateId)throw new Error("Worm not initialized");try{var n22=t3();this.worm.executeCommands(n22),(e2=this.update).push.apply(e2,a([],i(n22),!1))}catch(t4){console.error(t4)}},t2.prototype.pushUpdate=function(){if(!this.worm||!this.projectStateId)throw new Error("Worm not initialized");var t3=this.update;this.update=[];var e2=this.projectStateId;this.projectStateId="ps".concat(d()),this.subscribers.forEach(function(t4){return t4()}),this.dispatch({authorId:this.authorId,authorIsHost:this.host,type:"pushUpdate",instructions:t3,lastAgreedProjectStateId:e2,newProjectStateId:this.projectStateId})},t2.prototype.processUpdate=function(t3){if(this.worm&&this.projectStateId){var e2=t3.lastAgreedProjectStateId,n22=t3.newProjectStateId;(this.host?e2===this.projectStateId&&t3.authorIsHost===!1&&this.update.length===0:e2===this.projectStateId)?(this.update=[],this.worm.executeCommands(t3.instructions),this.projectStateId=n22,this.subscribers.forEach(function(t4){return t4()})):this.host||this.dispatch({authorId:this.authorId,authorIsHost:!1,type:"requestProject"})}},t2}(),f=function(t2){function n22(e2,n3){var r2=t2.call(this,e2.dispatch)||this;return r2.host=!0,r2.worm=n3,r2.projectStateId="ps".concat(d()),r2.dispatch({authorId:r2.authorId,authorIsHost:!0,type:"hostIsConnected"}),r2}return __name(n22,"n2"),e(n22,t2),Object.defineProperty(n22.prototype,"initialized",{get:__name(function(){return!0},"get"),enumerable:!1,configurable:!0}),n22.fromProject=function(t3,e2){return new n22(t3,new s(e2,t3.projectTransformer))},n22.fromSerializedWorm=function(t3,e2){return new n22(t3,s.deserialize(e2,t3.projectTransformer))},n22.prototype.receive=function(t3){if(t3.authorId!==this.authorId)switch(t3.type){case"requestProject":this.pushProject(t3.requestId);break;case"hostIsConnected":case"pushProject":break;case"pushUpdate":this.processUpdate(t3);break;default:throw new Error("Invalid event type")}},n22.prototype.pushProject=function(t3){this.dispatch({authorId:this.authorId,authorIsHost:!0,type:"pushProject",serializedWorm:this.worm.serialize(),initialProjectStateId:this.projectStateId,requestId:t3})},n22}(l),p=function(t2){function n22(e2){var n3=t2.call(this,e2.dispatch)||this;return n3.host=!1,n3.projectRequestCallbacks={},n3.__projectTransformer=e2.projectTransformer,n3}return __name(n22,"n2"),e(n22,t2),Object.defineProperty(n22.prototype,"initialized",{get:__name(function(){return this.worm!==void 0&&this.projectStateId!==void 0},"get"),enumerable:!1,configurable:!0}),n22.prototype.receive=function(t3){if(t3.authorId!==this.authorId)switch(t3.type){case"requestProject":break;case"hostIsConnected":this.requestProject();break;case"pushProject":this.worm=s.deserialize(t3.serializedWorm,this.__projectTransformer),this.projectStateId=t3.initialProjectStateId,t3.requestId&&this.projectRequestCallbacks[t3.requestId]&&(this.projectRequestCallbacks[t3.requestId](),delete this.projectRequestCallbacks[t3.requestId]),this.subscribers.forEach(function(t4){return t4()});break;case"pushUpdate":this.processUpdate(t3);break;default:throw new Error("Invalid event type")}},n22.prototype.requestProject=function(t3){var e2;t3&&(e2="r".concat(d()),this.projectRequestCallbacks[e2]=t3),this.dispatch({authorId:this.authorId,authorIsHost:!1,type:"requestProject",requestId:e2})},n22}(l),d=__name(function(){for(var t2="",e2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n22=0;n22<10;n22++)t2+=e2.charAt(Math.floor(52*Math.random()));return t2},"d"),g=Symbol.for("immer-nothing"),v=Symbol.for("immer-draftable"),y=Symbol.for("immer-state");function _(t2,...e2){throw new Error(`[Immer] minified error nr: ${t2}. Full error at: https://bit.ly/3cXEKWf`)}__name(_,"_");var w=Object.getPrototypeOf;function b(t2){return!!t2&&!!t2[y]}__name(b,"b");function S(t2){var _a26;return!!t2&&(P$3(t2)||Array.isArray(t2)||!!t2[v]||!!((_a26=t2.constructor)!=null&&_a26[v])||C(t2)||N(t2))}__name(S,"S");var I=Object.prototype.constructor.toString();function P$3(t2){if(!t2||typeof t2!="object")return!1;const e2=w(t2);if(e2===null)return!0;const n22=Object.hasOwnProperty.call(e2,"constructor")&&e2.constructor;return n22===Object||typeof n22=="function"&&Function.toString.call(n22)===I}__name(P$3,"P$3");function x(t2,e2){D$1(t2)===0?Reflect.ownKeys(t2).forEach(n22=>{e2(n22,t2[n22],t2)}):t2.forEach((n22,r2)=>e2(r2,n22,t2))}__name(x,"x");function D$1(t2){const e2=t2[y];return e2?e2.type_:Array.isArray(t2)?1:C(t2)?2:N(t2)?3:0}__name(D$1,"D$1");function j(t2,e2){return D$1(t2)===2?t2.has(e2):Object.prototype.hasOwnProperty.call(t2,e2)}__name(j,"j");function E(t2,e2,n22){const r2=D$1(t2);r2===2?t2.set(e2,n22):r2===3?t2.add(n22):t2[e2]=n22}__name(E,"E");function C(t2){return t2 instanceof Map}__name(C,"C");function N(t2){return t2 instanceof Set}__name(N,"N");function T(t2){return t2.copy_||t2.base_}__name(T,"T");function O(t2,e2){if(C(t2))return new Map(t2);if(N(t2))return new Set(t2);if(Array.isArray(t2))return Array.prototype.slice.call(t2);const n22=P$3(t2);if(e2===!0||e2==="class_only"&&!n22){const e3=Object.getOwnPropertyDescriptors(t2);delete e3[y];let n3=Reflect.ownKeys(e3);for(let r2=0;r2<n3.length;r2++){const i2=n3[r2],a2=e3[i2];a2.writable===!1&&(a2.writable=!0,a2.configurable=!0),(a2.get||a2.set)&&(e3[i2]={configurable:!0,writable:!0,enumerable:a2.enumerable,value:t2[i2]})}return Object.create(w(t2),e3)}{const e3=w(t2);if(e3!==null&&n22)return{...t2};const r2=Object.create(e3);return Object.assign(r2,t2)}}__name(O,"O");function k(t2,e2=!1){return U(t2)||b(t2)||!S(t2)||(D$1(t2)>1&&(t2.set=t2.add=t2.clear=t2.delete=z),Object.freeze(t2),e2&&Object.entries(t2).forEach(([t3,e3])=>k(e3,!0))),t2}__name(k,"k");function z(){_(2)}__name(z,"z");function U(t2){return Object.isFrozen(t2)}__name(U,"U");var A,M={};function V(t2){const e2=M[t2];return e2||_(0,t2),e2}__name(V,"V");function R(){return A}__name(R,"R");function F(t2,e2){e2&&(V("Patches"),t2.patches_=[],t2.inversePatches_=[],t2.patchListener_=e2)}__name(F,"F");function B$1(t2){L(t2),t2.drafts_.forEach(q),t2.drafts_=null}__name(B$1,"B$1");function L(t2){t2===A&&(A=t2.parent_)}__name(L,"L");function W(t2){return A={drafts_:[],parent_:A,immer_:t2,canAutoFreeze_:!0,unfinalizedDrafts_:0}}__name(W,"W");function q(t2){const e2=t2[y];e2.type_===0||e2.type_===1?e2.revoke_():e2.revoked_=!0}__name(q,"q");function H(t2,e2){e2.unfinalizedDrafts_=e2.drafts_.length;const n22=e2.drafts_[0];return t2!==void 0&&t2!==n22?(n22[y].modified_&&(B$1(e2),_(4)),S(t2)&&(t2=$(e2,t2),e2.parent_||G(e2,t2)),e2.patches_&&V("Patches").generateReplacementPatches_(n22[y].base_,t2,e2.patches_,e2.inversePatches_)):t2=$(e2,n22,[]),B$1(e2),e2.patches_&&e2.patchListener_(e2.patches_,e2.inversePatches_),t2!==g?t2:void 0}__name(H,"H");function $(t2,e2,n22){if(U(e2))return e2;const r2=e2[y];if(!r2)return x(e2,(i2,a2)=>K(t2,r2,e2,i2,a2,n22)),e2;if(r2.scope_!==t2)return e2;if(!r2.modified_)return G(t2,r2.base_,!0),r2.base_;if(!r2.finalized_){r2.finalized_=!0,r2.scope_.unfinalizedDrafts_--;const e3=r2.copy_;let i2=e3,a2=!1;r2.type_===3&&(i2=new Set(e3),e3.clear(),a2=!0),x(i2,(i3,o2)=>K(t2,r2,e3,i3,o2,n22,a2)),G(t2,e3,!1),n22&&t2.patches_&&V("Patches").generatePatches_(r2,n22,t2.patches_,t2.inversePatches_)}return r2.copy_}__name($,"$");function K(t2,e2,n22,r2,i2,a2,o2){if(b(i2)){const o3=$(t2,i2,a2&&e2&&e2.type_!==3&&!j(e2.assigned_,r2)?a2.concat(r2):void 0);if(E(n22,r2,o3),!b(o3))return;t2.canAutoFreeze_=!1}else o2&&n22.add(i2);if(S(i2)&&!U(i2)){if(!t2.immer_.autoFreeze_&&t2.unfinalizedDrafts_<1)return;$(t2,i2),e2&&e2.scope_.parent_||typeof r2=="symbol"||!Object.prototype.propertyIsEnumerable.call(n22,r2)||G(t2,i2)}}__name(K,"K");function G(t2,e2,n22=!1){!t2.parent_&&t2.immer_.autoFreeze_&&t2.canAutoFreeze_&&k(e2,n22)}__name(G,"G");var J={get(t2,e2){if(e2===y)return t2;const n22=T(t2);if(!j(n22,e2))return function(t3,e3,n3){var _a26;const r3=Y(e3,n3);return r3?"value"in r3?r3.value:(_a26=r3.get)==null?void 0:_a26.call(t3.draft_):void 0}(t2,n22,e2);const r2=n22[e2];return t2.finalized_||!S(r2)?r2:r2===Z(t2.base_,e2)?(tt(t2),t2.copy_[e2]=et(r2,t2)):r2},has:__name((t2,e2)=>e2 in T(t2),"has"),ownKeys:__name(t2=>Reflect.ownKeys(T(t2)),"ownKeys"),set(t2,e2,n22){const r2=Y(T(t2),e2);if(r2!=null&&r2.set)return r2.set.call(t2.draft_,n22),!0;if(!t2.modified_){const r3=Z(T(t2),e2),o2=r3==null?void 0:r3[y];if(o2&&o2.base_===n22)return t2.copy_[e2]=n22,t2.assigned_[e2]=!1,!0;if(((i2=n22)===(a2=r3)?i2!==0||1/i2==1/a2:i2!=i2&&a2!=a2)&&(n22!==void 0||j(t2.base_,e2)))return!0;tt(t2),Q(t2)}var i2,a2;return t2.copy_[e2]===n22&&(n22!==void 0||e2 in t2.copy_)||Number.isNaN(n22)&&Number.isNaN(t2.copy_[e2])||(t2.copy_[e2]=n22,t2.assigned_[e2]=!0),!0},deleteProperty:__name((t2,e2)=>(Z(t2.base_,e2)!==void 0||e2 in t2.base_?(t2.assigned_[e2]=!1,tt(t2),Q(t2)):delete t2.assigned_[e2],t2.copy_&&delete t2.copy_[e2],!0),"deleteProperty"),getOwnPropertyDescriptor(t2,e2){const n22=T(t2),r2=Reflect.getOwnPropertyDescriptor(n22,e2);return r2&&{writable:!0,configurable:t2.type_!==1||e2!=="length",enumerable:r2.enumerable,value:n22[e2]}},defineProperty(){_(11)},getPrototypeOf:__name(t2=>w(t2.base_),"getPrototypeOf"),setPrototypeOf(){_(12)}},X={};function Z(t2,e2){const n22=t2[y];return(n22?T(n22):t2)[e2]}__name(Z,"Z");function Y(t2,e2){if(!(e2 in t2))return;let n22=w(t2);for(;n22;){const t3=Object.getOwnPropertyDescriptor(n22,e2);if(t3)return t3;n22=w(n22)}}__name(Y,"Y");function Q(t2){t2.modified_||(t2.modified_=!0,t2.parent_&&Q(t2.parent_))}__name(Q,"Q");function tt(t2){t2.copy_||(t2.copy_=O(t2.base_,t2.scope_.immer_.useStrictShallowCopy_))}__name(tt,"tt");x(J,(t2,e2)=>{X[t2]=function(){return arguments[0]=arguments[0][0],e2.apply(this,arguments)}}),X.deleteProperty=function(t2,e2){return X.set.call(this,t2,e2,void 0)},X.set=function(t2,e2,n22){return J.set.call(this,t2[0],e2,n22,t2[0])};function et(t2,e2){const n22=C(t2)?V("MapSet").proxyMap_(t2,e2):N(t2)?V("MapSet").proxySet_(t2,e2):function(t3,e3){const n3=Array.isArray(t3),r2={type_:n3?1:0,scope_:e3?e3.scope_:R(),modified_:!1,finalized_:!1,assigned_:{},parent_:e3,base_:t3,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i2=r2,a2=J;n3&&(i2=[r2],a2=X);const{revoke:o2,proxy:u2}=Proxy.revocable(i2,a2);return r2.draft_=u2,r2.revoke_=o2,u2}(t2,e2);return(e2?e2.scope_:R()).drafts_.push(n22),n22}__name(et,"et");function nt(t2){if(!S(t2)||U(t2))return t2;const e2=t2[y];let n22;if(e2){if(!e2.modified_)return e2.base_;e2.finalized_=!0,n22=O(t2,e2.scope_.immer_.useStrictShallowCopy_)}else n22=O(t2,!0);return x(n22,(t3,e3)=>{E(n22,t3,nt(e3))}),e2&&(e2.finalized_=!1),n22}__name(nt,"nt");var rt=new class{constructor(t2){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t3,e2,n22)=>{if(typeof t3=="function"&&typeof e2!="function"){const n3=e2;e2=t3;const r3=this;return function(t4=n3,...i2){return r3.produce(t4,t5=>e2.call(this,t5,...i2))}}let r2;if(typeof e2!="function"&&_(6),n22!==void 0&&typeof n22!="function"&&_(7),S(t3)){const i2=W(this),a2=et(t3,void 0);let o2=!0;try{r2=e2(a2),o2=!1}finally{o2?B$1(i2):L(i2)}return F(i2,n22),H(r2,i2)}if(!t3||typeof t3!="object"){if(r2=e2(t3),r2===void 0&&(r2=t3),r2===g&&(r2=void 0),this.autoFreeze_&&k(r2,!0),n22){const e3=[],i2=[];V("Patches").generateReplacementPatches_(t3,r2,e3,i2),n22(e3,i2)}return r2}_(1,t3)},this.produceWithPatches=(t3,e2)=>{if(typeof t3=="function")return(e3,...n3)=>this.produceWithPatches(e3,e4=>t3(e4,...n3));let n22,r2;return[this.produce(t3,e2,(t4,e3)=>{n22=t4,r2=e3}),n22,r2]},typeof(t2==null?void 0:t2.autoFreeze)=="boolean"&&this.setAutoFreeze(t2.autoFreeze),typeof(t2==null?void 0:t2.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t2.useStrictShallowCopy)}createDraft(t2){S(t2)||_(8),b(t2)&&(t2=function(t3){return b(t3)||_(10,t3),nt(t3)}(t2));const e2=W(this),n22=et(t2,void 0);return n22[y].isManual_=!0,L(e2),n22}finishDraft(t2,e2){const n22=t2&&t2[y];n22&&n22.isManual_||_(9);const{scope_:r2}=n22;return F(r2,e2),H(void 0,r2)}setAutoFreeze(t2){this.autoFreeze_=t2}setUseStrictShallowCopy(t2){this.useStrictShallowCopy_=t2}applyPatches(t2,e2){let n22;for(n22=e2.length-1;n22>=0;n22--){const r3=e2[n22];if(r3.path.length===0&&r3.op==="replace"){t2=r3.value;break}}n22>-1&&(e2=e2.slice(n22+1));const r2=V("Patches").applyPatches_;return b(t2)?r2(t2,e2):this.produce(t2,t3=>r2(t3,e2))}},it=rt.produce;function at(t2,e2){var n22=e2.pinId,r2=!1;for(var i2 in t2.signalData){var a2=t2.signalData[i2],o2=a2.pinIds.indexOf(n22);if(o2!==-1){a2.pinIds.splice(o2,1),delete a2.pinTimes[n22],delete a2.pinValues[n22],a2.type==="continuous"&&(delete a2.curves[n22],"bezier"in a2&&delete a2.bezierControlPoints[n22]),r2=!0;break}}if(!r2)throw new Error("Pin with id ".concat(n22," not found"));t2.orgData.pinIds=t2.orgData.pinIds.filter(function(t3){return t3!==n22}),delete t2.orgData.signalIdByPinId[n22]}__name(at,"at");rt.produceWithPatches.bind(rt),rt.setAutoFreeze.bind(rt),rt.setUseStrictShallowCopy.bind(rt),rt.applyPatches.bind(rt),rt.createDraft.bind(rt),rt.finishDraft.bind(rt);var ot={addPin:__name(function(t2,e2){var n22=e2.signalId,r2=e2.pinId,a2=e2.pinTime,o2=e2.pinValue,u2=e2.functionString,s2=e2.bezierControlPoints,c2=t2.signalData[n22];if(!c2)throw new Error("Signal with id ".concat(n22," not found"));var l2=c2.type;if(l2==="continuous"&&typeof o2!="number")throw new Error("Pin value must be a number for continuous signals");if(l2==="discrete"&&typeof o2!="string")throw new Error("Pin value must be a string for discrete signals");for(var f2 in t2.signalData)if(t2.signalData[f2].pinIds.includes(r2))throw new Error("Pin with id ".concat(r2," already exists"));if(Object.values(c2.pinTimes).includes(a2))throw new Error("Pin time must be unique within the signal");var p2=t2.timelineData.numberOfFrames;if(a2<0||a2>p2)throw new Error("Pin time must be between 0 and ".concat(p2));if(l2==="continuous"){var d2=i(c2.range,2),h2=d2[0],g2=d2[1];if(o2<h2||o2>g2)throw new Error("Pin value must be between ".concat(h2," and ").concat(g2));if(!u2)throw new Error("Curve is required for continuous signals");if("bezier"in c2){if(!c2.bezierControlPoints)throw new Error("Bezier control points are required for continuous bezier signals");if(!s2)throw new Error("Bezier control points are required for continuous bezier signals");c2.bezierControlPoints[r2]=s2}}var v2=c2.pinIds;if(v2.length===0)c2.pinIds.push(r2);else{var y2=v2.findIndex(function(t3){return c2.pinTimes[t3]>=a2});y2===-1&&(y2=v2.length),c2.pinIds.splice(y2,0,r2)}c2.pinTimes[r2]=a2,c2.pinValues[r2]=o2,l2==="continuous"&&(c2.curves[r2]=u2),t2.orgData.pinIds.push(r2),t2.orgData.signalIdByPinId[r2]=n22},"addPin"),deletePin:at,updatePinTime:__name(function(t2,e2){var n22=e2.pinId,r2=e2.pinTime,i2=t2.timelineData.numberOfFrames;if(r2<0||r2>i2)throw new Error("Pin time must be between 0 and ".concat(i2));var a2=!1,o2=__name(function(e3){var i3=t2.signalData[e3];if(i3.pinIds.includes(n22)){i3.pinTimes[n22]=r2;var o3=i3.pinIds,u3=o3.indexOf(n22);o3.splice(u3,1);var s2=o3.findIndex(function(t3){return i3.pinTimes[t3]>=r2});return s2===-1&&(s2=o3.length),o3.splice(s2,0,n22),a2=!0,"break"}},"o2");for(var u2 in t2.signalData)if(o2(u2)==="break")break;if(!a2)throw new Error("Pin with id ".concat(n22," not found"))},"updatePinTime"),updatePinValue:__name(function(t2,e2){var n22=e2.pinId,r2=e2.pinValue,a2=!1;for(var o2 in t2.signalData){var u2=t2.signalData[o2];if(u2.pinIds.includes(n22)){if(u2.type==="continuous"&&typeof r2!="number")throw new Error("Pin value must be a number for continuous signals");if(u2.type==="discrete"&&typeof r2!="string")throw new Error("Pin value must be a string for discrete signals");if(u2.type==="continuous"){var s2=i(u2.range,2),c2=s2[0],l2=s2[1];if(r2<c2||r2>l2)throw new Error("Pin value must be between ".concat(c2," and ").concat(l2))}u2.pinValues[n22]=r2,a2=!0;break}}if(!a2)throw new Error("Pin with id ".concat(n22," not found"))},"updatePinValue"),updatePins:__name(function(t2,e2){var n22,a2,o2=e2.pins,u2=__name(function(e3){var n3=e3.pinId,r2=e3.pinTime,a3=e3.pinValue,o3=e3.functionString,u3=t2.orgData.signalIdByPinId[n3];if(!u3)throw new Error("Pin with id ".concat(n3," not found"));var s3=t2.signalData[u3];if(s3.type==="continuous"&&typeof a3!="number")throw new Error("Pin value must be a number for continuous signals");if(s3.type==="discrete"&&typeof a3!="string")throw new Error("Pin value must be a string for discrete signals");if(s3.type==="continuous"){var c3=i(s3.range,2),l2=c3[0],f2=c3[1];if(a3<l2||a3>f2)throw new Error("Pin value must be between ".concat(l2," and ").concat(f2));if(!o3)throw new Error("Curve is required for continuous signals")}s3.pinTimes[n3]=r2,s3.pinValues[n3]=a3;var p2=s3.pinIds,d2=p2.indexOf(n3);p2.splice(d2,1);var h2=p2.findIndex(function(t3){return s3.pinTimes[t3]>=r2});h2===-1&&(h2=p2.length),p2.splice(h2,0,n3),s3.type==="continuous"&&(s3.curves[n3]=o3)},"u2");try{for(var s2=r(o2),c2=s2.next();!c2.done;c2=s2.next())u2(c2.value)}catch(t3){n22={error:t3}}finally{try{c2&&!c2.done&&(a2=s2.return)&&a2.call(s2)}finally{if(n22)throw n22.error}}},"updatePins"),updateCurve:__name(function(t2,e2){var n22=e2.pinId,r2=e2.functionString,i2=!1;for(var a2 in t2.signalData){var o2=t2.signalData[a2];if(o2.type!=="discrete"&&o2.pinIds.includes(n22)){o2.curves[n22]=r2,i2=!0;break}}if(!i2)throw new Error("Pin with id ".concat(n22," not found"))},"updateCurve"),createSignal:__name(function(t2,e2){var n22,r2=e2.signalId,a2=e2.signalType,o2=e2.signalName,u2=e2.range,s2=e2.defaultValue,c2=e2.displayValues,l2=e2.isStatic,f2=e2.bezier,p2=e2.defaultCurve;if(t2.signalData[r2])throw new Error("Signal with id ".concat(r2," already exists"));if(a2!=="continuous"&&a2!=="discrete")throw new Error("Signal type must be continuous or discrete");if(a2==="continuous"){if(!u2)throw new Error("Range is required for continuous signals");var d2=i(u2,2);if(d2[0]>=d2[1])throw new Error("Min value must be less than max value");if(typeof s2!="number")throw new Error("Default value must be a number for continuous signals");if(!p2)throw new Error("Default curve is required for continuous signals");n22=f2?{id:r2,type:a2,range:u2,defaultValue:s2,isStatic:l2,bezier:!0,bezierControlPoints:{},defaultCurve:p2,pinIds:[],pinTimes:{},pinValues:{},curves:{}}:{id:r2,type:a2,range:u2,defaultValue:s2,isStatic:l2,defaultCurve:p2,pinIds:[],pinTimes:{},pinValues:{},curves:{}}}if(a2==="discrete"){if(typeof s2!="string")throw new Error("Default value must be a string for discrete signals");n22={id:r2,type:a2,pinIds:[],defaultValue:s2,displayValues:c2,isStatic:l2,pinTimes:{},pinValues:{}}}t2.signalData[r2]=n22,t2.orgData.signalIds.push(r2),t2.orgData.signalNames[r2]=o2,t2.orgData.signalTypes[r2]=a2,t2.orgData.activeSignalIds.push(r2)},"createSignal"),deleteSignal:__name(function(t2,e2){var n22=e2.signalId;if(!t2.signalData[n22])throw new Error("Signal with id ".concat(n22," not found"));var r2=t2.signalData[n22].pinIds;r2.forEach(function(e3){return delete t2.orgData.signalIdByPinId[e3]}),r2.forEach(function(e3){return t2.orgData.pinIds=t2.orgData.pinIds.filter(function(t3){return t3!==e3})}),delete t2.signalData[n22],t2.orgData.signalIds=t2.orgData.signalIds.filter(function(t3){return t3!==n22}),delete t2.orgData.signalNames[n22],t2.orgData.activeSignalIds=t2.orgData.activeSignalIds.filter(function(t3){return t3!==n22}),delete t2.orgData.signalTypes[n22]},"deleteSignal"),updateSignalName:__name(function(t2,e2){var n22=e2.signalId,r2=e2.signalName;if(!t2.signalData[n22])throw new Error("Signal with id ".concat(n22," not found"));t2.orgData.signalNames[n22]=r2},"updateSignalName"),updateSignalRange:__name(function(t2,e2){var n22=e2.signalId,r2=e2.range;if(!t2.signalData[n22])throw new Error("Signal with id ".concat(n22," not found"));if(t2.signalData[n22].type!=="continuous")throw new Error("Range can only be updated for continuous signals");var a2=i(r2,2);if(a2[0]>=a2[1])throw new Error("Min value must be less than max value");t2.signalData[n22].range=r2},"updateSignalRange"),updateSignalIndex:__name(function(t2,e2){var n22=e2.signalId,r2=e2.index,i2=t2.orgData.signalIds,a2=i2.indexOf(n22);if(a2===-1)throw new Error("Signal with id ".concat(n22," not found"));i2.splice(a2,1),i2.splice(r2,0,n22)},"updateSignalIndex"),updateSignalActiveStatus:__name(function(t2,e2){var n22=e2.signalId,r2=e2.active;if(!t2.signalData[n22])throw new Error("Signal with id ".concat(n22," not found"));var i2=t2.orgData.activeSignalIds,a2=i2.indexOf(n22);r2&&a2===-1&&i2.push(n22),r2||a2===-1||i2.splice(a2,1)},"updateSignalActiveStatus"),updateFramesPerSecond:__name(function(t2,e2){var n22=e2.framesPerSecond;if(n22<=0)throw new Error("Frames per second must be greater than 0");t2.timelineData.framesPerSecond=n22},"updateFramesPerSecond"),updatePlayheadPosition:__name(function(t2,e2){var n22=e2.playheadPosition;if(t2.timelineData.playing)throw new Error("Cannot update playhead position while playing");if(n22<0||n22>t2.timelineData.numberOfFrames)throw new Error("Playhead position must be between 0 and ".concat(t2.timelineData.numberOfFrames));t2.timelineData.playheadPosition=n22},"updatePlayheadPosition"),updateNumberOfFrames:__name(function(t2,e2){var n22,i2,a2=e2.numberOfFrames;if(a2<=0)throw new Error("Number of frames must be greater than 0");for(var o2 in t2.timelineData.numberOfFrames=a2,t2.signalData){var u2=t2.signalData[o2];try{for(var s2=(n22=void 0,r(u2.pinIds)),c2=s2.next();!c2.done;c2=s2.next()){var l2=c2.value;u2.pinTimes[l2]>a2&&at(t2,{type:"deletePin",pinId:l2})}}catch(t3){n22={error:t3}}finally{try{c2&&!c2.done&&(i2=s2.return)&&i2.call(s2)}finally{if(n22)throw n22.error}}}},"updateNumberOfFrames"),updateProjectName:__name(function(t2,e2){var n22=e2.projectName;t2.metaData.name=n22},"updateProjectName"),updateFocusRange:__name(function(t2,e2){var n22=e2.focusRange,r2=i(n22,2),a2=r2[0],o2=r2[1];if(a2<0||o2>t2.timelineData.numberOfFrames||a2>=o2)throw new Error("Invalid focus range");t2.timelineData.focusRange=n22},"updateFocusRange"),updateCurveTemplate:__name(function(t2,e2){var n22=e2.curveId,r2=e2.functionString;if(!t2.templateData[n22])throw new Error("Curve template with id ".concat(n22," not found"));t2.templateData[n22]=r2},"updateCurveTemplate"),addCurveTemplate:__name(function(t2,e2){var n22=e2.curveId,r2=e2.functionString;if(t2.templateData[n22])throw new Error("Curve template with id ".concat(n22," already exists"));t2.templateData[n22]=r2},"addCurveTemplate"),deleteCurveTemplate:__name(function(t2,e2){var n22=e2.curveId;if(!t2.templateData[n22])throw new Error("Curve template with id ".concat(n22," not found"));delete t2.templateData[n22]},"deleteCurveTemplate"),updatePinBezierControlPoints:__name(function(t2,e2){var n22=e2.pinId,r2=e2.bezierControlPoints,i2=t2.orgData.signalIdByPinId[n22];if(!i2)throw new Error("Pin with id ".concat(n22," not found"));t2.signalData[i2].bezierControlPoints[n22]=r2},"updatePinBezierControlPoints"),updateSignalDefaultValue:__name(function(t2,e2){var n22=e2.signalId,r2=e2.defaultValue;if(!t2.signalData[n22])throw new Error("Signal with id ".concat(n22," not found"));var i2=t2.signalData[n22];if(i2.type==="continuous"&&typeof r2!="number")throw new Error("Default value must be a number for continuous signals");if(i2.type==="discrete"&&typeof r2!="string")throw new Error("Default value must be a string for discrete signals");i2.defaultValue=r2},"updateSignalDefaultValue"),updateSignalDefaultCurve:__name(function(t2,e2){var n22=e2.signalId,r2=e2.defaultCurve;if(!t2.signalData[n22])throw new Error("Signal with id ".concat(n22," not found"));t2.signalData[n22].defaultCurve=r2},"updateSignalDefaultCurve"),updatePlaying:__name(function(t2,e2){var n22=e2.playing,r2=e2.playingTimestamp;t2.timelineData.playing=n22,t2.timelineData.playingTimestamp=r2},"updatePlaying")};function ut(t2,e2){return it(t2,function(t3){for(var n22=0;n22<e2.length;n22++){var r2=e2[n22];(0,ot[r2.type])(t3,r2)}})}__name(ut,"ut");function ct(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}__name(ct,"ct");var lt={type:"saveAsNamedState",namedState:"commit"},ft={type:"goToNamedState",namedState:"commit"};function pt(t2,e2,n22,r2,i2,a2,o2){return a2&&!o2&&(t2.timelineData.numberOfFrames,o2=[-5,0,5,0]),{type:"addPin",signalId:e2,pinId:n22,pinTime:r2,pinValue:i2,functionString:a2,bezierControlPoints:o2}}__name(pt,"pt");function dt(t2,e2){var n22=t2(),r2=Object.keys(n22.signalData).find(function(t3){var r3;return(r3=n22.signalData[t3])===null||r3===void 0?void 0:r3.pinIds.includes(e2)});if(!r2)throw new Error("Pin not found");var i2=n22.signalData[r2].type,a2=i2==="continuous"&&"bezier"in n22.signalData[r2],o2=n22.signalData[r2].pinTimes[e2],u2=n22.signalData[r2].pinValues[e2],s2=i2==="continuous"?n22.signalData[r2].curves[e2]:void 0,c2=a2?n22.signalData[r2].bezierControlPoints[e2]:void 0;return{type:"addNextState",forward:[{type:"deletePin",pinId:e2}],backward:[pt(n22,r2,e2,o2,u2,s2,c2)]}}__name(dt,"dt");var ht=f,gt=p,vt=ut;(function(){function t2(t3,e2,n22,r2){if(e2){if(!n22&&!r2)throw new Error("Project or worm must be provided to host project controller");var i2=void 0;if(n22&&(i2=ht.fromProject({dispatch:t3,projectTransformer:vt},n22)).worm.saveAsNamedState("commit"),r2&&(i2=ht.fromSerializedWorm({dispatch:t3,projectTransformer:vt},r2)),!i2)throw new Error("Project node not created");this.projectNode=i2,this.connectToHost=function(){throw new Error("Host project controller cannot connect to host")}}else{this.projectNode=new gt({dispatch:t3,projectTransformer:vt});var a2=this.projectNode.requestProject.bind(this.projectNode);this.connectToHost=a2}}return __name(t2,"t2"),t2.Host=function(e2,n22){return new t2(e2,!0,n22)},t2.HostFromProject=function(e2,n22){return new t2(e2,!0,n22)},t2.prototype.serializeWorm=function(){if(!this.projectNode.initialized)throw new Error("Project not initialized");if(!this.projectNode.worm)throw new Error("Project node worm not found");return this.projectNode.worm.serialize()},t2.HostFromSerializedWorm=function(e2,n22){return new t2(e2,!0,void 0,n22)},t2.Client=function(e2){return new t2(e2,!1,void 0)},t2.prototype.receive=function(t3){this.projectNode.receive(t3)},Object.defineProperty(t2.prototype,"projectTools",{get:__name(function(){if(!this.projectNode.initialized)throw new Error("Project not initialized");var t3=this.projectNode.pushUpdate.bind(this.projectNode),e2=this.projectNode.getProject.bind(this.projectNode),n22=this.projectNode.pushCommand.bind(this.projectNode);return this.projectNode.pushCommands.bind(this.projectNode),function(t4,e3,n3,r2){function a2(){e3(function(){return ft})}__name(a2,"a2");function o2(){e3(function(){return lt})}return __name(o2,"o2"),{returnToLastCommit:__name(function(){a2()},"returnToLastCommit"),pushUpdate:t4,addPinContinuous:__name(function(n4,i2,u2,s2,c2,l2){l2&&a2(),e3(function(){var t5=r2(),e4=t5.signalData[n4],a3=e4.pinTimes,o3=e4.pinIds.findIndex(function(t6){return a3[t6]===u2}),l3=[];o3!==-1&&l3.push({type:"deletePin",pinId:e4.pinIds[o3]}),l3.push(pt(t5,n4,i2,u2,s2,c2));var f2=[];if(f2.push({type:"deletePin",pinId:i2}),o3!==-1){var p2=e4.pinIds[o3];f2.push(pt(t5,n4,p2,e4.pinTimes[p2],e4.pinValues[p2],e4.curves[p2]))}return{type:"addNextState",forward:l3,backward:f2}}),l2&&(o2(),t4())},"addPinContinuous"),addPinDiscrete:__name(function(n4,i2,u2,s2,c2){c2&&a2(),e3(function(){var t5=r2(),e4=t5.signalData[n4],a3=e4.pinTimes,o3=e4.pinIds.findIndex(function(t6){return a3[t6]===u2}),c3=[];o3!==-1&&c3.push({type:"deletePin",pinId:e4.pinIds[o3]}),c3.push(pt(t5,n4,i2,u2,s2));var l2=[];if(l2.push({type:"deletePin",pinId:i2}),o3!==-1){var f2=e4.pinIds[o3];l2.push(pt(t5,n4,f2,e4.pinTimes[f2],e4.pinValues[f2]))}return{type:"addNextState",forward:c3,backward:l2}}),c2&&(o2(),t4())},"addPinDiscrete"),deletePin:__name(function(n4){a2(),e3(function(){return dt(r2,n4)}),o2(),t4()},"deletePin"),deletePins:__name(function(n4){a2(),n4.forEach(function(t5){e3(function(){return dt(r2,t5)})}),o2(),t4()},"deletePins"),updatePins:__name(function(n4,i2){i2&&a2();var u2=r2(),s2={type:"updatePins",pins:[]},c2={type:"updatePins",pins:[]};n4.forEach(function(t5){var e4=t5.pinId,n5=u2.orgData.signalIdByPinId[e4],r3=t5.pinTime,i3=t5.pinValue,a3=t5.pinType==="continuous"?t5.functionString:void 0,o3=u2.signalData[n5].pinTimes[e4],l2=u2.signalData[n5].pinValues[e4],f2=t5.pinType==="continuous"?u2.signalData[n5].curves[e4]:void 0,p2={pinId:e4,pinTime:r3??o3,pinValue:i3??l2,functionString:a3??f2},d2={pinId:e4,pinTime:o3,pinValue:l2,functionString:f2};s2.pins.push(p2),c2.pins.push(d2)}),e3(function(){return{type:"addNextState",forward:[s2],backward:[c2]}}),i2&&o2(),t4()},"updatePins"),updateCurve:__name(function(n4,i2){a2(),e3(function(){var t5=r2(),e4=Object.keys(t5.signalData).find(function(e5){var r3;return(r3=t5.signalData[e5])===null||r3===void 0?void 0:r3.pinIds.includes(n4)});if(!e4)throw new Error("Pin not found");if(t5.signalData[e4].type==="discrete")throw new Error("Cannot update curve of discrete signal");return{type:"addNextState",forward:[{type:"updateCurve",pinId:n4,functionString:i2}],backward:[{type:"updateCurve",pinId:n4,functionString:t5.signalData[e4].curves[n4]}]}}),o2(),t4()},"updateCurve"),updatePinBezierControlPoints:__name(function(n4,i2,u2){u2&&a2(),e3(function(){var t5=r2(),e4=Object.keys(t5.signalData).find(function(e5){var r3;return(r3=t5.signalData[e5])===null||r3===void 0?void 0:r3.pinIds.includes(n4)});if(!e4)throw new Error("Pin not found");if(t5.signalData[e4].type==="discrete")throw new Error("Cannot update bezier control points of discrete signal");if(!("bezier"in t5.signalData[e4]))throw new Error("Signal is not a bezier signal");return{type:"addNextState",forward:[{type:"updatePinBezierControlPoints",pinId:n4,bezierControlPoints:i2}],backward:[{type:"updatePinBezierControlPoints",pinId:n4,bezierControlPoints:t5.signalData[e4].bezierControlPoints[n4]}]}}),u2&&o2(),t4()},"updatePinBezierControlPoints"),createDiscreteSignal:__name(function(n4,r3,i2,u2){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"discrete",signalName:r3,defaultValue:i2,isStatic:u2,displayValues:!0}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createDiscreteSignal"),createDiscreteBeatSignal:__name(function(n4,r3){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"discrete",signalName:r3,defaultValue:"beat"}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createDiscreteBeatSignal"),createContinuousSignal:__name(function(n4,r3,i2,u2,s2,c2){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"continuous",signalName:r3,range:i2,defaultValue:u2,defaultCurve:s2,isStatic:c2}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createContinuousSignal"),createContinuousBezierSignal:__name(function(n4,r3,i2,u2,s2,c2){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"continuous",signalName:r3,range:i2,defaultValue:u2,defaultCurve:s2,isStatic:c2,bezier:!0}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createContinuousBezierSignal"),duplicateSignal:__name(function(n4){a2();var i2=ct();e3(function(){var t5=r2(),e4=t5.signalData[n4];if(!e4)throw new Error("Signal not found");var a3=t5.orgData.signalNames[n4],o3=e4.defaultValue,u2=e4.type==="continuous"?e4.defaultCurve:void 0,s2=e4.isStatic,c2=e4.type==="continuous"&&"bezier"in e4,l2=e4.type==="discrete"?e4.displayValues:void 0,f2=a3+"_copy",p2=e4.type==="continuous"?e4.range:void 0;return{type:"addNextState",forward:[{type:"createSignal",signalId:i2,signalType:e4.type,signalName:f2,range:p2,defaultValue:o3,defaultCurve:u2,isStatic:s2,bezier:!!c2||void 0,displayValues:!!l2||void 0}],backward:[{type:"deleteSignal",signalId:i2}]}}),e3(function(){var t5=r2(),e4=t5.signalData[n4].pinIds,a3=t5.signalData[n4].type,o3=e4.map(function(e5){var r3,i3=t5.signalData[n4].pinTimes[e5],o4=t5.signalData[n4].pinValues[e5];return a3==="continuous"&&(r3=t5.signalData[n4].curves[e5]),{pinTime:i3,pinValue:o4,functionString:r3,pinId:ct()}});return{type:"addNextState",forward:o3.map(function(e5){return pt(t5,i2,e5.pinId,e5.pinTime,e5.pinValue,e5.functionString)}),backward:o3.map(function(t6){return{type:"deletePin",pinId:t6.pinId}})}}),o2(),t4()},"duplicateSignal"),deleteSignal:__name(function(n4){a2(),e3(function(){var t5=r2(),e4=t5.signalData[n4];if(!e4)throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"deleteSignal",signalId:n4}],backward:[{type:"createSignal",signalId:n4,signalType:e4.type,signalName:t5.orgData.signalNames[n4],range:e4.type==="continuous"?e4.range:void 0,defaultValue:e4.defaultValue,defaultCurve:e4.type==="continuous"?e4.defaultCurve:void 0,isStatic:e4.isStatic,bezier:e4.type==="continuous"&&"bezier"in e4||void 0,bezierControlPoints:e4.type==="continuous"&&"bezier"in e4?e4.bezierControlPoints:void 0,displayValues:e4.type==="discrete"?e4.displayValues:void 0}]}}),o2(),t4()},"deleteSignal"),updateSignalDefaultValue:__name(function(n4,i2){a2(),e3(function(){var t5=r2().signalData[n4];if(!t5)throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalDefaultValue",signalId:n4,defaultValue:i2}],backward:[{type:"updateSignalDefaultValue",signalId:n4,defaultValue:t5.defaultValue}]}}),o2(),t4()},"updateSignalDefaultValue"),updateSignalName:__name(function(n4,i2){a2(),e3(function(){var t5=r2();if(!t5.signalData[n4])throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalName",signalId:n4,signalName:i2}],backward:[{type:"updateSignalName",signalId:n4,signalName:t5.orgData.signalNames[n4]}]}}),o2(),t4()},"updateSignalName"),updateSignalRange:__name(function(n4,i2){a2(),e3(function(){var t5=r2().signalData[n4];if(!t5)throw new Error("Signal not found");if(t5.type==="discrete")throw new Error("Cannot update range of discrete signal");return{type:"addNextState",forward:[{type:"updateSignalRange",signalId:n4,range:i2}],backward:[{type:"updateSignalRange",signalId:n4,range:t5.range}]}}),o2(),t4()},"updateSignalRange"),updateSignalIndex:__name(function(n4,i2,u2){u2&&a2(),e3(function(){var t5=r2();if(!t5.signalData[n4])throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalIndex",signalId:n4,index:i2}],backward:[{type:"updateSignalIndex",signalId:n4,index:t5.orgData.activeSignalIds.indexOf(n4)}]}}),u2&&o2(),t4()},"updateSignalIndex"),updateSignalActiveStatus:__name(function(n4,i2){a2(),e3(function(){var t5=r2();if(!t5.signalData[n4])throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalActiveStatus",signalId:n4,active:i2}],backward:[{type:"updateSignalActiveStatus",signalId:n4,active:t5.orgData.activeSignalIds.includes(n4)}]}}),o2(),t4()},"updateSignalActiveStatus"),updateFramesPerSecond:__name(function(n4){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateFramesPerSecond",framesPerSecond:n4}],backward:[{type:"updateFramesPerSecond",framesPerSecond:t5.timelineData.framesPerSecond}]}}),o2(),t4()},"updateFramesPerSecond"),updatePlayheadPosition:__name(function(n4,i2){i2&&a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updatePlayheadPosition",playheadPosition:n4}],backward:[{type:"updatePlayheadPosition",playheadPosition:t5.timelineData.playheadPosition}]}}),i2&&o2(),t4()},"updatePlayheadPosition"),playNextFrame:__name(function(n4){var o3=r2(),u2=o3.timelineData.playheadPosition,s2=i(o3.timelineData.focusRange,2);s2[0],s2[1],a2(),e3(function(){return{type:"addNextState",forward:[{type:"updatePlaying",playing:!0},{type:"updatePlayheadPosition",playheadPosition:n4}],backward:[{type:"updatePlayheadPosition",playheadPosition:u2},{type:"updatePlaying",playing:!1}]}}),t4()},"playNextFrame"),updateFocusRange:__name(function(n4){var u2=i(n4,2),s2=u2[0],c2=u2[1];a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateFocusRange",focusRange:[s2,c2]}],backward:[{type:"updateFocusRange",focusRange:t5.timelineData.focusRange}]}}),o2(),t4()},"updateFocusRange"),updateNumberOfFrames:__name(function(n4){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateNumberOfFrames",numberOfFrames:n4}],backward:[{type:"updateNumberOfFrames",numberOfFrames:t5.timelineData.numberOfFrames}]}}),o2(),t4()},"updateNumberOfFrames"),updateProjectName:__name(function(n4){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateProjectName",projectName:n4}],backward:[{type:"updateProjectName",projectName:t5.metaData.name}]}}),o2(),t4()},"updateProjectName"),undo:__name(function(){a2(),e3(function(){return{type:"previous"}}),o2(),t4()},"undo"),redo:__name(function(){a2(),e3(function(){return{type:"next"}}),o2(),t4()},"redo"),addCurveTemplate:__name(function(n4,r3){e3(function(){return{type:"appendToCurrentState",forward:[{type:"addCurveTemplate",curveId:n4,functionString:r3}],backward:[{type:"deleteCurveTemplate",curveId:n4}]}}),t4()},"addCurveTemplate"),deleteCurveTemplate:__name(function(n4){e3(function(){return{type:"appendToCurrentState",forward:[{type:"deleteCurveTemplate",curveId:n4}],backward:[{type:"addCurveTemplate",curveId:n4,functionString:r2().templateData[n4]}]}}),t4()},"deleteCurveTemplate"),updateCurveTemplate:__name(function(n4,i2){e3(function(){return{type:"appendToCurrentState",forward:[{type:"updateCurveTemplate",curveId:n4,functionString:i2}],backward:[{type:"updateCurveTemplate",curveId:n4,functionString:r2().templateData[n4]}]}}),t4()},"updateCurveTemplate")}}(t3,n22,0,e2)},"get"),enumerable:!1,configurable:!0}),t2.prototype.getProject=function(){if(!this.projectNode.initialized)throw new Error("Project not initialized");return this.projectNode.getProject()},t2.prototype.prettyPrintProject=function(){if(!this.projectNode.initialized)throw new Error("Project not initialized");console.log(JSON.stringify(this.projectNode.getProject(),null,2))},t2.prototype.subscribeToProjectUpdates=function(t3){return this.projectNode.subscribeToProjectUpdates(t3)},t2.prototype.interpolateSignalValueAtTime=function(t3,e2){if(!this.projectNode.initialized)throw new Error("Project not initialized");var n22=this.projectNode.getProject();return Rt(n22,t3,e2)},t2})();function bt(t2,e2,n22){var r2=i(t2,2),a2=r2[0],o2=r2[1],u2=i(e2,2),s2=u2[0],c2=u2[1],l2=i(n22,2),f2=l2[0],p2=l2[1],d2=(a2-s2)*(a2-f2)*(s2-f2);return d2===0?{a:0,b:0,c:0}:{a:(o2*(s2-f2)+c2*(f2-a2)+p2*(a2-s2))/d2,b:(o2*(Math.pow(f2,2)-Math.pow(s2,2))+c2*(Math.pow(a2,2)-Math.pow(f2,2))+p2*(Math.pow(s2,2)-Math.pow(a2,2)))/d2,c:(o2*(s2*f2*(s2-f2))+c2*(f2*a2*(f2-a2))+p2*(a2*s2*(a2-s2)))/d2}}__name(bt,"bt");var St=__name(function(t2){var e2=t2.project,n22=t2.project.orgData.signalIdByPinId[t2.pinId],r2=e2.signalData[n22].pinIds.indexOf(t2.pinId);return r2===0?t2.range[0]:(r2-1)%2===0?function(t3){var e3=t3.project,n3=t3.project.orgData.signalIdByPinId[t3.pinId],r3=e3.signalData[n3].pinIds,i2=r3.indexOf(t3.pinId);if(i2===0)return t3.previousPinValue;if(i2===r3.length-1)return t3.nextPinValue;var a2=r3[i2-1],o2=r3[i2+1],u2=bt([e3.signalData[n3].pinTimes[a2],e3.signalData[n3].pinValues[a2]],[t3.nextPinTime,t3.nextPinValue],[e3.signalData[n3].pinTimes[o2],e3.signalData[n3].pinValues[o2]]),s2=u2.a,c2=u2.b,l2=u2.c,f2=t3.frame,p2=s2*f2*f2+c2*f2+l2;return isNaN(p2)?t3.nextPinValue:p2}(t2):function(t3){var e3=t3.project,n3=t3.project.orgData.signalIdByPinId[t3.pinId],r3=e3.signalData[n3].pinIds,i2=r3.indexOf(t3.pinId);if(i2<2)return t3.previousPinValue;var a2=r3[i2-1],o2=r3[i2-2],u2=e3.signalData[n3].pinTimes[a2],s2=e3.signalData[n3].pinValues[a2],c2=t3.nextPinTime,l2=t3.nextPinValue,f2=bt([e3.signalData[n3].pinTimes[o2],e3.signalData[n3].pinValues[o2]],[u2,s2],[c2,l2]),p2=f2.a,d2=f2.b,h2=f2.c,g2=t3.frame,v2=p2*g2*g2+d2*g2+h2;return isNaN(v2)?t3.nextPinValue:v2}(t2)},"St"),It=function(t2){var e2,n22=((e2=t2%2147483647)<=0&&(e2+=2147483646),function(){return((e2=16807*e2%2147483647)-1)/2147483646}),r2=Array(256).fill(0).map(function(){return 2*n22()-1}),o2=Array(256).fill(0).map(function(t3,e3){return e3}).sort(function(){return n22()-.5}),u2=a(a([],i(o2),!1),i(o2),!1);return function(t3){var e3,n3=255&Math.floor(t3),i2=t3-Math.floor(t3),a2=(e3=i2)*e3*e3*(e3*(6*e3-15)+10);return function(t4,e4,n4){return t4+n4*(e4-t4)}(r2[u2[n3]]*i2,r2[u2[n3+1]]*(i2-1),a2)}}(42);function Pt(t2,e2,n22){return t2+(e2-t2)*n22}__name(Pt,"Pt");function xt(t2){return t2*t2*t2}__name(xt,"xt");function Dt(t2){return 1-Math.pow(1-t2,3)}__name(Dt,"Dt");function jt(t2){return t2<.5?4*t2*t2*t2:1-Math.pow(-2*t2+2,3)/2}__name(jt,"jt");function Et(t2){var e2=2*Math.PI/3;return t2===0?0:t2===1?1:Math.pow(2,-10*t2)*Math.sin((10*t2-.75)*e2)+1}__name(Et,"Et");var Ct={};function Nt(t2,e2){t2 in Ct||(Ct[t2]=e2)}__name(Nt,"Nt");function Tt(t2){return t2 in Ct?Ct[t2]:null}__name(Tt,"Tt");function Ot(t2){var e2=t2.nextPinTime,n22=t2.project,r2=t2.range,a2=t2.defaultValue,o2=t2.pinId,u2=t2.frame,s2=t2.numberOfFrames,c2=t2.framesPerSecond,l2=t2.nextPinValue,f2=t2.previousPinTime,p2=t2.previousPinValue,d2=t2.relativeTime,h2=t2.interpolateSignalValueAtTime,g2=i(r2,2),v2=g2[0],y2=g2[1];return{nextPinTime:e2,nextPinValue:l2,project:n22,previousPinTime:f2,defaultValue:a2,previousPinValue:p2,relativeTime:d2,frame:u2,pinId:o2,numberOfFrames:s2,framesPerSecond:c2,maxValue:y2,minValue:v2,linearInterpolation:Pt,easeInCubic:xt,easeOutCubic:Dt,easeInOutCubic:jt,easeOutElastic:Et,easyLinear:__name(function(){return d2*(l2-p2)+p2},"easyLinear"),bezier:__name(function(){var r3=n22.orgData.signalIdByPinId[t2.pinId],o3=n22.signalData[r3];if(o3&&"bezier"in o3){var u3=i(o3.bezierControlPoints[t2.pinId],2);u3[0];var c3=u3[1];c3+=l2;var h3=o3.pinIds.indexOf(t2.pinId)-1;h3=h3<0?0:h3;var g3=o3.pinIds[h3],v3=i(o3.bezierControlPoints[g3],4);v3[0],v3[1],v3[2];var m2=v3[3];return function(t3,e3,n3,r4,i2){var a3=t3.y,o4=e3.y,u4=n3.y,s4=r4.y;return function(t4){return Math.pow(1-t4,3)*a3+3*Math.pow(1-t4,2)*t4*o4+3*(1-t4)*Math.pow(t4,2)*u4+Math.pow(t4,3)*s4}(i2)}({y:p2},{y:m2+=p2},{y:c3},{y:l2},d2)}return a2},"bezier"),easyStep:__name(function(){return l2},"easyStep"),easyEaseIn:__name(function(){return p2+xt(d2)*(l2-p2)},"easyEaseIn"),easyEaseOut:__name(function(){return p2+Dt(d2)*(l2-p2)},"easyEaseOut"),easyEase:__name(function(){return p2+jt(d2)*(l2-p2)},"easyEase"),easyEaseOutElastic:__name(function(){return p2+Et(d2)*(l2-p2)},"easyEaseOutElastic"),easyInOut:__name(function(){return 1},"easyInOut"),noise:It,easyThreshold:__name(function(){return l2>(y2-v2)/2?y2:v2},"easyThreshold"),easyRepeat:__name(function(){return d2},"easyRepeat"),easyParabola:__name(function(){return St(t2)},"easyParabola"),interpolateSignalValueAtTime:h2,signal:__name(function(t3){return h2(t3,u2)},"signal"),cloneSignal:__name(function(t3){var e3=n22.orgData.signalIds.find(function(e4){return n22.orgData.signalNames[e4]===t3});if(!e3)throw new Error("Signal ".concat(t3," not found"));var r3=n22.signalData[e3];if(!r3)throw new Error("Signal ".concat(t3," not found"));var i2=r3.pinIds;if(i2.length<2)return a2;var o3=r3.pinTimes[i2[0]],u3=r3.pinTimes[i2[i2.length-1]];return h2(t3,o3+(u3-o3)*d2)},"cloneSignal"),fitSignal:__name(function(t3,e3,r3){var i2=n22.orgData.signalIds.find(function(e4){return n22.orgData.signalNames[e4]===t3});if(!i2)throw new Error("Signal ".concat(t3," not found"));var a3=e3??v2,o3=r3??y2,s3=n22.signalData[i2].range;return a3+(h2(t3,u2)-s3[0])/(s3[1]-s3[0])*(o3-a3)},"fitSignal"),flip:__name(function(t3){return y2-t3+v2},"flip"),useAsset:Tt,saveAsset:Nt}}__name(Ot,"Ot");var kt={},Ut={},At=1e-6,Mt=__name(function(t2,e2,n22,r2){var o2=t2.signalData[e2],u2=i(o2.range,2),s2=u2[0],c2=u2[1],l2=o2.defaultValue,f2=Object.entries(o2.pinTimes).sort(function(t3,e3){return t3[1]-e3[1]}),p2=f2.find(function(t3){var e3=i(t3,2);return e3[0],e3[1]>=n22});if(p2===void 0)return[l2,[]];var d2,h2=i(p2,2),g2=h2[0],v2=h2[1],y2=o2.pinValues[g2],m2=o2.curves[g2],_2=s2,w2=0,b2=f2.findIndex(function(t3){var e3=i(t3,2),n3=e3[0];return e3[1],n3===g2});if(b2>0){var S2=i(f2[b2-1],2),I2=S2[0],P2=S2[1];_2=o2.pinValues[I2],w2=P2}else if(n22<v2)return[l2,[]];var x2=Ut[e2+g2];if(x2===void 0||x2.functionString!==m2){var D2=`
            let nextPinTime = context.nextPinTime;
            let nextPinValue = context.nextPinValue;
            let previousPinTime = context.previousPinTime;
            let previousPinValue = context.previousPinValue;
            let relativeTime = context.relativeTime;
            let frame = context.frame;
            let numberOfFrames = context.numberOfFrames;
            let framesPerSecond = context.framesPerSecond;

            let interpolateSignalValue = context.interpolateSignalValue;
            let signal = context.signal;

            let bezier = context.bezier;

            let easyLinear = context.easyLinear;
            let easyEaseIn = context.easyEaseIn;
            let easyEaseOut = context.easyEaseOut;
            let easyStep = context.easyStep;
            let easyEase = context.easyEase;
            let easyEaseOutElastic = context.easyEaseOutElastic;
            let easyRepeat = context.easyRepeat;
            let easyThreshold = context.easyThreshold;
            let easyParabola = context.easyParabola;
            let easyInOut = context.easyInOut;
            let noise = context.noise;
            let fitSignal = context.fitSignal;
            let flip = context.flip;
            let cloneSignal = context.cloneSignal;


            `.concat(m2);d2=new Function("context","templates",D2),Ut[e2+g2]={functionString:m2,cachedFunction:d2}}else d2=x2.cachedFunction;var j2=(n22-w2)/(v2!==w2?v2-w2:1),E2=l2,C22=[];try{var N2=Ot({nextPinTime:v2,nextPinValue:y2,previousPinTime:w2,project:t2,previousPinValue:_2,defaultValue:l2,relativeTime:j2,pinId:g2,frame:n22,range:[s2,c2],numberOfFrames:t2.timelineData.numberOfFrames,framesPerSecond:t2.timelineData.framesPerSecond,interpolateSignalValueAtTime:__name(function(e3,n3){var o3=t2.orgData.signalIds.find(function(n4){return t2.orgData.signalNames[n4]===e3});if(o3===void 0)throw new Error("Signal not found");var u3=i(Rt(t2,o3,n3,r2),2),s3=u3[0],c3=u3[1];if(typeof s3=="string")throw new Error("Interpolation function returned string");return C22.push.apply(C22,a([],i(c3),!1)),s3},"interpolateSignalValueAtTime")}),T2=function(t3){var e3={};return Object.entries(t3.templateData).forEach(function(t4){var n3=i(t4,2),r3=n3[0],a2=n3[1];if(kt[r3]!==void 0){if(kt[r3].functionString===a2){var o3=kt[r3].cachedFunction;return void(e3[r3]=o3)}}else o3=new Function("return ".concat(a2,";"))(),e3[r3]=o3,kt[r3]={functionString:a2,cachedFunction:o3}}),e3}(t2);E2=d2(N2,T2)}catch(t3){C22.push({signalId:e2,frame:n22,error:t3.message})}if(isNaN(E2)&&(E2=l2,C22.push({signalId:e2,frame:n22,error:"Interpolated value is NaN"})),E2<s2&&(E2=s2,Math.abs(E2-s2)>At&&C22.push({signalId:e2,frame:n22,error:"Interpolated value below minimum"})),E2>c2){var O2=E2;E2=c2,Math.abs(O2-c2)>At&&C22.push({signalId:e2,frame:n22,error:"Interpolated value above maximum: "+O2})}return[E2,C22]},"Mt"),Vt=__name(function(t2,e2,n22,r2){var a2=t2.signalData[e2],o2=a2.defaultValue,u2=Object.entries(a2.pinTimes).sort(function(t3,e3){return t3[1]-e3[1]}).find(function(t3){var e3=i(t3,2);return e3[0],e3[1]>=n22});if(u2===void 0)return o2;var s2=i(u2,2),c2=s2[0];return s2[1],a2.pinValues[c2]},"Vt"),Rt=__name(function(t2,e2,n22,r2){if(r2===void 0&&(r2=0),++r2>1e3)throw new Error("Exceeded maximum iteration count");var i2=t2.timelineData.numberOfFrames;if(n22<0||n22>i2)throw new Error("Time out of range");var a2=t2.signalData[e2].type;if(a2==="discrete")return[Vt(t2,e2,n22),[]];if(a2==="continuous")return Mt(t2,e2,n22,r2);throw new Error("Invalid signal type")},"Rt");function Wt(t2,e2){return[t2[0]+e2[0],t2[1]+e2[1]]}__name(Wt,"Wt");function qt(t2,e2){return[t2[0]-e2[0],t2[1]-e2[1]]}__name(qt,"qt");function Ht(t2,e2){return[t2[0]*e2[0],t2[1]*e2[1]]}__name(Ht,"Ht");function $t(t2,e2){var n22=i([t2[0][0],t2[0][1],t2[2][0],t2[2][1]],4),r2=n22[0],a2=n22[1],o2=n22[2],u2=n22[3],s2=i([e2[0][0],e2[0][1],e2[2][0],e2[2][1]],4),c2=s2[0],l2=s2[1],f2=s2[2],p2=s2[3];return!(r2>f2||o2<c2)&&!(a2>p2||u2<l2)}__name($t,"$t");var Kt=function(){function t2(t3,e2,n22){t3===void 0&&(t3=[0,0]),e2===void 0&&(e2=0),n22===void 0&&(n22=0),this._o=t3,this._w=e2,this._h=n22}return __name(t2,"t2"),Object.defineProperty(t2.prototype,"w",{get:__name(function(){return this._w},"get"),set:__name(function(t3){this._w=t3},"set"),enumerable:!1,configurable:!0}),Object.defineProperty(t2.prototype,"h",{get:__name(function(){return this._h},"get"),set:__name(function(t3){this._h=t3},"set"),enumerable:!1,configurable:!0}),Object.defineProperty(t2.prototype,"o",{get:__name(function(){return this._o},"get"),set:__name(function(t3){this._o=t3},"set"),enumerable:!1,configurable:!0}),t2.prototype.pointInside=function(t3){var e2={x:t3[0],y:t3[1]},n22=e2.x,r2=e2.y,i2={oX:this.o[0],oY:this.o[1]},a2=i2.oX,o2=i2.oY;return!(n22<a2||n22>a2+this.w)&&!(r2<o2||r2>o2+this.h)},t2.prototype.clone=function(){return new t2(a([],i(this.o),!1),this.w,this.h)},t2.prototype.getBoundingBox=function(){return[this.o,Wt(this.o,[this.w,0]),Wt(this.o,[this.w,this.h]),Wt(this.o,[0,this.h])]},t2.prototype.getCenter=function(){return Wt(this.o,[this.w/2,this.h/2])},t2}();(function(t2){function r2(){var e2=t2.call(this)||this;return e2.layer=0,e2.children=[],e2._isPrimaryCamera=!1,e2._needsUpdate=!1,e2._needsUpdate_root=!1,e2._renderAlways=!1,e2.updateWhenCameraChanges=!1,e2.state=void 0,e2.context={},e2.windowDidMountPrimitiveIsRunning=!1,e2.childIndex=0,e2.isCanvasRoot=!1,e2.props={},e2.globalPositioning=!1,e2}return __name(r2,"r2"),e(r2,t2),Object.defineProperty(r2.prototype,"_cameraSnapshot",{get:__name(function(){var t3;if(!this._root)throw new Error("Root not connected");return(t3=this._root)===null||t3===void 0?void 0:t3.cameraSnapshot},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"_canvas",{get:__name(function(){var t3;if(!this._root)throw new Error("Root not connected");return(t3=this._root)===null||t3===void 0?void 0:t3.canvas},"get"),enumerable:!1,configurable:!0}),r2.prototype.setAsPrimaryCamera=function(){var t3;(t3=this._root)===null||t3===void 0||t3.installCamera(this)},r2.prototype.setState=function(t3){var e2,n22;if(this.state===t3)throw new Error("Cannot set state to previous state. ");this.windowDidMountPrimitiveIsRunning?this.state=t3:(this._isPrimaryCamera&&((e2=this._root)===null||e2===void 0||e2.windows.forEach(function(t4){t4.updateWhenCameraChanges&&(t4._needsUpdate=!0)})),(n22=this._root)===null||n22===void 0||n22.scheduleStateUpdate(this,t3))},r2.prototype.setContext=function(t3,e2){var n22,r3;this.windowDidMountPrimitiveIsRunning?this.context[t3]=e2:(this._isPrimaryCamera&&((n22=this._root)===null||n22===void 0||n22.windows.forEach(function(t4){t4.updateWhenCameraChanges&&(t4._needsUpdate=!0)})),this.context[t3]=e2,(r3=this._root)===null||r3===void 0||r3.scheduleContextUpdate(this,t3,e2))},r2.prototype.windowDidMountPrimitive=function(t3){this.windowDidMountPrimitiveIsRunning=!0,this.windowDidMount(t3),this.windowDidMountPrimitiveIsRunning=!1},r2.prototype.windowDidMount=function(t3){},r2.prototype.windowDidUpdate=function(t3){},r2.prototype.cameraDidUpdate=function(){},r2.prototype.windowWillUnmount=function(){},r2.prototype.getBoxPrimitive=function(){if(this._boxSnapshot)return this._boxSnapshot;var t3=this.getBox();return this._boxSnapshot=t3,t3},r2.prototype.getBox=function(){return new Kt([0,0],0,0)},Object.defineProperty(r2.prototype,"o",{get:__name(function(){return this.getBoxPrimitive().o},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"w",{get:__name(function(){return this.getBoxPrimitive().w},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"h",{get:__name(function(){return this.getBoxPrimitive().h},"get"),enumerable:!1,configurable:!0}),r2.prototype.cameraPassUpdateSelf=function(){var t3,e2,r3=this;this._isPrimaryCamera?(t3=this._root)===null||t3===void 0||t3.windows.forEach(function(t4){var e3;(e3=r3._root)===null||e3===void 0||e3.taintLayer(t4.layer)}):(this._needsUpdate&&(this._boxSnapshot=void 0,(e2=this._root)===null||e2===void 0||e2.taintLayer(this.layer)),this.cameraPassUpdateChildren(),this._needsUpdate&&this.windowDidUpdate(n({},this.props)))},r2.prototype.cameraPassUpdateChildren=function(){var t3=this;this.childIndex=0;var e2=this.getChildren(this.props).map(function(e3){return e3(t3)}),n22=this.children.filter(function(t4){return!e2.includes(t4)}),r3=e2.filter(function(e3){return!t3.children.includes(e3)});this.children=e2,n22.forEach(function(t4){return t4.windowWillUnmount()}),r3.forEach(function(t4){return t4.windowDidMountPrimitive(t4.props)});var i2=this.children.find(function(t4){return t4._needsUpdate});this.children.forEach(function(t4){t4._needsUpdate=!0}),i2&&i2.cameraPassUpdateSelf()},r2.prototype.regularPassUpdateSelf=function(){var t3;this._boxSnapshot=void 0,(t3=this._root)===null||t3===void 0||t3.taintLayer(this.layer),this.regularPassUpdateChildren(),this.windowDidUpdate(n({},this.props))},r2.prototype.regularPassUpdateChildren=function(){var t3=this;this.childIndex=0;var e2=this.getChildren(this.props).map(function(e3){return e3(t3)}),n22=this.children.filter(function(t4){return!e2.includes(t4)}),r3=e2.filter(function(e3){return!t3.children.includes(e3)});this.children=e2,n22.forEach(function(t4){return t4.windowWillUnmount()}),r3.forEach(function(t4){t4.windowDidMountPrimitive(t4.props)}),this.children.forEach(function(t4){t4.regularPassUpdateSelf()})},r2.prototype.getChildren=function(t3){return[]},r2.prototype.incChildIndex=function(){this.childIndex++},r2.Node=function(t3){var e2=this,r3=this.name;return function(i2){if(i2.isCanvasRoot){var a2=void 0;return(a2=new e2)._root=i2,a2.setKey("root"),a2.props=t3||{},a2.context=n({},a2.context),a2}var o2=i2.childIndex;t3||(t3={});var u2=t3.key?t3.key:"".concat(r3,"[").concat(o2,"]");return a2=void 0,i2.children.findIndex(function(t4){return t4.key===u2})!==-1?a2=i2.children.find(function(t4){return t4.key===u2}):((a2=new e2)._parent=i2,a2._root=i2._root,a2.setKey(u2)),a2.props=n({},t3),a2.context=n(n({},a2.context),i2.context),i2.incChildIndex(),a2}},Object.defineProperty(r2.prototype,"parentO",{get:__name(function(){return this._parent?this._parent.globalO:[0,0]},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"parentW",{get:__name(function(){return this._parent?this._parent.w:0},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"parentH",{get:__name(function(){return this._parent?this._parent.h:0},"get"),enumerable:!1,configurable:!0}),r2.prototype.getChildByKey=function(t3){return this.children.find(function(e2){return e2.key===t3})},r2.prototype.getBoundingBox=function(){var t3=i(this.globalO,2),e2=t3[0],n22=t3[1];return[[e2,n22],[e2+this.w,n22],[e2+this.w,n22+this.h],[e2,n22+this.h]]},r2.prototype.pointInside=function(e2){return t2.prototype.pointInside.call(this,qt(e2,this.parentO))},Object.defineProperty(r2.prototype,"globalO",{get:__name(function(){if(!this._parent||this.globalPositioning)return this.o;var t3=i(this._parent.globalO,2),e2=t3[0],n22=t3[1],r3=i(this.o,2);return[e2+r3[0],n22+r3[1]]},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"globalKey",{get:__name(function(){return this._parent?this._parent.globalKey+"@"+this.key:"root"},"get"),enumerable:!1,configurable:!0}),r2.prototype.getLayer=function(){return this.layer},r2.prototype.setLayer=function(t3){this.layer=t3},r2.prototype.setKey=function(t3){this.key=t3},Object.defineProperty(r2.prototype,"displayConnected",{get:__name(function(){return this._cameraSnapshot&&this._canvas},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"canvasUnit",{get:__name(function(){if(!this.displayConnected)throw new Error("Display not connected");return[this._cameraSnapshot.w/this._canvas.width,this._cameraSnapshot.h/this._canvas.height]},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"absoluteUnit",{get:__name(function(){if(!this.displayConnected)throw new Error("Display not connected");return[this._canvas.width/this._cameraSnapshot.w,this._canvas.height/this._cameraSnapshot.h]},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"canvasO",{get:__name(function(){if(!this.displayConnected)throw new Error("Display not connected");return[this._cameraSnapshot.o[0],this._cameraSnapshot.o[1]]},"get"),enumerable:!1,configurable:!0}),r2.prototype.absoluteToCanvasMeasure=function(t3){return Ht(t3,[this._canvas.width/this._cameraSnapshot.w,this._canvas.height/this._cameraSnapshot.h])},r2.prototype.canvasToAbsoluteMeasure=function(t3){return Ht(t3,[this._cameraSnapshot.w/this._canvas.width,this._cameraSnapshot.h/this._canvas.height])},Object.defineProperty(r2.prototype,"cameraSnapshot",{get:__name(function(){return this._cameraSnapshot},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(r2.prototype,"canvas",{get:__name(function(){if(!this.displayConnected)throw new Error("Display not connected");return this._canvas},"get"),enumerable:!1,configurable:!0}),r2.prototype.prepareHandlerProps=function(){var t3=this.cameraSnapshot,e2=this.canvas,n22=this.absoluteToCanvasMeasure.bind(this),r3=this.canvasToAbsoluteMeasure.bind(this),i2=this.canvasUnit,a2=this.absoluteUnit,o2=this.canvasO;return{canvasDimensions:[e2.width,e2.height],absoluteToCanvasMeasure:n22,canvasToAbsoluteMeasure:r3,camera:t3,canvasUnit:i2,canvasO:o2,absoluteUnit:a2}},r2.prototype.preparePostBoxHandlerProps=function(){var t3=this,e2=this._cameraSnapshot,r3=this._canvas,a2=__name(function(n22){var a3=t3.globalO,o3=i(n22,2),u2=o3[0],s2=o3[1],c2=i(a3,2),l2=i([c2[0]+u2,c2[1]+s2],2),f2=l2[0],p2=l2[1],d2=i(e2.o,2),h2=i([f2-d2[0],p2-d2[1]],2),g2=h2[0],v2=h2[1];return[g2*(r3.width/e2.w),v2*(r3.height/e2.h)]},"a2"),o2=a2([0,0]);return n(n({},this.prepareHandlerProps()),{localToCanvas:a2,canvasToLocal:__name(function(n22){var i2=t3.globalO;return qt(Wt(Ht(n22,[e2.w/r3.width,e2.h/r3.height]),e2.o),i2)},"canvasToLocal"),absoluteO:o2})},r2.prototype.prepareMouseHandlerProps=function(t3,e2){var r3=this.preparePostBoxHandlerProps(),a2=i(this.canvasUnit,2),o2=a2[0],u2=a2[1],s2=i(this.canvasO,2),c2=s2[0],l2=s2[1],f2=i(t3,2),p2=[c2+f2[0]*o2,l2+f2[1]*u2],d2=qt(p2,this.globalO),h2=this.pointInside(p2);return n(n({},r3),{relativePos:d2,canvasPos:t3,absolutePos:p2,pointInside:h2,terminateEvent:e2})},r2.prototype.prepareWheelHandlerProps=function(t3){var e2=this.preparePostBoxHandlerProps();return n(n({},e2),{terminateEvent:t3})},r2.prototype.renderPrimitive=function(t3){if(this.render){var e2=this.preparePostBoxHandlerProps();this.render(n(n({},e2),{ctx:t3}))}},r2.prototype.render=function(t3){},r2.prototype.onMouseDownPrimitive=function(t3,e2,n22){this.onMouseDown&&this.onMouseDown(this.prepareMouseHandlerProps(t3,e2),n22)},r2.prototype.onMouseDown=function(t3,e2){},r2.prototype.onMouseMovePrimitive=function(t3,e2,n22){this.onMouseMove&&this.onMouseMove(this.prepareMouseHandlerProps(t3,e2),n22)},r2.prototype.onMouseMove=function(t3,e2){},r2.prototype.onMouseUpPrimitive=function(t3,e2,n22){this.onMouseUp&&this.onMouseUp(this.prepareMouseHandlerProps(t3,e2),n22)},r2.prototype.onMouseUp=function(t3,e2){},r2.prototype.onClickPrimitive=function(t3,e2,n22){this.onClick&&this.onClick(this.prepareMouseHandlerProps(t3,e2),n22)},r2.prototype.onClick=function(t3,e2){},r2.prototype.onWheelPrimitive=function(t3,e2){this.onWheel&&this.onWheel(this.prepareWheelHandlerProps(t3),e2)},r2.prototype.onWheel=function(t3,e2){},r2.prototype.strokeOutline=function(t3,e2){t3.ctx.strokeStyle=e2;var n22=t3.absoluteO,r3=t3.absoluteUnit,a2=i(n22,2),o2=a2[0],u2=a2[1],s2=i(r3,2),c2=s2[0],l2=s2[1];t3.ctx.strokeRect(o2,u2,this.w*c2,this.h*l2)},r2})(Kt);var Jt={};function Xt(t2,e2,n22,o2,u2){var s2=(t2=new Kt(a([],i(t2.o),!1),t2.w,t2.h)).getBoundingBox(),c2=e2.filter(function(t3){return t3._renderAlways||$t(t3.getBoundingBox(),s2)}),l2=Array.from(new Set(c2.map(function(t3){return t3.getLayer()}))).sort(function(t3,e3){return t3-e3});o2.clearRect(0,0,n22.width,n22.height);for(var f2=function(t3){var e3,i2,a2=l2[t3],s3=c2.filter(function(e4){return e4.getLayer()===l2[t3]});if(u2.includes(a2)){var f3=a2+"";if(Jt[f3]===void 0){var p3=document.createElement("canvas");Jt[f3]=p3}var d2=Jt[f3];d2.width=n22.width,d2.height=n22.height;var h2=d2.getContext("2d");h2.clearRect(0,0,d2.width,d2.height);try{for(var g2=(e3=void 0,r(s3)),v2=g2.next();!v2.done;v2=g2.next())v2.value.renderPrimitive(h2)}catch(t4){e3={error:t4}}finally{try{v2&&!v2.done&&(i2=g2.return)&&i2.call(g2)}finally{if(e3)throw e3.error}}}var y2=a2+"";Jt[y2]&&o2.drawImage(Jt[y2],0,0)},p2=0;p2<l2.length;p2++)f2(p2)}__name(Xt,"Xt");function Zt(t2,e2,n22,o2,u2){var s2,c2,l2=(t2=new Kt(a([],i(t2.o),!1),t2.w,t2.h)).getBoundingBox(),f2=e2.filter(function(t3){return $t(t3.getBoundingBox(),l2)}).reverse(),p2=!0,d2=__name(function(){p2=!1},"d2");try{for(var h2=r(f2),g2=h2.next();!g2.done&&(g2.value.onClickPrimitive(o2,d2,u2),!!p2);g2=h2.next());}catch(t3){s2={error:t3}}finally{try{g2&&!g2.done&&(c2=h2.return)&&c2.call(h2)}finally{if(s2)throw s2.error}}}__name(Zt,"Zt");function Yt(t2,e2,n22,o2,u2){var s2,c2,l2=(t2=new Kt(a([],i(t2.o),!1),t2.w,t2.h)).getBoundingBox(),f2=e2.filter(function(t3){return $t(t3.getBoundingBox(),l2)}).reverse(),p2=!0,d2=__name(function(){p2=!1},"d2");try{for(var h2=r(f2),g2=h2.next();!g2.done&&(g2.value.onMouseDownPrimitive(o2,d2,u2),!!p2);g2=h2.next());}catch(t3){s2={error:t3}}finally{try{g2&&!g2.done&&(c2=h2.return)&&c2.call(h2)}finally{if(s2)throw s2.error}}}__name(Yt,"Yt");function Qt(t2,e2,n22,o2,u2){var s2,c2,l2=(t2=new Kt(a([],i(t2.o),!1),t2.w,t2.h)).getBoundingBox(),f2=e2.filter(function(t3){return $t(t3.getBoundingBox(),l2)}).reverse(),p2=!0,d2=__name(function(){p2=!1},"d2");try{for(var h2=r(f2),g2=h2.next();!g2.done&&(g2.value.onMouseMovePrimitive(o2,d2,u2),!!p2);g2=h2.next());}catch(t3){s2={error:t3}}finally{try{g2&&!g2.done&&(c2=h2.return)&&c2.call(h2)}finally{if(s2)throw s2.error}}}__name(Qt,"Qt");function te(t2,e2,n22,o2,u2){var s2,c2,l2=(t2=new Kt(a([],i(t2.o),!1),t2.w,t2.h)).getBoundingBox(),f2=e2.filter(function(t3){return $t(t3.getBoundingBox(),l2)}).reverse(),p2=!0,d2=__name(function(){p2=!1},"d2");try{for(var h2=r(f2),g2=h2.next();!g2.done&&(g2.value.onMouseUpPrimitive(o2,d2,u2),!!p2);g2=h2.next());}catch(t3){s2={error:t3}}finally{try{g2&&!g2.done&&(c2=h2.return)&&c2.call(h2)}finally{if(s2)throw s2.error}}}__name(te,"te");function ee(t2,e2,n22,o2){var u2,s2,c2=(t2=new Kt(a([],i(t2.o),!1),t2.w,t2.h)).getBoundingBox(),l2=e2.filter(function(t3){return $t(t3.getBoundingBox(),c2)}).reverse(),f2=!0,p2=__name(function(){f2=!1},"p2");try{for(var d2=r(l2),h2=d2.next();!h2.done&&(h2.value.onWheelPrimitive(p2,o2),!!f2);h2=d2.next());}catch(t3){u2={error:t3}}finally{try{h2&&!h2.done&&(s2=d2.return)&&s2.call(d2)}finally{if(u2)throw u2.error}}}__name(ee,"ee");var ne,re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie={exports:{}},ae,oe,ue=(ne||(ne=1,ae=ie,oe=ie.exports,(function(){var t2,e2="Expected a function",n22="__lodash_hash_undefined__",r2="__lodash_placeholder__",i2=16,a2=32,o2=64,u2=128,s2=256,c2=1/0,l2=9007199254740991,f2=NaN,p2=4294967295,d2=[["ary",u2],["bind",1],["bindKey",2],["curry",8],["curryRight",i2],["flip",512],["partial",a2],["partialRight",o2],["rearg",s2]],h2="[object Arguments]",g2="[object Array]",v2="[object Boolean]",y2="[object Date]",m2="[object Error]",_2="[object Function]",w2="[object GeneratorFunction]",b2="[object Map]",S2="[object Number]",I2="[object Object]",P2="[object Promise]",x2="[object RegExp]",D2="[object Set]",j2="[object String]",E2="[object Symbol]",C22="[object WeakMap]",N2="[object ArrayBuffer]",T2="[object DataView]",O2="[object Float32Array]",k2="[object Float64Array]",z2="[object Int8Array]",U2="[object Int16Array]",A2="[object Int32Array]",M2="[object Uint8Array]",V2="[object Uint8ClampedArray]",R2="[object Uint16Array]",F2="[object Uint32Array]",B2=/\b__p \+= '';/g,L2=/\b(__p \+=) '' \+/g,W2=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q2=/&(?:amp|lt|gt|quot|#39);/g,H2=/[&<>"']/g,$2=RegExp(q2.source),K2=RegExp(H2.source),G2=/<%-([\s\S]+?)%>/g,J2=/<%([\s\S]+?)%>/g,X2=/<%=([\s\S]+?)%>/g,Z2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y2=/^\w*$/,Q2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt2=/[\\^$.*+?()[\]{}|]/g,et2=RegExp(tt2.source),nt2=/^\s+/,rt2=/\s/,it2=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at2=/\{\n\/\* \[wrapped with (.+)\] \*/,ot2=/,? & /,ut2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,st2=/[()=,{}\[\]\/\s]/,ct2=/\\(\\)?/g,lt2=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft2=/\w*$/,pt2=/^[-+]0x[0-9a-f]+$/i,dt2=/^0b[01]+$/i,ht2=/^\[object .+?Constructor\]$/,gt2=/^0o[0-7]+$/i,vt2=/^(?:0|[1-9]\d*)$/,yt2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mt2=/($^)/,_t2=/['\n\r\u2028\u2029\\]/g,wt2="\\ud800-\\udfff",bt2="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St2="\\u2700-\\u27bf",It2="a-z\\xdf-\\xf6\\xf8-\\xff",Pt2="A-Z\\xc0-\\xd6\\xd8-\\xde",xt2="\\ufe0e\\ufe0f",Dt2="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jt2="[']",Et2="["+wt2+"]",Ct2="["+Dt2+"]",Nt2="["+bt2+"]",Tt2="\\d+",Ot2="["+St2+"]",kt2="["+It2+"]",zt2="[^"+wt2+Dt2+Tt2+St2+It2+Pt2+"]",Ut2="\\ud83c[\\udffb-\\udfff]",At2="[^"+wt2+"]",Mt2="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt2="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt2="["+Pt2+"]",Ft2="\\u200d",Bt2="(?:"+kt2+"|"+zt2+")",Lt2="(?:"+Rt2+"|"+zt2+")",Wt2="(?:['](?:d|ll|m|re|s|t|ve))?",qt2="(?:['](?:D|LL|M|RE|S|T|VE))?",Ht2="(?:"+Nt2+"|"+Ut2+")?",$t2="["+xt2+"]?",Kt2=$t2+Ht2+"(?:"+Ft2+"(?:"+[At2,Mt2,Vt2].join("|")+")"+$t2+Ht2+")*",Gt2="(?:"+[Ot2,Mt2,Vt2].join("|")+")"+Kt2,Jt2="(?:"+[At2+Nt2+"?",Nt2,Mt2,Vt2,Et2].join("|")+")",Xt2=RegExp(jt2,"g"),Zt2=RegExp(Nt2,"g"),Yt2=RegExp(Ut2+"(?="+Ut2+")|"+Jt2+Kt2,"g"),Qt2=RegExp([Rt2+"?"+kt2+"+"+Wt2+"(?="+[Ct2,Rt2,"$"].join("|")+")",Lt2+"+"+qt2+"(?="+[Ct2,Rt2+Bt2,"$"].join("|")+")",Rt2+"?"+Bt2+"+"+Wt2,Rt2+"+"+qt2,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tt2,Gt2].join("|"),"g"),te2=RegExp("["+Ft2+wt2+bt2+xt2+"]"),ee2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie2=-1,ue2={};ue2[O2]=ue2[k2]=ue2[z2]=ue2[U2]=ue2[A2]=ue2[M2]=ue2[V2]=ue2[R2]=ue2[F2]=!0,ue2[h2]=ue2[g2]=ue2[N2]=ue2[v2]=ue2[T2]=ue2[y2]=ue2[m2]=ue2[_2]=ue2[b2]=ue2[S2]=ue2[I2]=ue2[x2]=ue2[D2]=ue2[j2]=ue2[C22]=!1;var se2={};se2[h2]=se2[g2]=se2[N2]=se2[T2]=se2[v2]=se2[y2]=se2[O2]=se2[k2]=se2[z2]=se2[U2]=se2[A2]=se2[b2]=se2[S2]=se2[I2]=se2[x2]=se2[D2]=se2[j2]=se2[E2]=se2[M2]=se2[V2]=se2[R2]=se2[F2]=!0,se2[m2]=se2[_2]=se2[C22]=!1;var ce2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},le2=parseFloat,fe2=parseInt,pe2=typeof re=="object"&&re&&re.Object===Object&&re,de2=typeof self=="object"&&self&&self.Object===Object&&self,he2=pe2||de2||Function("return this")(),ge2=oe&&!oe.nodeType&&oe,ve2=ge2&&ae&&!ae.nodeType&&ae,ye2=ve2&&ve2.exports===ge2,me2=ye2&&pe2.process,_e2=function(){try{var t3=ve2&&ve2.require&&ve2.require("util").types;return t3||me2&&me2.binding&&me2.binding("util")}catch{}}(),we2=_e2&&_e2.isArrayBuffer,be2=_e2&&_e2.isDate,Se2=_e2&&_e2.isMap,Ie2=_e2&&_e2.isRegExp,Pe2=_e2&&_e2.isSet,xe2=_e2&&_e2.isTypedArray;function De2(t3,e3,n3){switch(n3.length){case 0:return t3.call(e3);case 1:return t3.call(e3,n3[0]);case 2:return t3.call(e3,n3[0],n3[1]);case 3:return t3.call(e3,n3[0],n3[1],n3[2])}return t3.apply(e3,n3)}__name(De2,"De");function je2(t3,e3,n3,r3){for(var i3=-1,a3=t3==null?0:t3.length;++i3<a3;){var o3=t3[i3];e3(r3,o3,n3(o3),t3)}return r3}__name(je2,"je");function Ee2(t3,e3){for(var n3=-1,r3=t3==null?0:t3.length;++n3<r3&&e3(t3[n3],n3,t3)!==!1;);return t3}__name(Ee2,"Ee");function Ce2(t3,e3){for(var n3=t3==null?0:t3.length;n3--&&e3(t3[n3],n3,t3)!==!1;);return t3}__name(Ce2,"Ce");function Ne2(t3,e3){for(var n3=-1,r3=t3==null?0:t3.length;++n3<r3;)if(!e3(t3[n3],n3,t3))return!1;return!0}__name(Ne2,"Ne");function Te2(t3,e3){for(var n3=-1,r3=t3==null?0:t3.length,i3=0,a3=[];++n3<r3;){var o3=t3[n3];e3(o3,n3,t3)&&(a3[i3++]=o3)}return a3}__name(Te2,"Te");function Oe2(t3,e3){return!(t3==null||!t3.length)&&Le2(t3,e3,0)>-1}__name(Oe2,"Oe");function ke2(t3,e3,n3){for(var r3=-1,i3=t3==null?0:t3.length;++r3<i3;)if(n3(e3,t3[r3]))return!0;return!1}__name(ke2,"ke");function ze2(t3,e3){for(var n3=-1,r3=t3==null?0:t3.length,i3=Array(r3);++n3<r3;)i3[n3]=e3(t3[n3],n3,t3);return i3}__name(ze2,"ze");function Ue2(t3,e3){for(var n3=-1,r3=e3.length,i3=t3.length;++n3<r3;)t3[i3+n3]=e3[n3];return t3}__name(Ue2,"Ue");function Ae2(t3,e3,n3,r3){var i3=-1,a3=t3==null?0:t3.length;for(r3&&a3&&(n3=t3[++i3]);++i3<a3;)n3=e3(n3,t3[i3],i3,t3);return n3}__name(Ae2,"Ae");function Me2(t3,e3,n3,r3){var i3=t3==null?0:t3.length;for(r3&&i3&&(n3=t3[--i3]);i3--;)n3=e3(n3,t3[i3],i3,t3);return n3}__name(Me2,"Me");function Ve2(t3,e3){for(var n3=-1,r3=t3==null?0:t3.length;++n3<r3;)if(e3(t3[n3],n3,t3))return!0;return!1}__name(Ve2,"Ve");var Re2=$e2("length");function Fe2(t3,e3,n3){var r3;return n3(t3,function(t4,n4,i3){if(e3(t4,n4,i3))return r3=n4,!1}),r3}__name(Fe2,"Fe");function Be2(t3,e3,n3,r3){for(var i3=t3.length,a3=n3+(r3?1:-1);r3?a3--:++a3<i3;)if(e3(t3[a3],a3,t3))return a3;return-1}__name(Be2,"Be");function Le2(t3,e3,n3){return e3==e3?function(t4,e4,n4){for(var r3=n4-1,i3=t4.length;++r3<i3;)if(t4[r3]===e4)return r3;return-1}(t3,e3,n3):Be2(t3,qe2,n3)}__name(Le2,"Le");function We2(t3,e3,n3,r3){for(var i3=n3-1,a3=t3.length;++i3<a3;)if(r3(t3[i3],e3))return i3;return-1}__name(We2,"We");function qe2(t3){return t3!=t3}__name(qe2,"qe");function He2(t3,e3){var n3=t3==null?0:t3.length;return n3?Je2(t3,e3)/n3:f2}__name(He2,"He");function $e2(e3){return function(n3){return n3==null?t2:n3[e3]}}__name($e2,"$e");function Ke2(e3){return function(n3){return e3==null?t2:e3[n3]}}__name(Ke2,"Ke");function Ge2(t3,e3,n3,r3,i3){return i3(t3,function(t4,i4,a3){n3=r3?(r3=!1,t4):e3(n3,t4,i4,a3)}),n3}__name(Ge2,"Ge");function Je2(e3,n3){for(var r3,i3=-1,a3=e3.length;++i3<a3;){var o3=n3(e3[i3]);o3!==t2&&(r3=r3===t2?o3:r3+o3)}return r3}__name(Je2,"Je");function Xe2(t3,e3){for(var n3=-1,r3=Array(t3);++n3<t3;)r3[n3]=e3(n3);return r3}__name(Xe2,"Xe");function Ze2(t3){return t3&&t3.slice(0,gn(t3)+1).replace(nt2,"")}__name(Ze2,"Ze");function Ye2(t3){return function(e3){return t3(e3)}}__name(Ye2,"Ye");function Qe2(t3,e3){return ze2(e3,function(e4){return t3[e4]})}__name(Qe2,"Qe");function tn(t3,e3){return t3.has(e3)}__name(tn,"tn");function en(t3,e3){for(var n3=-1,r3=t3.length;++n3<r3&&Le2(e3,t3[n3],0)>-1;);return n3}__name(en,"en");function nn(t3,e3){for(var n3=t3.length;n3--&&Le2(e3,t3[n3],0)>-1;);return n3}__name(nn,"nn");var rn=Ke2({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),an=Ke2({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t3){return"\\"+ce2[t3]}__name(on,"on");function un(t3){return te2.test(t3)}__name(un,"un");function sn(t3){var e3=-1,n3=Array(t3.size);return t3.forEach(function(t4,r3){n3[++e3]=[r3,t4]}),n3}__name(sn,"sn");function cn(t3,e3){return function(n3){return t3(e3(n3))}}__name(cn,"cn");function ln2(t3,e3){for(var n3=-1,i3=t3.length,a3=0,o3=[];++n3<i3;){var u3=t3[n3];u3!==e3&&u3!==r2||(t3[n3]=r2,o3[a3++]=n3)}return o3}__name(ln2,"ln");function fn(t3){var e3=-1,n3=Array(t3.size);return t3.forEach(function(t4){n3[++e3]=t4}),n3}__name(fn,"fn");function pn(t3){var e3=-1,n3=Array(t3.size);return t3.forEach(function(t4){n3[++e3]=[t4,t4]}),n3}__name(pn,"pn");function dn(t3){return un(t3)?function(t4){for(var e3=Yt2.lastIndex=0;Yt2.test(t4);)++e3;return e3}(t3):Re2(t3)}__name(dn,"dn");function hn(t3){return un(t3)?function(t4){return t4.match(Yt2)||[]}(t3):function(t4){return t4.split("")}(t3)}__name(hn,"hn");function gn(t3){for(var e3=t3.length;e3--&&rt2.test(t3.charAt(e3)););return e3}__name(gn,"gn");var vn=Ke2({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),yn=__name(function rt3(wt3){var bt3,St3=(wt3=wt3==null?he2:yn.defaults(he2.Object(),wt3,yn.pick(he2,ne2))).Array,It3=wt3.Date,Pt3=wt3.Error,xt3=wt3.Function,Dt3=wt3.Math,jt3=wt3.Object,Et3=wt3.RegExp,Ct3=wt3.String,Nt3=wt3.TypeError,Tt3=St3.prototype,Ot3=xt3.prototype,kt3=jt3.prototype,zt3=wt3["__core-js_shared__"],Ut3=Ot3.toString,At3=kt3.hasOwnProperty,Mt3=0,Vt3=(bt3=/[^.]+$/.exec(zt3&&zt3.keys&&zt3.keys.IE_PROTO||""))?"Symbol(src)_1."+bt3:"",Rt3=kt3.toString,Ft3=Ut3.call(jt3),Bt3=he2._,Lt3=Et3("^"+Ut3.call(At3).replace(tt2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt3=ye2?wt3.Buffer:t2,qt3=wt3.Symbol,Ht3=wt3.Uint8Array,$t3=Wt3?Wt3.allocUnsafe:t2,Kt3=cn(jt3.getPrototypeOf,jt3),Gt3=jt3.create,Jt3=kt3.propertyIsEnumerable,Yt3=Tt3.splice,te3=qt3?qt3.isConcatSpreadable:t2,re2=qt3?qt3.iterator:t2,ae2=qt3?qt3.toStringTag:t2,oe2=function(){try{var t3=pa(jt3,"defineProperty");return t3({},"",{}),t3}catch{}}(),ce3=wt3.clearTimeout!==he2.clearTimeout&&wt3.clearTimeout,pe3=It3&&It3.now!==he2.Date.now&&It3.now,de3=wt3.setTimeout!==he2.setTimeout&&wt3.setTimeout,ge3=Dt3.ceil,ve3=Dt3.floor,me3=jt3.getOwnPropertySymbols,_e3=Wt3?Wt3.isBuffer:t2,Re22=wt3.isFinite,Ke22=Tt3.join,mn=cn(jt3.keys,jt3),_n=Dt3.max,wn=Dt3.min,bn=It3.now,Sn=wt3.parseInt,In=Dt3.random,Pn=Tt3.reverse,xn=pa(wt3,"DataView"),Dn=pa(wt3,"Map"),jn=pa(wt3,"Promise"),En=pa(wt3,"Set"),Cn=pa(wt3,"WeakMap"),Nn=pa(jt3,"create"),Tn=Cn&&new Cn,On={},kn=Va(xn),zn=Va(Dn),Un=Va(jn),An=Va(En),Mn=Va(Cn),Vn=qt3?qt3.prototype:t2,Rn=Vn?Vn.valueOf:t2,Fn=Vn?Vn.toString:t2;function Bn(t3){if(nu(t3)&&!Ho(t3)&&!(t3 instanceof Hn)){if(t3 instanceof qn)return t3;if(At3.call(t3,"__wrapped__"))return Ra(t3)}return new qn(t3)}__name(Bn,"Bn");var Ln=function(){function e3(){}return __name(e3,"e3"),function(n3){if(!eu(n3))return{};if(Gt3)return Gt3(n3);e3.prototype=n3;var r3=new e3;return e3.prototype=t2,r3}}();function Wn(){}__name(Wn,"Wn");function qn(e3,n3){this.__wrapped__=e3,this.__actions__=[],this.__chain__=!!n3,this.__index__=0,this.__values__=t2}__name(qn,"qn");function Hn(t3){this.__wrapped__=t3,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p2,this.__views__=[]}__name(Hn,"Hn");function $n(t3){var e3=-1,n3=t3==null?0:t3.length;for(this.clear();++e3<n3;){var r3=t3[e3];this.set(r3[0],r3[1])}}__name($n,"$n");function Kn(t3){var e3=-1,n3=t3==null?0:t3.length;for(this.clear();++e3<n3;){var r3=t3[e3];this.set(r3[0],r3[1])}}__name(Kn,"Kn");function Gn(t3){var e3=-1,n3=t3==null?0:t3.length;for(this.clear();++e3<n3;){var r3=t3[e3];this.set(r3[0],r3[1])}}__name(Gn,"Gn");function Jn(t3){var e3=-1,n3=t3==null?0:t3.length;for(this.__data__=new Gn;++e3<n3;)this.add(t3[e3])}__name(Jn,"Jn");function Xn(t3){var e3=this.__data__=new Kn(t3);this.size=e3.size}__name(Xn,"Xn");function Zn(t3,e3){var n3=Ho(t3),r3=!n3&&qo(t3),i3=!n3&&!r3&&Jo(t3),a3=!n3&&!r3&&!i3&&lu(t3),o3=n3||r3||i3||a3,u3=o3?Xe2(t3.length,Ct3):[],s3=u3.length;for(var c3 in t3)!e3&&!At3.call(t3,c3)||o3&&(c3=="length"||i3&&(c3=="offset"||c3=="parent")||a3&&(c3=="buffer"||c3=="byteLength"||c3=="byteOffset")||_a26(c3,s3))||u3.push(c3);return u3}__name(Zn,"Zn");function Yn(e3){var n3=e3.length;return n3?e3[Jr(0,n3-1)]:t2}__name(Yn,"Yn");function Qn(t3,e3){return Ua(Ni(t3),sr(e3,0,t3.length))}__name(Qn,"Qn");function tr(t3){return Ua(Ni(t3))}__name(tr,"tr");function er(e3,n3,r3){(r3!==t2&&!Bo(e3[n3],r3)||r3===t2&&!(n3 in e3))&&or(e3,n3,r3)}__name(er,"er");function nr(e3,n3,r3){var i3=e3[n3];At3.call(e3,n3)&&Bo(i3,r3)&&(r3!==t2||n3 in e3)||or(e3,n3,r3)}__name(nr,"nr");function rr(t3,e3){for(var n3=t3.length;n3--;)if(Bo(t3[n3][0],e3))return n3;return-1}__name(rr,"rr");function ir(t3,e3,n3,r3){return dr(t3,function(t4,i3,a3){e3(r3,t4,n3(t4),a3)}),r3}__name(ir,"ir");function ar(t3,e3){return t3&&Ti(e3,Ou(e3),t3)}__name(ar,"ar");function or(t3,e3,n3){e3=="__proto__"&&oe2?oe2(t3,e3,{configurable:!0,enumerable:!0,value:n3,writable:!0}):t3[e3]=n3}__name(or,"or");function ur(e3,n3){for(var r3=-1,i3=n3.length,a3=St3(i3),o3=e3==null;++r3<i3;)a3[r3]=o3?t2:ju(e3,n3[r3]);return a3}__name(ur,"ur");function sr(e3,n3,r3){return e3==e3&&(r3!==t2&&(e3=e3<=r3?e3:r3),n3!==t2&&(e3=e3>=n3?e3:n3)),e3}__name(sr,"sr");function cr(e3,n3,r3,i3,a3,o3){var u3,s3=1&n3,c3=2&n3,l3=4&n3;if(r3&&(u3=a3?r3(e3,i3,a3,o3):r3(e3)),u3!==t2)return u3;if(!eu(e3))return e3;var f3=Ho(e3);if(f3){if(u3=function(t3){var e4=t3.length,n4=new t3.constructor(e4);return e4&&typeof t3[0]=="string"&&At3.call(t3,"index")&&(n4.index=t3.index,n4.input=t3.input),n4}(e3),!s3)return Ni(e3,u3)}else{var p3=ga(e3),d3=p3==_2||p3==w2;if(Jo(e3))return Pi(e3,s3);if(p3==I2||p3==h2||d3&&!a3){if(u3=c3||d3?{}:ya(e3),!s3)return c3?function(t3,e4){return Ti(t3,ha(t3),e4)}(e3,function(t3,e4){return t3&&Ti(e4,ku(e4),t3)}(u3,e3)):function(t3,e4){return Ti(t3,da(t3),e4)}(e3,ar(u3,e3))}else{if(!se2[p3])return a3?e3:{};u3=function(t3,e4,n4){var r4,i4=t3.constructor;switch(e4){case N2:return xi(t3);case v2:case y2:return new i4(+t3);case T2:return function(t4,e5){var n5=e5?xi(t4.buffer):t4.buffer;return new t4.constructor(n5,t4.byteOffset,t4.byteLength)}(t3,n4);case O2:case k2:case z2:case U2:case A2:case M2:case V2:case R2:case F2:return Di(t3,n4);case b2:return new i4;case S2:case j2:return new i4(t3);case x2:return function(t4){var e5=new t4.constructor(t4.source,ft2.exec(t4));return e5.lastIndex=t4.lastIndex,e5}(t3);case D2:return new i4;case E2:return r4=t3,Rn?jt3(Rn.call(r4)):{}}}(e3,p3,s3)}}o3||(o3=new Xn);var g3=o3.get(e3);if(g3)return g3;o3.set(e3,u3),uu(e3)?e3.forEach(function(t3){u3.add(cr(t3,n3,r3,t3,e3,o3))}):ru(e3)&&e3.forEach(function(t3,i4){u3.set(i4,cr(t3,n3,r3,i4,e3,o3))});var m3=f3?t2:(l3?c3?aa:ia:c3?ku:Ou)(e3);return Ee2(m3||e3,function(t3,i4){m3&&(t3=e3[i4=t3]),nr(u3,i4,cr(t3,n3,r3,i4,e3,o3))}),u3}__name(cr,"cr");function lr(e3,n3,r3){var i3=r3.length;if(e3==null)return!i3;for(e3=jt3(e3);i3--;){var a3=r3[i3],o3=n3[a3],u3=e3[a3];if(u3===t2&&!(a3 in e3)||!o3(u3))return!1}return!0}__name(lr,"lr");function fr(n3,r3,i3){if(typeof n3!="function")throw new Nt3(e2);return Ta(function(){n3.apply(t2,i3)},r3)}__name(fr,"fr");function pr(t3,e3,n3,r3){var i3=-1,a3=Oe2,o3=!0,u3=t3.length,s3=[],c3=e3.length;if(!u3)return s3;n3&&(e3=ze2(e3,Ye2(n3))),r3?(a3=ke2,o3=!1):e3.length>=200&&(a3=tn,o3=!1,e3=new Jn(e3));t:for(;++i3<u3;){var l3=t3[i3],f3=n3==null?l3:n3(l3);if(l3=r3||l3!==0?l3:0,o3&&f3==f3){for(var p3=c3;p3--;)if(e3[p3]===f3)continue t;s3.push(l3)}else a3(e3,f3,r3)||s3.push(l3)}return s3}__name(pr,"pr"),Bn.templateSettings={escape:G2,evaluate:J2,interpolate:X2,variable:"",imports:{_:Bn}},Bn.prototype=Wn.prototype,Bn.prototype.constructor=Bn,qn.prototype=Ln(Wn.prototype),qn.prototype.constructor=qn,Hn.prototype=Ln(Wn.prototype),Hn.prototype.constructor=Hn,$n.prototype.clear=function(){this.__data__=Nn?Nn(null):{},this.size=0},$n.prototype.delete=function(t3){var e3=this.has(t3)&&delete this.__data__[t3];return this.size-=e3?1:0,e3},$n.prototype.get=function(e3){var r3=this.__data__;if(Nn){var i3=r3[e3];return i3===n22?t2:i3}return At3.call(r3,e3)?r3[e3]:t2},$n.prototype.has=function(e3){var n3=this.__data__;return Nn?n3[e3]!==t2:At3.call(n3,e3)},$n.prototype.set=function(e3,r3){var i3=this.__data__;return this.size+=this.has(e3)?0:1,i3[e3]=Nn&&r3===t2?n22:r3,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(t3){var e3=this.__data__,n3=rr(e3,t3);return!(n3<0||(n3==e3.length-1?e3.pop():Yt3.call(e3,n3,1),--this.size,0))},Kn.prototype.get=function(e3){var n3=this.__data__,r3=rr(n3,e3);return r3<0?t2:n3[r3][1]},Kn.prototype.has=function(t3){return rr(this.__data__,t3)>-1},Kn.prototype.set=function(t3,e3){var n3=this.__data__,r3=rr(n3,t3);return r3<0?(++this.size,n3.push([t3,e3])):n3[r3][1]=e3,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(Dn||Kn),string:new $n}},Gn.prototype.delete=function(t3){var e3=la(this,t3).delete(t3);return this.size-=e3?1:0,e3},Gn.prototype.get=function(t3){return la(this,t3).get(t3)},Gn.prototype.has=function(t3){return la(this,t3).has(t3)},Gn.prototype.set=function(t3,e3){var n3=la(this,t3),r3=n3.size;return n3.set(t3,e3),this.size+=n3.size==r3?0:1,this},Jn.prototype.add=Jn.prototype.push=function(t3){return this.__data__.set(t3,n22),this},Jn.prototype.has=function(t3){return this.__data__.has(t3)},Xn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Xn.prototype.delete=function(t3){var e3=this.__data__,n3=e3.delete(t3);return this.size=e3.size,n3},Xn.prototype.get=function(t3){return this.__data__.get(t3)},Xn.prototype.has=function(t3){return this.__data__.has(t3)},Xn.prototype.set=function(t3,e3){var n3=this.__data__;if(n3 instanceof Kn){var r3=n3.__data__;if(!Dn||r3.length<199)return r3.push([t3,e3]),this.size=++n3.size,this;n3=this.__data__=new Gn(r3)}return n3.set(t3,e3),this.size=n3.size,this};var dr=zi(br),hr=zi(Sr,!0);function gr(t3,e3){var n3=!0;return dr(t3,function(t4,r3,i3){return n3=!!e3(t4,r3,i3)}),n3}__name(gr,"gr");function vr(e3,n3,r3){for(var i3=-1,a3=e3.length;++i3<a3;){var o3=e3[i3],u3=n3(o3);if(u3!=null&&(s3===t2?u3==u3&&!cu(u3):r3(u3,s3)))var s3=u3,c3=o3}return c3}__name(vr,"vr");function yr(t3,e3){var n3=[];return dr(t3,function(t4,r3,i3){e3(t4,r3,i3)&&n3.push(t4)}),n3}__name(yr,"yr");function mr(t3,e3,n3,r3,i3){var a3=-1,o3=t3.length;for(n3||(n3=ma),i3||(i3=[]);++a3<o3;){var u3=t3[a3];e3>0&&n3(u3)?e3>1?mr(u3,e3-1,n3,r3,i3):Ue2(i3,u3):r3||(i3[i3.length]=u3)}return i3}__name(mr,"mr");var _r=Ui(),wr=Ui(!0);function br(t3,e3){return t3&&_r(t3,e3,Ou)}__name(br,"br");function Sr(t3,e3){return t3&&wr(t3,e3,Ou)}__name(Sr,"Sr");function Ir(t3,e3){return Te2(e3,function(e4){return Yo(t3[e4])})}__name(Ir,"Ir");function Pr(e3,n3){for(var r3=0,i3=(n3=wi(n3,e3)).length;e3!=null&&r3<i3;)e3=e3[Ma(n3[r3++])];return r3&&r3==i3?e3:t2}__name(Pr,"Pr");function xr(t3,e3,n3){var r3=e3(t3);return Ho(t3)?r3:Ue2(r3,n3(t3))}__name(xr,"xr");function Dr(e3){return e3==null?e3===t2?"[object Undefined]":"[object Null]":ae2&&ae2 in jt3(e3)?function(e4){var n3=At3.call(e4,ae2),r3=e4[ae2];try{e4[ae2]=t2;var i3=!0}catch{}var a3=Rt3.call(e4);return i3&&(n3?e4[ae2]=r3:delete e4[ae2]),a3}(e3):function(t3){return Rt3.call(t3)}(e3)}__name(Dr,"Dr");function jr(t3,e3){return t3>e3}__name(jr,"jr");function Er(t3,e3){return t3!=null&&At3.call(t3,e3)}__name(Er,"Er");function Cr(t3,e3){return t3!=null&&e3 in jt3(t3)}__name(Cr,"Cr");function Nr(e3,n3,r3){for(var i3=r3?ke2:Oe2,a3=e3[0].length,o3=e3.length,u3=o3,s3=St3(o3),c3=1/0,l3=[];u3--;){var f3=e3[u3];u3&&n3&&(f3=ze2(f3,Ye2(n3))),c3=wn(f3.length,c3),s3[u3]=!r3&&(n3||a3>=120&&f3.length>=120)?new Jn(u3&&f3):t2}f3=e3[0];var p3=-1,d3=s3[0];t:for(;++p3<a3&&l3.length<c3;){var h3=f3[p3],g3=n3?n3(h3):h3;if(h3=r3||h3!==0?h3:0,!(d3?tn(d3,g3):i3(l3,g3,r3))){for(u3=o3;--u3;){var v3=s3[u3];if(!(v3?tn(v3,g3):i3(e3[u3],g3,r3)))continue t}d3&&d3.push(g3),l3.push(h3)}}return l3}__name(Nr,"Nr");function Tr(e3,n3,r3){var i3=(e3=Ea(e3,n3=wi(n3,e3)))==null?e3:e3[Ma(Xa(n3))];return i3==null?t2:De2(i3,e3,r3)}__name(Tr,"Tr");function Or(t3){return nu(t3)&&Dr(t3)==h2}__name(Or,"Or");function kr(e3,n3,r3,i3,a3){return e3===n3||(e3==null||n3==null||!nu(e3)&&!nu(n3)?e3!=e3&&n3!=n3:function(e4,n4,r4,i4,a4,o3){var u3=Ho(e4),s3=Ho(n4),c3=u3?g2:ga(e4),l3=s3?g2:ga(n4),f3=(c3=c3==h2?I2:c3)==I2,p3=(l3=l3==h2?I2:l3)==I2,d3=c3==l3;if(d3&&Jo(e4)){if(!Jo(n4))return!1;u3=!0,f3=!1}if(d3&&!f3)return o3||(o3=new Xn),u3||lu(e4)?na(e4,n4,r4,i4,a4,o3):function(t3,e5,n5,r5,i5,a5,o4){switch(n5){case T2:if(t3.byteLength!=e5.byteLength||t3.byteOffset!=e5.byteOffset)return!1;t3=t3.buffer,e5=e5.buffer;case N2:return!(t3.byteLength!=e5.byteLength||!a5(new Ht3(t3),new Ht3(e5)));case v2:case y2:case S2:return Bo(+t3,+e5);case m2:return t3.name==e5.name&&t3.message==e5.message;case x2:case j2:return t3==e5+"";case b2:var u4=sn;case D2:var s4=1&r5;if(u4||(u4=fn),t3.size!=e5.size&&!s4)return!1;var c4=o4.get(t3);if(c4)return c4==e5;r5|=2,o4.set(t3,e5);var l4=na(u4(t3),u4(e5),r5,i5,a5,o4);return o4.delete(t3),l4;case E2:if(Rn)return Rn.call(t3)==Rn.call(e5)}return!1}(e4,n4,c3,r4,i4,a4,o3);if(!(1&r4)){var _3=f3&&At3.call(e4,"__wrapped__"),w3=p3&&At3.call(n4,"__wrapped__");if(_3||w3){var P3=_3?e4.value():e4,C3=w3?n4.value():n4;return o3||(o3=new Xn),a4(P3,C3,r4,i4,o3)}}return!!d3&&(o3||(o3=new Xn),function(e5,n5,r5,i5,a5,o4){var u4=1&r5,s4=ia(e5),c4=s4.length,l4=ia(n5),f4=l4.length;if(c4!=f4&&!u4)return!1;for(var p4=c4;p4--;){var d4=s4[p4];if(!(u4?d4 in n5:At3.call(n5,d4)))return!1}var h3=o4.get(e5),g3=o4.get(n5);if(h3&&g3)return h3==n5&&g3==e5;var v3=!0;o4.set(e5,n5),o4.set(n5,e5);for(var y3=u4;++p4<c4;){var m3=e5[d4=s4[p4]],_4=n5[d4];if(i5)var w4=u4?i5(_4,m3,d4,n5,e5,o4):i5(m3,_4,d4,e5,n5,o4);if(!(w4===t2?m3===_4||a5(m3,_4,r5,i5,o4):w4)){v3=!1;break}y3||(y3=d4=="constructor")}if(v3&&!y3){var b3=e5.constructor,S3=n5.constructor;b3==S3||!("constructor"in e5)||!("constructor"in n5)||typeof b3=="function"&&b3 instanceof b3&&typeof S3=="function"&&S3 instanceof S3||(v3=!1)}return o4.delete(e5),o4.delete(n5),v3}(e4,n4,r4,i4,a4,o3))}(e3,n3,r3,i3,kr,a3))}__name(kr,"kr");function zr(e3,n3,r3,i3){var a3=r3.length,o3=a3,u3=!i3;if(e3==null)return!o3;for(e3=jt3(e3);a3--;){var s3=r3[a3];if(u3&&s3[2]?s3[1]!==e3[s3[0]]:!(s3[0]in e3))return!1}for(;++a3<o3;){var c3=(s3=r3[a3])[0],l3=e3[c3],f3=s3[1];if(u3&&s3[2]){if(l3===t2&&!(c3 in e3))return!1}else{var p3=new Xn;if(i3)var d3=i3(l3,f3,c3,e3,n3,p3);if(!(d3===t2?kr(f3,l3,3,i3,p3):d3))return!1}}return!0}__name(zr,"zr");function Ur(t3){return!(!eu(t3)||(e3=t3,Vt3&&Vt3 in e3))&&(Yo(t3)?Lt3:ht2).test(Va(t3));var e3}__name(Ur,"Ur");function Ar(t3){return typeof t3=="function"?t3:t3==null?is:typeof t3=="object"?Ho(t3)?Lr(t3[0],t3[1]):Br(t3):ds(t3)}__name(Ar,"Ar");function Mr(t3){if(!Pa(t3))return mn(t3);var e3=[];for(var n3 in jt3(t3))At3.call(t3,n3)&&n3!="constructor"&&e3.push(n3);return e3}__name(Mr,"Mr");function Vr(t3){if(!eu(t3))return function(t4){var e4=[];if(t4!=null)for(var n4 in jt3(t4))e4.push(n4);return e4}(t3);var e3=Pa(t3),n3=[];for(var r3 in t3)(r3!="constructor"||!e3&&At3.call(t3,r3))&&n3.push(r3);return n3}__name(Vr,"Vr");function Rr(t3,e3){return t3<e3}__name(Rr,"Rr");function Fr(t3,e3){var n3=-1,r3=Ko(t3)?St3(t3.length):[];return dr(t3,function(t4,i3,a3){r3[++n3]=e3(t4,i3,a3)}),r3}__name(Fr,"Fr");function Br(t3){var e3=fa(t3);return e3.length==1&&e3[0][2]?Da(e3[0][0],e3[0][1]):function(n3){return n3===t3||zr(n3,t3,e3)}}__name(Br,"Br");function Lr(e3,n3){return ba(e3)&&xa(n3)?Da(Ma(e3),n3):function(r3){var i3=ju(r3,e3);return i3===t2&&i3===n3?Eu(r3,e3):kr(n3,i3,3)}}__name(Lr,"Lr");function Wr(e3,n3,r3,i3,a3){e3!==n3&&_r(n3,function(o3,u3){if(a3||(a3=new Xn),eu(o3))(function(e4,n4,r4,i4,a4,o4,u4){var s4=Ca(e4,r4),c3=Ca(n4,r4),l3=u4.get(c3);if(l3)er(e4,r4,l3);else{var f3=o4?o4(s4,c3,r4+"",e4,n4,u4):t2,p3=f3===t2;if(p3){var d3=Ho(c3),h3=!d3&&Jo(c3),g3=!d3&&!h3&&lu(c3);f3=c3,d3||h3||g3?Ho(s4)?f3=s4:Go(s4)?f3=Ni(s4):h3?(p3=!1,f3=Pi(c3,!0)):g3?(p3=!1,f3=Di(c3,!0)):f3=[]:au(c3)||qo(c3)?(f3=s4,qo(s4)?f3=mu(s4):eu(s4)&&!Yo(s4)||(f3=ya(c3))):p3=!1}p3&&(u4.set(c3,f3),a4(f3,c3,i4,o4,u4),u4.delete(c3)),er(e4,r4,f3)}})(e3,n3,u3,r3,Wr,i3,a3);else{var s3=i3?i3(Ca(e3,u3),o3,u3+"",e3,n3,a3):t2;s3===t2&&(s3=o3),er(e3,u3,s3)}},ku)}__name(Wr,"Wr");function qr(e3,n3){var r3=e3.length;if(r3)return _a26(n3+=n3<0?r3:0,r3)?e3[n3]:t2}__name(qr,"qr");function Hr(t3,e3,n3){e3=e3.length?ze2(e3,function(t4){return Ho(t4)?function(e4){return Pr(e4,t4.length===1?t4[0]:t4)}:t4}):[is];var r3=-1;e3=ze2(e3,Ye2(ca()));var i3=Fr(t3,function(t4,n4,i4){var a3=ze2(e3,function(e4){return e4(t4)});return{criteria:a3,index:++r3,value:t4}});return function(t4,e4){var n4=t4.length;for(t4.sort(e4);n4--;)t4[n4]=t4[n4].value;return t4}(i3,function(t4,e4){return function(t5,e5,n4){for(var r4=-1,i4=t5.criteria,a3=e5.criteria,o3=i4.length,u3=n4.length;++r4<o3;){var s3=ji(i4[r4],a3[r4]);if(s3)return r4>=u3?s3:s3*(n4[r4]=="desc"?-1:1)}return t5.index-e5.index}(t4,e4,n3)})}__name(Hr,"Hr");function $r(t3,e3,n3){for(var r3=-1,i3=e3.length,a3={};++r3<i3;){var o3=e3[r3],u3=Pr(t3,o3);n3(u3,o3)&&ti(a3,wi(o3,t3),u3)}return a3}__name($r,"$r");function Kr(t3,e3,n3,r3){var i3=r3?We2:Le2,a3=-1,o3=e3.length,u3=t3;for(t3===e3&&(e3=Ni(e3)),n3&&(u3=ze2(t3,Ye2(n3)));++a3<o3;)for(var s3=0,c3=e3[a3],l3=n3?n3(c3):c3;(s3=i3(u3,l3,s3,r3))>-1;)u3!==t3&&Yt3.call(u3,s3,1),Yt3.call(t3,s3,1);return t3}__name(Kr,"Kr");function Gr(t3,e3){for(var n3=t3?e3.length:0,r3=n3-1;n3--;){var i3=e3[n3];if(n3==r3||i3!==a3){var a3=i3;_a26(i3)?Yt3.call(t3,i3,1):pi(t3,i3)}}return t3}__name(Gr,"Gr");function Jr(t3,e3){return t3+ve3(In()*(e3-t3+1))}__name(Jr,"Jr");function Xr(t3,e3){var n3="";if(!t3||e3<1||e3>l2)return n3;do e3%2&&(n3+=t3),(e3=ve3(e3/2))&&(t3+=t3);while(e3);return n3}__name(Xr,"Xr");function Zr(t3,e3){return Oa(ja(t3,e3,is),t3+"")}__name(Zr,"Zr");function Yr(t3){return Yn(Bu(t3))}__name(Yr,"Yr");function Qr(t3,e3){var n3=Bu(t3);return Ua(n3,sr(e3,0,n3.length))}__name(Qr,"Qr");function ti(e3,n3,r3,i3){if(!eu(e3))return e3;for(var a3=-1,o3=(n3=wi(n3,e3)).length,u3=o3-1,s3=e3;s3!=null&&++a3<o3;){var c3=Ma(n3[a3]),l3=r3;if(c3==="__proto__"||c3==="constructor"||c3==="prototype")return e3;if(a3!=u3){var f3=s3[c3];(l3=i3?i3(f3,c3,s3):t2)===t2&&(l3=eu(f3)?f3:_a26(n3[a3+1])?[]:{})}nr(s3,c3,l3),s3=s3[c3]}return e3}__name(ti,"ti");var ei=Tn?function(t3,e3){return Tn.set(t3,e3),t3}:is,ni=oe2?function(t3,e3){return oe2(t3,"toString",{configurable:!0,enumerable:!1,value:es(e3),writable:!0})}:is;function ri(t3){return Ua(Bu(t3))}__name(ri,"ri");function ii(t3,e3,n3){var r3=-1,i3=t3.length;e3<0&&(e3=-e3>i3?0:i3+e3),(n3=n3>i3?i3:n3)<0&&(n3+=i3),i3=e3>n3?0:n3-e3>>>0,e3>>>=0;for(var a3=St3(i3);++r3<i3;)a3[r3]=t3[r3+e3];return a3}__name(ii,"ii");function ai(t3,e3){var n3;return dr(t3,function(t4,r3,i3){return!(n3=e3(t4,r3,i3))}),!!n3}__name(ai,"ai");function oi(t3,e3,n3){var r3=0,i3=t3==null?r3:t3.length;if(typeof e3=="number"&&e3==e3&&i3<=2147483647){for(;r3<i3;){var a3=r3+i3>>>1,o3=t3[a3];o3!==null&&!cu(o3)&&(n3?o3<=e3:o3<e3)?r3=a3+1:i3=a3}return i3}return ui(t3,e3,is,n3)}__name(oi,"oi");function ui(e3,n3,r3,i3){var a3=0,o3=e3==null?0:e3.length;if(o3===0)return 0;for(var u3=(n3=r3(n3))!=n3,s3=n3===null,c3=cu(n3),l3=n3===t2;a3<o3;){var f3=ve3((a3+o3)/2),p3=r3(e3[f3]),d3=p3!==t2,h3=p3===null,g3=p3==p3,v3=cu(p3);if(u3)var y3=i3||g3;else y3=l3?g3&&(i3||d3):s3?g3&&d3&&(i3||!h3):c3?g3&&d3&&!h3&&(i3||!v3):!h3&&!v3&&(i3?p3<=n3:p3<n3);y3?a3=f3+1:o3=f3}return wn(o3,4294967294)}__name(ui,"ui");function si(t3,e3){for(var n3=-1,r3=t3.length,i3=0,a3=[];++n3<r3;){var o3=t3[n3],u3=e3?e3(o3):o3;if(!n3||!Bo(u3,s3)){var s3=u3;a3[i3++]=o3===0?0:o3}}return a3}__name(si,"si");function ci(t3){return typeof t3=="number"?t3:cu(t3)?f2:+t3}__name(ci,"ci");function li(t3){if(typeof t3=="string")return t3;if(Ho(t3))return ze2(t3,li)+"";if(cu(t3))return Fn?Fn.call(t3):"";var e3=t3+"";return e3=="0"&&1/t3==-1/0?"-0":e3}__name(li,"li");function fi(t3,e3,n3){var r3=-1,i3=Oe2,a3=t3.length,o3=!0,u3=[],s3=u3;if(n3)o3=!1,i3=ke2;else if(a3>=200){var c3=e3?null:Xi(t3);if(c3)return fn(c3);o3=!1,i3=tn,s3=new Jn}else s3=e3?[]:u3;t:for(;++r3<a3;){var l3=t3[r3],f3=e3?e3(l3):l3;if(l3=n3||l3!==0?l3:0,o3&&f3==f3){for(var p3=s3.length;p3--;)if(s3[p3]===f3)continue t;e3&&s3.push(f3),u3.push(l3)}else i3(s3,f3,n3)||(s3!==u3&&s3.push(f3),u3.push(l3))}return u3}__name(fi,"fi");function pi(t3,e3){return(t3=Ea(t3,e3=wi(e3,t3)))==null||delete t3[Ma(Xa(e3))]}__name(pi,"pi");function di(t3,e3,n3,r3){return ti(t3,e3,n3(Pr(t3,e3)),r3)}__name(di,"di");function hi(t3,e3,n3,r3){for(var i3=t3.length,a3=r3?i3:-1;(r3?a3--:++a3<i3)&&e3(t3[a3],a3,t3););return n3?ii(t3,r3?0:a3,r3?a3+1:i3):ii(t3,r3?a3+1:0,r3?i3:a3)}__name(hi,"hi");function gi(t3,e3){var n3=t3;return n3 instanceof Hn&&(n3=n3.value()),Ae2(e3,function(t4,e4){return e4.func.apply(e4.thisArg,Ue2([t4],e4.args))},n3)}__name(gi,"gi");function vi(t3,e3,n3){var r3=t3.length;if(r3<2)return r3?fi(t3[0]):[];for(var i3=-1,a3=St3(r3);++i3<r3;)for(var o3=t3[i3],u3=-1;++u3<r3;)u3!=i3&&(a3[i3]=pr(a3[i3]||o3,t3[u3],e3,n3));return fi(mr(a3,1),e3,n3)}__name(vi,"vi");function yi(e3,n3,r3){for(var i3=-1,a3=e3.length,o3=n3.length,u3={};++i3<a3;){var s3=i3<o3?n3[i3]:t2;r3(u3,e3[i3],s3)}return u3}__name(yi,"yi");function mi(t3){return Go(t3)?t3:[]}__name(mi,"mi");function _i(t3){return typeof t3=="function"?t3:is}__name(_i,"_i");function wi(t3,e3){return Ho(t3)?t3:ba(t3,e3)?[t3]:Aa(_u(t3))}__name(wi,"wi");var bi=Zr;function Si(e3,n3,r3){var i3=e3.length;return r3=r3===t2?i3:r3,!n3&&r3>=i3?e3:ii(e3,n3,r3)}__name(Si,"Si");var Ii=ce3||function(t3){return he2.clearTimeout(t3)};function Pi(t3,e3){if(e3)return t3.slice();var n3=t3.length,r3=$t3?$t3(n3):new t3.constructor(n3);return t3.copy(r3),r3}__name(Pi,"Pi");function xi(t3){var e3=new t3.constructor(t3.byteLength);return new Ht3(e3).set(new Ht3(t3)),e3}__name(xi,"xi");function Di(t3,e3){var n3=e3?xi(t3.buffer):t3.buffer;return new t3.constructor(n3,t3.byteOffset,t3.length)}__name(Di,"Di");function ji(e3,n3){if(e3!==n3){var r3=e3!==t2,i3=e3===null,a3=e3==e3,o3=cu(e3),u3=n3!==t2,s3=n3===null,c3=n3==n3,l3=cu(n3);if(!s3&&!l3&&!o3&&e3>n3||o3&&u3&&c3&&!s3&&!l3||i3&&u3&&c3||!r3&&c3||!a3)return 1;if(!i3&&!o3&&!l3&&e3<n3||l3&&r3&&a3&&!i3&&!o3||s3&&r3&&a3||!u3&&a3||!c3)return-1}return 0}__name(ji,"ji");function Ei(t3,e3,n3,r3){for(var i3=-1,a3=t3.length,o3=n3.length,u3=-1,s3=e3.length,c3=_n(a3-o3,0),l3=St3(s3+c3),f3=!r3;++u3<s3;)l3[u3]=e3[u3];for(;++i3<o3;)(f3||i3<a3)&&(l3[n3[i3]]=t3[i3]);for(;c3--;)l3[u3++]=t3[i3++];return l3}__name(Ei,"Ei");function Ci(t3,e3,n3,r3){for(var i3=-1,a3=t3.length,o3=-1,u3=n3.length,s3=-1,c3=e3.length,l3=_n(a3-u3,0),f3=St3(l3+c3),p3=!r3;++i3<l3;)f3[i3]=t3[i3];for(var d3=i3;++s3<c3;)f3[d3+s3]=e3[s3];for(;++o3<u3;)(p3||i3<a3)&&(f3[d3+n3[o3]]=t3[i3++]);return f3}__name(Ci,"Ci");function Ni(t3,e3){var n3=-1,r3=t3.length;for(e3||(e3=St3(r3));++n3<r3;)e3[n3]=t3[n3];return e3}__name(Ni,"Ni");function Ti(e3,n3,r3,i3){var a3=!r3;r3||(r3={});for(var o3=-1,u3=n3.length;++o3<u3;){var s3=n3[o3],c3=i3?i3(r3[s3],e3[s3],s3,r3,e3):t2;c3===t2&&(c3=e3[s3]),a3?or(r3,s3,c3):nr(r3,s3,c3)}return r3}__name(Ti,"Ti");function Oi(t3,e3){return function(n3,r3){var i3=Ho(n3)?je2:ir,a3=e3?e3():{};return i3(n3,t3,ca(r3,2),a3)}}__name(Oi,"Oi");function ki(e3){return Zr(function(n3,r3){var i3=-1,a3=r3.length,o3=a3>1?r3[a3-1]:t2,u3=a3>2?r3[2]:t2;for(o3=e3.length>3&&typeof o3=="function"?(a3--,o3):t2,u3&&wa(r3[0],r3[1],u3)&&(o3=a3<3?t2:o3,a3=1),n3=jt3(n3);++i3<a3;){var s3=r3[i3];s3&&e3(n3,s3,i3,o3)}return n3})}__name(ki,"ki");function zi(t3,e3){return function(n3,r3){if(n3==null)return n3;if(!Ko(n3))return t3(n3,r3);for(var i3=n3.length,a3=e3?i3:-1,o3=jt3(n3);(e3?a3--:++a3<i3)&&r3(o3[a3],a3,o3)!==!1;);return n3}}__name(zi,"zi");function Ui(t3){return function(e3,n3,r3){for(var i3=-1,a3=jt3(e3),o3=r3(e3),u3=o3.length;u3--;){var s3=o3[t3?u3:++i3];if(n3(a3[s3],s3,a3)===!1)break}return e3}}__name(Ui,"Ui");function Ai(e3){return function(n3){var r3=un(n3=_u(n3))?hn(n3):t2,i3=r3?r3[0]:n3.charAt(0),a3=r3?Si(r3,1).join(""):n3.slice(1);return i3[e3]()+a3}}__name(Ai,"Ai");function Mi(t3){return function(e3){return Ae2(Yu(qu(e3).replace(Xt2,"")),t3,"")}}__name(Mi,"Mi");function Vi(t3){return function(){var e3=arguments;switch(e3.length){case 0:return new t3;case 1:return new t3(e3[0]);case 2:return new t3(e3[0],e3[1]);case 3:return new t3(e3[0],e3[1],e3[2]);case 4:return new t3(e3[0],e3[1],e3[2],e3[3]);case 5:return new t3(e3[0],e3[1],e3[2],e3[3],e3[4]);case 6:return new t3(e3[0],e3[1],e3[2],e3[3],e3[4],e3[5]);case 7:return new t3(e3[0],e3[1],e3[2],e3[3],e3[4],e3[5],e3[6])}var n3=Ln(t3.prototype),r3=t3.apply(n3,e3);return eu(r3)?r3:n3}}__name(Vi,"Vi");function Ri(e3){return function(n3,r3,i3){var a3=jt3(n3);if(!Ko(n3)){var o3=ca(r3,3);n3=Ou(n3),r3=__name(function(t3){return o3(a3[t3],t3,a3)},"r3")}var u3=e3(n3,r3,i3);return u3>-1?a3[o3?n3[u3]:u3]:t2}}__name(Ri,"Ri");function Fi(n3){return ra(function(r3){var i3=r3.length,a3=i3,o3=qn.prototype.thru;for(n3&&r3.reverse();a3--;){var u3=r3[a3];if(typeof u3!="function")throw new Nt3(e2);if(o3&&!s3&&ua(u3)=="wrapper")var s3=new qn([],!0)}for(a3=s3?a3:i3;++a3<i3;){var c3=ua(u3=r3[a3]),l3=c3=="wrapper"?oa(u3):t2;s3=l3&&Sa(l3[0])&&l3[1]==424&&!l3[4].length&&l3[9]==1?s3[ua(l3[0])].apply(s3,l3[3]):u3.length==1&&Sa(u3)?s3[c3]():s3.thru(u3)}return function(){var t3=arguments,e3=t3[0];if(s3&&t3.length==1&&Ho(e3))return s3.plant(e3).value();for(var n4=0,a4=i3?r3[n4].apply(this,t3):e3;++n4<i3;)a4=r3[n4].call(this,a4);return a4}})}__name(Fi,"Fi");function Bi(e3,n3,r3,i3,a3,o3,s3,c3,l3,f3){var p3=n3&u2,d3=1&n3,h3=2&n3,g3=24&n3,v3=512&n3,y3=h3?t2:Vi(e3);return __name(function u3(){for(var m3=arguments.length,_3=St3(m3),w3=m3;w3--;)_3[w3]=arguments[w3];if(g3)var b3=sa(u3),S3=function(t3,e4){for(var n4=t3.length,r4=0;n4--;)t3[n4]===e4&&++r4;return r4}(_3,b3);if(i3&&(_3=Ei(_3,i3,a3,g3)),o3&&(_3=Ci(_3,o3,s3,g3)),m3-=S3,g3&&m3<f3){var I3=ln2(_3,b3);return Gi(e3,n3,Bi,u3.placeholder,r3,_3,I3,c3,l3,f3-m3)}var P3=d3?r3:this,x3=h3?P3[e3]:e3;return m3=_3.length,c3?_3=function(e4,n4){for(var r4=e4.length,i4=wn(n4.length,r4),a4=Ni(e4);i4--;){var o4=n4[i4];e4[i4]=_a26(o4,r4)?a4[o4]:t2}return e4}(_3,c3):v3&&m3>1&&_3.reverse(),p3&&l3<m3&&(_3.length=l3),this&&this!==he2&&this instanceof u3&&(x3=y3||Vi(x3)),x3.apply(P3,_3)},"u3")}__name(Bi,"Bi");function Li(t3,e3){return function(n3,r3){return function(t4,e4,n4,r4){return br(t4,function(t5,i3,a3){e4(r4,n4(t5),i3,a3)}),r4}(n3,t3,e3(r3),{})}}__name(Li,"Li");function Wi(e3,n3){return function(r3,i3){var a3;if(r3===t2&&i3===t2)return n3;if(r3!==t2&&(a3=r3),i3!==t2){if(a3===t2)return i3;typeof r3=="string"||typeof i3=="string"?(r3=li(r3),i3=li(i3)):(r3=ci(r3),i3=ci(i3)),a3=e3(r3,i3)}return a3}}__name(Wi,"Wi");function qi(t3){return ra(function(e3){return e3=ze2(e3,Ye2(ca())),Zr(function(n3){var r3=this;return t3(e3,function(t4){return De2(t4,r3,n3)})})})}__name(qi,"qi");function Hi(e3,n3){var r3=(n3=n3===t2?" ":li(n3)).length;if(r3<2)return r3?Xr(n3,e3):n3;var i3=Xr(n3,ge3(e3/dn(n3)));return un(n3)?Si(hn(i3),0,e3).join(""):i3.slice(0,e3)}__name(Hi,"Hi");function $i(e3){return function(n3,r3,i3){return i3&&typeof i3!="number"&&wa(n3,r3,i3)&&(r3=i3=t2),n3=hu(n3),r3===t2?(r3=n3,n3=0):r3=hu(r3),function(t3,e4,n4,r4){for(var i4=-1,a3=_n(ge3((e4-t3)/(n4||1)),0),o3=St3(a3);a3--;)o3[r4?a3:++i4]=t3,t3+=n4;return o3}(n3,r3,i3=i3===t2?n3<r3?1:-1:hu(i3),e3)}}__name($i,"$i");function Ki(t3){return function(e3,n3){return typeof e3=="string"&&typeof n3=="string"||(e3=yu(e3),n3=yu(n3)),t3(e3,n3)}}__name(Ki,"Ki");function Gi(e3,n3,r3,i3,u3,s3,c3,l3,f3,p3){var d3=8&n3;n3|=d3?a2:o2,4&(n3&=~(d3?o2:a2))||(n3&=-4);var h3=[e3,n3,u3,d3?s3:t2,d3?c3:t2,d3?t2:s3,d3?t2:c3,l3,f3,p3],g3=r3.apply(t2,h3);return Sa(e3)&&Na(g3,h3),g3.placeholder=i3,ka(g3,e3,n3)}__name(Gi,"Gi");function Ji(t3){var e3=Dt3[t3];return function(t4,n3){if(t4=yu(t4),(n3=n3==null?0:wn(gu(n3),292))&&Re22(t4)){var r3=(_u(t4)+"e").split("e");return+((r3=(_u(e3(r3[0]+"e"+(+r3[1]+n3)))+"e").split("e"))[0]+"e"+(+r3[1]-n3))}return e3(t4)}}__name(Ji,"Ji");var Xi=En&&1/fn(new En([,-0]))[1]==c2?function(t3){return new En(t3)}:cs;function Zi(t3){return function(e3){var n3=ga(e3);return n3==b2?sn(e3):n3==D2?pn(e3):function(t4,e4){return ze2(e4,function(e5){return[e5,t4[e5]]})}(e3,t3(e3))}}__name(Zi,"Zi");function Yi(n3,c3,l3,f3,p3,d3,h3,g3){var v3=2&c3;if(!v3&&typeof n3!="function")throw new Nt3(e2);var y3=f3?f3.length:0;if(y3||(c3&=-97,f3=p3=t2),h3=h3===t2?h3:_n(gu(h3),0),g3=g3===t2?g3:gu(g3),y3-=p3?p3.length:0,c3&o2){var m3=f3,_3=p3;f3=p3=t2}var w3=v3?t2:oa(n3),b3=[n3,c3,l3,f3,p3,m3,_3,d3,h3,g3];if(w3&&function(t3,e3){var n4=t3[1],i3=e3[1],a3=n4|i3,o3=a3<131,c4=i3==u2&&n4==8||i3==u2&&n4==s2&&t3[7].length<=e3[8]||i3==384&&e3[7].length<=e3[8]&&n4==8;if(!o3&&!c4)return t3;1&i3&&(t3[2]=e3[2],a3|=1&n4?0:4);var l4=e3[3];if(l4){var f4=t3[3];t3[3]=f4?Ei(f4,l4,e3[4]):l4,t3[4]=f4?ln2(t3[3],r2):e3[4]}(l4=e3[5])&&(f4=t3[5],t3[5]=f4?Ci(f4,l4,e3[6]):l4,t3[6]=f4?ln2(t3[5],r2):e3[6]),(l4=e3[7])&&(t3[7]=l4),i3&u2&&(t3[8]=t3[8]==null?e3[8]:wn(t3[8],e3[8])),t3[9]==null&&(t3[9]=e3[9]),t3[0]=e3[0],t3[1]=a3}(b3,w3),n3=b3[0],c3=b3[1],l3=b3[2],f3=b3[3],p3=b3[4],!(g3=b3[9]=b3[9]===t2?v3?0:n3.length:_n(b3[9]-y3,0))&&24&c3&&(c3&=-25),c3&&c3!=1)S3=c3==8||c3==i2?function(e3,n4,r3){var i3=Vi(e3);return __name(function a3(){for(var o3=arguments.length,u3=St3(o3),s3=o3,c4=sa(a3);s3--;)u3[s3]=arguments[s3];var l4=o3<3&&u3[0]!==c4&&u3[o3-1]!==c4?[]:ln2(u3,c4);return(o3-=l4.length)<r3?Gi(e3,n4,Bi,a3.placeholder,t2,u3,l4,t2,t2,r3-o3):De2(this&&this!==he2&&this instanceof a3?i3:e3,this,u3)},"a3")}(n3,c3,g3):c3!=a2&&c3!=33||p3.length?Bi.apply(t2,b3):function(t3,e3,n4,r3){var i3=1&e3,a3=Vi(t3);return __name(function e4(){for(var o3=-1,u3=arguments.length,s3=-1,c4=r3.length,l4=St3(c4+u3),f4=this&&this!==he2&&this instanceof e4?a3:t3;++s3<c4;)l4[s3]=r3[s3];for(;u3--;)l4[s3++]=arguments[++o3];return De2(f4,i3?n4:this,l4)},"e4")}(n3,c3,l3,f3);else var S3=function(t3,e3,n4){var r3=1&e3,i3=Vi(t3);return __name(function e4(){return(this&&this!==he2&&this instanceof e4?i3:t3).apply(r3?n4:this,arguments)},"e4")}(n3,c3,l3);return ka((w3?ei:Na)(S3,b3),n3,c3)}__name(Yi,"Yi");function Qi(e3,n3,r3,i3){return e3===t2||Bo(e3,kt3[r3])&&!At3.call(i3,r3)?n3:e3}__name(Qi,"Qi");function ta(e3,n3,r3,i3,a3,o3){return eu(e3)&&eu(n3)&&(o3.set(n3,e3),Wr(e3,n3,t2,ta,o3),o3.delete(n3)),e3}__name(ta,"ta");function ea(e3){return au(e3)?t2:e3}__name(ea,"ea");function na(e3,n3,r3,i3,a3,o3){var u3=1&r3,s3=e3.length,c3=n3.length;if(s3!=c3&&!(u3&&c3>s3))return!1;var l3=o3.get(e3),f3=o3.get(n3);if(l3&&f3)return l3==n3&&f3==e3;var p3=-1,d3=!0,h3=2&r3?new Jn:t2;for(o3.set(e3,n3),o3.set(n3,e3);++p3<s3;){var g3=e3[p3],v3=n3[p3];if(i3)var y3=u3?i3(v3,g3,p3,n3,e3,o3):i3(g3,v3,p3,e3,n3,o3);if(y3!==t2){if(y3)continue;d3=!1;break}if(h3){if(!Ve2(n3,function(t3,e4){if(!tn(h3,e4)&&(g3===t3||a3(g3,t3,r3,i3,o3)))return h3.push(e4)})){d3=!1;break}}else if(g3!==v3&&!a3(g3,v3,r3,i3,o3)){d3=!1;break}}return o3.delete(e3),o3.delete(n3),d3}__name(na,"na");function ra(e3){return Oa(ja(e3,t2,Ha),e3+"")}__name(ra,"ra");function ia(t3){return xr(t3,Ou,da)}__name(ia,"ia");function aa(t3){return xr(t3,ku,ha)}__name(aa,"aa");var oa=Tn?function(t3){return Tn.get(t3)}:cs;function ua(t3){for(var e3=t3.name+"",n3=On[e3],r3=At3.call(On,e3)?n3.length:0;r3--;){var i3=n3[r3],a3=i3.func;if(a3==null||a3==t3)return i3.name}return e3}__name(ua,"ua");function sa(t3){return(At3.call(Bn,"placeholder")?Bn:t3).placeholder}__name(sa,"sa");function ca(){var t3=Bn.iteratee||as;return t3=t3===as?Ar:t3,arguments.length?t3(arguments[0],arguments[1]):t3}__name(ca,"ca");function la(t3,e3){var n3,r3,i3=t3.__data__;return((r3=typeof(n3=e3))=="string"||r3=="number"||r3=="symbol"||r3=="boolean"?n3!=="__proto__":n3===null)?i3[typeof e3=="string"?"string":"hash"]:i3.map}__name(la,"la");function fa(t3){for(var e3=Ou(t3),n3=e3.length;n3--;){var r3=e3[n3],i3=t3[r3];e3[n3]=[r3,i3,xa(i3)]}return e3}__name(fa,"fa");function pa(e3,n3){var r3=function(e4,n4){return e4==null?t2:e4[n4]}(e3,n3);return Ur(r3)?r3:t2}__name(pa,"pa");var da=me3?function(t3){return t3==null?[]:(t3=jt3(t3),Te2(me3(t3),function(e3){return Jt3.call(t3,e3)}))}:vs,ha=me3?function(t3){for(var e3=[];t3;)Ue2(e3,da(t3)),t3=Kt3(t3);return e3}:vs,ga=Dr;function va(t3,e3,n3){for(var r3=-1,i3=(e3=wi(e3,t3)).length,a3=!1;++r3<i3;){var o3=Ma(e3[r3]);if(!(a3=t3!=null&&n3(t3,o3)))break;t3=t3[o3]}return a3||++r3!=i3?a3:!!(i3=t3==null?0:t3.length)&&tu(i3)&&_a26(o3,i3)&&(Ho(t3)||qo(t3))}__name(va,"va");function ya(t3){return typeof t3.constructor!="function"||Pa(t3)?{}:Ln(Kt3(t3))}__name(ya,"ya");function ma(t3){return Ho(t3)||qo(t3)||!!(te3&&t3&&t3[te3])}__name(ma,"ma");function _a26(t3,e3){var n3=typeof t3;return!!(e3=e3??l2)&&(n3=="number"||n3!="symbol"&&vt2.test(t3))&&t3>-1&&t3%1==0&&t3<e3}__name(_a26,"_a");function wa(t3,e3,n3){if(!eu(n3))return!1;var r3=typeof e3;return!!(r3=="number"?Ko(n3)&&_a26(e3,n3.length):r3=="string"&&e3 in n3)&&Bo(n3[e3],t3)}__name(wa,"wa");function ba(t3,e3){if(Ho(t3))return!1;var n3=typeof t3;return!(n3!="number"&&n3!="symbol"&&n3!="boolean"&&t3!=null&&!cu(t3))||Y2.test(t3)||!Z2.test(t3)||e3!=null&&t3 in jt3(e3)}__name(ba,"ba");function Sa(t3){var e3=ua(t3),n3=Bn[e3];if(typeof n3!="function"||!(e3 in Hn.prototype))return!1;if(t3===n3)return!0;var r3=oa(n3);return!!r3&&t3===r3[0]}__name(Sa,"Sa"),(xn&&ga(new xn(new ArrayBuffer(1)))!=T2||Dn&&ga(new Dn)!=b2||jn&&ga(jn.resolve())!=P2||En&&ga(new En)!=D2||Cn&&ga(new Cn)!=C22)&&(ga=__name(function(e3){var n3=Dr(e3),r3=n3==I2?e3.constructor:t2,i3=r3?Va(r3):"";if(i3)switch(i3){case kn:return T2;case zn:return b2;case Un:return P2;case An:return D2;case Mn:return C22}return n3},"ga"));var Ia=zt3?Yo:ys;function Pa(t3){var e3=t3&&t3.constructor;return t3===(typeof e3=="function"&&e3.prototype||kt3)}__name(Pa,"Pa");function xa(t3){return t3==t3&&!eu(t3)}__name(xa,"xa");function Da(e3,n3){return function(r3){return r3!=null&&r3[e3]===n3&&(n3!==t2||e3 in jt3(r3))}}__name(Da,"Da");function ja(e3,n3,r3){return n3=_n(n3===t2?e3.length-1:n3,0),function(){for(var t3=arguments,i3=-1,a3=_n(t3.length-n3,0),o3=St3(a3);++i3<a3;)o3[i3]=t3[n3+i3];i3=-1;for(var u3=St3(n3+1);++i3<n3;)u3[i3]=t3[i3];return u3[n3]=r3(o3),De2(e3,this,u3)}}__name(ja,"ja");function Ea(t3,e3){return e3.length<2?t3:Pr(t3,ii(e3,0,-1))}__name(Ea,"Ea");function Ca(t3,e3){if((e3!=="constructor"||typeof t3[e3]!="function")&&e3!="__proto__")return t3[e3]}__name(Ca,"Ca");var Na=za(ei),Ta=de3||function(t3,e3){return he2.setTimeout(t3,e3)},Oa=za(ni);function ka(t3,e3,n3){var r3=e3+"";return Oa(t3,function(t4,e4){var n4=e4.length;if(!n4)return t4;var r4=n4-1;return e4[r4]=(n4>1?"& ":"")+e4[r4],e4=e4.join(n4>2?", ":" "),t4.replace(it2,`{
/* [wrapped with `+e4+`] */
`)}(r3,function(t4,e4){return Ee2(d2,function(n4){var r4="_."+n4[0];e4&n4[1]&&!Oe2(t4,r4)&&t4.push(r4)}),t4.sort()}(function(t4){var e4=t4.match(at2);return e4?e4[1].split(ot2):[]}(r3),n3)))}__name(ka,"ka");function za(e3){var n3=0,r3=0;return function(){var i3=bn(),a3=16-(i3-r3);if(r3=i3,a3>0){if(++n3>=800)return arguments[0]}else n3=0;return e3.apply(t2,arguments)}}__name(za,"za");function Ua(e3,n3){var r3=-1,i3=e3.length,a3=i3-1;for(n3=n3===t2?i3:n3;++r3<n3;){var o3=Jr(r3,a3),u3=e3[o3];e3[o3]=e3[r3],e3[r3]=u3}return e3.length=n3,e3}__name(Ua,"Ua");var Aa=function(t3){var e3=Uo(t3,function(t4){return n3.size===500&&n3.clear(),t4}),n3=e3.cache;return e3}(function(t3){var e3=[];return t3.charCodeAt(0)===46&&e3.push(""),t3.replace(Q2,function(t4,n3,r3,i3){e3.push(r3?i3.replace(ct2,"$1"):n3||t4)}),e3});function Ma(t3){if(typeof t3=="string"||cu(t3))return t3;var e3=t3+"";return e3=="0"&&1/t3==-1/0?"-0":e3}__name(Ma,"Ma");function Va(t3){if(t3!=null){try{return Ut3.call(t3)}catch{}try{return t3+""}catch{}}return""}__name(Va,"Va");function Ra(t3){if(t3 instanceof Hn)return t3.clone();var e3=new qn(t3.__wrapped__,t3.__chain__);return e3.__actions__=Ni(t3.__actions__),e3.__index__=t3.__index__,e3.__values__=t3.__values__,e3}__name(Ra,"Ra");var Fa=Zr(function(t3,e3){return Go(t3)?pr(t3,mr(e3,1,Go,!0)):[]}),Ba=Zr(function(e3,n3){var r3=Xa(n3);return Go(r3)&&(r3=t2),Go(e3)?pr(e3,mr(n3,1,Go,!0),ca(r3,2)):[]}),La=Zr(function(e3,n3){var r3=Xa(n3);return Go(r3)&&(r3=t2),Go(e3)?pr(e3,mr(n3,1,Go,!0),t2,r3):[]});function Wa(t3,e3,n3){var r3=t3==null?0:t3.length;if(!r3)return-1;var i3=n3==null?0:gu(n3);return i3<0&&(i3=_n(r3+i3,0)),Be2(t3,ca(e3,3),i3)}__name(Wa,"Wa");function qa(e3,n3,r3){var i3=e3==null?0:e3.length;if(!i3)return-1;var a3=i3-1;return r3!==t2&&(a3=gu(r3),a3=r3<0?_n(i3+a3,0):wn(a3,i3-1)),Be2(e3,ca(n3,3),a3,!0)}__name(qa,"qa");function Ha(t3){return t3!=null&&t3.length?mr(t3,1):[]}__name(Ha,"Ha");function $a(e3){return e3&&e3.length?e3[0]:t2}__name($a,"$a");var Ka=Zr(function(t3){var e3=ze2(t3,mi);return e3.length&&e3[0]===t3[0]?Nr(e3):[]}),Ga=Zr(function(e3){var n3=Xa(e3),r3=ze2(e3,mi);return n3===Xa(r3)?n3=t2:r3.pop(),r3.length&&r3[0]===e3[0]?Nr(r3,ca(n3,2)):[]}),Ja=Zr(function(e3){var n3=Xa(e3),r3=ze2(e3,mi);return(n3=typeof n3=="function"?n3:t2)&&r3.pop(),r3.length&&r3[0]===e3[0]?Nr(r3,t2,n3):[]});function Xa(e3){var n3=e3==null?0:e3.length;return n3?e3[n3-1]:t2}__name(Xa,"Xa");var Za=Zr(Ya);function Ya(t3,e3){return t3&&t3.length&&e3&&e3.length?Kr(t3,e3):t3}__name(Ya,"Ya");var Qa=ra(function(t3,e3){var n3=t3==null?0:t3.length,r3=ur(t3,e3);return Gr(t3,ze2(e3,function(t4){return _a26(t4,n3)?+t4:t4}).sort(ji)),r3});function to(t3){return t3==null?t3:Pn.call(t3)}__name(to,"to");var eo=Zr(function(t3){return fi(mr(t3,1,Go,!0))}),no=Zr(function(e3){var n3=Xa(e3);return Go(n3)&&(n3=t2),fi(mr(e3,1,Go,!0),ca(n3,2))}),ro=Zr(function(e3){var n3=Xa(e3);return n3=typeof n3=="function"?n3:t2,fi(mr(e3,1,Go,!0),t2,n3)});function io(t3){if(!t3||!t3.length)return[];var e3=0;return t3=Te2(t3,function(t4){if(Go(t4))return e3=_n(t4.length,e3),!0}),Xe2(e3,function(e4){return ze2(t3,$e2(e4))})}__name(io,"io");function ao(e3,n3){if(!e3||!e3.length)return[];var r3=io(e3);return n3==null?r3:ze2(r3,function(e4){return De2(n3,t2,e4)})}__name(ao,"ao");var oo=Zr(function(t3,e3){return Go(t3)?pr(t3,e3):[]}),uo=Zr(function(t3){return vi(Te2(t3,Go))}),so=Zr(function(e3){var n3=Xa(e3);return Go(n3)&&(n3=t2),vi(Te2(e3,Go),ca(n3,2))}),co=Zr(function(e3){var n3=Xa(e3);return n3=typeof n3=="function"?n3:t2,vi(Te2(e3,Go),t2,n3)}),lo=Zr(io),fo=Zr(function(e3){var n3=e3.length,r3=n3>1?e3[n3-1]:t2;return r3=typeof r3=="function"?(e3.pop(),r3):t2,ao(e3,r3)});function po(t3){var e3=Bn(t3);return e3.__chain__=!0,e3}__name(po,"po");function ho(t3,e3){return e3(t3)}__name(ho,"ho");var go=ra(function(e3){var n3=e3.length,r3=n3?e3[0]:0,i3=this.__wrapped__,a3=__name(function(t3){return ur(t3,e3)},"a3");return!(n3>1||this.__actions__.length)&&i3 instanceof Hn&&_a26(r3)?((i3=i3.slice(r3,+r3+(n3?1:0))).__actions__.push({func:ho,args:[a3],thisArg:t2}),new qn(i3,this.__chain__).thru(function(e4){return n3&&!e4.length&&e4.push(t2),e4})):this.thru(a3)}),vo=Oi(function(t3,e3,n3){At3.call(t3,n3)?++t3[n3]:or(t3,n3,1)}),yo=Ri(Wa),mo=Ri(qa);function _o(t3,e3){return(Ho(t3)?Ee2:dr)(t3,ca(e3,3))}__name(_o,"_o");function wo(t3,e3){return(Ho(t3)?Ce2:hr)(t3,ca(e3,3))}__name(wo,"wo");var bo=Oi(function(t3,e3,n3){At3.call(t3,n3)?t3[n3].push(e3):or(t3,n3,[e3])}),So=Zr(function(t3,e3,n3){var r3=-1,i3=typeof e3=="function",a3=Ko(t3)?St3(t3.length):[];return dr(t3,function(t4){a3[++r3]=i3?De2(e3,t4,n3):Tr(t4,e3,n3)}),a3}),Io=Oi(function(t3,e3,n3){or(t3,n3,e3)});function Po(t3,e3){return(Ho(t3)?ze2:Fr)(t3,ca(e3,3))}__name(Po,"Po");var xo=Oi(function(t3,e3,n3){t3[n3?0:1].push(e3)},function(){return[[],[]]}),Do=Zr(function(t3,e3){if(t3==null)return[];var n3=e3.length;return n3>1&&wa(t3,e3[0],e3[1])?e3=[]:n3>2&&wa(e3[0],e3[1],e3[2])&&(e3=[e3[0]]),Hr(t3,mr(e3,1),[])}),jo=pe3||function(){return he2.Date.now()};function Eo(e3,n3,r3){return n3=r3?t2:n3,n3=e3&&n3==null?e3.length:n3,Yi(e3,u2,t2,t2,t2,t2,n3)}__name(Eo,"Eo");function Co(n3,r3){var i3;if(typeof r3!="function")throw new Nt3(e2);return n3=gu(n3),function(){return--n3>0&&(i3=r3.apply(this,arguments)),n3<=1&&(r3=t2),i3}}__name(Co,"Co");var No=Zr(function(t3,e3,n3){var r3=1;if(n3.length){var i3=ln2(n3,sa(No));r3|=a2}return Yi(t3,r3,e3,n3,i3)}),To=Zr(function(t3,e3,n3){var r3=3;if(n3.length){var i3=ln2(n3,sa(To));r3|=a2}return Yi(e3,r3,t3,n3,i3)});function Oo(n3,r3,i3){var a3,o3,u3,s3,c3,l3,f3=0,p3=!1,d3=!1,h3=!0;if(typeof n3!="function")throw new Nt3(e2);function g3(e3){var r4=a3,i4=o3;return a3=o3=t2,f3=e3,s3=n3.apply(i4,r4)}__name(g3,"g3");function v3(e3){var n4=e3-l3;return l3===t2||n4>=r3||n4<0||d3&&e3-f3>=u3}__name(v3,"v3");function y3(){var t3=jo();if(v3(t3))return m3(t3);c3=Ta(y3,function(t4){var e3=r3-(t4-l3);return d3?wn(e3,u3-(t4-f3)):e3}(t3))}__name(y3,"y3");function m3(e3){return c3=t2,h3&&a3?g3(e3):(a3=o3=t2,s3)}__name(m3,"m3");function _3(){var e3=jo(),n4=v3(e3);if(a3=arguments,o3=this,l3=e3,n4){if(c3===t2)return function(t3){return f3=t3,c3=Ta(y3,r3),p3?g3(t3):s3}(l3);if(d3)return Ii(c3),c3=Ta(y3,r3),g3(l3)}return c3===t2&&(c3=Ta(y3,r3)),s3}return __name(_3,"_3"),r3=yu(r3)||0,eu(i3)&&(p3=!!i3.leading,u3=(d3="maxWait"in i3)?_n(yu(i3.maxWait)||0,r3):u3,h3="trailing"in i3?!!i3.trailing:h3),_3.cancel=function(){c3!==t2&&Ii(c3),f3=0,a3=l3=o3=c3=t2},_3.flush=function(){return c3===t2?s3:m3(jo())},_3}__name(Oo,"Oo");var ko=Zr(function(t3,e3){return fr(t3,1,e3)}),zo=Zr(function(t3,e3,n3){return fr(t3,yu(e3)||0,n3)});function Uo(t3,n3){if(typeof t3!="function"||n3!=null&&typeof n3!="function")throw new Nt3(e2);var r3=__name(function(){var e3=arguments,i3=n3?n3.apply(this,e3):e3[0],a3=r3.cache;if(a3.has(i3))return a3.get(i3);var o3=t3.apply(this,e3);return r3.cache=a3.set(i3,o3)||a3,o3},"r3");return r3.cache=new(Uo.Cache||Gn),r3}__name(Uo,"Uo");function Ao(t3){if(typeof t3!="function")throw new Nt3(e2);return function(){var e3=arguments;switch(e3.length){case 0:return!t3.call(this);case 1:return!t3.call(this,e3[0]);case 2:return!t3.call(this,e3[0],e3[1]);case 3:return!t3.call(this,e3[0],e3[1],e3[2])}return!t3.apply(this,e3)}}__name(Ao,"Ao"),Uo.Cache=Gn;var Mo=bi(function(t3,e3){var n3=(e3=e3.length==1&&Ho(e3[0])?ze2(e3[0],Ye2(ca())):ze2(mr(e3,1),Ye2(ca()))).length;return Zr(function(r3){for(var i3=-1,a3=wn(r3.length,n3);++i3<a3;)r3[i3]=e3[i3].call(this,r3[i3]);return De2(t3,this,r3)})}),Vo=Zr(function(e3,n3){var r3=ln2(n3,sa(Vo));return Yi(e3,a2,t2,n3,r3)}),Ro=Zr(function(e3,n3){var r3=ln2(n3,sa(Ro));return Yi(e3,o2,t2,n3,r3)}),Fo=ra(function(e3,n3){return Yi(e3,s2,t2,t2,t2,n3)});function Bo(t3,e3){return t3===e3||t3!=t3&&e3!=e3}__name(Bo,"Bo");var Lo=Ki(jr),Wo=Ki(function(t3,e3){return t3>=e3}),qo=Or(function(){return arguments}())?Or:function(t3){return nu(t3)&&At3.call(t3,"callee")&&!Jt3.call(t3,"callee")},Ho=St3.isArray,$o=we2?Ye2(we2):function(t3){return nu(t3)&&Dr(t3)==N2};function Ko(t3){return t3!=null&&tu(t3.length)&&!Yo(t3)}__name(Ko,"Ko");function Go(t3){return nu(t3)&&Ko(t3)}__name(Go,"Go");var Jo=_e3||ys,Xo=be2?Ye2(be2):function(t3){return nu(t3)&&Dr(t3)==y2};function Zo(t3){if(!nu(t3))return!1;var e3=Dr(t3);return e3==m2||e3=="[object DOMException]"||typeof t3.message=="string"&&typeof t3.name=="string"&&!au(t3)}__name(Zo,"Zo");function Yo(t3){if(!eu(t3))return!1;var e3=Dr(t3);return e3==_2||e3==w2||e3=="[object AsyncFunction]"||e3=="[object Proxy]"}__name(Yo,"Yo");function Qo(t3){return typeof t3=="number"&&t3==gu(t3)}__name(Qo,"Qo");function tu(t3){return typeof t3=="number"&&t3>-1&&t3%1==0&&t3<=l2}__name(tu,"tu");function eu(t3){var e3=typeof t3;return t3!=null&&(e3=="object"||e3=="function")}__name(eu,"eu");function nu(t3){return t3!=null&&typeof t3=="object"}__name(nu,"nu");var ru=Se2?Ye2(Se2):function(t3){return nu(t3)&&ga(t3)==b2};function iu(t3){return typeof t3=="number"||nu(t3)&&Dr(t3)==S2}__name(iu,"iu");function au(t3){if(!nu(t3)||Dr(t3)!=I2)return!1;var e3=Kt3(t3);if(e3===null)return!0;var n3=At3.call(e3,"constructor")&&e3.constructor;return typeof n3=="function"&&n3 instanceof n3&&Ut3.call(n3)==Ft3}__name(au,"au");var ou=Ie2?Ye2(Ie2):function(t3){return nu(t3)&&Dr(t3)==x2},uu=Pe2?Ye2(Pe2):function(t3){return nu(t3)&&ga(t3)==D2};function su(t3){return typeof t3=="string"||!Ho(t3)&&nu(t3)&&Dr(t3)==j2}__name(su,"su");function cu(t3){return typeof t3=="symbol"||nu(t3)&&Dr(t3)==E2}__name(cu,"cu");var lu=xe2?Ye2(xe2):function(t3){return nu(t3)&&tu(t3.length)&&!!ue2[Dr(t3)]},fu=Ki(Rr),pu=Ki(function(t3,e3){return t3<=e3});function du(t3){if(!t3)return[];if(Ko(t3))return su(t3)?hn(t3):Ni(t3);if(re2&&t3[re2])return function(t4){for(var e4,n3=[];!(e4=t4.next()).done;)n3.push(e4.value);return n3}(t3[re2]());var e3=ga(t3);return(e3==b2?sn:e3==D2?fn:Bu)(t3)}__name(du,"du");function hu(t3){return t3?(t3=yu(t3))===c2||t3===-1/0?17976931348623157e292*(t3<0?-1:1):t3==t3?t3:0:t3===0?t3:0}__name(hu,"hu");function gu(t3){var e3=hu(t3),n3=e3%1;return e3==e3?n3?e3-n3:e3:0}__name(gu,"gu");function vu(t3){return t3?sr(gu(t3),0,p2):0}__name(vu,"vu");function yu(t3){if(typeof t3=="number")return t3;if(cu(t3))return f2;if(eu(t3)){var e3=typeof t3.valueOf=="function"?t3.valueOf():t3;t3=eu(e3)?e3+"":e3}if(typeof t3!="string")return t3===0?t3:+t3;t3=Ze2(t3);var n3=dt2.test(t3);return n3||gt2.test(t3)?fe2(t3.slice(2),n3?2:8):pt2.test(t3)?f2:+t3}__name(yu,"yu");function mu(t3){return Ti(t3,ku(t3))}__name(mu,"mu");function _u(t3){return t3==null?"":li(t3)}__name(_u,"_u");var wu=ki(function(t3,e3){if(Pa(e3)||Ko(e3))Ti(e3,Ou(e3),t3);else for(var n3 in e3)At3.call(e3,n3)&&nr(t3,n3,e3[n3])}),bu=ki(function(t3,e3){Ti(e3,ku(e3),t3)}),Su=ki(function(t3,e3,n3,r3){Ti(e3,ku(e3),t3,r3)}),Iu=ki(function(t3,e3,n3,r3){Ti(e3,Ou(e3),t3,r3)}),Pu=ra(ur),xu=Zr(function(e3,n3){e3=jt3(e3);var r3=-1,i3=n3.length,a3=i3>2?n3[2]:t2;for(a3&&wa(n3[0],n3[1],a3)&&(i3=1);++r3<i3;)for(var o3=n3[r3],u3=ku(o3),s3=-1,c3=u3.length;++s3<c3;){var l3=u3[s3],f3=e3[l3];(f3===t2||Bo(f3,kt3[l3])&&!At3.call(e3,l3))&&(e3[l3]=o3[l3])}return e3}),Du=Zr(function(e3){return e3.push(t2,ta),De2(Uu,t2,e3)});function ju(e3,n3,r3){var i3=e3==null?t2:Pr(e3,n3);return i3===t2?r3:i3}__name(ju,"ju");function Eu(t3,e3){return t3!=null&&va(t3,e3,Cr)}__name(Eu,"Eu");var Cu=Li(function(t3,e3,n3){e3!=null&&typeof e3.toString!="function"&&(e3=Rt3.call(e3)),t3[e3]=n3},es(is)),Nu=Li(function(t3,e3,n3){e3!=null&&typeof e3.toString!="function"&&(e3=Rt3.call(e3)),At3.call(t3,e3)?t3[e3].push(n3):t3[e3]=[n3]},ca),Tu=Zr(Tr);function Ou(t3){return Ko(t3)?Zn(t3):Mr(t3)}__name(Ou,"Ou");function ku(t3){return Ko(t3)?Zn(t3,!0):Vr(t3)}__name(ku,"ku");var zu=ki(function(t3,e3,n3){Wr(t3,e3,n3)}),Uu=ki(function(t3,e3,n3,r3){Wr(t3,e3,n3,r3)}),Au=ra(function(t3,e3){var n3={};if(t3==null)return n3;var r3=!1;e3=ze2(e3,function(e4){return e4=wi(e4,t3),r3||(r3=e4.length>1),e4}),Ti(t3,aa(t3),n3),r3&&(n3=cr(n3,7,ea));for(var i3=e3.length;i3--;)pi(n3,e3[i3]);return n3}),Mu=ra(function(t3,e3){return t3==null?{}:function(t4,e4){return $r(t4,e4,function(e5,n3){return Eu(t4,n3)})}(t3,e3)});function Vu(t3,e3){if(t3==null)return{};var n3=ze2(aa(t3),function(t4){return[t4]});return e3=ca(e3),$r(t3,n3,function(t4,n4){return e3(t4,n4[0])})}__name(Vu,"Vu");var Ru=Zi(Ou),Fu=Zi(ku);function Bu(t3){return t3==null?[]:Qe2(t3,Ou(t3))}__name(Bu,"Bu");var Lu=Mi(function(t3,e3,n3){return e3=e3.toLowerCase(),t3+(n3?Wu(e3):e3)});function Wu(t3){return Zu(_u(t3).toLowerCase())}__name(Wu,"Wu");function qu(t3){return(t3=_u(t3))&&t3.replace(yt2,rn).replace(Zt2,"")}__name(qu,"qu");var Hu=Mi(function(t3,e3,n3){return t3+(n3?"-":"")+e3.toLowerCase()}),$u=Mi(function(t3,e3,n3){return t3+(n3?" ":"")+e3.toLowerCase()}),Ku=Ai("toLowerCase"),Gu=Mi(function(t3,e3,n3){return t3+(n3?"_":"")+e3.toLowerCase()}),Ju=Mi(function(t3,e3,n3){return t3+(n3?" ":"")+Zu(e3)}),Xu=Mi(function(t3,e3,n3){return t3+(n3?" ":"")+e3.toUpperCase()}),Zu=Ai("toUpperCase");function Yu(e3,n3,r3){return e3=_u(e3),(n3=r3?t2:n3)===t2?function(t3){return ee2.test(t3)}(e3)?function(t3){return t3.match(Qt2)||[]}(e3):function(t3){return t3.match(ut2)||[]}(e3):e3.match(n3)||[]}__name(Yu,"Yu");var Qu=Zr(function(e3,n3){try{return De2(e3,t2,n3)}catch(t3){return Zo(t3)?t3:new Pt3(t3)}}),ts=ra(function(t3,e3){return Ee2(e3,function(e4){e4=Ma(e4),or(t3,e4,No(t3[e4],t3))}),t3});function es(t3){return function(){return t3}}__name(es,"es");var ns=Fi(),rs=Fi(!0);function is(t3){return t3}__name(is,"is");function as(t3){return Ar(typeof t3=="function"?t3:cr(t3,1))}__name(as,"as");var os=Zr(function(t3,e3){return function(n3){return Tr(n3,t3,e3)}}),us=Zr(function(t3,e3){return function(n3){return Tr(t3,n3,e3)}});function ss(t3,e3,n3){var r3=Ou(e3),i3=Ir(e3,r3);n3!=null||eu(e3)&&(i3.length||!r3.length)||(n3=e3,e3=t3,t3=this,i3=Ir(e3,Ou(e3)));var a3=!(eu(n3)&&"chain"in n3&&!n3.chain),o3=Yo(t3);return Ee2(i3,function(n4){var r4=e3[n4];t3[n4]=r4,o3&&(t3.prototype[n4]=function(){var e4=this.__chain__;if(a3||e4){var n5=t3(this.__wrapped__);return(n5.__actions__=Ni(this.__actions__)).push({func:r4,args:arguments,thisArg:t3}),n5.__chain__=e4,n5}return r4.apply(t3,Ue2([this.value()],arguments))})}),t3}__name(ss,"ss");function cs(){}__name(cs,"cs");var ls=qi(ze2),fs=qi(Ne2),ps=qi(Ve2);function ds(t3){return ba(t3)?$e2(Ma(t3)):function(t4){return function(e3){return Pr(e3,t4)}}(t3)}__name(ds,"ds");var hs=$i(),gs=$i(!0);function vs(){return[]}__name(vs,"vs");function ys(){return!1}__name(ys,"ys");var ms,_s=Wi(function(t3,e3){return t3+e3},0),ws=Ji("ceil"),bs=Wi(function(t3,e3){return t3/e3},1),Ss=Ji("floor"),Is=Wi(function(t3,e3){return t3*e3},1),Ps=Ji("round"),xs=Wi(function(t3,e3){return t3-e3},0);return Bn.after=function(t3,n3){if(typeof n3!="function")throw new Nt3(e2);return t3=gu(t3),function(){if(--t3<1)return n3.apply(this,arguments)}},Bn.ary=Eo,Bn.assign=wu,Bn.assignIn=bu,Bn.assignInWith=Su,Bn.assignWith=Iu,Bn.at=Pu,Bn.before=Co,Bn.bind=No,Bn.bindAll=ts,Bn.bindKey=To,Bn.castArray=function(){if(!arguments.length)return[];var t3=arguments[0];return Ho(t3)?t3:[t3]},Bn.chain=po,Bn.chunk=function(e3,n3,r3){n3=(r3?wa(e3,n3,r3):n3===t2)?1:_n(gu(n3),0);var i3=e3==null?0:e3.length;if(!i3||n3<1)return[];for(var a3=0,o3=0,u3=St3(ge3(i3/n3));a3<i3;)u3[o3++]=ii(e3,a3,a3+=n3);return u3},Bn.compact=function(t3){for(var e3=-1,n3=t3==null?0:t3.length,r3=0,i3=[];++e3<n3;){var a3=t3[e3];a3&&(i3[r3++]=a3)}return i3},Bn.concat=function(){var t3=arguments.length;if(!t3)return[];for(var e3=St3(t3-1),n3=arguments[0],r3=t3;r3--;)e3[r3-1]=arguments[r3];return Ue2(Ho(n3)?Ni(n3):[n3],mr(e3,1))},Bn.cond=function(t3){var n3=t3==null?0:t3.length,r3=ca();return t3=n3?ze2(t3,function(t4){if(typeof t4[1]!="function")throw new Nt3(e2);return[r3(t4[0]),t4[1]]}):[],Zr(function(e3){for(var r4=-1;++r4<n3;){var i3=t3[r4];if(De2(i3[0],this,e3))return De2(i3[1],this,e3)}})},Bn.conforms=function(t3){return function(t4){var e3=Ou(t4);return function(n3){return lr(n3,t4,e3)}}(cr(t3,1))},Bn.constant=es,Bn.countBy=vo,Bn.create=function(t3,e3){var n3=Ln(t3);return e3==null?n3:ar(n3,e3)},Bn.curry=__name(function e3(n3,r3,i3){var a3=Yi(n3,8,t2,t2,t2,t2,t2,r3=i3?t2:r3);return a3.placeholder=e3.placeholder,a3},"e3"),Bn.curryRight=__name(function e3(n3,r3,a3){var o3=Yi(n3,i2,t2,t2,t2,t2,t2,r3=a3?t2:r3);return o3.placeholder=e3.placeholder,o3},"e3"),Bn.debounce=Oo,Bn.defaults=xu,Bn.defaultsDeep=Du,Bn.defer=ko,Bn.delay=zo,Bn.difference=Fa,Bn.differenceBy=Ba,Bn.differenceWith=La,Bn.drop=function(e3,n3,r3){var i3=e3==null?0:e3.length;return i3?ii(e3,(n3=r3||n3===t2?1:gu(n3))<0?0:n3,i3):[]},Bn.dropRight=function(e3,n3,r3){var i3=e3==null?0:e3.length;return i3?ii(e3,0,(n3=i3-(n3=r3||n3===t2?1:gu(n3)))<0?0:n3):[]},Bn.dropRightWhile=function(t3,e3){return t3&&t3.length?hi(t3,ca(e3,3),!0,!0):[]},Bn.dropWhile=function(t3,e3){return t3&&t3.length?hi(t3,ca(e3,3),!0):[]},Bn.fill=function(e3,n3,r3,i3){var a3=e3==null?0:e3.length;return a3?(r3&&typeof r3!="number"&&wa(e3,n3,r3)&&(r3=0,i3=a3),function(e4,n4,r4,i4){var a4=e4.length;for((r4=gu(r4))<0&&(r4=-r4>a4?0:a4+r4),(i4=i4===t2||i4>a4?a4:gu(i4))<0&&(i4+=a4),i4=r4>i4?0:vu(i4);r4<i4;)e4[r4++]=n4;return e4}(e3,n3,r3,i3)):[]},Bn.filter=function(t3,e3){return(Ho(t3)?Te2:yr)(t3,ca(e3,3))},Bn.flatMap=function(t3,e3){return mr(Po(t3,e3),1)},Bn.flatMapDeep=function(t3,e3){return mr(Po(t3,e3),c2)},Bn.flatMapDepth=function(e3,n3,r3){return r3=r3===t2?1:gu(r3),mr(Po(e3,n3),r3)},Bn.flatten=Ha,Bn.flattenDeep=function(t3){return t3!=null&&t3.length?mr(t3,c2):[]},Bn.flattenDepth=function(e3,n3){return e3!=null&&e3.length?mr(e3,n3=n3===t2?1:gu(n3)):[]},Bn.flip=function(t3){return Yi(t3,512)},Bn.flow=ns,Bn.flowRight=rs,Bn.fromPairs=function(t3){for(var e3=-1,n3=t3==null?0:t3.length,r3={};++e3<n3;){var i3=t3[e3];r3[i3[0]]=i3[1]}return r3},Bn.functions=function(t3){return t3==null?[]:Ir(t3,Ou(t3))},Bn.functionsIn=function(t3){return t3==null?[]:Ir(t3,ku(t3))},Bn.groupBy=bo,Bn.initial=function(t3){return t3!=null&&t3.length?ii(t3,0,-1):[]},Bn.intersection=Ka,Bn.intersectionBy=Ga,Bn.intersectionWith=Ja,Bn.invert=Cu,Bn.invertBy=Nu,Bn.invokeMap=So,Bn.iteratee=as,Bn.keyBy=Io,Bn.keys=Ou,Bn.keysIn=ku,Bn.map=Po,Bn.mapKeys=function(t3,e3){var n3={};return e3=ca(e3,3),br(t3,function(t4,r3,i3){or(n3,e3(t4,r3,i3),t4)}),n3},Bn.mapValues=function(t3,e3){var n3={};return e3=ca(e3,3),br(t3,function(t4,r3,i3){or(n3,r3,e3(t4,r3,i3))}),n3},Bn.matches=function(t3){return Br(cr(t3,1))},Bn.matchesProperty=function(t3,e3){return Lr(t3,cr(e3,1))},Bn.memoize=Uo,Bn.merge=zu,Bn.mergeWith=Uu,Bn.method=os,Bn.methodOf=us,Bn.mixin=ss,Bn.negate=Ao,Bn.nthArg=function(t3){return t3=gu(t3),Zr(function(e3){return qr(e3,t3)})},Bn.omit=Au,Bn.omitBy=function(t3,e3){return Vu(t3,Ao(ca(e3)))},Bn.once=function(t3){return Co(2,t3)},Bn.orderBy=function(e3,n3,r3,i3){return e3==null?[]:(Ho(n3)||(n3=n3==null?[]:[n3]),Ho(r3=i3?t2:r3)||(r3=r3==null?[]:[r3]),Hr(e3,n3,r3))},Bn.over=ls,Bn.overArgs=Mo,Bn.overEvery=fs,Bn.overSome=ps,Bn.partial=Vo,Bn.partialRight=Ro,Bn.partition=xo,Bn.pick=Mu,Bn.pickBy=Vu,Bn.property=ds,Bn.propertyOf=function(e3){return function(n3){return e3==null?t2:Pr(e3,n3)}},Bn.pull=Za,Bn.pullAll=Ya,Bn.pullAllBy=function(t3,e3,n3){return t3&&t3.length&&e3&&e3.length?Kr(t3,e3,ca(n3,2)):t3},Bn.pullAllWith=function(e3,n3,r3){return e3&&e3.length&&n3&&n3.length?Kr(e3,n3,t2,r3):e3},Bn.pullAt=Qa,Bn.range=hs,Bn.rangeRight=gs,Bn.rearg=Fo,Bn.reject=function(t3,e3){return(Ho(t3)?Te2:yr)(t3,Ao(ca(e3,3)))},Bn.remove=function(t3,e3){var n3=[];if(!t3||!t3.length)return n3;var r3=-1,i3=[],a3=t3.length;for(e3=ca(e3,3);++r3<a3;){var o3=t3[r3];e3(o3,r3,t3)&&(n3.push(o3),i3.push(r3))}return Gr(t3,i3),n3},Bn.rest=function(n3,r3){if(typeof n3!="function")throw new Nt3(e2);return Zr(n3,r3=r3===t2?r3:gu(r3))},Bn.reverse=to,Bn.sampleSize=function(e3,n3,r3){return n3=(r3?wa(e3,n3,r3):n3===t2)?1:gu(n3),(Ho(e3)?Qn:Qr)(e3,n3)},Bn.set=function(t3,e3,n3){return t3==null?t3:ti(t3,e3,n3)},Bn.setWith=function(e3,n3,r3,i3){return i3=typeof i3=="function"?i3:t2,e3==null?e3:ti(e3,n3,r3,i3)},Bn.shuffle=function(t3){return(Ho(t3)?tr:ri)(t3)},Bn.slice=function(e3,n3,r3){var i3=e3==null?0:e3.length;return i3?(r3&&typeof r3!="number"&&wa(e3,n3,r3)?(n3=0,r3=i3):(n3=n3==null?0:gu(n3),r3=r3===t2?i3:gu(r3)),ii(e3,n3,r3)):[]},Bn.sortBy=Do,Bn.sortedUniq=function(t3){return t3&&t3.length?si(t3):[]},Bn.sortedUniqBy=function(t3,e3){return t3&&t3.length?si(t3,ca(e3,2)):[]},Bn.split=function(e3,n3,r3){return r3&&typeof r3!="number"&&wa(e3,n3,r3)&&(n3=r3=t2),(r3=r3===t2?p2:r3>>>0)?(e3=_u(e3))&&(typeof n3=="string"||n3!=null&&!ou(n3))&&!(n3=li(n3))&&un(e3)?Si(hn(e3),0,r3):e3.split(n3,r3):[]},Bn.spread=function(t3,n3){if(typeof t3!="function")throw new Nt3(e2);return n3=n3==null?0:_n(gu(n3),0),Zr(function(e3){var r3=e3[n3],i3=Si(e3,0,n3);return r3&&Ue2(i3,r3),De2(t3,this,i3)})},Bn.tail=function(t3){var e3=t3==null?0:t3.length;return e3?ii(t3,1,e3):[]},Bn.take=function(e3,n3,r3){return e3&&e3.length?ii(e3,0,(n3=r3||n3===t2?1:gu(n3))<0?0:n3):[]},Bn.takeRight=function(e3,n3,r3){var i3=e3==null?0:e3.length;return i3?ii(e3,(n3=i3-(n3=r3||n3===t2?1:gu(n3)))<0?0:n3,i3):[]},Bn.takeRightWhile=function(t3,e3){return t3&&t3.length?hi(t3,ca(e3,3),!1,!0):[]},Bn.takeWhile=function(t3,e3){return t3&&t3.length?hi(t3,ca(e3,3)):[]},Bn.tap=function(t3,e3){return e3(t3),t3},Bn.throttle=function(t3,n3,r3){var i3=!0,a3=!0;if(typeof t3!="function")throw new Nt3(e2);return eu(r3)&&(i3="leading"in r3?!!r3.leading:i3,a3="trailing"in r3?!!r3.trailing:a3),Oo(t3,n3,{leading:i3,maxWait:n3,trailing:a3})},Bn.thru=ho,Bn.toArray=du,Bn.toPairs=Ru,Bn.toPairsIn=Fu,Bn.toPath=function(t3){return Ho(t3)?ze2(t3,Ma):cu(t3)?[t3]:Ni(Aa(_u(t3)))},Bn.toPlainObject=mu,Bn.transform=function(t3,e3,n3){var r3=Ho(t3),i3=r3||Jo(t3)||lu(t3);if(e3=ca(e3,4),n3==null){var a3=t3&&t3.constructor;n3=i3?r3?new a3:[]:eu(t3)&&Yo(a3)?Ln(Kt3(t3)):{}}return(i3?Ee2:br)(t3,function(t4,r4,i4){return e3(n3,t4,r4,i4)}),n3},Bn.unary=function(t3){return Eo(t3,1)},Bn.union=eo,Bn.unionBy=no,Bn.unionWith=ro,Bn.uniq=function(t3){return t3&&t3.length?fi(t3):[]},Bn.uniqBy=function(t3,e3){return t3&&t3.length?fi(t3,ca(e3,2)):[]},Bn.uniqWith=function(e3,n3){return n3=typeof n3=="function"?n3:t2,e3&&e3.length?fi(e3,t2,n3):[]},Bn.unset=function(t3,e3){return t3==null||pi(t3,e3)},Bn.unzip=io,Bn.unzipWith=ao,Bn.update=function(t3,e3,n3){return t3==null?t3:di(t3,e3,_i(n3))},Bn.updateWith=function(e3,n3,r3,i3){return i3=typeof i3=="function"?i3:t2,e3==null?e3:di(e3,n3,_i(r3),i3)},Bn.values=Bu,Bn.valuesIn=function(t3){return t3==null?[]:Qe2(t3,ku(t3))},Bn.without=oo,Bn.words=Yu,Bn.wrap=function(t3,e3){return Vo(_i(e3),t3)},Bn.xor=uo,Bn.xorBy=so,Bn.xorWith=co,Bn.zip=lo,Bn.zipObject=function(t3,e3){return yi(t3||[],e3||[],nr)},Bn.zipObjectDeep=function(t3,e3){return yi(t3||[],e3||[],ti)},Bn.zipWith=fo,Bn.entries=Ru,Bn.entriesIn=Fu,Bn.extend=bu,Bn.extendWith=Su,ss(Bn,Bn),Bn.add=_s,Bn.attempt=Qu,Bn.camelCase=Lu,Bn.capitalize=Wu,Bn.ceil=ws,Bn.clamp=function(e3,n3,r3){return r3===t2&&(r3=n3,n3=t2),r3!==t2&&(r3=(r3=yu(r3))==r3?r3:0),n3!==t2&&(n3=(n3=yu(n3))==n3?n3:0),sr(yu(e3),n3,r3)},Bn.clone=function(t3){return cr(t3,4)},Bn.cloneDeep=function(t3){return cr(t3,5)},Bn.cloneDeepWith=function(e3,n3){return cr(e3,5,n3=typeof n3=="function"?n3:t2)},Bn.cloneWith=function(e3,n3){return cr(e3,4,n3=typeof n3=="function"?n3:t2)},Bn.conformsTo=function(t3,e3){return e3==null||lr(t3,e3,Ou(e3))},Bn.deburr=qu,Bn.defaultTo=function(t3,e3){return t3==null||t3!=t3?e3:t3},Bn.divide=bs,Bn.endsWith=function(e3,n3,r3){e3=_u(e3),n3=li(n3);var i3=e3.length,a3=r3=r3===t2?i3:sr(gu(r3),0,i3);return(r3-=n3.length)>=0&&e3.slice(r3,a3)==n3},Bn.eq=Bo,Bn.escape=function(t3){return(t3=_u(t3))&&K2.test(t3)?t3.replace(H2,an):t3},Bn.escapeRegExp=function(t3){return(t3=_u(t3))&&et2.test(t3)?t3.replace(tt2,"\\$&"):t3},Bn.every=function(e3,n3,r3){var i3=Ho(e3)?Ne2:gr;return r3&&wa(e3,n3,r3)&&(n3=t2),i3(e3,ca(n3,3))},Bn.find=yo,Bn.findIndex=Wa,Bn.findKey=function(t3,e3){return Fe2(t3,ca(e3,3),br)},Bn.findLast=mo,Bn.findLastIndex=qa,Bn.findLastKey=function(t3,e3){return Fe2(t3,ca(e3,3),Sr)},Bn.floor=Ss,Bn.forEach=_o,Bn.forEachRight=wo,Bn.forIn=function(t3,e3){return t3==null?t3:_r(t3,ca(e3,3),ku)},Bn.forInRight=function(t3,e3){return t3==null?t3:wr(t3,ca(e3,3),ku)},Bn.forOwn=function(t3,e3){return t3&&br(t3,ca(e3,3))},Bn.forOwnRight=function(t3,e3){return t3&&Sr(t3,ca(e3,3))},Bn.get=ju,Bn.gt=Lo,Bn.gte=Wo,Bn.has=function(t3,e3){return t3!=null&&va(t3,e3,Er)},Bn.hasIn=Eu,Bn.head=$a,Bn.identity=is,Bn.includes=function(t3,e3,n3,r3){t3=Ko(t3)?t3:Bu(t3),n3=n3&&!r3?gu(n3):0;var i3=t3.length;return n3<0&&(n3=_n(i3+n3,0)),su(t3)?n3<=i3&&t3.indexOf(e3,n3)>-1:!!i3&&Le2(t3,e3,n3)>-1},Bn.indexOf=function(t3,e3,n3){var r3=t3==null?0:t3.length;if(!r3)return-1;var i3=n3==null?0:gu(n3);return i3<0&&(i3=_n(r3+i3,0)),Le2(t3,e3,i3)},Bn.inRange=function(e3,n3,r3){return n3=hu(n3),r3===t2?(r3=n3,n3=0):r3=hu(r3),function(t3,e4,n4){return t3>=wn(e4,n4)&&t3<_n(e4,n4)}(e3=yu(e3),n3,r3)},Bn.invoke=Tu,Bn.isArguments=qo,Bn.isArray=Ho,Bn.isArrayBuffer=$o,Bn.isArrayLike=Ko,Bn.isArrayLikeObject=Go,Bn.isBoolean=function(t3){return t3===!0||t3===!1||nu(t3)&&Dr(t3)==v2},Bn.isBuffer=Jo,Bn.isDate=Xo,Bn.isElement=function(t3){return nu(t3)&&t3.nodeType===1&&!au(t3)},Bn.isEmpty=function(t3){if(t3==null)return!0;if(Ko(t3)&&(Ho(t3)||typeof t3=="string"||typeof t3.splice=="function"||Jo(t3)||lu(t3)||qo(t3)))return!t3.length;var e3=ga(t3);if(e3==b2||e3==D2)return!t3.size;if(Pa(t3))return!Mr(t3).length;for(var n3 in t3)if(At3.call(t3,n3))return!1;return!0},Bn.isEqual=function(t3,e3){return kr(t3,e3)},Bn.isEqualWith=function(e3,n3,r3){var i3=(r3=typeof r3=="function"?r3:t2)?r3(e3,n3):t2;return i3===t2?kr(e3,n3,t2,r3):!!i3},Bn.isError=Zo,Bn.isFinite=function(t3){return typeof t3=="number"&&Re22(t3)},Bn.isFunction=Yo,Bn.isInteger=Qo,Bn.isLength=tu,Bn.isMap=ru,Bn.isMatch=function(t3,e3){return t3===e3||zr(t3,e3,fa(e3))},Bn.isMatchWith=function(e3,n3,r3){return r3=typeof r3=="function"?r3:t2,zr(e3,n3,fa(n3),r3)},Bn.isNaN=function(t3){return iu(t3)&&t3!=+t3},Bn.isNative=function(t3){if(Ia(t3))throw new Pt3("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ur(t3)},Bn.isNil=function(t3){return t3==null},Bn.isNull=function(t3){return t3===null},Bn.isNumber=iu,Bn.isObject=eu,Bn.isObjectLike=nu,Bn.isPlainObject=au,Bn.isRegExp=ou,Bn.isSafeInteger=function(t3){return Qo(t3)&&t3>=-9007199254740991&&t3<=l2},Bn.isSet=uu,Bn.isString=su,Bn.isSymbol=cu,Bn.isTypedArray=lu,Bn.isUndefined=function(e3){return e3===t2},Bn.isWeakMap=function(t3){return nu(t3)&&ga(t3)==C22},Bn.isWeakSet=function(t3){return nu(t3)&&Dr(t3)=="[object WeakSet]"},Bn.join=function(t3,e3){return t3==null?"":Ke22.call(t3,e3)},Bn.kebabCase=Hu,Bn.last=Xa,Bn.lastIndexOf=function(e3,n3,r3){var i3=e3==null?0:e3.length;if(!i3)return-1;var a3=i3;return r3!==t2&&(a3=(a3=gu(r3))<0?_n(i3+a3,0):wn(a3,i3-1)),n3==n3?function(t3,e4,n4){for(var r4=n4+1;r4--;)if(t3[r4]===e4)return r4;return r4}(e3,n3,a3):Be2(e3,qe2,a3,!0)},Bn.lowerCase=$u,Bn.lowerFirst=Ku,Bn.lt=fu,Bn.lte=pu,Bn.max=function(e3){return e3&&e3.length?vr(e3,is,jr):t2},Bn.maxBy=function(e3,n3){return e3&&e3.length?vr(e3,ca(n3,2),jr):t2},Bn.mean=function(t3){return He2(t3,is)},Bn.meanBy=function(t3,e3){return He2(t3,ca(e3,2))},Bn.min=function(e3){return e3&&e3.length?vr(e3,is,Rr):t2},Bn.minBy=function(e3,n3){return e3&&e3.length?vr(e3,ca(n3,2),Rr):t2},Bn.stubArray=vs,Bn.stubFalse=ys,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=Is,Bn.nth=function(e3,n3){return e3&&e3.length?qr(e3,gu(n3)):t2},Bn.noConflict=function(){return he2._===this&&(he2._=Bt3),this},Bn.noop=cs,Bn.now=jo,Bn.pad=function(t3,e3,n3){t3=_u(t3);var r3=(e3=gu(e3))?dn(t3):0;if(!e3||r3>=e3)return t3;var i3=(e3-r3)/2;return Hi(ve3(i3),n3)+t3+Hi(ge3(i3),n3)},Bn.padEnd=function(t3,e3,n3){t3=_u(t3);var r3=(e3=gu(e3))?dn(t3):0;return e3&&r3<e3?t3+Hi(e3-r3,n3):t3},Bn.padStart=function(t3,e3,n3){t3=_u(t3);var r3=(e3=gu(e3))?dn(t3):0;return e3&&r3<e3?Hi(e3-r3,n3)+t3:t3},Bn.parseInt=function(t3,e3,n3){return n3||e3==null?e3=0:e3&&(e3=+e3),Sn(_u(t3).replace(nt2,""),e3||0)},Bn.random=function(e3,n3,r3){if(r3&&typeof r3!="boolean"&&wa(e3,n3,r3)&&(n3=r3=t2),r3===t2&&(typeof n3=="boolean"?(r3=n3,n3=t2):typeof e3=="boolean"&&(r3=e3,e3=t2)),e3===t2&&n3===t2?(e3=0,n3=1):(e3=hu(e3),n3===t2?(n3=e3,e3=0):n3=hu(n3)),e3>n3){var i3=e3;e3=n3,n3=i3}if(r3||e3%1||n3%1){var a3=In();return wn(e3+a3*(n3-e3+le2("1e-"+((a3+"").length-1))),n3)}return Jr(e3,n3)},Bn.reduce=function(t3,e3,n3){var r3=Ho(t3)?Ae2:Ge2,i3=arguments.length<3;return r3(t3,ca(e3,4),n3,i3,dr)},Bn.reduceRight=function(t3,e3,n3){var r3=Ho(t3)?Me2:Ge2,i3=arguments.length<3;return r3(t3,ca(e3,4),n3,i3,hr)},Bn.repeat=function(e3,n3,r3){return n3=(r3?wa(e3,n3,r3):n3===t2)?1:gu(n3),Xr(_u(e3),n3)},Bn.replace=function(){var t3=arguments,e3=_u(t3[0]);return t3.length<3?e3:e3.replace(t3[1],t3[2])},Bn.result=function(e3,n3,r3){var i3=-1,a3=(n3=wi(n3,e3)).length;for(a3||(a3=1,e3=t2);++i3<a3;){var o3=e3==null?t2:e3[Ma(n3[i3])];o3===t2&&(i3=a3,o3=r3),e3=Yo(o3)?o3.call(e3):o3}return e3},Bn.round=Ps,Bn.runInContext=rt3,Bn.sample=function(t3){return(Ho(t3)?Yn:Yr)(t3)},Bn.size=function(t3){if(t3==null)return 0;if(Ko(t3))return su(t3)?dn(t3):t3.length;var e3=ga(t3);return e3==b2||e3==D2?t3.size:Mr(t3).length},Bn.snakeCase=Gu,Bn.some=function(e3,n3,r3){var i3=Ho(e3)?Ve2:ai;return r3&&wa(e3,n3,r3)&&(n3=t2),i3(e3,ca(n3,3))},Bn.sortedIndex=function(t3,e3){return oi(t3,e3)},Bn.sortedIndexBy=function(t3,e3,n3){return ui(t3,e3,ca(n3,2))},Bn.sortedIndexOf=function(t3,e3){var n3=t3==null?0:t3.length;if(n3){var r3=oi(t3,e3);if(r3<n3&&Bo(t3[r3],e3))return r3}return-1},Bn.sortedLastIndex=function(t3,e3){return oi(t3,e3,!0)},Bn.sortedLastIndexBy=function(t3,e3,n3){return ui(t3,e3,ca(n3,2),!0)},Bn.sortedLastIndexOf=function(t3,e3){if(t3!=null&&t3.length){var n3=oi(t3,e3,!0)-1;if(Bo(t3[n3],e3))return n3}return-1},Bn.startCase=Ju,Bn.startsWith=function(t3,e3,n3){return t3=_u(t3),n3=n3==null?0:sr(gu(n3),0,t3.length),e3=li(e3),t3.slice(n3,n3+e3.length)==e3},Bn.subtract=xs,Bn.sum=function(t3){return t3&&t3.length?Je2(t3,is):0},Bn.sumBy=function(t3,e3){return t3&&t3.length?Je2(t3,ca(e3,2)):0},Bn.template=function(e3,n3,r3){var i3=Bn.templateSettings;r3&&wa(e3,n3,r3)&&(n3=t2),e3=_u(e3),n3=Su({},n3,i3,Qi);var a3,o3,u3=Su({},n3.imports,i3.imports,Qi),s3=Ou(u3),c3=Qe2(u3,s3),l3=0,f3=n3.interpolate||mt2,p3="__p += '",d3=Et3((n3.escape||mt2).source+"|"+f3.source+"|"+(f3===X2?lt2:mt2).source+"|"+(n3.evaluate||mt2).source+"|$","g"),h3="//# sourceURL="+(At3.call(n3,"sourceURL")?(n3.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie2+"]")+`
`;e3.replace(d3,function(t3,n4,r4,i4,u4,s4){return r4||(r4=i4),p3+=e3.slice(l3,s4).replace(_t2,on),n4&&(a3=!0,p3+=`' +
__e(`+n4+`) +
'`),u4&&(o3=!0,p3+=`';
`+u4+`;
__p += '`),r4&&(p3+=`' +
((__t = (`+r4+`)) == null ? '' : __t) +
'`),l3=s4+t3.length,t3}),p3+=`';
`;var g3=At3.call(n3,"variable")&&n3.variable;if(g3){if(st2.test(g3))throw new Pt3("Invalid `variable` option passed into `_.template`")}else p3=`with (obj) {
`+p3+`
}
`;p3=(o3?p3.replace(B2,""):p3).replace(L2,"$1").replace(W2,"$1;"),p3="function("+(g3||"obj")+`) {
`+(g3?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(a3?", __e = _.escape":"")+(o3?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+p3+`return __p
}`;var v3=Qu(function(){return xt3(s3,h3+"return "+p3).apply(t2,c3)});if(v3.source=p3,Zo(v3))throw v3;return v3},Bn.times=function(t3,e3){if((t3=gu(t3))<1||t3>l2)return[];var n3=p2,r3=wn(t3,p2);e3=ca(e3),t3-=p2;for(var i3=Xe2(r3,e3);++n3<t3;)e3(n3);return i3},Bn.toFinite=hu,Bn.toInteger=gu,Bn.toLength=vu,Bn.toLower=function(t3){return _u(t3).toLowerCase()},Bn.toNumber=yu,Bn.toSafeInteger=function(t3){return t3?sr(gu(t3),-9007199254740991,l2):t3===0?t3:0},Bn.toString=_u,Bn.toUpper=function(t3){return _u(t3).toUpperCase()},Bn.trim=function(e3,n3,r3){if((e3=_u(e3))&&(r3||n3===t2))return Ze2(e3);if(!e3||!(n3=li(n3)))return e3;var i3=hn(e3),a3=hn(n3);return Si(i3,en(i3,a3),nn(i3,a3)+1).join("")},Bn.trimEnd=function(e3,n3,r3){if((e3=_u(e3))&&(r3||n3===t2))return e3.slice(0,gn(e3)+1);if(!e3||!(n3=li(n3)))return e3;var i3=hn(e3);return Si(i3,0,nn(i3,hn(n3))+1).join("")},Bn.trimStart=function(e3,n3,r3){if((e3=_u(e3))&&(r3||n3===t2))return e3.replace(nt2,"");if(!e3||!(n3=li(n3)))return e3;var i3=hn(e3);return Si(i3,en(i3,hn(n3))).join("")},Bn.truncate=function(e3,n3){var r3=30,i3="...";if(eu(n3)){var a3="separator"in n3?n3.separator:a3;r3="length"in n3?gu(n3.length):r3,i3="omission"in n3?li(n3.omission):i3}var o3=(e3=_u(e3)).length;if(un(e3)){var u3=hn(e3);o3=u3.length}if(r3>=o3)return e3;var s3=r3-dn(i3);if(s3<1)return i3;var c3=u3?Si(u3,0,s3).join(""):e3.slice(0,s3);if(a3===t2)return c3+i3;if(u3&&(s3+=c3.length-s3),ou(a3)){if(e3.slice(s3).search(a3)){var l3,f3=c3;for(a3.global||(a3=Et3(a3.source,_u(ft2.exec(a3))+"g")),a3.lastIndex=0;l3=a3.exec(f3);)var p3=l3.index;c3=c3.slice(0,p3===t2?s3:p3)}}else if(e3.indexOf(li(a3),s3)!=s3){var d3=c3.lastIndexOf(a3);d3>-1&&(c3=c3.slice(0,d3))}return c3+i3},Bn.unescape=function(t3){return(t3=_u(t3))&&$2.test(t3)?t3.replace(q2,vn):t3},Bn.uniqueId=function(t3){var e3=++Mt3;return _u(t3)+e3},Bn.upperCase=Xu,Bn.upperFirst=Zu,Bn.each=_o,Bn.eachRight=wo,Bn.first=$a,ss(Bn,(ms={},br(Bn,function(t3,e3){At3.call(Bn.prototype,e3)||(ms[e3]=t3)}),ms),{chain:!1}),Bn.VERSION="4.17.21",Ee2(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t3){Bn[t3].placeholder=Bn}),Ee2(["drop","take"],function(e3,n3){Hn.prototype[e3]=function(r3){r3=r3===t2?1:_n(gu(r3),0);var i3=this.__filtered__&&!n3?new Hn(this):this.clone();return i3.__filtered__?i3.__takeCount__=wn(r3,i3.__takeCount__):i3.__views__.push({size:wn(r3,p2),type:e3+(i3.__dir__<0?"Right":"")}),i3},Hn.prototype[e3+"Right"]=function(t3){return this.reverse()[e3](t3).reverse()}}),Ee2(["filter","map","takeWhile"],function(t3,e3){var n3=e3+1,r3=n3==1||n3==3;Hn.prototype[t3]=function(t4){var e4=this.clone();return e4.__iteratees__.push({iteratee:ca(t4,3),type:n3}),e4.__filtered__=e4.__filtered__||r3,e4}}),Ee2(["head","last"],function(t3,e3){var n3="take"+(e3?"Right":"");Hn.prototype[t3]=function(){return this[n3](1).value()[0]}}),Ee2(["initial","tail"],function(t3,e3){var n3="drop"+(e3?"":"Right");Hn.prototype[t3]=function(){return this.__filtered__?new Hn(this):this[n3](1)}}),Hn.prototype.compact=function(){return this.filter(is)},Hn.prototype.find=function(t3){return this.filter(t3).head()},Hn.prototype.findLast=function(t3){return this.reverse().find(t3)},Hn.prototype.invokeMap=Zr(function(t3,e3){return typeof t3=="function"?new Hn(this):this.map(function(n3){return Tr(n3,t3,e3)})}),Hn.prototype.reject=function(t3){return this.filter(Ao(ca(t3)))},Hn.prototype.slice=function(e3,n3){e3=gu(e3);var r3=this;return r3.__filtered__&&(e3>0||n3<0)?new Hn(r3):(e3<0?r3=r3.takeRight(-e3):e3&&(r3=r3.drop(e3)),n3!==t2&&(r3=(n3=gu(n3))<0?r3.dropRight(-n3):r3.take(n3-e3)),r3)},Hn.prototype.takeRightWhile=function(t3){return this.reverse().takeWhile(t3).reverse()},Hn.prototype.toArray=function(){return this.take(p2)},br(Hn.prototype,function(e3,n3){var r3=/^(?:filter|find|map|reject)|While$/.test(n3),i3=/^(?:head|last)$/.test(n3),a3=Bn[i3?"take"+(n3=="last"?"Right":""):n3],o3=i3||/^find/.test(n3);a3&&(Bn.prototype[n3]=function(){var n4=this.__wrapped__,u3=i3?[1]:arguments,s3=n4 instanceof Hn,c3=u3[0],l3=s3||Ho(n4),f3=__name(function(t3){var e4=a3.apply(Bn,Ue2([t3],u3));return i3&&p3?e4[0]:e4},"f3");l3&&r3&&typeof c3=="function"&&c3.length!=1&&(s3=l3=!1);var p3=this.__chain__,d3=!!this.__actions__.length,h3=o3&&!p3,g3=s3&&!d3;if(!o3&&l3){n4=g3?n4:new Hn(this);var v3=e3.apply(n4,u3);return v3.__actions__.push({func:ho,args:[f3],thisArg:t2}),new qn(v3,p3)}return h3&&g3?e3.apply(this,u3):(v3=this.thru(f3),h3?i3?v3.value()[0]:v3.value():v3)})}),Ee2(["pop","push","shift","sort","splice","unshift"],function(t3){var e3=Tt3[t3],n3=/^(?:push|sort|unshift)$/.test(t3)?"tap":"thru",r3=/^(?:pop|shift)$/.test(t3);Bn.prototype[t3]=function(){var t4=arguments;if(r3&&!this.__chain__){var i3=this.value();return e3.apply(Ho(i3)?i3:[],t4)}return this[n3](function(n4){return e3.apply(Ho(n4)?n4:[],t4)})}}),br(Hn.prototype,function(t3,e3){var n3=Bn[e3];if(n3){var r3=n3.name+"";At3.call(On,r3)||(On[r3]=[]),On[r3].push({name:e3,func:n3})}}),On[Bi(t2,2).name]=[{name:"wrapper",func:t2}],Hn.prototype.clone=function(){var t3=new Hn(this.__wrapped__);return t3.__actions__=Ni(this.__actions__),t3.__dir__=this.__dir__,t3.__filtered__=this.__filtered__,t3.__iteratees__=Ni(this.__iteratees__),t3.__takeCount__=this.__takeCount__,t3.__views__=Ni(this.__views__),t3},Hn.prototype.reverse=function(){if(this.__filtered__){var t3=new Hn(this);t3.__dir__=-1,t3.__filtered__=!0}else(t3=this.clone()).__dir__*=-1;return t3},Hn.prototype.value=function(){var t3=this.__wrapped__.value(),e3=this.__dir__,n3=Ho(t3),r3=e3<0,i3=n3?t3.length:0,a3=function(t4,e4,n4){for(var r4=-1,i4=n4.length;++r4<i4;){var a4=n4[r4],o4=a4.size;switch(a4.type){case"drop":t4+=o4;break;case"dropRight":e4-=o4;break;case"take":e4=wn(e4,t4+o4);break;case"takeRight":t4=_n(t4,e4-o4)}}return{start:t4,end:e4}}(0,i3,this.__views__),o3=a3.start,u3=a3.end,s3=u3-o3,c3=r3?u3:o3-1,l3=this.__iteratees__,f3=l3.length,p3=0,d3=wn(s3,this.__takeCount__);if(!n3||!r3&&i3==s3&&d3==s3)return gi(t3,this.__actions__);var h3=[];t:for(;s3--&&p3<d3;){for(var g3=-1,v3=t3[c3+=e3];++g3<f3;){var y3=l3[g3],m3=y3.iteratee,_3=y3.type,w3=m3(v3);if(_3==2)v3=w3;else if(!w3){if(_3==1)continue t;break t}}h3[p3++]=v3}return h3},Bn.prototype.at=go,Bn.prototype.chain=function(){return po(this)},Bn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===t2&&(this.__values__=du(this.value()));var e3=this.__index__>=this.__values__.length;return{done:e3,value:e3?t2:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e3){for(var n3,r3=this;r3 instanceof Wn;){var i3=Ra(r3);i3.__index__=0,i3.__values__=t2,n3?a3.__wrapped__=i3:n3=i3;var a3=i3;r3=r3.__wrapped__}return a3.__wrapped__=e3,n3},Bn.prototype.reverse=function(){var e3=this.__wrapped__;if(e3 instanceof Hn){var n3=e3;return this.__actions__.length&&(n3=new Hn(this)),(n3=n3.reverse()).__actions__.push({func:ho,args:[to],thisArg:t2}),new qn(n3,this.__chain__)}return this.thru(to)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,re2&&(Bn.prototype[re2]=function(){return this}),Bn},"rt3")();ve2?((ve2.exports=yn)._=yn,ge2._=yn):he2._=yn}).call(ie.exports)),ie.exports);function se(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}__name(se,"se");(function(){function t2(t3,e2){this.isCanvasRoot=!0,this.DEBUG=!1,this.onUpdateFunction=void 0,this.scheduledStateUpdates=[],this.scheduledUpdateIds=[],this.scheduledUpdateNodeMap={},this.currentUpdateId="",this.updateScheduled=!1,this.updateRunning=!1,this.taintedLayers=[],this.cameraNode=void 0,this.scheduledCameraNode=void 0,this.canvas=e2,this.rootNode=t3(this),this.rootNode.windowDidMountPrimitive(this.rootNode.props),this.rootNode.setAsPrimaryCamera()}return __name(t2,"t2"),Object.defineProperty(t2.prototype,"windows",{get:__name(function(){var t3=__name(function(e2){return a([e2],i(e2.children.flatMap(t3)),!1)},"t3");return ue.orderBy(t3(this.rootNode),function(t4){return t4.getLayer()},"asc")},"get"),enumerable:!1,configurable:!0}),t2.prototype.logWindows=function(){var t3=__name(function(e2){var n22=e2._boxSnapshot,r2=[];if(r2.push("KEY: ".concat(e2.key)),e2._isPrimaryCamera&&r2.push("[[PRIMARY CAMERA]]"),r2.push("LAYER: ".concat(e2.getLayer())),r2.push("BOX: [".concat(e2.o[0],", ").concat(e2.o[1],", ").concat(e2.w,", ").concat(e2.h,"]")),r2.push("GLOBAL O: [".concat(e2.globalO[0],", ").concat(e2.globalO[1],"]")),r2.push("CHILDREN:"),e2.children.length>0){for(var i2=e2.children,a2=[],o2=0;o2<i2.length;o2++){var u2=i2[o2];a2.push(t3(u2))}for(r2.push(" |"),o2=0;o2<a2.length;o2++){for(var s2=a2[o2],c2=o2===a2.length-1?" ":" ",l2=0;l2<s2.length;l2++){var f2=l2===0?c2:o2===a2.length-1?"   ":" | ",p2=s2[l2];r2.push("".concat(f2,"  ").concat(p2))}o2<a2.length-1&&r2.push(" |")}}else r2.push("  |"),r2.push("   (no children)");return e2._boxSnapshot=n22,r2},"t3");console.log(t3(this.rootNode).join(`
`))},t2.prototype.onUpdate=function(t3){this.onUpdateFunction=t3},Object.defineProperty(t2.prototype,"cameraSnapshot",{get:__name(function(){return this.cameraNode?new Kt(this.cameraNode.globalO,this.cameraNode.w,this.cameraNode.h):new Kt([0,0],this.canvas.width,this.canvas.height)},"get"),enumerable:!1,configurable:!0}),t2.prototype.scheduleStateUpdate=function(t3,e2){var n22=this.scheduleUpdate(t3);this.scheduledStateUpdates.push([n22,function(){t3.state=e2}])},t2.prototype.scheduleContextUpdate=function(t3,e2,n22){var r2=this.scheduleUpdate(t3);this.scheduledStateUpdates.push([r2,function(){t3.context[e2]=n22}])},t2.prototype.setSingleUpdateFlag=function(t3,e2){this.scheduledUpdateNodeMap[e2]||(this.scheduledUpdateNodeMap[e2]={}),this.scheduledUpdateNodeMap[e2][t3.globalKey]=!0},t2.prototype.scheduleUpdate=function(t3){var e2=this,n22=__name(function(){e2.DEBUG&&console.log("Scheduling update for ".concat(t3.globalKey,". Received id ").concat(e2.currentUpdateId))},"n2");if(!this.updateRunning&&!this.updateScheduled){this.updateScheduled=!0;var r2=se();return this.scheduledUpdateIds.push(r2),this.currentUpdateId=r2,Promise.resolve().then(function(){for(e2.DEBUG&&console.log("Executing batched updates: Update Ids are ".concat(JSON.stringify(e2.scheduledUpdateIds,null,2),`.
                    `)),e2.updateRunning=!0;e2.scheduledUpdateIds.length>0;)e2.updateScheduled=!1,e2.updateCurrentId();e2.updateRunning=!1}),this.setSingleUpdateFlag(t3,this.currentUpdateId),n22(),this.currentUpdateId}if(!this.updateRunning&&this.updateScheduled)return this.setSingleUpdateFlag(t3,this.currentUpdateId),n22(),this.currentUpdateId;if(this.updateRunning&&!this.updateScheduled)return this.updateScheduled=!0,r2=se(),this.scheduledUpdateIds.push(r2),this.currentUpdateId=r2,this.setSingleUpdateFlag(t3,this.currentUpdateId),n22(),this.currentUpdateId;if(this.updateRunning&&this.updateScheduled)return this.setSingleUpdateFlag(t3,this.currentUpdateId),n22(),this.currentUpdateId;throw new Error("Invalid state")},t2.prototype.onAnimationFrame=function(){try{this.render()}catch(t3){console.error(t3)}},t2.prototype.propogateUpdateFlags=function(t3){var e2=this,n22=__name(function(t4,r2,i2){e2.scheduledUpdateNodeMap[r2]||(e2.scheduledUpdateNodeMap[r2]={}),e2.scheduledUpdateNodeMap[r2][t4.globalKey]&&(i2=!0),e2.scheduledUpdateNodeMap[r2][t4.globalKey]=i2,t4.children.forEach(function(t5){return n22(t5,r2,i2)})},"n2");n22(this.rootNode,t3,!1)},t2.prototype.updateCurrentId=function(){var t3=this,e2=this.scheduledUpdateIds[0];Object.keys(this.scheduledUpdateNodeMap[e2]).forEach(function(n3){t3.propogateUpdateFlags(e2)}),this.DEBUG&&console.log("STARTING UPDATE: Update with id: ".concat(this.scheduledUpdateIds[0],`. 
STATE UPDATE STAGE. State updates are scheduled for `).concat(this.scheduledStateUpdates.map(function(t4){return i(t4,1)[0]}),`.
            `)),this.scheduledUpdateIds=this.scheduledUpdateIds.filter(function(t4){return t4!==e2}),this.scheduledStateUpdates.filter(function(t4){return i(t4,1)[0]===e2}).forEach(function(t4){var e3=i(t4,2);return e3[0],(0,e3[1])()}),this.scheduledStateUpdates=this.scheduledStateUpdates.filter(function(t4){return i(t4,1)[0]!==e2});var n22=this.scheduledUpdateNodeMap[e2];this.update(n22),delete this.scheduledUpdateNodeMap[e2]},t2.prototype.taintLayer=function(t3){this.taintedLayers.includes(t3)||this.taintedLayers.push(t3)},t2.prototype.findCameraPathRecursive=function(t3,e2){var r2,i2;if(t3._isPrimaryCamera){var a2=t3.globalKey;return c2=n(n({},e2),((r2={})[a2]=!0,r2))}for(var o2=t3.children,u2=0;u2<o2.length;u2++){var s2=o2[u2],c2=(a2=s2.globalKey,n(n({},e2),((i2={})[a2]=!0,i2))),l2=this.findCameraPathRecursive(s2,c2);if(l2)return l2}},t2.prototype.AND_updateMaps=function(t3,e2){var n22={};for(var r2 in t3)e2[r2]&&(n22[r2]=!0);return n22},t2.prototype.XOR_updateMaps=function(t3,e2){var n22={};for(var r2 in t3)e2[r2]||(n22[r2]=!0);for(var r2 in e2)t3[r2]||(n22[r2]=!0);return n22},t2.prototype.factorizeUpdateMap=function(t3,e2){var n22=this.AND_updateMaps(t3,e2);return[n22,this.XOR_updateMaps(t3,n22)]},t2.prototype.setNeedsUpdateToMap=function(t3){var e2=__name(function(n22){var r2=n22.globalKey;t3[r2]?n22._needsUpdate=!0:n22._needsUpdate=!1,n22.children.forEach(function(t4){return e2(t4)})},"e2");e2(this.rootNode)},t2.prototype.setNeedsUpdateToMapAdd=function(t3){var e2=__name(function(n22){var r2=n22.globalKey;t3[r2]&&(n22._needsUpdate=!0),n22.children.forEach(function(t4){return e2(t4)})},"e2");e2(this.rootNode)},t2.prototype.installCamera=function(t3){this.cameraNode!==t3&&(this.scheduledCameraNode=t3,this.scheduleUpdate(this.rootNode))},t2.prototype.update=function(t3){this.onUpdateFunction&&this.onUpdateFunction(),this.scheduledCameraNode&&(this.cameraNode&&(this.cameraNode._isPrimaryCamera=!1),this.cameraNode=this.scheduledCameraNode,this.cameraNode._isPrimaryCamera=!0,this.scheduledCameraNode=void 0);var e2=this.findCameraPathRecursive(this.rootNode,{});if(!e2)throw new Error("No camera found in the tree");var n22=i(this.factorizeUpdateMap(t3,e2),2),r2=n22[0],a2=n22[1];this.DEBUG&&console.log("RENDER STAGE. Updates flags are set for: ".concat(JSON.stringify(Object.keys(t3),null,2),`.
Will update in the two passes:
First pass: `).concat(JSON.stringify(Object.keys(r2),null,2),`
Second pass: `).concat(JSON.stringify(Object.keys(a2),null,2),`
            `));var o2=__name(function(t4,e3){t4._needsUpdate?e3?t4.cameraPassUpdateSelf():t4.regularPassUpdateSelf():t4.children.forEach(function(t5){return o2(t5,e3)})},"o2");this.setNeedsUpdateToMap(r2),o2(this.rootNode,!0),this.setNeedsUpdateToMapAdd(a2),o2(this.rootNode,!1),this.setNeedsUpdateToMap({}),this.DEBUG&&(console.log(`RENDER STAGE COMPLETE. The new tree will be displayed below.
Dirty layers are `.concat(JSON.stringify(this.taintedLayers,null,2),`.
            `)),this.logWindows())},t2.prototype.render=function(){var t3=this.canvas.getContext("2d");if(!t3)throw new Error("Could not get 2d context from canvas");t3.clearRect(0,0,this.canvas.width,this.canvas.height),Xt(this.cameraSnapshot,this.windows,this.canvas,t3,this.taintedLayers),this.taintedLayers=[]},t2.prototype.mouseDownHandler=function(t3,e2){Yt(this.cameraSnapshot,this.windows,this.canvas,t3,e2)},t2.prototype.mouseMoveHandler=function(t3,e2){Qt(this.cameraSnapshot,this.windows,this.canvas,t3,e2)},t2.prototype.mouseUpHandler=function(t3,e2){te(this.cameraSnapshot,this.windows,this.canvas,t3,e2)},t2.prototype.mouseWheelHandler=function(t3){ee(this.cameraSnapshot,this.windows,this.canvas,t3)},t2.prototype.clickHandler=function(t3,e2){Zt(this.cameraSnapshot,this.windows,this.canvas,t3,e2)},t2})();function fe(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}__name(fe,"fe");var pe={type:"saveAsNamedState",namedState:"commit"},de={type:"goToNamedState",namedState:"commit"};function he(t2,e2,n22,r2,i2,a2,o2){return a2&&!o2&&(t2.timelineData.numberOfFrames,o2=[-5,0,5,0]),{type:"addPin",signalId:e2,pinId:n22,pinTime:r2,pinValue:i2,functionString:a2,bezierControlPoints:o2}}__name(he,"he");function ge(t2,e2){var n22=t2(),r2=Object.keys(n22.signalData).find(function(t3){var r3;return(r3=n22.signalData[t3])===null||r3===void 0?void 0:r3.pinIds.includes(e2)});if(!r2)throw new Error("Pin not found");var i2=n22.signalData[r2].type,a2=i2==="continuous"&&"bezier"in n22.signalData[r2],o2=n22.signalData[r2].pinTimes[e2],u2=n22.signalData[r2].pinValues[e2],s2=i2==="continuous"?n22.signalData[r2].curves[e2]:void 0,c2=a2?n22.signalData[r2].bezierControlPoints[e2]:void 0;return{type:"addNextState",forward:[{type:"deletePin",pinId:e2}],backward:[he(n22,r2,e2,o2,u2,s2,c2)]}}__name(ge,"ge");var ve=ut,ye=function(){function t2(t3){this.outgoingCommands=[],this.worm=s.deserialize(t3.worm,ve),this.stateId=t3.stateId,this.aStateId=t3.stateId,this.bStateId=crypto.randomUUID(),this.outgoingCommands=t3.outgoingCommands}return __name(t2,"t2"),t2.prototype.serialize=function(){return{worm:this.worm.serialize(),stateId:this.stateId,outgoingCommands:this.outgoingCommands}},t2.prototype.pushOutgoingCommands=function(){for(var t3,e2=[],n22=0;n22<arguments.length;n22++)e2[n22]=arguments[n22];(t3=this.outgoingCommands).push.apply(t3,a([],i(e2),!1))},t2.prototype.transferOutgoingEvent=function(){var t3={commands:this.outgoingCommands,aStateId:this.aStateId,bStateId:this.bStateId};return this.aStateId=this.bStateId,this.bStateId=crypto.randomUUID(),this.outgoingCommands=[],t3},t2.prototype.receiveIncomingEvent=function(t3){if(t3.aStateId!==this.stateId)throw new Error("Trying to apply commands to a worm that is not in sync");this.worm.executeCommands(t3.commands),this.aStateId=t3.bStateId,this.bStateId=crypto.randomUUID(),this.stateId=t3.bStateId},t2}(),me=function(){function t2(t3){var e2=this;this.lastFrame=0,this.onTimelineUpdateCallbacks=[],this.onPushUpdateCallbacks=[],this.dworm=new ye(t3),this.project=this.processProject(this.dworm.worm.content),window&&"requestAnimationFrame"in window&&this.playingLoop(),this.onTimelineUpdate(function(){var t4=e2.processProject(e2.dworm.worm.content);e2.project=t4})}return __name(t2,"t2"),t2.prototype.playingLoop=function(){var t3=this;if(this.project.timelineData.playing){var e2=this.processProject(this.dworm.worm.content).timelineData.playheadPosition;e2!==this.lastFrame&&(this.lastFrame=e2,this.onTimelineUpdateCallbacks.forEach(function(t4){return t4()}))}window.requestAnimationFrame(function(){return t3.playingLoop()})},t2.prototype.processProject=function(t3){var e2=t3.timelineData.playing,r2=t3.timelineData.playingTimestamp;if(e2){var a2=Math.floor((Date.now()-r2)/(1e3/t3.timelineData.framesPerSecond)),o2=t3.timelineData.playheadPosition,u2=i(t3.timelineData.focusRange,2),s2=u2[0],c2=u2[1];(o2<s2||o2>c2)&&(o2=s2);var l2=o2+a2;l2-=s2,l2%=c2-s2,l2+=s2,t3=n(n({},t3),{timelineData:n(n({},t3.timelineData),{playheadPosition:l2})})}return t3},t2.fromProject=function(e2){var n22="initialState";return new t2({worm:new s(e2,ve).serialize(),stateId:n22,lastAgreedStateId:n22,outgoingCommands:[]})},t2.fromSerializedWorm=function(e2){return new t2(e2)},t2.prototype.serialize=function(){return this.dworm.serialize()},t2.prototype.receiveIncomingEvent=function(t3){this.dworm.receiveIncomingEvent(t3),this.onTimelineUpdateCallbacks.forEach(function(t4){return t4()})},t2.prototype.onTimelineUpdate=function(t3){var e2=this;return this.onTimelineUpdateCallbacks.push(t3),function(){e2.onTimelineUpdateCallbacks=e2.onTimelineUpdateCallbacks.filter(function(e3){return e3!==t3})}},t2.prototype.transferOutgoingEvent=function(){return this.dworm.transferOutgoingEvent()},t2.prototype.getWorm=function(){return this.dworm.worm},t2.prototype.pushCommand=function(t3){try{var e2=t3();this.dworm.pushOutgoingCommands(e2)}catch(t4){console.error(t4)}},t2.prototype.pushCommands=function(t3){var e2;try{var n22=t3();(e2=this.dworm).pushOutgoingCommands.apply(e2,a([],i(n22),!1))}catch(t4){console.error(t4)}},t2.prototype.onPushUpdate=function(t3){var e2=this;return this.onPushUpdateCallbacks.push(t3),function(){e2.onPushUpdateCallbacks=e2.onPushUpdateCallbacks.filter(function(e3){return e3!==t3})}},t2.prototype.pushUpdate=function(){this.onPushUpdateCallbacks.forEach(function(t3){return t3()}),this.onTimelineUpdateCallbacks.forEach(function(t3){return t3()})},Object.defineProperty(t2.prototype,"projectTools",{get:__name(function(){var t3=this.pushUpdate.bind(this),e2=this.getProject.bind(this),n22=this.pushCommand.bind(this);return this.pushCommands.bind(this),function(t4,e3,n3,r2){function a2(){e3(function(){return de})}__name(a2,"a2");function o2(){e3(function(){return pe})}return __name(o2,"o2"),{returnToLastCommit:__name(function(){a2()},"returnToLastCommit"),pushUpdate:t4,addPinContinuous:__name(function(n4,i2,u2,s2,c2,l2){l2&&a2(),e3(function(){var t5=r2(),e4=t5.signalData[n4],a3=e4.pinTimes,o3=e4.pinIds.findIndex(function(t6){return a3[t6]===u2}),l3=[];o3!==-1&&l3.push({type:"deletePin",pinId:e4.pinIds[o3]}),l3.push(he(t5,n4,i2,u2,s2,c2));var f2=[];if(f2.push({type:"deletePin",pinId:i2}),o3!==-1){var p2=e4.pinIds[o3];f2.push(he(t5,n4,p2,e4.pinTimes[p2],e4.pinValues[p2],e4.curves[p2]))}return{type:"addNextState",forward:l3,backward:f2}}),l2&&(o2(),t4())},"addPinContinuous"),addPinDiscrete:__name(function(n4,i2,u2,s2,c2){c2&&a2(),e3(function(){var t5=r2(),e4=t5.signalData[n4],a3=e4.pinTimes,o3=e4.pinIds.findIndex(function(t6){return a3[t6]===u2}),c3=[];o3!==-1&&c3.push({type:"deletePin",pinId:e4.pinIds[o3]}),c3.push(he(t5,n4,i2,u2,s2));var l2=[];if(l2.push({type:"deletePin",pinId:i2}),o3!==-1){var f2=e4.pinIds[o3];l2.push(he(t5,n4,f2,e4.pinTimes[f2],e4.pinValues[f2]))}return{type:"addNextState",forward:c3,backward:l2}}),c2&&(o2(),t4())},"addPinDiscrete"),deletePin:__name(function(n4){a2(),e3(function(){return ge(r2,n4)}),o2(),t4()},"deletePin"),deletePins:__name(function(n4){a2(),n4.forEach(function(t5){e3(function(){return ge(r2,t5)})}),o2(),t4()},"deletePins"),updatePins:__name(function(n4,i2){i2&&a2();var u2=r2(),s2={type:"updatePins",pins:[]},c2={type:"updatePins",pins:[]};n4.forEach(function(t5){var e4=t5.pinId,n5=u2.orgData.signalIdByPinId[e4],r3=t5.pinTime,i3=t5.pinValue,a3=t5.pinType==="continuous"?t5.functionString:void 0,o3=u2.signalData[n5].pinTimes[e4],l2=u2.signalData[n5].pinValues[e4],f2=t5.pinType==="continuous"?u2.signalData[n5].curves[e4]:void 0,p2={pinId:e4,pinTime:r3??o3,pinValue:i3??l2,functionString:a3??f2},d2={pinId:e4,pinTime:o3,pinValue:l2,functionString:f2};s2.pins.push(p2),c2.pins.push(d2)}),e3(function(){return{type:"addNextState",forward:[s2],backward:[c2]}}),i2&&o2(),t4()},"updatePins"),updateCurve:__name(function(n4,i2){a2(),e3(function(){var t5=r2(),e4=Object.keys(t5.signalData).find(function(e5){var r3;return(r3=t5.signalData[e5])===null||r3===void 0?void 0:r3.pinIds.includes(n4)});if(!e4)throw new Error("Pin not found");if(t5.signalData[e4].type==="discrete")throw new Error("Cannot update curve of discrete signal");return{type:"addNextState",forward:[{type:"updateCurve",pinId:n4,functionString:i2}],backward:[{type:"updateCurve",pinId:n4,functionString:t5.signalData[e4].curves[n4]}]}}),o2(),t4()},"updateCurve"),updatePinBezierControlPoints:__name(function(n4,i2,u2){u2&&a2(),e3(function(){var t5=r2(),e4=Object.keys(t5.signalData).find(function(e5){var r3;return(r3=t5.signalData[e5])===null||r3===void 0?void 0:r3.pinIds.includes(n4)});if(!e4)throw new Error("Pin not found");if(t5.signalData[e4].type==="discrete")throw new Error("Cannot update bezier control points of discrete signal");if(!("bezier"in t5.signalData[e4]))throw new Error("Signal is not a bezier signal");return{type:"addNextState",forward:[{type:"updatePinBezierControlPoints",pinId:n4,bezierControlPoints:i2}],backward:[{type:"updatePinBezierControlPoints",pinId:n4,bezierControlPoints:t5.signalData[e4].bezierControlPoints[n4]}]}}),u2&&o2(),t4()},"updatePinBezierControlPoints"),createDiscreteSignal:__name(function(n4,r3,i2,u2){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"discrete",signalName:r3,defaultValue:i2,isStatic:u2,displayValues:!0}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createDiscreteSignal"),createDiscreteBeatSignal:__name(function(n4,r3){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"discrete",signalName:r3,defaultValue:"beat"}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createDiscreteBeatSignal"),createContinuousSignal:__name(function(n4,r3,i2,u2,s2,c2){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"continuous",signalName:r3,range:i2,defaultValue:u2,defaultCurve:s2,isStatic:c2}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createContinuousSignal"),createContinuousBezierSignal:__name(function(n4,r3,i2,u2,s2,c2){a2(),e3(function(){return{type:"addNextState",forward:[{type:"createSignal",signalId:n4,signalType:"continuous",signalName:r3,range:i2,defaultValue:u2,defaultCurve:s2,isStatic:c2,bezier:!0}],backward:[{type:"deleteSignal",signalId:n4}]}}),o2(),t4()},"createContinuousBezierSignal"),duplicateSignal:__name(function(n4){a2();var i2=fe();e3(function(){var t5=r2(),e4=t5.signalData[n4];if(!e4)throw new Error("Signal not found");var a3=t5.orgData.signalNames[n4],o3=e4.defaultValue,u2=e4.type==="continuous"?e4.defaultCurve:void 0,s2=e4.isStatic,c2=e4.type==="continuous"&&"bezier"in e4,l2=e4.type==="discrete"?e4.displayValues:void 0,f2=a3+"_copy",p2=e4.type==="continuous"?e4.range:void 0;return{type:"addNextState",forward:[{type:"createSignal",signalId:i2,signalType:e4.type,signalName:f2,range:p2,defaultValue:o3,defaultCurve:u2,isStatic:s2,bezier:!!c2||void 0,displayValues:!!l2||void 0}],backward:[{type:"deleteSignal",signalId:i2}]}}),e3(function(){var t5=r2(),e4=t5.signalData[n4].pinIds,a3=t5.signalData[n4].type,o3=e4.map(function(e5){var r3,i3=t5.signalData[n4].pinTimes[e5],o4=t5.signalData[n4].pinValues[e5];return a3==="continuous"&&(r3=t5.signalData[n4].curves[e5]),{pinTime:i3,pinValue:o4,functionString:r3,pinId:fe()}});return{type:"addNextState",forward:o3.map(function(e5){return he(t5,i2,e5.pinId,e5.pinTime,e5.pinValue,e5.functionString)}),backward:o3.map(function(t6){return{type:"deletePin",pinId:t6.pinId}})}}),o2(),t4()},"duplicateSignal"),deleteSignal:__name(function(n4){a2(),e3(function(){var t5=r2(),e4=t5.signalData[n4];if(!e4)throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"deleteSignal",signalId:n4}],backward:[{type:"createSignal",signalId:n4,signalType:e4.type,signalName:t5.orgData.signalNames[n4],range:e4.type==="continuous"?e4.range:void 0,defaultValue:e4.defaultValue,defaultCurve:e4.type==="continuous"?e4.defaultCurve:void 0,isStatic:e4.isStatic,bezier:e4.type==="continuous"&&"bezier"in e4||void 0,bezierControlPoints:e4.type==="continuous"&&"bezier"in e4?e4.bezierControlPoints:void 0,displayValues:e4.type==="discrete"?e4.displayValues:void 0}]}}),o2(),t4()},"deleteSignal"),updateSignalDefaultValue:__name(function(n4,i2){a2(),e3(function(){var t5=r2().signalData[n4];if(!t5)throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalDefaultValue",signalId:n4,defaultValue:i2}],backward:[{type:"updateSignalDefaultValue",signalId:n4,defaultValue:t5.defaultValue}]}}),o2(),t4()},"updateSignalDefaultValue"),updateSignalName:__name(function(n4,i2){a2(),e3(function(){var t5=r2();if(!t5.signalData[n4])throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalName",signalId:n4,signalName:i2}],backward:[{type:"updateSignalName",signalId:n4,signalName:t5.orgData.signalNames[n4]}]}}),o2(),t4()},"updateSignalName"),updateSignalRange:__name(function(n4,i2){a2(),e3(function(){var t5=r2().signalData[n4];if(!t5)throw new Error("Signal not found");if(t5.type==="discrete")throw new Error("Cannot update range of discrete signal");return{type:"addNextState",forward:[{type:"updateSignalRange",signalId:n4,range:i2}],backward:[{type:"updateSignalRange",signalId:n4,range:t5.range}]}}),o2(),t4()},"updateSignalRange"),updateSignalIndex:__name(function(n4,i2,u2){u2&&a2(),e3(function(){var t5=r2();if(!t5.signalData[n4])throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalIndex",signalId:n4,index:i2}],backward:[{type:"updateSignalIndex",signalId:n4,index:t5.orgData.activeSignalIds.indexOf(n4)}]}}),u2&&o2(),t4()},"updateSignalIndex"),updateSignalActiveStatus:__name(function(n4,i2){a2(),e3(function(){var t5=r2();if(!t5.signalData[n4])throw new Error("Signal not found");return{type:"addNextState",forward:[{type:"updateSignalActiveStatus",signalId:n4,active:i2}],backward:[{type:"updateSignalActiveStatus",signalId:n4,active:t5.orgData.activeSignalIds.includes(n4)}]}}),o2(),t4()},"updateSignalActiveStatus"),updateFramesPerSecond:__name(function(n4){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateFramesPerSecond",framesPerSecond:n4}],backward:[{type:"updateFramesPerSecond",framesPerSecond:t5.timelineData.framesPerSecond}]}}),o2(),t4()},"updateFramesPerSecond"),updatePlayheadPosition:__name(function(n4,i2){i2&&a2();var u2=r2(),s2=u2.timelineData.playing;s2&&e3(function(){return{type:"addNextState",forward:[{type:"updatePlaying",playing:!1,playingTimestamp:0}],backward:[{type:"updatePlaying",playing:s2,playingTimestamp:u2.timelineData.playingTimestamp}]}}),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updatePlayheadPosition",playheadPosition:n4}],backward:[{type:"updatePlayheadPosition",playheadPosition:t5.timelineData.playheadPosition}]}}),i2&&o2(),t4()},"updatePlayheadPosition"),startPlayback:__name(function(){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updatePlaying",playing:!0,playingTimestamp:Date.now()}],backward:[{type:"updatePlaying",playing:!1,playingTimestamp:t5.timelineData.playingTimestamp}]}}),o2(),t4()},"startPlayback"),updateFocusRange:__name(function(n4,u2){var s2=i(n4,2),c2=s2[0],l2=s2[1];u2&&a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateFocusRange",focusRange:[c2,l2]}],backward:[{type:"updateFocusRange",focusRange:t5.timelineData.focusRange}]}}),u2&&o2(),t4()},"updateFocusRange"),updateNumberOfFrames:__name(function(n4){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateNumberOfFrames",numberOfFrames:n4}],backward:[{type:"updateNumberOfFrames",numberOfFrames:t5.timelineData.numberOfFrames}]}}),o2(),t4()},"updateNumberOfFrames"),updateProjectName:__name(function(n4){a2(),e3(function(){var t5=r2();return{type:"addNextState",forward:[{type:"updateProjectName",projectName:n4}],backward:[{type:"updateProjectName",projectName:t5.metaData.name}]}}),o2(),t4()},"updateProjectName"),undo:__name(function(){a2(),e3(function(){return{type:"previous"}}),o2(),t4()},"undo"),redo:__name(function(){a2(),e3(function(){return{type:"next"}}),o2(),t4()},"redo"),addCurveTemplate:__name(function(n4,r3){e3(function(){return{type:"appendToCurrentState",forward:[{type:"addCurveTemplate",curveId:n4,functionString:r3}],backward:[{type:"deleteCurveTemplate",curveId:n4}]}}),t4()},"addCurveTemplate"),deleteCurveTemplate:__name(function(n4){e3(function(){return{type:"appendToCurrentState",forward:[{type:"deleteCurveTemplate",curveId:n4}],backward:[{type:"addCurveTemplate",curveId:n4,functionString:r2().templateData[n4]}]}}),t4()},"deleteCurveTemplate"),updateCurveTemplate:__name(function(n4,i2){e3(function(){return{type:"appendToCurrentState",forward:[{type:"updateCurveTemplate",curveId:n4,functionString:i2}],backward:[{type:"updateCurveTemplate",curveId:n4,functionString:r2().templateData[n4]}]}}),t4()},"updateCurveTemplate")}}(t3,n22,0,e2)},"get"),enumerable:!1,configurable:!0}),t2.prototype.getProject=function(){return this.project},t2.prototype.prettyPrintProject=function(){console.log(JSON.stringify(this.getProject(),null,2))},t2.prototype.interpolateSignalValueAtTime=function(t3,e2){var n22=this.getProject();return Rt(n22,t3,e2)},t2}(),_e=Object.freeze({__proto__:null,TimelineController:me});const _CK_Circuit=class _CK_Circuit{constructor(registerUnitProcessor,w2){__publicField(this,"workload");__publicField(this,"registerUnitProcessor");__publicField(this,"registeredRoutes",{});this.registerUnitProcessor=registerUnitProcessor,this.workload=w2}registerRoute(route,instance,callback){if(!(route in this.registeredRoutes)){const responseRoute=`${route}_response`;this.registeredRoutes[route]=this.registerUnitProcessor(unit=>unit.type==="worker"&&unit.sender.instance_id===instance.instance_id&&unit.sender.resource_id===instance.resource_id&&unit.sender.modality===instance.modality&&responseRoute in unit.payload,(unit,workload)=>{this.workload=workload,callback(unit.payload[responseRoute]),this.registeredRoutes[route](),delete this.registeredRoutes[route]})}}complete(){for(const route in this.registeredRoutes)this.registeredRoutes[route]();this.registeredRoutes={},this.workload.dispatch()}instance(instance){return new CK_Circuit_Instance(instance,this)}thread(threadId){return this.workload.thread(threadId)}};__name(_CK_Circuit,"CK_Circuit");let CK_Circuit=_CK_Circuit;const _CK_Circuit_Instance=class _CK_Circuit_Instance{constructor(instance,circuit){__publicField(this,"instance");__publicField(this,"circuit");this.instance=instance,this.circuit=circuit}async call(route,payload){return this.circuit.workload.thread("default").worker(this.instance,{[route]:payload}),this.circuit.workload.dispatch(),await new Promise((resolve,reject)=>{this.circuit.registerRoute(route,this.instance,payload2=>{resolve(payload2)})})}};__name(_CK_Circuit_Instance,"CK_Circuit_Instance");let CK_Circuit_Instance=_CK_Circuit_Instance;const CONFIG={PAC_BACKGROUND_SERVICES:"https://mtrifonov-design.github.io/pinsandcurves-background-services/",SELF_HOST:"https://mtrifonov-design.github.io/pinsandcurves-panels/#"},_Asset=class _Asset{constructor(assetId,subscriptionId,controller,notifySubscribers,FreeWorkload){__publicField(this,"initialized",!1);__publicField(this,"unsubscribeSync");this.assetId=assetId,this.subscriptionId=subscriptionId,this.controller=controller,this.notifySubscribers=notifySubscribers,this.FreeWorkload=FreeWorkload;const instance={instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`};this.controller.setHooks({update:__name(update=>{const w2=this.FreeWorkload();w2.thread("default").worker(instance,{updateAsset:{asset_id:this.assetId,subscription_id:this.subscriptionId,update}}),w2.dispatch()},"update"),updateMetadata:__name(metadata=>{const w2=this.FreeWorkload();w2.thread("default").worker(instance,{updateAssetMetadata:{asset_id:this.assetId,subscription_id:this.subscriptionId,metadata}}),w2.dispatch()},"updateMetadata")})}async unsubscribe(c){const instance={instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`};await c.instance(instance).call("unsubscribeFromAsset",{asset_id:this.assetId,subscription_id:this.subscriptionId})}static async subscribe(vertexId,assetId,controller,c,registerUnitProcessor,notifySubscribers,FreeWorkload){const instance={instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},subscriptionId=`${vertexId}_${assetId}`,a2=new _Asset(assetId,subscriptionId,controller,notifySubscribers,FreeWorkload);return a2.unsubscribeSync=registerUnitProcessor(unit=>{if(!(unit.type==="worker"))return!1;const{receiveUpdate,receiveMetadataUpdate,getAssetResponse}=unit.payload,optionA=receiveUpdate?receiveUpdate.subscription_id===a2.subscriptionId:!1,optionB=receiveMetadataUpdate?receiveMetadataUpdate.subscription_id===a2.subscriptionId:!1,optionC=getAssetResponse?getAssetResponse.asset_id===assetId:!1;return optionA||optionB||optionC},(unit,workload)=>{if(unit.payload.receiveUpdate){const update=unit.payload.receiveUpdate.update;controller.receiveUpdate(update)}else if(unit.payload.receiveMetadataUpdate){const metadataUpdate=unit.payload.receiveMetadataUpdate.metadata;controller.receiveMetadataUpdate(metadataUpdate)}else if(unit.payload.getAssetResponse){const assetData=unit.payload.getAssetResponse.asset_data;a2.initialized=!0,controller.load(assetData)}notifySubscribers(),workload.dispatch()}),await c.instance(instance).call("subscribeToExistingAsset",{asset_id:assetId,subscription_id:subscriptionId}),a2}};__name(_Asset,"Asset");let Asset=_Asset;const _SubscriptionManager=class _SubscriptionManager{constructor(FreeWorkload,registerUnitProcessor){__publicField(this,"assetRegistry",{});__publicField(this,"diffSubmissionRunning",!1);__publicField(this,"diffSubmissionQueue",[]);__publicField(this,"initialized",!1);__publicField(this,"terminated",!1);__publicField(this,"vertexId");__publicField(this,"assets",{});__publicField(this,"subscribers",[]);this.FreeWorkload=FreeWorkload,this.registerUnitProcessor=registerUnitProcessor}async submitAssetIdDiffs(diffs){if(this.diffSubmissionQueue.push(diffs),!this.diffSubmissionRunning){for(this.diffSubmissionRunning=!0;this.diffSubmissionQueue.length>0;){const currentDiffs=this.diffSubmissionQueue.shift();if(currentDiffs){if(this.terminated)return;const{in:inIds,out:outIds}=currentDiffs;outIds.forEach(({assetId})=>delete this.assetRegistry[assetId]),inIds.forEach(({assetId,assetController})=>{this.assetRegistry[assetId]=assetController});const w2=this.FreeWorkload(),c=new CK_Circuit(this.registerUnitProcessor,w2);await this.syncAssets(c),c.complete(),this.notifySubscribers()}}this.diffSubmissionRunning=!1}}async init(vertexId,c){this.initialized=!0,this.vertexId=vertexId,await this.syncAssets(c),this.notifySubscribers()}async terminate(c){this.terminated=!0;for(const asset of Object.values(this.assets))console.log("Unsubscribing from asset",asset),await asset.unsubscribe(c);this.assets={},this.notifySubscribers()}async syncAssets(c){if(!this.initialized)return;const unusedAssets=Object.keys(this.assets).filter(id=>!Object.keys(this.assetRegistry).includes(id));for(const id of unusedAssets)await this.assets[id].unsubscribe(c),delete this.assets[id];const newAssets=Object.keys(this.assetRegistry).filter(id=>!this.assets[id]);for(let i2=0;i2<newAssets.length;i2++){const id=newAssets[i2],controller=this.assetRegistry[id],asset=await Asset.subscribe(this.vertexId,id,controller,c,this.registerUnitProcessor,this.notifySubscribers.bind(this),this.FreeWorkload);this.assets[id]=asset}}subscribe(cb){return this.subscribers.push(cb),()=>{this.subscribers=this.subscribers.filter(sub2=>sub2!==cb)}}getSnapshot(){return this.assets}notifySubscribers(){this.assets={...this.assets},this.subscribers.forEach(cb=>cb())}};__name(_SubscriptionManager,"SubscriptionManager");let SubscriptionManager=_SubscriptionManager;const _CK_Workload_Class=class _CK_Workload_Class{constructor(onDispatch){__publicField(this,"onDispatch");__publicField(this,"metadata",{});__publicField(this,"threads",{});__publicField(this,"expired",!1);this.onDispatch=onDispatch}setMetadata(key,value){this.metadata[key]=value}thread(tId){return this.threads[tId]||(this.threads[tId]=[]),new CK_Thread_Class(tId,this.threads)}dispatch(){if(this.expired)throw new Error("Workload expired");this.expired=!0,this.onDispatch(this.threads,this.metadata)}};__name(_CK_Workload_Class,"CK_Workload_Class");let CK_Workload_Class=_CK_Workload_Class;const _CK_Thread_Class=class _CK_Thread_Class{constructor(threadId,threads){__publicField(this,"threadId");__publicField(this,"threads");this.threadId=threadId,this.threads=threads}worker(receiver,payload){const unit={type:"worker",id:crypto.randomUUID(),receiver,payload};this.threads[this.threadId].push(unit)}blocker(blocker_id,blocker_count){const unit={type:"blocker",id:crypto.randomUUID(),blocker_id,blocker_count};this.threads[this.threadId].push(unit)}terminate(instance){const unit={type:"terminate",id:crypto.randomUUID(),instance};this.threads[this.threadId].push(unit)}};__name(_CK_Thread_Class,"CK_Thread_Class");let CK_Thread_Class=_CK_Thread_Class;const CK_Context=reactExports.createContext(null);function CK_Provider(p2){reactExports.useEffect(()=>{const{renderedCallback}=p2;renderedCallback&&renderedCallback()},[]);const FreeWorkload=__name(()=>new CK_Workload_Class((w2,m2)=>{p2.pushWorkload(w2,m2)}),"FreeWorkload");return jsxRuntimeExports.jsx(CK_Context.Provider,{value:{FreeWorkload,onUnit:p2.onUnit},children:p2.children})}__name(CK_Provider,"CK_Provider");function useCK(){const context=React.useContext(CK_Context);if(!context)throw new Error("useCK must be used within a CK_Provider");return context}__name(useCK,"useCK");const _UnitManager=class _UnitManager{constructor(){__publicField(this,"unitProcessors");this.unitProcessors=[]}registerUnitProcessor(selector,reactor){return this.unitProcessors.push({selector,reactor}),()=>{this.unitProcessors=this.unitProcessors.filter(up=>up.selector!==selector&&up.reactor!==reactor)}}processUnit(unit,workload){for(let i2=0;i2<this.unitProcessors.length;i2++){const{selector,reactor}=this.unitProcessors[i2];if(selector(unit)){reactor(unit,workload);return}}}};__name(_UnitManager,"UnitManager");let UnitManager=_UnitManager;const CK_UnitContext=React.createContext(null);function CK_UnitProvider(props){const{onUnit}=useCK(),unitManager=React.useRef(new UnitManager).current;return reactExports.useEffect(()=>{onUnit((unit,workload)=>unitManager.processUnit(unit,workload))}),jsxRuntimeExports.jsx(CK_UnitContext.Provider,{value:{registerUnitProcessor:unitManager.registerUnitProcessor.bind(unitManager)},children:props.children})}__name(CK_UnitProvider,"CK_UnitProvider");function useRegisterUnitProcessor(){const context=React.useContext(CK_UnitContext);if(!context)throw new Error("useRegisterUnitProcessor must be used within a CK_UnitProvider");const{registerUnitProcessor}=context;return registerUnitProcessor}__name(useRegisterUnitProcessor,"useRegisterUnitProcessor");function useUnit(selector,reactor){const registerUnitProcessor=useRegisterUnitProcessor();reactExports.useEffect(()=>{const unsubscribe=registerUnitProcessor(selector,reactor);return()=>{unsubscribe()}},[selector,reactor,registerUnitProcessor])}__name(useUnit,"useUnit");const AssetManagerContext=reactExports.createContext(null),AssetProvider=__name(({children})=>{const registerUnitProcessor=useRegisterUnitProcessor(),{FreeWorkload}=useCK(),subscriptionManager=reactExports.useRef(new SubscriptionManager(FreeWorkload,registerUnitProcessor)).current,assets=reactExports.useSyncExternalStore(subscriptionManager.subscribe.bind(subscriptionManager),subscriptionManager.getSnapshot.bind(subscriptionManager));return useUnit(unit=>(console.log("unit test",unit),"INIT"in unit.payload),async(unit,workload)=>{const vertexId=unit.payload.payload.vertexId,c=new CK_Circuit(registerUnitProcessor,workload);await subscriptionManager.init(vertexId,c),c.complete()}),useUnit(unit=>"TERMINATE"in unit.payload,async(unit,workload)=>{const blockerId=unit.payload.blocker_id,c=new CK_Circuit(registerUnitProcessor,workload);await subscriptionManager.terminate(c),c.thread("default").blocker(blockerId,2),c.complete()}),jsxRuntimeExports.jsx(AssetManagerContext.Provider,{value:{assets,submitAssetIdDiffs:subscriptionManager.submitAssetIdDiffs.bind(subscriptionManager)},children})},"AssetProvider");function useAssets(assetList){const{assets,submitAssetIdDiffs}=reactExports.useContext(AssetManagerContext),lastAssetListRef=reactExports.useRef([]);reactExports.useEffect(()=>{const lastAssetList=lastAssetListRef.current;if(lastAssetList.length===assetList.length&&lastAssetList.every((item,index)=>item.assetId===assetList[index].assetId))return;const outList=lastAssetListRef.current;submitAssetIdDiffs({in:assetList,out:outList}),lastAssetListRef.current=assetList},[assetList,submitAssetIdDiffs,lastAssetListRef]);const finalAssets={};let initialized=!0;for(let i2=0;i2<assetList.length;i2++){const{assetId}=assetList[i2],asset=assets[assetId];asset&&asset.initialized?finalAssets[assetId]=asset.controller:initialized=!1}return{initialized,assets:finalAssets}}__name(useAssets,"useAssets");const _IndexController=class _IndexController{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata");__publicField(this,"create");__publicField(this,"delete");__publicField(this,"subscribe");__publicField(this,"unsubscribe")}load(data){this.data=data,this.initialised=!0}receiveUpdate(update){this.data=update}destroy(){this.data=void 0,this.initialised=!1}receiveMetadataUpdate(update){}getSnapshot(){return this.data}setHooks(hooks){this.update=hooks.update,this.create=hooks.create,this.delete=hooks.delete,this.subscribe=hooks.subscribe,this.unsubscribe=hooks.unsubscribe,this.updateMetadata=hooks.updateMetadata}};__name(_IndexController,"IndexController");let IndexController=_IndexController;function useIndex(){const indexController=reactExports.useRef(new IndexController),{initialized,assets}=useAssets([{assetId:"index",assetController:indexController.current}]);return initialized?{initialized,index:assets.index}:{initialized,index:void 0}}__name(useIndex,"useIndex");const pb$4=new u$1.ProjectBuilder;pb$4.setTimelineData(900,30,0);pb$4.addContinuousSignal("s1","Signal 1",[0,1]);pb$4.addPin("s1",20,0,"return easyLinear()");pb$4.addPin("s1",40,1,"return easyEaseOut()");pb$4.addPin("s1",60,0,"return easyEaseIn()");pb$4.setSignalActiveStatus("s1",!0);const makeFile=__name(()=>{const project=pb$4.getProject();return _e.TimelineController.fromProject(project).serialize()},"makeFile"),Controller$5=_e.TimelineController,_TController=class _TController{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=new Controller$5(data),this.data.onPushUpdate(()=>{const update=this.data.transferOutgoingEvent();update.commands.length!==0&&this.update(update)}),this.initialised=!0}receiveUpdate(update){this.data.receiveIncomingEvent(update)}receiveMetadataUpdate(update){}getSnapshot(){if(this.data!==void 0)return this.data.getProject()}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}};__name(_TController,"TController");let TController=_TController;const TimelineContext=reactExports.createContext(null);function TimelineProvider({children,defaultProject:defaultProject2,defaultName:defaultName2,shouldCreate=!1}){const{initialized:indexInitialized,index}=useIndex(),tController=reactExports.useRef(new TController),timelineAssets=indexInitialized?Object.entries(index.data).filter(([assetId2,assetMetadata])=>assetMetadata.type==="timeline").map(([assetId2,assetMetadata])=>({assetId:assetId2,assetController:tController.current})):[],assetId=timelineAssets.length>0?timelineAssets[0].assetId:void 0,{FreeWorkload}=useCK();reactExports.useEffect(()=>{if(indexInitialized&&assetId===void 0&&shouldCreate){console.log("Creating default timeline asset");const workload=FreeWorkload();workload.thread("default").worker({instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},{createAsset:{asset:{data:defaultProject2!==void 0?defaultProject2():makeFile(),metadata:{type:"timeline",name:defaultName2||"default.timeline",preferredEditorAddress:CONFIG.SELF_HOST+"editing"},on_update:{type:"custom",processor:{modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}TimelineProcessor`}},id:defaultName2||"default.timeline"}}}),workload.dispatch()}},[assetId,indexInitialized]);const{initialized:assetsInitialized,assets}=useAssets(timelineAssets),timeline=indexInitialized&&assetsInitialized&&assetId!==void 0&&assets[assetId]!==void 0?assets[assetId].data:void 0;return jsxRuntimeExports.jsx(TimelineContext.Provider,{value:timeline,children})}__name(TimelineProvider,"TimelineProvider");function useTimeline(){return React.useContext(TimelineContext)}__name(useTimeline,"useTimeline");var _externalStateSubscribers,_Controls_instances,notifyExternalStateSubscribers_fn,_internalSubscribers,notifyInternalSubscribers_fn,_externalSubscribers,notifyExternalSubscribers_fn,_a2;let Controls$2=(_a2=class{constructor(data){__privateAdd(this,_Controls_instances);__publicField(this,"data");__publicField(this,"externalState",crypto.randomUUID());__privateAdd(this,_externalStateSubscribers,[]);__privateAdd(this,_internalSubscribers,[]);__privateAdd(this,_externalSubscribers,[]);this.data=data}setData(data){this.data=data,__privateMethod(this,_Controls_instances,notifyExternalSubscribers_fn).call(this)}receiveExternalUpdate(update){this.data=update,this.externalState=crypto.randomUUID(),__privateMethod(this,_Controls_instances,notifyExternalStateSubscribers_fn).call(this),__privateMethod(this,_Controls_instances,notifyInternalSubscribers_fn).call(this)}subscribeToExternalState(cb){return __privateGet(this,_externalStateSubscribers).push(cb),()=>{__privateSet(this,_externalStateSubscribers,__privateGet(this,_externalStateSubscribers).filter(c=>c!==cb))}}getExternalState(){return this.externalState}subscribeInternal(cb){return __privateGet(this,_internalSubscribers).push(cb),()=>{__privateSet(this,_internalSubscribers,__privateGet(this,_internalSubscribers).filter(c=>c!==cb))}}subscribeExternal(cb){return __privateGet(this,_externalSubscribers).push(cb),()=>{__privateSet(this,_externalSubscribers,__privateGet(this,_externalSubscribers).filter(c=>c!==cb))}}getSnapshot(){return this.data}},_externalStateSubscribers=new WeakMap,_Controls_instances=new WeakSet,notifyExternalStateSubscribers_fn=__name(function(){__privateGet(this,_externalStateSubscribers).forEach(cb=>cb())},"#notifyExternalStateSubscribers"),_internalSubscribers=new WeakMap,notifyInternalSubscribers_fn=__name(function(){console.log("Internal subscribers count:",__privateGet(this,_internalSubscribers)),__privateGet(this,_internalSubscribers).forEach(cb=>cb())},"#notifyInternalSubscribers"),_externalSubscribers=new WeakMap,notifyExternalSubscribers_fn=__name(function(){__privateGet(this,_externalSubscribers).forEach(cb=>cb())},"#notifyExternalSubscribers"),__name(_a2,"Controls"),__publicField(_a2,"defaultControls",{canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,innerRadius:.2,outerRadius:.8,startAngle:0,endAngle:360,rayLife:120,numCycles:3,numRays:100,rayColors:[[255,0,0]],blendMode:"normal",thickness:.5,feather:.2,shape:"constant",amplitude:.2,frequency:.5,pattern:"sine",perspectiveSkew:.1,includeFadeInOut:!0,phaseRandomization:.1,backgroundColor:[0,0,0],rayLength:.5,rayLengthRandomization:.1,thicknessRandomization:.1,innerRadiusRandomization:.1,outerRadiusRandomization:.1,strokeCap:.5}),_a2);var _a3;let Controller$4=(_a3=class{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=new Controls$2(data),this.data.subscribeExternal(()=>{var _a26;const update=(_a26=this.data)==null?void 0:_a26.getSnapshot();update&&this.update(update)}),this.initialised=!0}receiveUpdate(update){var _a26;(_a26=this.data)==null||_a26.receiveExternalUpdate(update)}receiveMetadataUpdate(){}getSnapshot(){var _a26;return(_a26=this.data)==null?void 0:_a26.getSnapshot()}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}},__name(_a3,"Controller"),_a3);const ControlsContext$2=reactExports.createContext(null);function ControlsProvider$2({children}){const{initialized:indexInitialized,index}=useIndex(),tController=reactExports.useRef(new Controller$4),timelineAssets=indexInitialized?Object.entries(index.data).filter(([assetId2,assetMetadata])=>assetMetadata.type==="controls"&&assetMetadata.name==="cyberspaghetti.controls").map(([assetId2,assetMetadata])=>({assetId:assetId2,assetController:tController.current})):[],assetId=timelineAssets.length>0?timelineAssets[0].assetId:void 0,{FreeWorkload}=useCK();reactExports.useEffect(()=>{if(indexInitialized&&assetId===void 0){const workload=FreeWorkload();workload.thread("default").worker({instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},{createAsset:{asset:{data:Controls$2.defaultControls,metadata:{type:"controls",name:"cyberspaghetti.controls",preferredEditorAddress:CONFIG.SELF_HOST+"cyberspaghetti-controlconsole"},on_update:{type:"simple"},id:"cyberspaghetti.controls"}}}),workload.dispatch()}},[indexInitialized,assetId,FreeWorkload]);const{initialized:assetsInitialized,assets}=useAssets(timelineAssets),controls=indexInitialized&&assetsInitialized&&assetId!==void 0&&assets[assetId]!==void 0?assets[assetId].data:void 0;return jsxRuntimeExports.jsx(ControlsContext$2.Provider,{value:controls,children})}__name(ControlsProvider$2,"ControlsProvider$2");function useControls$2(){return React.useContext(ControlsContext$2)}__name(useControls$2,"useControls$2");const SvgIcon$1=__name(props=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.5",clipRule:"evenodd",viewBox:"0 0 1383 1384",className:props.className,children:jsxRuntimeExports.jsx("g",{transform:"translate(-11290 -51923)",children:jsxRuntimeExports.jsxs("g",{id:"Artboard10",children:[jsxRuntimeExports.jsx("path",{fill:"none",d:"M11290.083 51923.766h1382.825v1382.824h-1382.825z"}),jsxRuntimeExports.jsx("path",{fill:"none",stroke:"#E6C61E",strokeWidth:"179.17",d:"M11636.648 53004.745s-129.7-164.1-129.7-390.899 126.3-407.598 126.3-407.598"}),jsxRuntimeExports.jsx("path",{fill:"none",stroke:"#E6C61E",strokeWidth:"187.5",d:"M11971.64 53053.006v-827.096"}),jsxRuntimeExports.jsx("path",{fill:"#E6C61E",d:"m12205.948 52376.04 174.425-174.425 174.426 174.425-174.426 174.426z"})]})})}),"SvgIcon$1"),FullscreenLoader=__name(()=>jsxRuntimeExports.jsx("div",{className:"loader__backdrop",children:jsxRuntimeExports.jsxs("div",{className:"loader__logoWrap",children:[jsxRuntimeExports.jsx(SvgIcon$1,{className:"loader__logoBase"}),jsxRuntimeExports.jsx(SvgIcon$1,{className:"loader__logoShimmer"})]})}),"FullscreenLoader");function randFromIndex(index,seed=0){let x2=index^seed;return x2=x2^61^x2>>>16,x2=x2+(x2<<3),x2=x2^x2>>>4,x2=x2*668265261,x2=x2^x2>>>15,(x2>>>0)%1e6/1e6}__name(randFromIndex,"randFromIndex");var _a4;let ParticleSystem$1=(_a4=class{constructor(){__publicField(this,"time");__publicField(this,"CONFIG",Controls$2.defaultControls);__publicField(this,"rays",[]);this.time=0}update(config3,timeline){this.time=timeline.getProject().timelineData.playheadPosition,this.CONFIG=config3,this.generateRays()}generateRays(){this.rays=[];const{numRays}=this.CONFIG;for(let i2=0;i2<numRays;i2++){const offsetTime=this.time-Math.floor(randFromIndex(i2)*this.CONFIG.rayLife);if(offsetTime<0)continue;const cycle=Math.floor(offsetTime/this.CONFIG.rayLife)%(this.CONFIG.numCycles+1),rayTime=offsetTime-cycle*this.CONFIG.rayLife;if(rayTime<0||rayTime>this.CONFIG.rayLife)continue;const rayRelTime=rayTime/this.CONFIG.rayLife,cycleIndex=Math.floor(offsetTime/this.CONFIG.rayLife)%this.CONFIG.numCycles*this.CONFIG.numRays+i2,rayLength=Math.min(Math.max(this.CONFIG.rayLength+this.CONFIG.rayLength*this.CONFIG.rayLengthRandomization*randFromIndex(cycleIndex+3)*2-this.CONFIG.rayLength*this.CONFIG.rayLengthRandomization,0),1),angleRel=randFromIndex(cycleIndex+1),angle=(this.CONFIG.startAngle+(this.CONFIG.endAngle-this.CONFIG.startAngle)*angleRel)*(Math.PI/180),center=[this.CONFIG.centerX*2-1,this.CONFIG.centerY*2-1],centerX=center[0],centerY=center[1],innerOffset=this.CONFIG.innerRadiusRandomization*randFromIndex(cycleIndex+5)*this.CONFIG.innerRadius,outerOffset=this.CONFIG.outerRadiusRandomization*randFromIndex(cycleIndex+6)*.5,outer=this.CONFIG.outerRadius*Math.sqrt(2)+outerOffset,inner=outer*Math.max(this.CONFIG.innerRadius-innerOffset,0),outerRadiusIntersection=[centerX+outer*Math.cos(angle),centerY+outer*Math.sin(angle)],innerRadiusIntersection=[centerX+inner*Math.cos(angle),centerY+inner*Math.sin(angle)],OVERSHOOT=.2,rayOffset=[rayRelTime*(1+rayLength+OVERSHOOT)-rayLength-OVERSHOOT/2,rayRelTime*(1+rayLength+OVERSHOOT)-OVERSHOOT/2],ray={thickness:this.CONFIG.thickness+this.CONFIG.thickness*this.CONFIG.thicknessRandomization*2*randFromIndex(cycleIndex+4)-this.CONFIG.thickness*this.CONFIG.thicknessRandomization,startPoint:innerRadiusIntersection,endPoint:outerRadiusIntersection,offset:rayOffset,color:this.CONFIG.rayColors[i2%this.CONFIG.rayColors.length],phaseOffset:this.CONFIG.phaseRandomization*randFromIndex(cycleIndex+2),relTime:rayRelTime};this.rays.push(ray)}}},__name(_a4,"ParticleSystem"),_a4);function commonjsRequire(path){throw new Error('Could not dynamically require "'+path+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}__name(commonjsRequire,"commonjsRequire");var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var hasRequiredJszip_min;function requireJszip_min(){return hasRequiredJszip_min||(hasRequiredJszip_min=1,function(module,exports){(function(e2){module.exports=e2()})(function(){return __name(function s2(a2,o2,h2){function u2(r2,e3){if(!o2[r2]){if(!a2[r2]){var t2=typeof commonjsRequire=="function"&&commonjsRequire;if(!e3&&t2)return t2(r2,!0);if(l2)return l2(r2,!0);var n3=new Error("Cannot find module '"+r2+"'");throw n3.code="MODULE_NOT_FOUND",n3}var i2=o2[r2]={exports:{}};a2[r2][0].call(i2.exports,function(e4){var t3=a2[r2][1][e4];return u2(t3||e4)},i2,i2.exports,s2,a2,o2,h2)}return o2[r2].exports}__name(u2,"u");for(var l2=typeof commonjsRequire=="function"&&commonjsRequire,e2=0;e2<h2.length;e2++)u2(h2[e2]);return u2},"s")({1:[function(e2,t2,r2){var d2=e2("./utils"),c=e2("./support"),p2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r2.encode=function(e3){for(var t3,r3,n3,i2,s2,a2,o2,h2=[],u2=0,l2=e3.length,f2=l2,c2=d2.getTypeOf(e3)!=="string";u2<e3.length;)f2=l2-u2,n3=c2?(t3=e3[u2++],r3=u2<l2?e3[u2++]:0,u2<l2?e3[u2++]:0):(t3=e3.charCodeAt(u2++),r3=u2<l2?e3.charCodeAt(u2++):0,u2<l2?e3.charCodeAt(u2++):0),i2=t3>>2,s2=(3&t3)<<4|r3>>4,a2=1<f2?(15&r3)<<2|n3>>6:64,o2=2<f2?63&n3:64,h2.push(p2.charAt(i2)+p2.charAt(s2)+p2.charAt(a2)+p2.charAt(o2));return h2.join("")},r2.decode=function(e3){var t3,r3,n3,i2,s2,a2,o2=0,h2=0,u2="data:";if(e3.substr(0,u2.length)===u2)throw new Error("Invalid base64 input, it looks like a data url.");var l2,f2=3*(e3=e3.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e3.charAt(e3.length-1)===p2.charAt(64)&&f2--,e3.charAt(e3.length-2)===p2.charAt(64)&&f2--,f2%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l2=c.uint8array?new Uint8Array(0|f2):new Array(0|f2);o2<e3.length;)t3=p2.indexOf(e3.charAt(o2++))<<2|(i2=p2.indexOf(e3.charAt(o2++)))>>4,r3=(15&i2)<<4|(s2=p2.indexOf(e3.charAt(o2++)))>>2,n3=(3&s2)<<6|(a2=p2.indexOf(e3.charAt(o2++))),l2[h2++]=t3,s2!==64&&(l2[h2++]=r3),a2!==64&&(l2[h2++]=n3);return l2}},{"./support":30,"./utils":32}],2:[function(e2,t2,r2){var n3=e2("./external"),i2=e2("./stream/DataWorker"),s2=e2("./stream/Crc32Probe"),a2=e2("./stream/DataLengthProbe");function o2(e3,t3,r3,n4,i3){this.compressedSize=e3,this.uncompressedSize=t3,this.crc32=r3,this.compression=n4,this.compressedContent=i3}__name(o2,"o"),o2.prototype={getContentWorker:__name(function(){var e3=new i2(n3.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a2("data_length")),t3=this;return e3.on("end",function(){if(this.streamInfo.data_length!==t3.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e3},"getContentWorker"),getCompressedWorker:__name(function(){return new i2(n3.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)},"getCompressedWorker")},o2.createWorkerFrom=function(e3,t3,r3){return e3.pipe(new s2).pipe(new a2("uncompressedSize")).pipe(t3.compressWorker(r3)).pipe(new a2("compressedSize")).withStreamInfo("compression",t3)},t2.exports=o2},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e2,t2,r2){var n3=e2("./stream/GenericWorker");r2.STORE={magic:"\0\0",compressWorker:__name(function(){return new n3("STORE compression")},"compressWorker"),uncompressWorker:__name(function(){return new n3("STORE decompression")},"uncompressWorker")},r2.DEFLATE=e2("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e2,t2,r2){var n3=e2("./utils"),o2=function(){for(var e3,t3=[],r3=0;r3<256;r3++){e3=r3;for(var n4=0;n4<8;n4++)e3=1&e3?3988292384^e3>>>1:e3>>>1;t3[r3]=e3}return t3}();t2.exports=function(e3,t3){return e3!==void 0&&e3.length?n3.getTypeOf(e3)!=="string"?function(e4,t4,r3,n4){var i2=o2,s2=n4+r3;e4^=-1;for(var a2=n4;a2<s2;a2++)e4=e4>>>8^i2[255&(e4^t4[a2])];return-1^e4}(0|t3,e3,e3.length,0):function(e4,t4,r3,n4){var i2=o2,s2=n4+r3;e4^=-1;for(var a2=n4;a2<s2;a2++)e4=e4>>>8^i2[255&(e4^t4.charCodeAt(a2))];return-1^e4}(0|t3,e3,e3.length,0):0}},{"./utils":32}],5:[function(e2,t2,r2){r2.base64=!1,r2.binary=!1,r2.dir=!1,r2.createFolders=!0,r2.date=null,r2.compression=null,r2.compressionOptions=null,r2.comment=null,r2.unixPermissions=null,r2.dosPermissions=null},{}],6:[function(e2,t2,r2){var n3=null;n3=typeof Promise<"u"?Promise:e2("lie"),t2.exports={Promise:n3}},{lie:37}],7:[function(e2,t2,r2){var n3=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i2=e2("pako"),s2=e2("./utils"),a2=e2("./stream/GenericWorker"),o2=n3?"uint8array":"array";function h2(e3,t3){a2.call(this,"FlateWorker/"+e3),this._pako=null,this._pakoAction=e3,this._pakoOptions=t3,this.meta={}}__name(h2,"h"),r2.magic="\b\0",s2.inherits(h2,a2),h2.prototype.processChunk=function(e3){this.meta=e3.meta,this._pako===null&&this._createPako(),this._pako.push(s2.transformTo(o2,e3.data),!1)},h2.prototype.flush=function(){a2.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h2.prototype.cleanUp=function(){a2.prototype.cleanUp.call(this),this._pako=null},h2.prototype._createPako=function(){this._pako=new i2[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t3=this;this._pako.onData=function(e3){t3.push({data:e3,meta:t3.meta})}},r2.compressWorker=function(e3){return new h2("Deflate",e3)},r2.uncompressWorker=function(){return new h2("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e2,t2,r2){function A2(e3,t3){var r3,n4="";for(r3=0;r3<t3;r3++)n4+=String.fromCharCode(255&e3),e3>>>=8;return n4}__name(A2,"A");function n3(e3,t3,r3,n4,i3,s3){var a2,o2,h2=e3.file,u2=e3.compression,l2=s3!==O2.utf8encode,f2=I2.transformTo("string",s3(h2.name)),c=I2.transformTo("string",O2.utf8encode(h2.name)),d2=h2.comment,p2=I2.transformTo("string",s3(d2)),m2=I2.transformTo("string",O2.utf8encode(d2)),_2=c.length!==h2.name.length,g2=m2.length!==d2.length,b2="",v2="",y2="",w2=h2.dir,k2=h2.date,x2={crc32:0,compressedSize:0,uncompressedSize:0};t3&&!r3||(x2.crc32=e3.crc32,x2.compressedSize=e3.compressedSize,x2.uncompressedSize=e3.uncompressedSize);var S2=0;t3&&(S2|=8),l2||!_2&&!g2||(S2|=2048);var z2=0,C3=0;w2&&(z2|=16),i3==="UNIX"?(C3=798,z2|=function(e4,t4){var r4=e4;return e4||(r4=t4?16893:33204),(65535&r4)<<16}(h2.unixPermissions,w2)):(C3=20,z2|=function(e4){return 63&(e4||0)}(h2.dosPermissions)),a2=k2.getUTCHours(),a2<<=6,a2|=k2.getUTCMinutes(),a2<<=5,a2|=k2.getUTCSeconds()/2,o2=k2.getUTCFullYear()-1980,o2<<=4,o2|=k2.getUTCMonth()+1,o2<<=5,o2|=k2.getUTCDate(),_2&&(v2=A2(1,1)+A2(B2(f2),4)+c,b2+="up"+A2(v2.length,2)+v2),g2&&(y2=A2(1,1)+A2(B2(p2),4)+m2,b2+="uc"+A2(y2.length,2)+y2);var E2="";return E2+=`
\0`,E2+=A2(S2,2),E2+=u2.magic,E2+=A2(a2,2),E2+=A2(o2,2),E2+=A2(x2.crc32,4),E2+=A2(x2.compressedSize,4),E2+=A2(x2.uncompressedSize,4),E2+=A2(f2.length,2),E2+=A2(b2.length,2),{fileRecord:R2.LOCAL_FILE_HEADER+E2+f2+b2,dirRecord:R2.CENTRAL_FILE_HEADER+A2(C3,2)+E2+A2(p2.length,2)+"\0\0\0\0"+A2(z2,4)+A2(n4,4)+f2+b2+p2}}__name(n3,"n");var I2=e2("../utils"),i2=e2("../stream/GenericWorker"),O2=e2("../utf8"),B2=e2("../crc32"),R2=e2("../signature");function s2(e3,t3,r3,n4){i2.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t3,this.zipPlatform=r3,this.encodeFileName=n4,this.streamFiles=e3,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}__name(s2,"s"),I2.inherits(s2,i2),s2.prototype.push=function(e3){var t3=e3.meta.percent||0,r3=this.entriesCount,n4=this._sources.length;this.accumulate?this.contentBuffer.push(e3):(this.bytesWritten+=e3.data.length,i2.prototype.push.call(this,{data:e3.data,meta:{currentFile:this.currentFile,percent:r3?(t3+100*(r3-n4-1))/r3:100}}))},s2.prototype.openedSource=function(e3){this.currentSourceOffset=this.bytesWritten,this.currentFile=e3.file.name;var t3=this.streamFiles&&!e3.file.dir;if(t3){var r3=n3(e3,t3,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r3.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s2.prototype.closedSource=function(e3){this.accumulate=!1;var t3=this.streamFiles&&!e3.file.dir,r3=n3(e3,t3,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r3.dirRecord),t3)this.push({data:function(e4){return R2.DATA_DESCRIPTOR+A2(e4.crc32,4)+A2(e4.compressedSize,4)+A2(e4.uncompressedSize,4)}(e3),meta:{percent:100}});else for(this.push({data:r3.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s2.prototype.flush=function(){for(var e3=this.bytesWritten,t3=0;t3<this.dirRecords.length;t3++)this.push({data:this.dirRecords[t3],meta:{percent:100}});var r3=this.bytesWritten-e3,n4=function(e4,t4,r4,n5,i3){var s3=I2.transformTo("string",i3(n5));return R2.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A2(e4,2)+A2(e4,2)+A2(t4,4)+A2(r4,4)+A2(s3.length,2)+s3}(this.dirRecords.length,r3,e3,this.zipComment,this.encodeFileName);this.push({data:n4,meta:{percent:100}})},s2.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s2.prototype.registerPrevious=function(e3){this._sources.push(e3);var t3=this;return e3.on("data",function(e4){t3.processChunk(e4)}),e3.on("end",function(){t3.closedSource(t3.previous.streamInfo),t3._sources.length?t3.prepareNextSource():t3.end()}),e3.on("error",function(e4){t3.error(e4)}),this},s2.prototype.resume=function(){return!!i2.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s2.prototype.error=function(e3){var t3=this._sources;if(!i2.prototype.error.call(this,e3))return!1;for(var r3=0;r3<t3.length;r3++)try{t3[r3].error(e3)}catch{}return!0},s2.prototype.lock=function(){i2.prototype.lock.call(this);for(var e3=this._sources,t3=0;t3<e3.length;t3++)e3[t3].lock()},t2.exports=s2},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e2,t2,r2){var u2=e2("../compressions"),n3=e2("./ZipFileWorker");r2.generateWorker=function(e3,a2,t3){var o2=new n3(a2.streamFiles,t3,a2.platform,a2.encodeFileName),h2=0;try{e3.forEach(function(e4,t4){h2++;var r3=function(e5,t5){var r4=e5||t5,n5=u2[r4];if(!n5)throw new Error(r4+" is not a valid compression method !");return n5}(t4.options.compression,a2.compression),n4=t4.options.compressionOptions||a2.compressionOptions||{},i2=t4.dir,s2=t4.date;t4._compressWorker(r3,n4).withStreamInfo("file",{name:e4,dir:i2,date:s2,comment:t4.comment||"",unixPermissions:t4.unixPermissions,dosPermissions:t4.dosPermissions}).pipe(o2)}),o2.entriesCount=h2}catch(e4){o2.error(e4)}return o2}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e2,t2,r2){function n3(){if(!(this instanceof n3))return new n3;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e3=new n3;for(var t3 in this)typeof this[t3]!="function"&&(e3[t3]=this[t3]);return e3}}__name(n3,"n"),(n3.prototype=e2("./object")).loadAsync=e2("./load"),n3.support=e2("./support"),n3.defaults=e2("./defaults"),n3.version="3.10.1",n3.loadAsync=function(e3,t3){return new n3().loadAsync(e3,t3)},n3.external=e2("./external"),t2.exports=n3},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e2,t2,r2){var u2=e2("./utils"),i2=e2("./external"),n3=e2("./utf8"),s2=e2("./zipEntries"),a2=e2("./stream/Crc32Probe"),l2=e2("./nodejsUtils");function f2(n4){return new i2.Promise(function(e3,t3){var r3=n4.decompressed.getContentWorker().pipe(new a2);r3.on("error",function(e4){t3(e4)}).on("end",function(){r3.streamInfo.crc32!==n4.decompressed.crc32?t3(new Error("Corrupted zip : CRC32 mismatch")):e3()}).resume()})}__name(f2,"f"),t2.exports=function(e3,o2){var h2=this;return o2=u2.extend(o2||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n3.utf8decode}),l2.isNode&&l2.isStream(e3)?i2.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u2.prepareContent("the loaded zip file",e3,!0,o2.optimizedBinaryString,o2.base64).then(function(e4){var t3=new s2(o2);return t3.load(e4),t3}).then(function(e4){var t3=[i2.Promise.resolve(e4)],r3=e4.files;if(o2.checkCRC32)for(var n4=0;n4<r3.length;n4++)t3.push(f2(r3[n4]));return i2.Promise.all(t3)}).then(function(e4){for(var t3=e4.shift(),r3=t3.files,n4=0;n4<r3.length;n4++){var i3=r3[n4],s3=i3.fileNameStr,a3=u2.resolve(i3.fileNameStr);h2.file(a3,i3.decompressed,{binary:!0,optimizedBinaryString:!0,date:i3.date,dir:i3.dir,comment:i3.fileCommentStr.length?i3.fileCommentStr:null,unixPermissions:i3.unixPermissions,dosPermissions:i3.dosPermissions,createFolders:o2.createFolders}),i3.dir||(h2.file(a3).unsafeOriginalName=s3)}return t3.zipComment.length&&(h2.comment=t3.zipComment),h2})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e2,t2,r2){var n3=e2("../utils"),i2=e2("../stream/GenericWorker");function s2(e3,t3){i2.call(this,"Nodejs stream input adapter for "+e3),this._upstreamEnded=!1,this._bindStream(t3)}__name(s2,"s"),n3.inherits(s2,i2),s2.prototype._bindStream=function(e3){var t3=this;(this._stream=e3).pause(),e3.on("data",function(e4){t3.push({data:e4,meta:{percent:0}})}).on("error",function(e4){t3.isPaused?this.generatedError=e4:t3.error(e4)}).on("end",function(){t3.isPaused?t3._upstreamEnded=!0:t3.end()})},s2.prototype.pause=function(){return!!i2.prototype.pause.call(this)&&(this._stream.pause(),!0)},s2.prototype.resume=function(){return!!i2.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t2.exports=s2},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e2,t2,r2){var i2=e2("readable-stream").Readable;function n3(e3,t3,r3){i2.call(this,t3),this._helper=e3;var n4=this;e3.on("data",function(e4,t4){n4.push(e4)||n4._helper.pause(),r3&&r3(t4)}).on("error",function(e4){n4.emit("error",e4)}).on("end",function(){n4.push(null)})}__name(n3,"n"),e2("../utils").inherits(n3,i2),n3.prototype._read=function(){this._helper.resume()},t2.exports=n3},{"../utils":32,"readable-stream":16}],14:[function(e2,t2,r2){t2.exports={isNode:typeof Buffer<"u",newBufferFrom:__name(function(e3,t3){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e3,t3);if(typeof e3=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e3,t3)},"newBufferFrom"),allocBuffer:__name(function(e3){if(Buffer.alloc)return Buffer.alloc(e3);var t3=new Buffer(e3);return t3.fill(0),t3},"allocBuffer"),isBuffer:__name(function(e3){return Buffer.isBuffer(e3)},"isBuffer"),isStream:__name(function(e3){return e3&&typeof e3.on=="function"&&typeof e3.pause=="function"&&typeof e3.resume=="function"},"isStream")}},{}],15:[function(e2,t2,r2){function s2(e3,t3,r3){var n4,i3=u2.getTypeOf(t3),s3=u2.extend(r3||{},f2);s3.date=s3.date||new Date,s3.compression!==null&&(s3.compression=s3.compression.toUpperCase()),typeof s3.unixPermissions=="string"&&(s3.unixPermissions=parseInt(s3.unixPermissions,8)),s3.unixPermissions&&16384&s3.unixPermissions&&(s3.dir=!0),s3.dosPermissions&&16&s3.dosPermissions&&(s3.dir=!0),s3.dir&&(e3=g2(e3)),s3.createFolders&&(n4=_2(e3))&&b2.call(this,n4,!0);var a3=i3==="string"&&s3.binary===!1&&s3.base64===!1;r3&&r3.binary!==void 0||(s3.binary=!a3),(t3 instanceof c&&t3.uncompressedSize===0||s3.dir||!t3||t3.length===0)&&(s3.base64=!1,s3.binary=!0,t3="",s3.compression="STORE",i3="string");var o3=null;o3=t3 instanceof c||t3 instanceof l2?t3:p2.isNode&&p2.isStream(t3)?new m2(e3,t3):u2.prepareContent(e3,t3,s3.binary,s3.optimizedBinaryString,s3.base64);var h3=new d2(e3,o3,s3);this.files[e3]=h3}__name(s2,"s");var i2=e2("./utf8"),u2=e2("./utils"),l2=e2("./stream/GenericWorker"),a2=e2("./stream/StreamHelper"),f2=e2("./defaults"),c=e2("./compressedObject"),d2=e2("./zipObject"),o2=e2("./generate"),p2=e2("./nodejsUtils"),m2=e2("./nodejs/NodejsStreamInputAdapter"),_2=__name(function(e3){e3.slice(-1)==="/"&&(e3=e3.substring(0,e3.length-1));var t3=e3.lastIndexOf("/");return 0<t3?e3.substring(0,t3):""},"_"),g2=__name(function(e3){return e3.slice(-1)!=="/"&&(e3+="/"),e3},"g"),b2=__name(function(e3,t3){return t3=t3!==void 0?t3:f2.createFolders,e3=g2(e3),this.files[e3]||s2.call(this,e3,null,{dir:!0,createFolders:t3}),this.files[e3]},"b");function h2(e3){return Object.prototype.toString.call(e3)==="[object RegExp]"}__name(h2,"h");var n3={load:__name(function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},"load"),forEach:__name(function(e3){var t3,r3,n4;for(t3 in this.files)n4=this.files[t3],(r3=t3.slice(this.root.length,t3.length))&&t3.slice(0,this.root.length)===this.root&&e3(r3,n4)},"forEach"),filter:__name(function(r3){var n4=[];return this.forEach(function(e3,t3){r3(e3,t3)&&n4.push(t3)}),n4},"filter"),file:__name(function(e3,t3,r3){if(arguments.length!==1)return e3=this.root+e3,s2.call(this,e3,t3,r3),this;if(h2(e3)){var n4=e3;return this.filter(function(e4,t4){return!t4.dir&&n4.test(e4)})}var i3=this.files[this.root+e3];return i3&&!i3.dir?i3:null},"file"),folder:__name(function(r3){if(!r3)return this;if(h2(r3))return this.filter(function(e4,t4){return t4.dir&&r3.test(e4)});var e3=this.root+r3,t3=b2.call(this,e3),n4=this.clone();return n4.root=t3.name,n4},"folder"),remove:__name(function(r3){r3=this.root+r3;var e3=this.files[r3];if(e3||(r3.slice(-1)!=="/"&&(r3+="/"),e3=this.files[r3]),e3&&!e3.dir)delete this.files[r3];else for(var t3=this.filter(function(e4,t4){return t4.name.slice(0,r3.length)===r3}),n4=0;n4<t3.length;n4++)delete this.files[t3[n4].name];return this},"remove"),generate:__name(function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},"generate"),generateInternalStream:__name(function(e3){var t3,r3={};try{if((r3=u2.extend(e3||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i2.utf8encode})).type=r3.type.toLowerCase(),r3.compression=r3.compression.toUpperCase(),r3.type==="binarystring"&&(r3.type="string"),!r3.type)throw new Error("No output type specified.");u2.checkSupport(r3.type),r3.platform!=="darwin"&&r3.platform!=="freebsd"&&r3.platform!=="linux"&&r3.platform!=="sunos"||(r3.platform="UNIX"),r3.platform==="win32"&&(r3.platform="DOS");var n4=r3.comment||this.comment||"";t3=o2.generateWorker(this,r3,n4)}catch(e4){(t3=new l2("error")).error(e4)}return new a2(t3,r3.type||"string",r3.mimeType)},"generateInternalStream"),generateAsync:__name(function(e3,t3){return this.generateInternalStream(e3).accumulate(t3)},"generateAsync"),generateNodeStream:__name(function(e3,t3){return(e3=e3||{}).type||(e3.type="nodebuffer"),this.generateInternalStream(e3).toNodejsStream(t3)},"generateNodeStream")};t2.exports=n3},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e2,t2,r2){t2.exports=e2("stream")},{stream:void 0}],17:[function(e2,t2,r2){var n3=e2("./DataReader");function i2(e3){n3.call(this,e3);for(var t3=0;t3<this.data.length;t3++)e3[t3]=255&e3[t3]}__name(i2,"i"),e2("../utils").inherits(i2,n3),i2.prototype.byteAt=function(e3){return this.data[this.zero+e3]},i2.prototype.lastIndexOfSignature=function(e3){for(var t3=e3.charCodeAt(0),r3=e3.charCodeAt(1),n4=e3.charCodeAt(2),i3=e3.charCodeAt(3),s2=this.length-4;0<=s2;--s2)if(this.data[s2]===t3&&this.data[s2+1]===r3&&this.data[s2+2]===n4&&this.data[s2+3]===i3)return s2-this.zero;return-1},i2.prototype.readAndCheckSignature=function(e3){var t3=e3.charCodeAt(0),r3=e3.charCodeAt(1),n4=e3.charCodeAt(2),i3=e3.charCodeAt(3),s2=this.readData(4);return t3===s2[0]&&r3===s2[1]&&n4===s2[2]&&i3===s2[3]},i2.prototype.readData=function(e3){if(this.checkOffset(e3),e3===0)return[];var t3=this.data.slice(this.zero+this.index,this.zero+this.index+e3);return this.index+=e3,t3},t2.exports=i2},{"../utils":32,"./DataReader":18}],18:[function(e2,t2,r2){var n3=e2("../utils");function i2(e3){this.data=e3,this.length=e3.length,this.index=0,this.zero=0}__name(i2,"i"),i2.prototype={checkOffset:__name(function(e3){this.checkIndex(this.index+e3)},"checkOffset"),checkIndex:__name(function(e3){if(this.length<this.zero+e3||e3<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e3+"). Corrupted zip ?")},"checkIndex"),setIndex:__name(function(e3){this.checkIndex(e3),this.index=e3},"setIndex"),skip:__name(function(e3){this.setIndex(this.index+e3)},"skip"),byteAt:__name(function(){},"byteAt"),readInt:__name(function(e3){var t3,r3=0;for(this.checkOffset(e3),t3=this.index+e3-1;t3>=this.index;t3--)r3=(r3<<8)+this.byteAt(t3);return this.index+=e3,r3},"readInt"),readString:__name(function(e3){return n3.transformTo("string",this.readData(e3))},"readString"),readData:__name(function(){},"readData"),lastIndexOfSignature:__name(function(){},"lastIndexOfSignature"),readAndCheckSignature:__name(function(){},"readAndCheckSignature"),readDate:__name(function(){var e3=this.readInt(4);return new Date(Date.UTC(1980+(e3>>25&127),(e3>>21&15)-1,e3>>16&31,e3>>11&31,e3>>5&63,(31&e3)<<1))},"readDate")},t2.exports=i2},{"../utils":32}],19:[function(e2,t2,r2){var n3=e2("./Uint8ArrayReader");function i2(e3){n3.call(this,e3)}__name(i2,"i"),e2("../utils").inherits(i2,n3),i2.prototype.readData=function(e3){this.checkOffset(e3);var t3=this.data.slice(this.zero+this.index,this.zero+this.index+e3);return this.index+=e3,t3},t2.exports=i2},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e2,t2,r2){var n3=e2("./DataReader");function i2(e3){n3.call(this,e3)}__name(i2,"i"),e2("../utils").inherits(i2,n3),i2.prototype.byteAt=function(e3){return this.data.charCodeAt(this.zero+e3)},i2.prototype.lastIndexOfSignature=function(e3){return this.data.lastIndexOf(e3)-this.zero},i2.prototype.readAndCheckSignature=function(e3){return e3===this.readData(4)},i2.prototype.readData=function(e3){this.checkOffset(e3);var t3=this.data.slice(this.zero+this.index,this.zero+this.index+e3);return this.index+=e3,t3},t2.exports=i2},{"../utils":32,"./DataReader":18}],21:[function(e2,t2,r2){var n3=e2("./ArrayReader");function i2(e3){n3.call(this,e3)}__name(i2,"i"),e2("../utils").inherits(i2,n3),i2.prototype.readData=function(e3){if(this.checkOffset(e3),e3===0)return new Uint8Array(0);var t3=this.data.subarray(this.zero+this.index,this.zero+this.index+e3);return this.index+=e3,t3},t2.exports=i2},{"../utils":32,"./ArrayReader":17}],22:[function(e2,t2,r2){var n3=e2("../utils"),i2=e2("../support"),s2=e2("./ArrayReader"),a2=e2("./StringReader"),o2=e2("./NodeBufferReader"),h2=e2("./Uint8ArrayReader");t2.exports=function(e3){var t3=n3.getTypeOf(e3);return n3.checkSupport(t3),t3!=="string"||i2.uint8array?t3==="nodebuffer"?new o2(e3):i2.uint8array?new h2(n3.transformTo("uint8array",e3)):new s2(n3.transformTo("array",e3)):new a2(e3)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e2,t2,r2){r2.LOCAL_FILE_HEADER="PK",r2.CENTRAL_FILE_HEADER="PK",r2.CENTRAL_DIRECTORY_END="PK",r2.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r2.ZIP64_CENTRAL_DIRECTORY_END="PK",r2.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e2,t2,r2){var n3=e2("./GenericWorker"),i2=e2("../utils");function s2(e3){n3.call(this,"ConvertWorker to "+e3),this.destType=e3}__name(s2,"s"),i2.inherits(s2,n3),s2.prototype.processChunk=function(e3){this.push({data:i2.transformTo(this.destType,e3.data),meta:e3.meta})},t2.exports=s2},{"../utils":32,"./GenericWorker":28}],25:[function(e2,t2,r2){var n3=e2("./GenericWorker"),i2=e2("../crc32");function s2(){n3.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}__name(s2,"s"),e2("../utils").inherits(s2,n3),s2.prototype.processChunk=function(e3){this.streamInfo.crc32=i2(e3.data,this.streamInfo.crc32||0),this.push(e3)},t2.exports=s2},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e2,t2,r2){var n3=e2("../utils"),i2=e2("./GenericWorker");function s2(e3){i2.call(this,"DataLengthProbe for "+e3),this.propName=e3,this.withStreamInfo(e3,0)}__name(s2,"s"),n3.inherits(s2,i2),s2.prototype.processChunk=function(e3){if(e3){var t3=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t3+e3.data.length}i2.prototype.processChunk.call(this,e3)},t2.exports=s2},{"../utils":32,"./GenericWorker":28}],27:[function(e2,t2,r2){var n3=e2("../utils"),i2=e2("./GenericWorker");function s2(e3){i2.call(this,"DataWorker");var t3=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e3.then(function(e4){t3.dataIsReady=!0,t3.data=e4,t3.max=e4&&e4.length||0,t3.type=n3.getTypeOf(e4),t3.isPaused||t3._tickAndRepeat()},function(e4){t3.error(e4)})}__name(s2,"s"),n3.inherits(s2,i2),s2.prototype.cleanUp=function(){i2.prototype.cleanUp.call(this),this.data=null},s2.prototype.resume=function(){return!!i2.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n3.delay(this._tickAndRepeat,[],this)),!0)},s2.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n3.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s2.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e3=null,t3=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e3=this.data.substring(this.index,t3);break;case"uint8array":e3=this.data.subarray(this.index,t3);break;case"array":case"nodebuffer":e3=this.data.slice(this.index,t3)}return this.index=t3,this.push({data:e3,meta:{percent:this.max?this.index/this.max*100:0}})},t2.exports=s2},{"../utils":32,"./GenericWorker":28}],28:[function(e2,t2,r2){function n3(e3){this.name=e3||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}__name(n3,"n"),n3.prototype={push:__name(function(e3){this.emit("data",e3)},"push"),end:__name(function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e3){this.emit("error",e3)}return!0},"end"),error:__name(function(e3){return!this.isFinished&&(this.isPaused?this.generatedError=e3:(this.isFinished=!0,this.emit("error",e3),this.previous&&this.previous.error(e3),this.cleanUp()),!0)},"error"),on:__name(function(e3,t3){return this._listeners[e3].push(t3),this},"on"),cleanUp:__name(function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},"cleanUp"),emit:__name(function(e3,t3){if(this._listeners[e3])for(var r3=0;r3<this._listeners[e3].length;r3++)this._listeners[e3][r3].call(this,t3)},"emit"),pipe:__name(function(e3){return e3.registerPrevious(this)},"pipe"),registerPrevious:__name(function(e3){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e3.streamInfo,this.mergeStreamInfo(),this.previous=e3;var t3=this;return e3.on("data",function(e4){t3.processChunk(e4)}),e3.on("end",function(){t3.end()}),e3.on("error",function(e4){t3.error(e4)}),this},"registerPrevious"),pause:__name(function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},"pause"),resume:__name(function(){if(!this.isPaused||this.isFinished)return!1;var e3=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e3=!0),this.previous&&this.previous.resume(),!e3},"resume"),flush:__name(function(){},"flush"),processChunk:__name(function(e3){this.push(e3)},"processChunk"),withStreamInfo:__name(function(e3,t3){return this.extraStreamInfo[e3]=t3,this.mergeStreamInfo(),this},"withStreamInfo"),mergeStreamInfo:__name(function(){for(var e3 in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e3)&&(this.streamInfo[e3]=this.extraStreamInfo[e3])},"mergeStreamInfo"),lock:__name(function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},"lock"),toString:__name(function(){var e3="Worker "+this.name;return this.previous?this.previous+" -> "+e3:e3},"toString")},t2.exports=n3},{}],29:[function(e2,t2,r2){var h2=e2("../utils"),i2=e2("./ConvertWorker"),s2=e2("./GenericWorker"),u2=e2("../base64"),n3=e2("../support"),a2=e2("../external"),o2=null;if(n3.nodestream)try{o2=e2("../nodejs/NodejsStreamOutputAdapter")}catch{}function l2(e3,o3){return new a2.Promise(function(t3,r3){var n4=[],i3=e3._internalType,s3=e3._outputType,a3=e3._mimeType;e3.on("data",function(e4,t4){n4.push(e4),o3&&o3(t4)}).on("error",function(e4){n4=[],r3(e4)}).on("end",function(){try{var e4=function(e5,t4,r4){switch(e5){case"blob":return h2.newBlob(h2.transformTo("arraybuffer",t4),r4);case"base64":return u2.encode(t4);default:return h2.transformTo(e5,t4)}}(s3,function(e5,t4){var r4,n5=0,i4=null,s4=0;for(r4=0;r4<t4.length;r4++)s4+=t4[r4].length;switch(e5){case"string":return t4.join("");case"array":return Array.prototype.concat.apply([],t4);case"uint8array":for(i4=new Uint8Array(s4),r4=0;r4<t4.length;r4++)i4.set(t4[r4],n5),n5+=t4[r4].length;return i4;case"nodebuffer":return Buffer.concat(t4);default:throw new Error("concat : unsupported type '"+e5+"'")}}(i3,n4),a3);t3(e4)}catch(e5){r3(e5)}n4=[]}).resume()})}__name(l2,"l");function f2(e3,t3,r3){var n4=t3;switch(t3){case"blob":case"arraybuffer":n4="uint8array";break;case"base64":n4="string"}try{this._internalType=n4,this._outputType=t3,this._mimeType=r3,h2.checkSupport(n4),this._worker=e3.pipe(new i2(n4)),e3.lock()}catch(e4){this._worker=new s2("error"),this._worker.error(e4)}}__name(f2,"f"),f2.prototype={accumulate:__name(function(e3){return l2(this,e3)},"accumulate"),on:__name(function(e3,t3){var r3=this;return e3==="data"?this._worker.on(e3,function(e4){t3.call(r3,e4.data,e4.meta)}):this._worker.on(e3,function(){h2.delay(t3,arguments,r3)}),this},"on"),resume:__name(function(){return h2.delay(this._worker.resume,[],this._worker),this},"resume"),pause:__name(function(){return this._worker.pause(),this},"pause"),toNodejsStream:__name(function(e3){if(h2.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new o2(this,{objectMode:this._outputType!=="nodebuffer"},e3)},"toNodejsStream")},t2.exports=f2},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e2,t2,r2){if(r2.base64=!0,r2.array=!0,r2.string=!0,r2.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r2.nodebuffer=typeof Buffer<"u",r2.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r2.blob=!1;else{var n3=new ArrayBuffer(0);try{r2.blob=new Blob([n3],{type:"application/zip"}).size===0}catch{try{var i2=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i2.append(n3),r2.blob=i2.getBlob("application/zip").size===0}catch{r2.blob=!1}}}try{r2.nodestream=!!e2("readable-stream").Readable}catch{r2.nodestream=!1}},{"readable-stream":16}],31:[function(e2,t2,s2){for(var o2=e2("./utils"),h2=e2("./support"),r2=e2("./nodejsUtils"),n3=e2("./stream/GenericWorker"),u2=new Array(256),i2=0;i2<256;i2++)u2[i2]=252<=i2?6:248<=i2?5:240<=i2?4:224<=i2?3:192<=i2?2:1;u2[254]=u2[254]=1;function a2(){n3.call(this,"utf-8 decode"),this.leftOver=null}__name(a2,"a");function l2(){n3.call(this,"utf-8 encode")}__name(l2,"l"),s2.utf8encode=function(e3){return h2.nodebuffer?r2.newBufferFrom(e3,"utf-8"):function(e4){var t3,r3,n4,i3,s3,a3=e4.length,o3=0;for(i3=0;i3<a3;i3++)(64512&(r3=e4.charCodeAt(i3)))==55296&&i3+1<a3&&(64512&(n4=e4.charCodeAt(i3+1)))==56320&&(r3=65536+(r3-55296<<10)+(n4-56320),i3++),o3+=r3<128?1:r3<2048?2:r3<65536?3:4;for(t3=h2.uint8array?new Uint8Array(o3):new Array(o3),i3=s3=0;s3<o3;i3++)(64512&(r3=e4.charCodeAt(i3)))==55296&&i3+1<a3&&(64512&(n4=e4.charCodeAt(i3+1)))==56320&&(r3=65536+(r3-55296<<10)+(n4-56320),i3++),r3<128?t3[s3++]=r3:(r3<2048?t3[s3++]=192|r3>>>6:(r3<65536?t3[s3++]=224|r3>>>12:(t3[s3++]=240|r3>>>18,t3[s3++]=128|r3>>>12&63),t3[s3++]=128|r3>>>6&63),t3[s3++]=128|63&r3);return t3}(e3)},s2.utf8decode=function(e3){return h2.nodebuffer?o2.transformTo("nodebuffer",e3).toString("utf-8"):function(e4){var t3,r3,n4,i3,s3=e4.length,a3=new Array(2*s3);for(t3=r3=0;t3<s3;)if((n4=e4[t3++])<128)a3[r3++]=n4;else if(4<(i3=u2[n4]))a3[r3++]=65533,t3+=i3-1;else{for(n4&=i3===2?31:i3===3?15:7;1<i3&&t3<s3;)n4=n4<<6|63&e4[t3++],i3--;1<i3?a3[r3++]=65533:n4<65536?a3[r3++]=n4:(n4-=65536,a3[r3++]=55296|n4>>10&1023,a3[r3++]=56320|1023&n4)}return a3.length!==r3&&(a3.subarray?a3=a3.subarray(0,r3):a3.length=r3),o2.applyFromCharCode(a3)}(e3=o2.transformTo(h2.uint8array?"uint8array":"array",e3))},o2.inherits(a2,n3),a2.prototype.processChunk=function(e3){var t3=o2.transformTo(h2.uint8array?"uint8array":"array",e3.data);if(this.leftOver&&this.leftOver.length){if(h2.uint8array){var r3=t3;(t3=new Uint8Array(r3.length+this.leftOver.length)).set(this.leftOver,0),t3.set(r3,this.leftOver.length)}else t3=this.leftOver.concat(t3);this.leftOver=null}var n4=function(e4,t4){var r4;for((t4=t4||e4.length)>e4.length&&(t4=e4.length),r4=t4-1;0<=r4&&(192&e4[r4])==128;)r4--;return r4<0||r4===0?t4:r4+u2[e4[r4]]>t4?r4:t4}(t3),i3=t3;n4!==t3.length&&(h2.uint8array?(i3=t3.subarray(0,n4),this.leftOver=t3.subarray(n4,t3.length)):(i3=t3.slice(0,n4),this.leftOver=t3.slice(n4,t3.length))),this.push({data:s2.utf8decode(i3),meta:e3.meta})},a2.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s2.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s2.Utf8DecodeWorker=a2,o2.inherits(l2,n3),l2.prototype.processChunk=function(e3){this.push({data:s2.utf8encode(e3.data),meta:e3.meta})},s2.Utf8EncodeWorker=l2},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e2,t2,a2){var o2=e2("./support"),h2=e2("./base64"),r2=e2("./nodejsUtils"),u2=e2("./external");function n3(e3){return e3}__name(n3,"n");function l2(e3,t3){for(var r3=0;r3<e3.length;++r3)t3[r3]=255&e3.charCodeAt(r3);return t3}__name(l2,"l"),e2("setimmediate"),a2.newBlob=function(t3,r3){a2.checkSupport("blob");try{return new Blob([t3],{type:r3})}catch{try{var n4=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n4.append(t3),n4.getBlob(r3)}catch{throw new Error("Bug : can't construct the Blob.")}}};var i2={stringifyByChunk:__name(function(e3,t3,r3){var n4=[],i3=0,s3=e3.length;if(s3<=r3)return String.fromCharCode.apply(null,e3);for(;i3<s3;)t3==="array"||t3==="nodebuffer"?n4.push(String.fromCharCode.apply(null,e3.slice(i3,Math.min(i3+r3,s3)))):n4.push(String.fromCharCode.apply(null,e3.subarray(i3,Math.min(i3+r3,s3)))),i3+=r3;return n4.join("")},"stringifyByChunk"),stringifyByChar:__name(function(e3){for(var t3="",r3=0;r3<e3.length;r3++)t3+=String.fromCharCode(e3[r3]);return t3},"stringifyByChar"),applyCanBeUsed:{uint8array:function(){try{return o2.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o2.nodebuffer&&String.fromCharCode.apply(null,r2.allocBuffer(1)).length===1}catch{return!1}}()}};function s2(e3){var t3=65536,r3=a2.getTypeOf(e3),n4=!0;if(r3==="uint8array"?n4=i2.applyCanBeUsed.uint8array:r3==="nodebuffer"&&(n4=i2.applyCanBeUsed.nodebuffer),n4)for(;1<t3;)try{return i2.stringifyByChunk(e3,r3,t3)}catch{t3=Math.floor(t3/2)}return i2.stringifyByChar(e3)}__name(s2,"s");function f2(e3,t3){for(var r3=0;r3<e3.length;r3++)t3[r3]=e3[r3];return t3}__name(f2,"f"),a2.applyFromCharCode=s2;var c={};c.string={string:n3,array:__name(function(e3){return l2(e3,new Array(e3.length))},"array"),arraybuffer:__name(function(e3){return c.string.uint8array(e3).buffer},"arraybuffer"),uint8array:__name(function(e3){return l2(e3,new Uint8Array(e3.length))},"uint8array"),nodebuffer:__name(function(e3){return l2(e3,r2.allocBuffer(e3.length))},"nodebuffer")},c.array={string:s2,array:n3,arraybuffer:__name(function(e3){return new Uint8Array(e3).buffer},"arraybuffer"),uint8array:__name(function(e3){return new Uint8Array(e3)},"uint8array"),nodebuffer:__name(function(e3){return r2.newBufferFrom(e3)},"nodebuffer")},c.arraybuffer={string:__name(function(e3){return s2(new Uint8Array(e3))},"string"),array:__name(function(e3){return f2(new Uint8Array(e3),new Array(e3.byteLength))},"array"),arraybuffer:n3,uint8array:__name(function(e3){return new Uint8Array(e3)},"uint8array"),nodebuffer:__name(function(e3){return r2.newBufferFrom(new Uint8Array(e3))},"nodebuffer")},c.uint8array={string:s2,array:__name(function(e3){return f2(e3,new Array(e3.length))},"array"),arraybuffer:__name(function(e3){return e3.buffer},"arraybuffer"),uint8array:n3,nodebuffer:__name(function(e3){return r2.newBufferFrom(e3)},"nodebuffer")},c.nodebuffer={string:s2,array:__name(function(e3){return f2(e3,new Array(e3.length))},"array"),arraybuffer:__name(function(e3){return c.nodebuffer.uint8array(e3).buffer},"arraybuffer"),uint8array:__name(function(e3){return f2(e3,new Uint8Array(e3.length))},"uint8array"),nodebuffer:n3},a2.transformTo=function(e3,t3){if(t3=t3||"",!e3)return t3;a2.checkSupport(e3);var r3=a2.getTypeOf(t3);return c[r3][e3](t3)},a2.resolve=function(e3){for(var t3=e3.split("/"),r3=[],n4=0;n4<t3.length;n4++){var i3=t3[n4];i3==="."||i3===""&&n4!==0&&n4!==t3.length-1||(i3===".."?r3.pop():r3.push(i3))}return r3.join("/")},a2.getTypeOf=function(e3){return typeof e3=="string"?"string":Object.prototype.toString.call(e3)==="[object Array]"?"array":o2.nodebuffer&&r2.isBuffer(e3)?"nodebuffer":o2.uint8array&&e3 instanceof Uint8Array?"uint8array":o2.arraybuffer&&e3 instanceof ArrayBuffer?"arraybuffer":void 0},a2.checkSupport=function(e3){if(!o2[e3.toLowerCase()])throw new Error(e3+" is not supported by this platform")},a2.MAX_VALUE_16BITS=65535,a2.MAX_VALUE_32BITS=-1,a2.pretty=function(e3){var t3,r3,n4="";for(r3=0;r3<(e3||"").length;r3++)n4+="\\x"+((t3=e3.charCodeAt(r3))<16?"0":"")+t3.toString(16).toUpperCase();return n4},a2.delay=function(e3,t3,r3){setImmediate(function(){e3.apply(r3||null,t3||[])})},a2.inherits=function(e3,t3){function r3(){}__name(r3,"r"),r3.prototype=t3.prototype,e3.prototype=new r3},a2.extend=function(){var e3,t3,r3={};for(e3=0;e3<arguments.length;e3++)for(t3 in arguments[e3])Object.prototype.hasOwnProperty.call(arguments[e3],t3)&&r3[t3]===void 0&&(r3[t3]=arguments[e3][t3]);return r3},a2.prepareContent=function(r3,e3,n4,i3,s3){return u2.Promise.resolve(e3).then(function(n5){return o2.blob&&(n5 instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(n5))!==-1)&&typeof FileReader<"u"?new u2.Promise(function(t3,r4){var e4=new FileReader;e4.onload=function(e5){t3(e5.target.result)},e4.onerror=function(e5){r4(e5.target.error)},e4.readAsArrayBuffer(n5)}):n5}).then(function(e4){var t3=a2.getTypeOf(e4);return t3?(t3==="arraybuffer"?e4=a2.transformTo("uint8array",e4):t3==="string"&&(s3?e4=h2.decode(e4):n4&&i3!==!0&&(e4=function(e5){return l2(e5,o2.uint8array?new Uint8Array(e5.length):new Array(e5.length))}(e4))),e4):u2.Promise.reject(new Error("Can't read the data of '"+r3+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e2,t2,r2){var n3=e2("./reader/readerFor"),i2=e2("./utils"),s2=e2("./signature"),a2=e2("./zipEntry"),o2=e2("./support");function h2(e3){this.files=[],this.loadOptions=e3}__name(h2,"h"),h2.prototype={checkSignature:__name(function(e3){if(!this.reader.readAndCheckSignature(e3)){this.reader.index-=4;var t3=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i2.pretty(t3)+", expected "+i2.pretty(e3)+")")}},"checkSignature"),isSignature:__name(function(e3,t3){var r3=this.reader.index;this.reader.setIndex(e3);var n4=this.reader.readString(4)===t3;return this.reader.setIndex(r3),n4},"isSignature"),readBlockEndOfCentral:__name(function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e3=this.reader.readData(this.zipCommentLength),t3=o2.uint8array?"uint8array":"array",r3=i2.transformTo(t3,e3);this.zipComment=this.loadOptions.decodeFileName(r3)},"readBlockEndOfCentral"),readBlockZip64EndOfCentral:__name(function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e3,t3,r3,n4=this.zip64EndOfCentralSize-44;0<n4;)e3=this.reader.readInt(2),t3=this.reader.readInt(4),r3=this.reader.readData(t3),this.zip64ExtensibleData[e3]={id:e3,length:t3,value:r3}},"readBlockZip64EndOfCentral"),readBlockZip64EndOfCentralLocator:__name(function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},"readBlockZip64EndOfCentralLocator"),readLocalFiles:__name(function(){var e3,t3;for(e3=0;e3<this.files.length;e3++)t3=this.files[e3],this.reader.setIndex(t3.localHeaderOffset),this.checkSignature(s2.LOCAL_FILE_HEADER),t3.readLocalPart(this.reader),t3.handleUTF8(),t3.processAttributes()},"readLocalFiles"),readCentralDir:__name(function(){var e3;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s2.CENTRAL_FILE_HEADER);)(e3=new a2({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e3);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},"readCentralDir"),readEndOfCentral:__name(function(){var e3=this.reader.lastIndexOfSignature(s2.CENTRAL_DIRECTORY_END);if(e3<0)throw this.isSignature(0,s2.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e3);var t3=e3;if(this.checkSignature(s2.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i2.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i2.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i2.MAX_VALUE_16BITS||this.centralDirRecords===i2.MAX_VALUE_16BITS||this.centralDirSize===i2.MAX_VALUE_32BITS||this.centralDirOffset===i2.MAX_VALUE_32BITS){if(this.zip64=!0,(e3=this.reader.lastIndexOfSignature(s2.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e3),this.checkSignature(s2.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s2.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s2.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s2.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r3=this.centralDirOffset+this.centralDirSize;this.zip64&&(r3+=20,r3+=12+this.zip64EndOfCentralSize);var n4=t3-r3;if(0<n4)this.isSignature(t3,s2.CENTRAL_FILE_HEADER)||(this.reader.zero=n4);else if(n4<0)throw new Error("Corrupted zip: missing "+Math.abs(n4)+" bytes.")},"readEndOfCentral"),prepareReader:__name(function(e3){this.reader=n3(e3)},"prepareReader"),load:__name(function(e3){this.prepareReader(e3),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()},"load")},t2.exports=h2},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e2,t2,r2){var n3=e2("./reader/readerFor"),s2=e2("./utils"),i2=e2("./compressedObject"),a2=e2("./crc32"),o2=e2("./utf8"),h2=e2("./compressions"),u2=e2("./support");function l2(e3,t3){this.options=e3,this.loadOptions=t3}__name(l2,"l"),l2.prototype={isEncrypted:__name(function(){return(1&this.bitFlag)==1},"isEncrypted"),useUTF8:__name(function(){return(2048&this.bitFlag)==2048},"useUTF8"),readLocalPart:__name(function(e3){var t3,r3;if(e3.skip(22),this.fileNameLength=e3.readInt(2),r3=e3.readInt(2),this.fileName=e3.readData(this.fileNameLength),e3.skip(r3),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((t3=function(e4){for(var t4 in h2)if(Object.prototype.hasOwnProperty.call(h2,t4)&&h2[t4].magic===e4)return h2[t4];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s2.pretty(this.compressionMethod)+" unknown (inner file : "+s2.transformTo("string",this.fileName)+")");this.decompressed=new i2(this.compressedSize,this.uncompressedSize,this.crc32,t3,e3.readData(this.compressedSize))},"readLocalPart"),readCentralPart:__name(function(e3){this.versionMadeBy=e3.readInt(2),e3.skip(2),this.bitFlag=e3.readInt(2),this.compressionMethod=e3.readString(2),this.date=e3.readDate(),this.crc32=e3.readInt(4),this.compressedSize=e3.readInt(4),this.uncompressedSize=e3.readInt(4);var t3=e3.readInt(2);if(this.extraFieldsLength=e3.readInt(2),this.fileCommentLength=e3.readInt(2),this.diskNumberStart=e3.readInt(2),this.internalFileAttributes=e3.readInt(2),this.externalFileAttributes=e3.readInt(4),this.localHeaderOffset=e3.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e3.skip(t3),this.readExtraFields(e3),this.parseZIP64ExtraField(e3),this.fileComment=e3.readData(this.fileCommentLength)},"readCentralPart"),processAttributes:__name(function(){this.unixPermissions=null,this.dosPermissions=null;var e3=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),e3==0&&(this.dosPermissions=63&this.externalFileAttributes),e3==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},"processAttributes"),parseZIP64ExtraField:__name(function(){if(this.extraFields[1]){var e3=n3(this.extraFields[1].value);this.uncompressedSize===s2.MAX_VALUE_32BITS&&(this.uncompressedSize=e3.readInt(8)),this.compressedSize===s2.MAX_VALUE_32BITS&&(this.compressedSize=e3.readInt(8)),this.localHeaderOffset===s2.MAX_VALUE_32BITS&&(this.localHeaderOffset=e3.readInt(8)),this.diskNumberStart===s2.MAX_VALUE_32BITS&&(this.diskNumberStart=e3.readInt(4))}},"parseZIP64ExtraField"),readExtraFields:__name(function(e3){var t3,r3,n4,i3=e3.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e3.index+4<i3;)t3=e3.readInt(2),r3=e3.readInt(2),n4=e3.readData(r3),this.extraFields[t3]={id:t3,length:r3,value:n4};e3.setIndex(i3)},"readExtraFields"),handleUTF8:__name(function(){var e3=u2.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o2.utf8decode(this.fileName),this.fileCommentStr=o2.utf8decode(this.fileComment);else{var t3=this.findExtraFieldUnicodePath();if(t3!==null)this.fileNameStr=t3;else{var r3=s2.transformTo(e3,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r3)}var n4=this.findExtraFieldUnicodeComment();if(n4!==null)this.fileCommentStr=n4;else{var i3=s2.transformTo(e3,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i3)}}},"handleUTF8"),findExtraFieldUnicodePath:__name(function(){var e3=this.extraFields[28789];if(e3){var t3=n3(e3.value);return t3.readInt(1)!==1||a2(this.fileName)!==t3.readInt(4)?null:o2.utf8decode(t3.readData(e3.length-5))}return null},"findExtraFieldUnicodePath"),findExtraFieldUnicodeComment:__name(function(){var e3=this.extraFields[25461];if(e3){var t3=n3(e3.value);return t3.readInt(1)!==1||a2(this.fileComment)!==t3.readInt(4)?null:o2.utf8decode(t3.readData(e3.length-5))}return null},"findExtraFieldUnicodeComment")},t2.exports=l2},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e2,t2,r2){function n3(e3,t3,r3){this.name=e3,this.dir=r3.dir,this.date=r3.date,this.comment=r3.comment,this.unixPermissions=r3.unixPermissions,this.dosPermissions=r3.dosPermissions,this._data=t3,this._dataBinary=r3.binary,this.options={compression:r3.compression,compressionOptions:r3.compressionOptions}}__name(n3,"n");var s2=e2("./stream/StreamHelper"),i2=e2("./stream/DataWorker"),a2=e2("./utf8"),o2=e2("./compressedObject"),h2=e2("./stream/GenericWorker");n3.prototype={internalStream:__name(function(e3){var t3=null,r3="string";try{if(!e3)throw new Error("No output type specified.");var n4=(r3=e3.toLowerCase())==="string"||r3==="text";r3!=="binarystring"&&r3!=="text"||(r3="string"),t3=this._decompressWorker();var i3=!this._dataBinary;i3&&!n4&&(t3=t3.pipe(new a2.Utf8EncodeWorker)),!i3&&n4&&(t3=t3.pipe(new a2.Utf8DecodeWorker))}catch(e4){(t3=new h2("error")).error(e4)}return new s2(t3,r3,"")},"internalStream"),async:__name(function(e3,t3){return this.internalStream(e3).accumulate(t3)},"async"),nodeStream:__name(function(e3,t3){return this.internalStream(e3||"nodebuffer").toNodejsStream(t3)},"nodeStream"),_compressWorker:__name(function(e3,t3){if(this._data instanceof o2&&this._data.compression.magic===e3.magic)return this._data.getCompressedWorker();var r3=this._decompressWorker();return this._dataBinary||(r3=r3.pipe(new a2.Utf8EncodeWorker)),o2.createWorkerFrom(r3,e3,t3)},"_compressWorker"),_decompressWorker:__name(function(){return this._data instanceof o2?this._data.getContentWorker():this._data instanceof h2?this._data:new i2(this._data)},"_decompressWorker")};for(var u2=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l2=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f2=0;f2<u2.length;f2++)n3.prototype[u2[f2]]=l2;t2.exports=n3},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e2,l2,t2){(function(t3){var r2,n3,e3=t3.MutationObserver||t3.WebKitMutationObserver;if(e3){var i2=0,s2=new e3(u2),a2=t3.document.createTextNode("");s2.observe(a2,{characterData:!0}),r2=__name(function(){a2.data=i2=++i2%2},"r")}else if(t3.setImmediate||t3.MessageChannel===void 0)r2="document"in t3&&"onreadystatechange"in t3.document.createElement("script")?function(){var e4=t3.document.createElement("script");e4.onreadystatechange=function(){u2(),e4.onreadystatechange=null,e4.parentNode.removeChild(e4),e4=null},t3.document.documentElement.appendChild(e4)}:function(){setTimeout(u2,0)};else{var o2=new t3.MessageChannel;o2.port1.onmessage=u2,r2=__name(function(){o2.port2.postMessage(0)},"r")}var h2=[];function u2(){var e4,t4;n3=!0;for(var r3=h2.length;r3;){for(t4=h2,h2=[],e4=-1;++e4<r3;)t4[e4]();r3=h2.length}n3=!1}__name(u2,"u"),l2.exports=function(e4){h2.push(e4)!==1||n3||r2()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e2,t2,r2){var i2=e2("immediate");function u2(){}__name(u2,"u");var l2={},s2=["REJECTED"],a2=["FULFILLED"],n3=["PENDING"];function o2(e3){if(typeof e3!="function")throw new TypeError("resolver must be a function");this.state=n3,this.queue=[],this.outcome=void 0,e3!==u2&&d2(this,e3)}__name(o2,"o");function h2(e3,t3,r3){this.promise=e3,typeof t3=="function"&&(this.onFulfilled=t3,this.callFulfilled=this.otherCallFulfilled),typeof r3=="function"&&(this.onRejected=r3,this.callRejected=this.otherCallRejected)}__name(h2,"h");function f2(t3,r3,n4){i2(function(){var e3;try{e3=r3(n4)}catch(e4){return l2.reject(t3,e4)}e3===t3?l2.reject(t3,new TypeError("Cannot resolve promise with itself")):l2.resolve(t3,e3)})}__name(f2,"f");function c(e3){var t3=e3&&e3.then;if(e3&&(typeof e3=="object"||typeof e3=="function")&&typeof t3=="function")return function(){t3.apply(e3,arguments)}}__name(c,"c");function d2(t3,e3){var r3=!1;function n4(e4){r3||(r3=!0,l2.reject(t3,e4))}__name(n4,"n");function i3(e4){r3||(r3=!0,l2.resolve(t3,e4))}__name(i3,"i");var s3=p2(function(){e3(i3,n4)});s3.status==="error"&&n4(s3.value)}__name(d2,"d");function p2(e3,t3){var r3={};try{r3.value=e3(t3),r3.status="success"}catch(e4){r3.status="error",r3.value=e4}return r3}__name(p2,"p"),(t2.exports=o2).prototype.finally=function(t3){if(typeof t3!="function")return this;var r3=this.constructor;return this.then(function(e3){return r3.resolve(t3()).then(function(){return e3})},function(e3){return r3.resolve(t3()).then(function(){throw e3})})},o2.prototype.catch=function(e3){return this.then(null,e3)},o2.prototype.then=function(e3,t3){if(typeof e3!="function"&&this.state===a2||typeof t3!="function"&&this.state===s2)return this;var r3=new this.constructor(u2);return this.state!==n3?f2(r3,this.state===a2?e3:t3,this.outcome):this.queue.push(new h2(r3,e3,t3)),r3},h2.prototype.callFulfilled=function(e3){l2.resolve(this.promise,e3)},h2.prototype.otherCallFulfilled=function(e3){f2(this.promise,this.onFulfilled,e3)},h2.prototype.callRejected=function(e3){l2.reject(this.promise,e3)},h2.prototype.otherCallRejected=function(e3){f2(this.promise,this.onRejected,e3)},l2.resolve=function(e3,t3){var r3=p2(c,t3);if(r3.status==="error")return l2.reject(e3,r3.value);var n4=r3.value;if(n4)d2(e3,n4);else{e3.state=a2,e3.outcome=t3;for(var i3=-1,s3=e3.queue.length;++i3<s3;)e3.queue[i3].callFulfilled(t3)}return e3},l2.reject=function(e3,t3){e3.state=s2,e3.outcome=t3;for(var r3=-1,n4=e3.queue.length;++r3<n4;)e3.queue[r3].callRejected(t3);return e3},o2.resolve=function(e3){return e3 instanceof this?e3:l2.resolve(new this(u2),e3)},o2.reject=function(e3){var t3=new this(u2);return l2.reject(t3,e3)},o2.all=function(e3){var r3=this;if(Object.prototype.toString.call(e3)!=="[object Array]")return this.reject(new TypeError("must be an array"));var n4=e3.length,i3=!1;if(!n4)return this.resolve([]);for(var s3=new Array(n4),a3=0,t3=-1,o3=new this(u2);++t3<n4;)h3(e3[t3],t3);return o3;function h3(e4,t4){r3.resolve(e4).then(function(e5){s3[t4]=e5,++a3!==n4||i3||(i3=!0,l2.resolve(o3,s3))},function(e5){i3||(i3=!0,l2.reject(o3,e5))})}},o2.race=function(e3){var t3=this;if(Object.prototype.toString.call(e3)!=="[object Array]")return this.reject(new TypeError("must be an array"));var r3=e3.length,n4=!1;if(!r3)return this.resolve([]);for(var i3=-1,s3=new this(u2);++i3<r3;)a3=e3[i3],t3.resolve(a3).then(function(e4){n4||(n4=!0,l2.resolve(s3,e4))},function(e4){n4||(n4=!0,l2.reject(s3,e4))});var a3;return s3}},{immediate:36}],38:[function(e2,t2,r2){var n3={};(0,e2("./lib/utils/common").assign)(n3,e2("./lib/deflate"),e2("./lib/inflate"),e2("./lib/zlib/constants")),t2.exports=n3},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e2,t2,r2){var a2=e2("./zlib/deflate"),o2=e2("./utils/common"),h2=e2("./utils/strings"),i2=e2("./zlib/messages"),s2=e2("./zlib/zstream"),u2=Object.prototype.toString,l2=0,f2=-1,c=0,d2=8;function p2(e3){if(!(this instanceof p2))return new p2(e3);this.options=o2.assign({level:f2,method:d2,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},e3||{});var t3=this.options;t3.raw&&0<t3.windowBits?t3.windowBits=-t3.windowBits:t3.gzip&&0<t3.windowBits&&t3.windowBits<16&&(t3.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s2,this.strm.avail_out=0;var r3=a2.deflateInit2(this.strm,t3.level,t3.method,t3.windowBits,t3.memLevel,t3.strategy);if(r3!==l2)throw new Error(i2[r3]);if(t3.header&&a2.deflateSetHeader(this.strm,t3.header),t3.dictionary){var n4;if(n4=typeof t3.dictionary=="string"?h2.string2buf(t3.dictionary):u2.call(t3.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t3.dictionary):t3.dictionary,(r3=a2.deflateSetDictionary(this.strm,n4))!==l2)throw new Error(i2[r3]);this._dict_set=!0}}__name(p2,"p");function n3(e3,t3){var r3=new p2(t3);if(r3.push(e3,!0),r3.err)throw r3.msg||i2[r3.err];return r3.result}__name(n3,"n"),p2.prototype.push=function(e3,t3){var r3,n4,i3=this.strm,s3=this.options.chunkSize;if(this.ended)return!1;n4=t3===~~t3?t3:t3===!0?4:0,typeof e3=="string"?i3.input=h2.string2buf(e3):u2.call(e3)==="[object ArrayBuffer]"?i3.input=new Uint8Array(e3):i3.input=e3,i3.next_in=0,i3.avail_in=i3.input.length;do{if(i3.avail_out===0&&(i3.output=new o2.Buf8(s3),i3.next_out=0,i3.avail_out=s3),(r3=a2.deflate(i3,n4))!==1&&r3!==l2)return this.onEnd(r3),!(this.ended=!0);i3.avail_out!==0&&(i3.avail_in!==0||n4!==4&&n4!==2)||(this.options.to==="string"?this.onData(h2.buf2binstring(o2.shrinkBuf(i3.output,i3.next_out))):this.onData(o2.shrinkBuf(i3.output,i3.next_out)))}while((0<i3.avail_in||i3.avail_out===0)&&r3!==1);return n4===4?(r3=a2.deflateEnd(this.strm),this.onEnd(r3),this.ended=!0,r3===l2):n4!==2||(this.onEnd(l2),!(i3.avail_out=0))},p2.prototype.onData=function(e3){this.chunks.push(e3)},p2.prototype.onEnd=function(e3){e3===l2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o2.flattenChunks(this.chunks)),this.chunks=[],this.err=e3,this.msg=this.strm.msg},r2.Deflate=p2,r2.deflate=n3,r2.deflateRaw=function(e3,t3){return(t3=t3||{}).raw=!0,n3(e3,t3)},r2.gzip=function(e3,t3){return(t3=t3||{}).gzip=!0,n3(e3,t3)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e2,t2,r2){var c=e2("./zlib/inflate"),d2=e2("./utils/common"),p2=e2("./utils/strings"),m2=e2("./zlib/constants"),n3=e2("./zlib/messages"),i2=e2("./zlib/zstream"),s2=e2("./zlib/gzheader"),_2=Object.prototype.toString;function a2(e3){if(!(this instanceof a2))return new a2(e3);this.options=d2.assign({chunkSize:16384,windowBits:0,to:""},e3||{});var t3=this.options;t3.raw&&0<=t3.windowBits&&t3.windowBits<16&&(t3.windowBits=-t3.windowBits,t3.windowBits===0&&(t3.windowBits=-15)),!(0<=t3.windowBits&&t3.windowBits<16)||e3&&e3.windowBits||(t3.windowBits+=32),15<t3.windowBits&&t3.windowBits<48&&(15&t3.windowBits)==0&&(t3.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i2,this.strm.avail_out=0;var r3=c.inflateInit2(this.strm,t3.windowBits);if(r3!==m2.Z_OK)throw new Error(n3[r3]);this.header=new s2,c.inflateGetHeader(this.strm,this.header)}__name(a2,"a");function o2(e3,t3){var r3=new a2(t3);if(r3.push(e3,!0),r3.err)throw r3.msg||n3[r3.err];return r3.result}__name(o2,"o"),a2.prototype.push=function(e3,t3){var r3,n4,i3,s3,a3,o3,h2=this.strm,u2=this.options.chunkSize,l2=this.options.dictionary,f2=!1;if(this.ended)return!1;n4=t3===~~t3?t3:t3===!0?m2.Z_FINISH:m2.Z_NO_FLUSH,typeof e3=="string"?h2.input=p2.binstring2buf(e3):_2.call(e3)==="[object ArrayBuffer]"?h2.input=new Uint8Array(e3):h2.input=e3,h2.next_in=0,h2.avail_in=h2.input.length;do{if(h2.avail_out===0&&(h2.output=new d2.Buf8(u2),h2.next_out=0,h2.avail_out=u2),(r3=c.inflate(h2,m2.Z_NO_FLUSH))===m2.Z_NEED_DICT&&l2&&(o3=typeof l2=="string"?p2.string2buf(l2):_2.call(l2)==="[object ArrayBuffer]"?new Uint8Array(l2):l2,r3=c.inflateSetDictionary(this.strm,o3)),r3===m2.Z_BUF_ERROR&&f2===!0&&(r3=m2.Z_OK,f2=!1),r3!==m2.Z_STREAM_END&&r3!==m2.Z_OK)return this.onEnd(r3),!(this.ended=!0);h2.next_out&&(h2.avail_out!==0&&r3!==m2.Z_STREAM_END&&(h2.avail_in!==0||n4!==m2.Z_FINISH&&n4!==m2.Z_SYNC_FLUSH)||(this.options.to==="string"?(i3=p2.utf8border(h2.output,h2.next_out),s3=h2.next_out-i3,a3=p2.buf2string(h2.output,i3),h2.next_out=s3,h2.avail_out=u2-s3,s3&&d2.arraySet(h2.output,h2.output,i3,s3,0),this.onData(a3)):this.onData(d2.shrinkBuf(h2.output,h2.next_out)))),h2.avail_in===0&&h2.avail_out===0&&(f2=!0)}while((0<h2.avail_in||h2.avail_out===0)&&r3!==m2.Z_STREAM_END);return r3===m2.Z_STREAM_END&&(n4=m2.Z_FINISH),n4===m2.Z_FINISH?(r3=c.inflateEnd(this.strm),this.onEnd(r3),this.ended=!0,r3===m2.Z_OK):n4!==m2.Z_SYNC_FLUSH||(this.onEnd(m2.Z_OK),!(h2.avail_out=0))},a2.prototype.onData=function(e3){this.chunks.push(e3)},a2.prototype.onEnd=function(e3){e3===m2.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d2.flattenChunks(this.chunks)),this.chunks=[],this.err=e3,this.msg=this.strm.msg},r2.Inflate=a2,r2.inflate=o2,r2.inflateRaw=function(e3,t3){return(t3=t3||{}).raw=!0,o2(e3,t3)},r2.ungzip=o2},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e2,t2,r2){var n3=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r2.assign=function(e3){for(var t3=Array.prototype.slice.call(arguments,1);t3.length;){var r3=t3.shift();if(r3){if(typeof r3!="object")throw new TypeError(r3+"must be non-object");for(var n4 in r3)r3.hasOwnProperty(n4)&&(e3[n4]=r3[n4])}}return e3},r2.shrinkBuf=function(e3,t3){return e3.length===t3?e3:e3.subarray?e3.subarray(0,t3):(e3.length=t3,e3)};var i2={arraySet:__name(function(e3,t3,r3,n4,i3){if(t3.subarray&&e3.subarray)e3.set(t3.subarray(r3,r3+n4),i3);else for(var s3=0;s3<n4;s3++)e3[i3+s3]=t3[r3+s3]},"arraySet"),flattenChunks:__name(function(e3){var t3,r3,n4,i3,s3,a2;for(t3=n4=0,r3=e3.length;t3<r3;t3++)n4+=e3[t3].length;for(a2=new Uint8Array(n4),t3=i3=0,r3=e3.length;t3<r3;t3++)s3=e3[t3],a2.set(s3,i3),i3+=s3.length;return a2},"flattenChunks")},s2={arraySet:__name(function(e3,t3,r3,n4,i3){for(var s3=0;s3<n4;s3++)e3[i3+s3]=t3[r3+s3]},"arraySet"),flattenChunks:__name(function(e3){return[].concat.apply([],e3)},"flattenChunks")};r2.setTyped=function(e3){e3?(r2.Buf8=Uint8Array,r2.Buf16=Uint16Array,r2.Buf32=Int32Array,r2.assign(r2,i2)):(r2.Buf8=Array,r2.Buf16=Array,r2.Buf32=Array,r2.assign(r2,s2))},r2.setTyped(n3)},{}],42:[function(e2,t2,r2){var h2=e2("./common"),i2=!0,s2=!0;try{String.fromCharCode.apply(null,[0])}catch{i2=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s2=!1}for(var u2=new h2.Buf8(256),n3=0;n3<256;n3++)u2[n3]=252<=n3?6:248<=n3?5:240<=n3?4:224<=n3?3:192<=n3?2:1;function l2(e3,t3){if(t3<65537&&(e3.subarray&&s2||!e3.subarray&&i2))return String.fromCharCode.apply(null,h2.shrinkBuf(e3,t3));for(var r3="",n4=0;n4<t3;n4++)r3+=String.fromCharCode(e3[n4]);return r3}__name(l2,"l"),u2[254]=u2[254]=1,r2.string2buf=function(e3){var t3,r3,n4,i3,s3,a2=e3.length,o2=0;for(i3=0;i3<a2;i3++)(64512&(r3=e3.charCodeAt(i3)))==55296&&i3+1<a2&&(64512&(n4=e3.charCodeAt(i3+1)))==56320&&(r3=65536+(r3-55296<<10)+(n4-56320),i3++),o2+=r3<128?1:r3<2048?2:r3<65536?3:4;for(t3=new h2.Buf8(o2),i3=s3=0;s3<o2;i3++)(64512&(r3=e3.charCodeAt(i3)))==55296&&i3+1<a2&&(64512&(n4=e3.charCodeAt(i3+1)))==56320&&(r3=65536+(r3-55296<<10)+(n4-56320),i3++),r3<128?t3[s3++]=r3:(r3<2048?t3[s3++]=192|r3>>>6:(r3<65536?t3[s3++]=224|r3>>>12:(t3[s3++]=240|r3>>>18,t3[s3++]=128|r3>>>12&63),t3[s3++]=128|r3>>>6&63),t3[s3++]=128|63&r3);return t3},r2.buf2binstring=function(e3){return l2(e3,e3.length)},r2.binstring2buf=function(e3){for(var t3=new h2.Buf8(e3.length),r3=0,n4=t3.length;r3<n4;r3++)t3[r3]=e3.charCodeAt(r3);return t3},r2.buf2string=function(e3,t3){var r3,n4,i3,s3,a2=t3||e3.length,o2=new Array(2*a2);for(r3=n4=0;r3<a2;)if((i3=e3[r3++])<128)o2[n4++]=i3;else if(4<(s3=u2[i3]))o2[n4++]=65533,r3+=s3-1;else{for(i3&=s3===2?31:s3===3?15:7;1<s3&&r3<a2;)i3=i3<<6|63&e3[r3++],s3--;1<s3?o2[n4++]=65533:i3<65536?o2[n4++]=i3:(i3-=65536,o2[n4++]=55296|i3>>10&1023,o2[n4++]=56320|1023&i3)}return l2(o2,n4)},r2.utf8border=function(e3,t3){var r3;for((t3=t3||e3.length)>e3.length&&(t3=e3.length),r3=t3-1;0<=r3&&(192&e3[r3])==128;)r3--;return r3<0||r3===0?t3:r3+u2[e3[r3]]>t3?r3:t3}},{"./common":41}],43:[function(e2,t2,r2){t2.exports=function(e3,t3,r3,n3){for(var i2=65535&e3|0,s2=e3>>>16&65535|0,a2=0;r3!==0;){for(r3-=a2=2e3<r3?2e3:r3;s2=s2+(i2=i2+t3[n3++]|0)|0,--a2;);i2%=65521,s2%=65521}return i2|s2<<16|0}},{}],44:[function(e2,t2,r2){t2.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e2,t2,r2){var o2=function(){for(var e3,t3=[],r3=0;r3<256;r3++){e3=r3;for(var n3=0;n3<8;n3++)e3=1&e3?3988292384^e3>>>1:e3>>>1;t3[r3]=e3}return t3}();t2.exports=function(e3,t3,r3,n3){var i2=o2,s2=n3+r3;e3^=-1;for(var a2=n3;a2<s2;a2++)e3=e3>>>8^i2[255&(e3^t3[a2])];return-1^e3}},{}],46:[function(e2,t2,r2){var h2,c=e2("../utils/common"),u2=e2("./trees"),d2=e2("./adler32"),p2=e2("./crc32"),n3=e2("./messages"),l2=0,f2=4,m2=0,_2=-2,g2=-1,b2=4,i2=2,v2=8,y2=9,s2=286,a2=30,o2=19,w2=2*s2+1,k2=15,x2=3,S2=258,z2=S2+x2+1,C3=42,E2=113,A2=1,I2=2,O2=3,B2=4;function R2(e3,t3){return e3.msg=n3[t3],t3}__name(R2,"R");function T2(e3){return(e3<<1)-(4<e3?9:0)}__name(T2,"T");function D2(e3){for(var t3=e3.length;0<=--t3;)e3[t3]=0}__name(D2,"D");function F2(e3){var t3=e3.state,r3=t3.pending;r3>e3.avail_out&&(r3=e3.avail_out),r3!==0&&(c.arraySet(e3.output,t3.pending_buf,t3.pending_out,r3,e3.next_out),e3.next_out+=r3,t3.pending_out+=r3,e3.total_out+=r3,e3.avail_out-=r3,t3.pending-=r3,t3.pending===0&&(t3.pending_out=0))}__name(F2,"F");function N2(e3,t3){u2._tr_flush_block(e3,0<=e3.block_start?e3.block_start:-1,e3.strstart-e3.block_start,t3),e3.block_start=e3.strstart,F2(e3.strm)}__name(N2,"N");function U2(e3,t3){e3.pending_buf[e3.pending++]=t3}__name(U2,"U");function P2(e3,t3){e3.pending_buf[e3.pending++]=t3>>>8&255,e3.pending_buf[e3.pending++]=255&t3}__name(P2,"P");function L2(e3,t3){var r3,n4,i3=e3.max_chain_length,s3=e3.strstart,a3=e3.prev_length,o3=e3.nice_match,h3=e3.strstart>e3.w_size-z2?e3.strstart-(e3.w_size-z2):0,u3=e3.window,l3=e3.w_mask,f3=e3.prev,c2=e3.strstart+S2,d3=u3[s3+a3-1],p3=u3[s3+a3];e3.prev_length>=e3.good_match&&(i3>>=2),o3>e3.lookahead&&(o3=e3.lookahead);do if(u3[(r3=t3)+a3]===p3&&u3[r3+a3-1]===d3&&u3[r3]===u3[s3]&&u3[++r3]===u3[s3+1]){s3+=2,r3++;do;while(u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&u3[++s3]===u3[++r3]&&s3<c2);if(n4=S2-(c2-s3),s3=c2-S2,a3<n4){if(e3.match_start=t3,o3<=(a3=n4))break;d3=u3[s3+a3-1],p3=u3[s3+a3]}}while((t3=f3[t3&l3])>h3&&--i3!=0);return a3<=e3.lookahead?a3:e3.lookahead}__name(L2,"L");function j2(e3){var t3,r3,n4,i3,s3,a3,o3,h3,u3,l3,f3=e3.w_size;do{if(i3=e3.window_size-e3.lookahead-e3.strstart,e3.strstart>=f3+(f3-z2)){for(c.arraySet(e3.window,e3.window,f3,f3,0),e3.match_start-=f3,e3.strstart-=f3,e3.block_start-=f3,t3=r3=e3.hash_size;n4=e3.head[--t3],e3.head[t3]=f3<=n4?n4-f3:0,--r3;);for(t3=r3=f3;n4=e3.prev[--t3],e3.prev[t3]=f3<=n4?n4-f3:0,--r3;);i3+=f3}if(e3.strm.avail_in===0)break;if(a3=e3.strm,o3=e3.window,h3=e3.strstart+e3.lookahead,u3=i3,l3=void 0,l3=a3.avail_in,u3<l3&&(l3=u3),r3=l3===0?0:(a3.avail_in-=l3,c.arraySet(o3,a3.input,a3.next_in,l3,h3),a3.state.wrap===1?a3.adler=d2(a3.adler,o3,l3,h3):a3.state.wrap===2&&(a3.adler=p2(a3.adler,o3,l3,h3)),a3.next_in+=l3,a3.total_in+=l3,l3),e3.lookahead+=r3,e3.lookahead+e3.insert>=x2)for(s3=e3.strstart-e3.insert,e3.ins_h=e3.window[s3],e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[s3+1])&e3.hash_mask;e3.insert&&(e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[s3+x2-1])&e3.hash_mask,e3.prev[s3&e3.w_mask]=e3.head[e3.ins_h],e3.head[e3.ins_h]=s3,s3++,e3.insert--,!(e3.lookahead+e3.insert<x2)););}while(e3.lookahead<z2&&e3.strm.avail_in!==0)}__name(j2,"j");function Z2(e3,t3){for(var r3,n4;;){if(e3.lookahead<z2){if(j2(e3),e3.lookahead<z2&&t3===l2)return A2;if(e3.lookahead===0)break}if(r3=0,e3.lookahead>=x2&&(e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[e3.strstart+x2-1])&e3.hash_mask,r3=e3.prev[e3.strstart&e3.w_mask]=e3.head[e3.ins_h],e3.head[e3.ins_h]=e3.strstart),r3!==0&&e3.strstart-r3<=e3.w_size-z2&&(e3.match_length=L2(e3,r3)),e3.match_length>=x2)if(n4=u2._tr_tally(e3,e3.strstart-e3.match_start,e3.match_length-x2),e3.lookahead-=e3.match_length,e3.match_length<=e3.max_lazy_match&&e3.lookahead>=x2){for(e3.match_length--;e3.strstart++,e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[e3.strstart+x2-1])&e3.hash_mask,r3=e3.prev[e3.strstart&e3.w_mask]=e3.head[e3.ins_h],e3.head[e3.ins_h]=e3.strstart,--e3.match_length!=0;);e3.strstart++}else e3.strstart+=e3.match_length,e3.match_length=0,e3.ins_h=e3.window[e3.strstart],e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[e3.strstart+1])&e3.hash_mask;else n4=u2._tr_tally(e3,0,e3.window[e3.strstart]),e3.lookahead--,e3.strstart++;if(n4&&(N2(e3,!1),e3.strm.avail_out===0))return A2}return e3.insert=e3.strstart<x2-1?e3.strstart:x2-1,t3===f2?(N2(e3,!0),e3.strm.avail_out===0?O2:B2):e3.last_lit&&(N2(e3,!1),e3.strm.avail_out===0)?A2:I2}__name(Z2,"Z");function W2(e3,t3){for(var r3,n4,i3;;){if(e3.lookahead<z2){if(j2(e3),e3.lookahead<z2&&t3===l2)return A2;if(e3.lookahead===0)break}if(r3=0,e3.lookahead>=x2&&(e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[e3.strstart+x2-1])&e3.hash_mask,r3=e3.prev[e3.strstart&e3.w_mask]=e3.head[e3.ins_h],e3.head[e3.ins_h]=e3.strstart),e3.prev_length=e3.match_length,e3.prev_match=e3.match_start,e3.match_length=x2-1,r3!==0&&e3.prev_length<e3.max_lazy_match&&e3.strstart-r3<=e3.w_size-z2&&(e3.match_length=L2(e3,r3),e3.match_length<=5&&(e3.strategy===1||e3.match_length===x2&&4096<e3.strstart-e3.match_start)&&(e3.match_length=x2-1)),e3.prev_length>=x2&&e3.match_length<=e3.prev_length){for(i3=e3.strstart+e3.lookahead-x2,n4=u2._tr_tally(e3,e3.strstart-1-e3.prev_match,e3.prev_length-x2),e3.lookahead-=e3.prev_length-1,e3.prev_length-=2;++e3.strstart<=i3&&(e3.ins_h=(e3.ins_h<<e3.hash_shift^e3.window[e3.strstart+x2-1])&e3.hash_mask,r3=e3.prev[e3.strstart&e3.w_mask]=e3.head[e3.ins_h],e3.head[e3.ins_h]=e3.strstart),--e3.prev_length!=0;);if(e3.match_available=0,e3.match_length=x2-1,e3.strstart++,n4&&(N2(e3,!1),e3.strm.avail_out===0))return A2}else if(e3.match_available){if((n4=u2._tr_tally(e3,0,e3.window[e3.strstart-1]))&&N2(e3,!1),e3.strstart++,e3.lookahead--,e3.strm.avail_out===0)return A2}else e3.match_available=1,e3.strstart++,e3.lookahead--}return e3.match_available&&(n4=u2._tr_tally(e3,0,e3.window[e3.strstart-1]),e3.match_available=0),e3.insert=e3.strstart<x2-1?e3.strstart:x2-1,t3===f2?(N2(e3,!0),e3.strm.avail_out===0?O2:B2):e3.last_lit&&(N2(e3,!1),e3.strm.avail_out===0)?A2:I2}__name(W2,"W");function M2(e3,t3,r3,n4,i3){this.good_length=e3,this.max_lazy=t3,this.nice_length=r3,this.max_chain=n4,this.func=i3}__name(M2,"M");function H2(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*w2),this.dyn_dtree=new c.Buf16(2*(2*a2+1)),this.bl_tree=new c.Buf16(2*(2*o2+1)),D2(this.dyn_ltree),D2(this.dyn_dtree),D2(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(k2+1),this.heap=new c.Buf16(2*s2+1),D2(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*s2+1),D2(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}__name(H2,"H");function G2(e3){var t3;return e3&&e3.state?(e3.total_in=e3.total_out=0,e3.data_type=i2,(t3=e3.state).pending=0,t3.pending_out=0,t3.wrap<0&&(t3.wrap=-t3.wrap),t3.status=t3.wrap?C3:E2,e3.adler=t3.wrap===2?0:1,t3.last_flush=l2,u2._tr_init(t3),m2):R2(e3,_2)}__name(G2,"G");function K2(e3){var t3=G2(e3);return t3===m2&&function(e4){e4.window_size=2*e4.w_size,D2(e4.head),e4.max_lazy_match=h2[e4.level].max_lazy,e4.good_match=h2[e4.level].good_length,e4.nice_match=h2[e4.level].nice_length,e4.max_chain_length=h2[e4.level].max_chain,e4.strstart=0,e4.block_start=0,e4.lookahead=0,e4.insert=0,e4.match_length=e4.prev_length=x2-1,e4.match_available=0,e4.ins_h=0}(e3.state),t3}__name(K2,"K");function Y2(e3,t3,r3,n4,i3,s3){if(!e3)return _2;var a3=1;if(t3===g2&&(t3=6),n4<0?(a3=0,n4=-n4):15<n4&&(a3=2,n4-=16),i3<1||y2<i3||r3!==v2||n4<8||15<n4||t3<0||9<t3||s3<0||b2<s3)return R2(e3,_2);n4===8&&(n4=9);var o3=new H2;return(e3.state=o3).strm=e3,o3.wrap=a3,o3.gzhead=null,o3.w_bits=n4,o3.w_size=1<<o3.w_bits,o3.w_mask=o3.w_size-1,o3.hash_bits=i3+7,o3.hash_size=1<<o3.hash_bits,o3.hash_mask=o3.hash_size-1,o3.hash_shift=~~((o3.hash_bits+x2-1)/x2),o3.window=new c.Buf8(2*o3.w_size),o3.head=new c.Buf16(o3.hash_size),o3.prev=new c.Buf16(o3.w_size),o3.lit_bufsize=1<<i3+6,o3.pending_buf_size=4*o3.lit_bufsize,o3.pending_buf=new c.Buf8(o3.pending_buf_size),o3.d_buf=1*o3.lit_bufsize,o3.l_buf=3*o3.lit_bufsize,o3.level=t3,o3.strategy=s3,o3.method=r3,K2(e3)}__name(Y2,"Y"),h2=[new M2(0,0,0,0,function(e3,t3){var r3=65535;for(r3>e3.pending_buf_size-5&&(r3=e3.pending_buf_size-5);;){if(e3.lookahead<=1){if(j2(e3),e3.lookahead===0&&t3===l2)return A2;if(e3.lookahead===0)break}e3.strstart+=e3.lookahead,e3.lookahead=0;var n4=e3.block_start+r3;if((e3.strstart===0||e3.strstart>=n4)&&(e3.lookahead=e3.strstart-n4,e3.strstart=n4,N2(e3,!1),e3.strm.avail_out===0)||e3.strstart-e3.block_start>=e3.w_size-z2&&(N2(e3,!1),e3.strm.avail_out===0))return A2}return e3.insert=0,t3===f2?(N2(e3,!0),e3.strm.avail_out===0?O2:B2):(e3.strstart>e3.block_start&&(N2(e3,!1),e3.strm.avail_out),A2)}),new M2(4,4,8,4,Z2),new M2(4,5,16,8,Z2),new M2(4,6,32,32,Z2),new M2(4,4,16,16,W2),new M2(8,16,32,32,W2),new M2(8,16,128,128,W2),new M2(8,32,128,256,W2),new M2(32,128,258,1024,W2),new M2(32,258,258,4096,W2)],r2.deflateInit=function(e3,t3){return Y2(e3,t3,v2,15,8,0)},r2.deflateInit2=Y2,r2.deflateReset=K2,r2.deflateResetKeep=G2,r2.deflateSetHeader=function(e3,t3){return e3&&e3.state?e3.state.wrap!==2?_2:(e3.state.gzhead=t3,m2):_2},r2.deflate=function(e3,t3){var r3,n4,i3,s3;if(!e3||!e3.state||5<t3||t3<0)return e3?R2(e3,_2):_2;if(n4=e3.state,!e3.output||!e3.input&&e3.avail_in!==0||n4.status===666&&t3!==f2)return R2(e3,e3.avail_out===0?-5:_2);if(n4.strm=e3,r3=n4.last_flush,n4.last_flush=t3,n4.status===C3)if(n4.wrap===2)e3.adler=0,U2(n4,31),U2(n4,139),U2(n4,8),n4.gzhead?(U2(n4,(n4.gzhead.text?1:0)+(n4.gzhead.hcrc?2:0)+(n4.gzhead.extra?4:0)+(n4.gzhead.name?8:0)+(n4.gzhead.comment?16:0)),U2(n4,255&n4.gzhead.time),U2(n4,n4.gzhead.time>>8&255),U2(n4,n4.gzhead.time>>16&255),U2(n4,n4.gzhead.time>>24&255),U2(n4,n4.level===9?2:2<=n4.strategy||n4.level<2?4:0),U2(n4,255&n4.gzhead.os),n4.gzhead.extra&&n4.gzhead.extra.length&&(U2(n4,255&n4.gzhead.extra.length),U2(n4,n4.gzhead.extra.length>>8&255)),n4.gzhead.hcrc&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending,0)),n4.gzindex=0,n4.status=69):(U2(n4,0),U2(n4,0),U2(n4,0),U2(n4,0),U2(n4,0),U2(n4,n4.level===9?2:2<=n4.strategy||n4.level<2?4:0),U2(n4,3),n4.status=E2);else{var a3=v2+(n4.w_bits-8<<4)<<8;a3|=(2<=n4.strategy||n4.level<2?0:n4.level<6?1:n4.level===6?2:3)<<6,n4.strstart!==0&&(a3|=32),a3+=31-a3%31,n4.status=E2,P2(n4,a3),n4.strstart!==0&&(P2(n4,e3.adler>>>16),P2(n4,65535&e3.adler)),e3.adler=1}if(n4.status===69)if(n4.gzhead.extra){for(i3=n4.pending;n4.gzindex<(65535&n4.gzhead.extra.length)&&(n4.pending!==n4.pending_buf_size||(n4.gzhead.hcrc&&n4.pending>i3&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending-i3,i3)),F2(e3),i3=n4.pending,n4.pending!==n4.pending_buf_size));)U2(n4,255&n4.gzhead.extra[n4.gzindex]),n4.gzindex++;n4.gzhead.hcrc&&n4.pending>i3&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending-i3,i3)),n4.gzindex===n4.gzhead.extra.length&&(n4.gzindex=0,n4.status=73)}else n4.status=73;if(n4.status===73)if(n4.gzhead.name){i3=n4.pending;do{if(n4.pending===n4.pending_buf_size&&(n4.gzhead.hcrc&&n4.pending>i3&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending-i3,i3)),F2(e3),i3=n4.pending,n4.pending===n4.pending_buf_size)){s3=1;break}s3=n4.gzindex<n4.gzhead.name.length?255&n4.gzhead.name.charCodeAt(n4.gzindex++):0,U2(n4,s3)}while(s3!==0);n4.gzhead.hcrc&&n4.pending>i3&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending-i3,i3)),s3===0&&(n4.gzindex=0,n4.status=91)}else n4.status=91;if(n4.status===91)if(n4.gzhead.comment){i3=n4.pending;do{if(n4.pending===n4.pending_buf_size&&(n4.gzhead.hcrc&&n4.pending>i3&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending-i3,i3)),F2(e3),i3=n4.pending,n4.pending===n4.pending_buf_size)){s3=1;break}s3=n4.gzindex<n4.gzhead.comment.length?255&n4.gzhead.comment.charCodeAt(n4.gzindex++):0,U2(n4,s3)}while(s3!==0);n4.gzhead.hcrc&&n4.pending>i3&&(e3.adler=p2(e3.adler,n4.pending_buf,n4.pending-i3,i3)),s3===0&&(n4.status=103)}else n4.status=103;if(n4.status===103&&(n4.gzhead.hcrc?(n4.pending+2>n4.pending_buf_size&&F2(e3),n4.pending+2<=n4.pending_buf_size&&(U2(n4,255&e3.adler),U2(n4,e3.adler>>8&255),e3.adler=0,n4.status=E2)):n4.status=E2),n4.pending!==0){if(F2(e3),e3.avail_out===0)return n4.last_flush=-1,m2}else if(e3.avail_in===0&&T2(t3)<=T2(r3)&&t3!==f2)return R2(e3,-5);if(n4.status===666&&e3.avail_in!==0)return R2(e3,-5);if(e3.avail_in!==0||n4.lookahead!==0||t3!==l2&&n4.status!==666){var o3=n4.strategy===2?function(e4,t4){for(var r4;;){if(e4.lookahead===0&&(j2(e4),e4.lookahead===0)){if(t4===l2)return A2;break}if(e4.match_length=0,r4=u2._tr_tally(e4,0,e4.window[e4.strstart]),e4.lookahead--,e4.strstart++,r4&&(N2(e4,!1),e4.strm.avail_out===0))return A2}return e4.insert=0,t4===f2?(N2(e4,!0),e4.strm.avail_out===0?O2:B2):e4.last_lit&&(N2(e4,!1),e4.strm.avail_out===0)?A2:I2}(n4,t3):n4.strategy===3?function(e4,t4){for(var r4,n5,i4,s4,a4=e4.window;;){if(e4.lookahead<=S2){if(j2(e4),e4.lookahead<=S2&&t4===l2)return A2;if(e4.lookahead===0)break}if(e4.match_length=0,e4.lookahead>=x2&&0<e4.strstart&&(n5=a4[i4=e4.strstart-1])===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]){s4=e4.strstart+S2;do;while(n5===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]&&n5===a4[++i4]&&i4<s4);e4.match_length=S2-(s4-i4),e4.match_length>e4.lookahead&&(e4.match_length=e4.lookahead)}if(e4.match_length>=x2?(r4=u2._tr_tally(e4,1,e4.match_length-x2),e4.lookahead-=e4.match_length,e4.strstart+=e4.match_length,e4.match_length=0):(r4=u2._tr_tally(e4,0,e4.window[e4.strstart]),e4.lookahead--,e4.strstart++),r4&&(N2(e4,!1),e4.strm.avail_out===0))return A2}return e4.insert=0,t4===f2?(N2(e4,!0),e4.strm.avail_out===0?O2:B2):e4.last_lit&&(N2(e4,!1),e4.strm.avail_out===0)?A2:I2}(n4,t3):h2[n4.level].func(n4,t3);if(o3!==O2&&o3!==B2||(n4.status=666),o3===A2||o3===O2)return e3.avail_out===0&&(n4.last_flush=-1),m2;if(o3===I2&&(t3===1?u2._tr_align(n4):t3!==5&&(u2._tr_stored_block(n4,0,0,!1),t3===3&&(D2(n4.head),n4.lookahead===0&&(n4.strstart=0,n4.block_start=0,n4.insert=0))),F2(e3),e3.avail_out===0))return n4.last_flush=-1,m2}return t3!==f2?m2:n4.wrap<=0?1:(n4.wrap===2?(U2(n4,255&e3.adler),U2(n4,e3.adler>>8&255),U2(n4,e3.adler>>16&255),U2(n4,e3.adler>>24&255),U2(n4,255&e3.total_in),U2(n4,e3.total_in>>8&255),U2(n4,e3.total_in>>16&255),U2(n4,e3.total_in>>24&255)):(P2(n4,e3.adler>>>16),P2(n4,65535&e3.adler)),F2(e3),0<n4.wrap&&(n4.wrap=-n4.wrap),n4.pending!==0?m2:1)},r2.deflateEnd=function(e3){var t3;return e3&&e3.state?(t3=e3.state.status)!==C3&&t3!==69&&t3!==73&&t3!==91&&t3!==103&&t3!==E2&&t3!==666?R2(e3,_2):(e3.state=null,t3===E2?R2(e3,-3):m2):_2},r2.deflateSetDictionary=function(e3,t3){var r3,n4,i3,s3,a3,o3,h3,u3,l3=t3.length;if(!e3||!e3.state||(s3=(r3=e3.state).wrap)===2||s3===1&&r3.status!==C3||r3.lookahead)return _2;for(s3===1&&(e3.adler=d2(e3.adler,t3,l3,0)),r3.wrap=0,l3>=r3.w_size&&(s3===0&&(D2(r3.head),r3.strstart=0,r3.block_start=0,r3.insert=0),u3=new c.Buf8(r3.w_size),c.arraySet(u3,t3,l3-r3.w_size,r3.w_size,0),t3=u3,l3=r3.w_size),a3=e3.avail_in,o3=e3.next_in,h3=e3.input,e3.avail_in=l3,e3.next_in=0,e3.input=t3,j2(r3);r3.lookahead>=x2;){for(n4=r3.strstart,i3=r3.lookahead-(x2-1);r3.ins_h=(r3.ins_h<<r3.hash_shift^r3.window[n4+x2-1])&r3.hash_mask,r3.prev[n4&r3.w_mask]=r3.head[r3.ins_h],r3.head[r3.ins_h]=n4,n4++,--i3;);r3.strstart=n4,r3.lookahead=x2-1,j2(r3)}return r3.strstart+=r3.lookahead,r3.block_start=r3.strstart,r3.insert=r3.lookahead,r3.lookahead=0,r3.match_length=r3.prev_length=x2-1,r3.match_available=0,e3.next_in=o3,e3.input=h3,e3.avail_in=a3,r3.wrap=s3,m2},r2.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e2,t2,r2){t2.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e2,t2,r2){t2.exports=function(e3,t3){var r3,n3,i2,s2,a2,o2,h2,u2,l2,f2,c,d2,p2,m2,_2,g2,b2,v2,y2,w2,k2,x2,S2,z2,C3;r3=e3.state,n3=e3.next_in,z2=e3.input,i2=n3+(e3.avail_in-5),s2=e3.next_out,C3=e3.output,a2=s2-(t3-e3.avail_out),o2=s2+(e3.avail_out-257),h2=r3.dmax,u2=r3.wsize,l2=r3.whave,f2=r3.wnext,c=r3.window,d2=r3.hold,p2=r3.bits,m2=r3.lencode,_2=r3.distcode,g2=(1<<r3.lenbits)-1,b2=(1<<r3.distbits)-1;e:do{p2<15&&(d2+=z2[n3++]<<p2,p2+=8,d2+=z2[n3++]<<p2,p2+=8),v2=m2[d2&g2];t:for(;;){if(d2>>>=y2=v2>>>24,p2-=y2,(y2=v2>>>16&255)===0)C3[s2++]=65535&v2;else{if(!(16&y2)){if((64&y2)==0){v2=m2[(65535&v2)+(d2&(1<<y2)-1)];continue t}if(32&y2){r3.mode=12;break e}e3.msg="invalid literal/length code",r3.mode=30;break e}w2=65535&v2,(y2&=15)&&(p2<y2&&(d2+=z2[n3++]<<p2,p2+=8),w2+=d2&(1<<y2)-1,d2>>>=y2,p2-=y2),p2<15&&(d2+=z2[n3++]<<p2,p2+=8,d2+=z2[n3++]<<p2,p2+=8),v2=_2[d2&b2];r:for(;;){if(d2>>>=y2=v2>>>24,p2-=y2,!(16&(y2=v2>>>16&255))){if((64&y2)==0){v2=_2[(65535&v2)+(d2&(1<<y2)-1)];continue r}e3.msg="invalid distance code",r3.mode=30;break e}if(k2=65535&v2,p2<(y2&=15)&&(d2+=z2[n3++]<<p2,(p2+=8)<y2&&(d2+=z2[n3++]<<p2,p2+=8)),h2<(k2+=d2&(1<<y2)-1)){e3.msg="invalid distance too far back",r3.mode=30;break e}if(d2>>>=y2,p2-=y2,(y2=s2-a2)<k2){if(l2<(y2=k2-y2)&&r3.sane){e3.msg="invalid distance too far back",r3.mode=30;break e}if(S2=c,(x2=0)===f2){if(x2+=u2-y2,y2<w2){for(w2-=y2;C3[s2++]=c[x2++],--y2;);x2=s2-k2,S2=C3}}else if(f2<y2){if(x2+=u2+f2-y2,(y2-=f2)<w2){for(w2-=y2;C3[s2++]=c[x2++],--y2;);if(x2=0,f2<w2){for(w2-=y2=f2;C3[s2++]=c[x2++],--y2;);x2=s2-k2,S2=C3}}}else if(x2+=f2-y2,y2<w2){for(w2-=y2;C3[s2++]=c[x2++],--y2;);x2=s2-k2,S2=C3}for(;2<w2;)C3[s2++]=S2[x2++],C3[s2++]=S2[x2++],C3[s2++]=S2[x2++],w2-=3;w2&&(C3[s2++]=S2[x2++],1<w2&&(C3[s2++]=S2[x2++]))}else{for(x2=s2-k2;C3[s2++]=C3[x2++],C3[s2++]=C3[x2++],C3[s2++]=C3[x2++],2<(w2-=3););w2&&(C3[s2++]=C3[x2++],1<w2&&(C3[s2++]=C3[x2++]))}break}}break}}while(n3<i2&&s2<o2);n3-=w2=p2>>3,d2&=(1<<(p2-=w2<<3))-1,e3.next_in=n3,e3.next_out=s2,e3.avail_in=n3<i2?i2-n3+5:5-(n3-i2),e3.avail_out=s2<o2?o2-s2+257:257-(s2-o2),r3.hold=d2,r3.bits=p2}},{}],49:[function(e2,t2,r2){var I2=e2("../utils/common"),O2=e2("./adler32"),B2=e2("./crc32"),R2=e2("./inffast"),T2=e2("./inftrees"),D2=1,F2=2,N2=0,U2=-2,P2=1,n3=852,i2=592;function L2(e3){return(e3>>>24&255)+(e3>>>8&65280)+((65280&e3)<<8)+((255&e3)<<24)}__name(L2,"L");function s2(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I2.Buf16(320),this.work=new I2.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}__name(s2,"s");function a2(e3){var t3;return e3&&e3.state?(t3=e3.state,e3.total_in=e3.total_out=t3.total=0,e3.msg="",t3.wrap&&(e3.adler=1&t3.wrap),t3.mode=P2,t3.last=0,t3.havedict=0,t3.dmax=32768,t3.head=null,t3.hold=0,t3.bits=0,t3.lencode=t3.lendyn=new I2.Buf32(n3),t3.distcode=t3.distdyn=new I2.Buf32(i2),t3.sane=1,t3.back=-1,N2):U2}__name(a2,"a");function o2(e3){var t3;return e3&&e3.state?((t3=e3.state).wsize=0,t3.whave=0,t3.wnext=0,a2(e3)):U2}__name(o2,"o");function h2(e3,t3){var r3,n4;return e3&&e3.state?(n4=e3.state,t3<0?(r3=0,t3=-t3):(r3=1+(t3>>4),t3<48&&(t3&=15)),t3&&(t3<8||15<t3)?U2:(n4.window!==null&&n4.wbits!==t3&&(n4.window=null),n4.wrap=r3,n4.wbits=t3,o2(e3))):U2}__name(h2,"h");function u2(e3,t3){var r3,n4;return e3?(n4=new s2,(e3.state=n4).window=null,(r3=h2(e3,t3))!==N2&&(e3.state=null),r3):U2}__name(u2,"u");var l2,f2,c=!0;function j2(e3){if(c){var t3;for(l2=new I2.Buf32(512),f2=new I2.Buf32(32),t3=0;t3<144;)e3.lens[t3++]=8;for(;t3<256;)e3.lens[t3++]=9;for(;t3<280;)e3.lens[t3++]=7;for(;t3<288;)e3.lens[t3++]=8;for(T2(D2,e3.lens,0,288,l2,0,e3.work,{bits:9}),t3=0;t3<32;)e3.lens[t3++]=5;T2(F2,e3.lens,0,32,f2,0,e3.work,{bits:5}),c=!1}e3.lencode=l2,e3.lenbits=9,e3.distcode=f2,e3.distbits=5}__name(j2,"j");function Z2(e3,t3,r3,n4){var i3,s3=e3.state;return s3.window===null&&(s3.wsize=1<<s3.wbits,s3.wnext=0,s3.whave=0,s3.window=new I2.Buf8(s3.wsize)),n4>=s3.wsize?(I2.arraySet(s3.window,t3,r3-s3.wsize,s3.wsize,0),s3.wnext=0,s3.whave=s3.wsize):(n4<(i3=s3.wsize-s3.wnext)&&(i3=n4),I2.arraySet(s3.window,t3,r3-n4,i3,s3.wnext),(n4-=i3)?(I2.arraySet(s3.window,t3,r3-n4,n4,0),s3.wnext=n4,s3.whave=s3.wsize):(s3.wnext+=i3,s3.wnext===s3.wsize&&(s3.wnext=0),s3.whave<s3.wsize&&(s3.whave+=i3))),0}__name(Z2,"Z"),r2.inflateReset=o2,r2.inflateReset2=h2,r2.inflateResetKeep=a2,r2.inflateInit=function(e3){return u2(e3,15)},r2.inflateInit2=u2,r2.inflate=function(e3,t3){var r3,n4,i3,s3,a3,o3,h3,u3,l3,f3,c2,d2,p2,m2,_2,g2,b2,v2,y2,w2,k2,x2,S2,z2,C3=0,E2=new I2.Buf8(4),A2=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e3||!e3.state||!e3.output||!e3.input&&e3.avail_in!==0)return U2;(r3=e3.state).mode===12&&(r3.mode=13),a3=e3.next_out,i3=e3.output,h3=e3.avail_out,s3=e3.next_in,n4=e3.input,o3=e3.avail_in,u3=r3.hold,l3=r3.bits,f3=o3,c2=h3,x2=N2;e:for(;;)switch(r3.mode){case P2:if(r3.wrap===0){r3.mode=13;break}for(;l3<16;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(2&r3.wrap&&u3===35615){E2[r3.check=0]=255&u3,E2[1]=u3>>>8&255,r3.check=B2(r3.check,E2,2,0),l3=u3=0,r3.mode=2;break}if(r3.flags=0,r3.head&&(r3.head.done=!1),!(1&r3.wrap)||(((255&u3)<<8)+(u3>>8))%31){e3.msg="incorrect header check",r3.mode=30;break}if((15&u3)!=8){e3.msg="unknown compression method",r3.mode=30;break}if(l3-=4,k2=8+(15&(u3>>>=4)),r3.wbits===0)r3.wbits=k2;else if(k2>r3.wbits){e3.msg="invalid window size",r3.mode=30;break}r3.dmax=1<<k2,e3.adler=r3.check=1,r3.mode=512&u3?10:12,l3=u3=0;break;case 2:for(;l3<16;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(r3.flags=u3,(255&r3.flags)!=8){e3.msg="unknown compression method",r3.mode=30;break}if(57344&r3.flags){e3.msg="unknown header flags set",r3.mode=30;break}r3.head&&(r3.head.text=u3>>8&1),512&r3.flags&&(E2[0]=255&u3,E2[1]=u3>>>8&255,r3.check=B2(r3.check,E2,2,0)),l3=u3=0,r3.mode=3;case 3:for(;l3<32;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}r3.head&&(r3.head.time=u3),512&r3.flags&&(E2[0]=255&u3,E2[1]=u3>>>8&255,E2[2]=u3>>>16&255,E2[3]=u3>>>24&255,r3.check=B2(r3.check,E2,4,0)),l3=u3=0,r3.mode=4;case 4:for(;l3<16;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}r3.head&&(r3.head.xflags=255&u3,r3.head.os=u3>>8),512&r3.flags&&(E2[0]=255&u3,E2[1]=u3>>>8&255,r3.check=B2(r3.check,E2,2,0)),l3=u3=0,r3.mode=5;case 5:if(1024&r3.flags){for(;l3<16;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}r3.length=u3,r3.head&&(r3.head.extra_len=u3),512&r3.flags&&(E2[0]=255&u3,E2[1]=u3>>>8&255,r3.check=B2(r3.check,E2,2,0)),l3=u3=0}else r3.head&&(r3.head.extra=null);r3.mode=6;case 6:if(1024&r3.flags&&(o3<(d2=r3.length)&&(d2=o3),d2&&(r3.head&&(k2=r3.head.extra_len-r3.length,r3.head.extra||(r3.head.extra=new Array(r3.head.extra_len)),I2.arraySet(r3.head.extra,n4,s3,d2,k2)),512&r3.flags&&(r3.check=B2(r3.check,n4,d2,s3)),o3-=d2,s3+=d2,r3.length-=d2),r3.length))break e;r3.length=0,r3.mode=7;case 7:if(2048&r3.flags){if(o3===0)break e;for(d2=0;k2=n4[s3+d2++],r3.head&&k2&&r3.length<65536&&(r3.head.name+=String.fromCharCode(k2)),k2&&d2<o3;);if(512&r3.flags&&(r3.check=B2(r3.check,n4,d2,s3)),o3-=d2,s3+=d2,k2)break e}else r3.head&&(r3.head.name=null);r3.length=0,r3.mode=8;case 8:if(4096&r3.flags){if(o3===0)break e;for(d2=0;k2=n4[s3+d2++],r3.head&&k2&&r3.length<65536&&(r3.head.comment+=String.fromCharCode(k2)),k2&&d2<o3;);if(512&r3.flags&&(r3.check=B2(r3.check,n4,d2,s3)),o3-=d2,s3+=d2,k2)break e}else r3.head&&(r3.head.comment=null);r3.mode=9;case 9:if(512&r3.flags){for(;l3<16;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(u3!==(65535&r3.check)){e3.msg="header crc mismatch",r3.mode=30;break}l3=u3=0}r3.head&&(r3.head.hcrc=r3.flags>>9&1,r3.head.done=!0),e3.adler=r3.check=0,r3.mode=12;break;case 10:for(;l3<32;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}e3.adler=r3.check=L2(u3),l3=u3=0,r3.mode=11;case 11:if(r3.havedict===0)return e3.next_out=a3,e3.avail_out=h3,e3.next_in=s3,e3.avail_in=o3,r3.hold=u3,r3.bits=l3,2;e3.adler=r3.check=1,r3.mode=12;case 12:if(t3===5||t3===6)break e;case 13:if(r3.last){u3>>>=7&l3,l3-=7&l3,r3.mode=27;break}for(;l3<3;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}switch(r3.last=1&u3,l3-=1,3&(u3>>>=1)){case 0:r3.mode=14;break;case 1:if(j2(r3),r3.mode=20,t3!==6)break;u3>>>=2,l3-=2;break e;case 2:r3.mode=17;break;case 3:e3.msg="invalid block type",r3.mode=30}u3>>>=2,l3-=2;break;case 14:for(u3>>>=7&l3,l3-=7&l3;l3<32;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if((65535&u3)!=(u3>>>16^65535)){e3.msg="invalid stored block lengths",r3.mode=30;break}if(r3.length=65535&u3,l3=u3=0,r3.mode=15,t3===6)break e;case 15:r3.mode=16;case 16:if(d2=r3.length){if(o3<d2&&(d2=o3),h3<d2&&(d2=h3),d2===0)break e;I2.arraySet(i3,n4,s3,d2,a3),o3-=d2,s3+=d2,h3-=d2,a3+=d2,r3.length-=d2;break}r3.mode=12;break;case 17:for(;l3<14;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(r3.nlen=257+(31&u3),u3>>>=5,l3-=5,r3.ndist=1+(31&u3),u3>>>=5,l3-=5,r3.ncode=4+(15&u3),u3>>>=4,l3-=4,286<r3.nlen||30<r3.ndist){e3.msg="too many length or distance symbols",r3.mode=30;break}r3.have=0,r3.mode=18;case 18:for(;r3.have<r3.ncode;){for(;l3<3;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}r3.lens[A2[r3.have++]]=7&u3,u3>>>=3,l3-=3}for(;r3.have<19;)r3.lens[A2[r3.have++]]=0;if(r3.lencode=r3.lendyn,r3.lenbits=7,S2={bits:r3.lenbits},x2=T2(0,r3.lens,0,19,r3.lencode,0,r3.work,S2),r3.lenbits=S2.bits,x2){e3.msg="invalid code lengths set",r3.mode=30;break}r3.have=0,r3.mode=19;case 19:for(;r3.have<r3.nlen+r3.ndist;){for(;g2=(C3=r3.lencode[u3&(1<<r3.lenbits)-1])>>>16&255,b2=65535&C3,!((_2=C3>>>24)<=l3);){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(b2<16)u3>>>=_2,l3-=_2,r3.lens[r3.have++]=b2;else{if(b2===16){for(z2=_2+2;l3<z2;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(u3>>>=_2,l3-=_2,r3.have===0){e3.msg="invalid bit length repeat",r3.mode=30;break}k2=r3.lens[r3.have-1],d2=3+(3&u3),u3>>>=2,l3-=2}else if(b2===17){for(z2=_2+3;l3<z2;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}l3-=_2,k2=0,d2=3+(7&(u3>>>=_2)),u3>>>=3,l3-=3}else{for(z2=_2+7;l3<z2;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}l3-=_2,k2=0,d2=11+(127&(u3>>>=_2)),u3>>>=7,l3-=7}if(r3.have+d2>r3.nlen+r3.ndist){e3.msg="invalid bit length repeat",r3.mode=30;break}for(;d2--;)r3.lens[r3.have++]=k2}}if(r3.mode===30)break;if(r3.lens[256]===0){e3.msg="invalid code -- missing end-of-block",r3.mode=30;break}if(r3.lenbits=9,S2={bits:r3.lenbits},x2=T2(D2,r3.lens,0,r3.nlen,r3.lencode,0,r3.work,S2),r3.lenbits=S2.bits,x2){e3.msg="invalid literal/lengths set",r3.mode=30;break}if(r3.distbits=6,r3.distcode=r3.distdyn,S2={bits:r3.distbits},x2=T2(F2,r3.lens,r3.nlen,r3.ndist,r3.distcode,0,r3.work,S2),r3.distbits=S2.bits,x2){e3.msg="invalid distances set",r3.mode=30;break}if(r3.mode=20,t3===6)break e;case 20:r3.mode=21;case 21:if(6<=o3&&258<=h3){e3.next_out=a3,e3.avail_out=h3,e3.next_in=s3,e3.avail_in=o3,r3.hold=u3,r3.bits=l3,R2(e3,c2),a3=e3.next_out,i3=e3.output,h3=e3.avail_out,s3=e3.next_in,n4=e3.input,o3=e3.avail_in,u3=r3.hold,l3=r3.bits,r3.mode===12&&(r3.back=-1);break}for(r3.back=0;g2=(C3=r3.lencode[u3&(1<<r3.lenbits)-1])>>>16&255,b2=65535&C3,!((_2=C3>>>24)<=l3);){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(g2&&(240&g2)==0){for(v2=_2,y2=g2,w2=b2;g2=(C3=r3.lencode[w2+((u3&(1<<v2+y2)-1)>>v2)])>>>16&255,b2=65535&C3,!(v2+(_2=C3>>>24)<=l3);){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}u3>>>=v2,l3-=v2,r3.back+=v2}if(u3>>>=_2,l3-=_2,r3.back+=_2,r3.length=b2,g2===0){r3.mode=26;break}if(32&g2){r3.back=-1,r3.mode=12;break}if(64&g2){e3.msg="invalid literal/length code",r3.mode=30;break}r3.extra=15&g2,r3.mode=22;case 22:if(r3.extra){for(z2=r3.extra;l3<z2;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}r3.length+=u3&(1<<r3.extra)-1,u3>>>=r3.extra,l3-=r3.extra,r3.back+=r3.extra}r3.was=r3.length,r3.mode=23;case 23:for(;g2=(C3=r3.distcode[u3&(1<<r3.distbits)-1])>>>16&255,b2=65535&C3,!((_2=C3>>>24)<=l3);){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if((240&g2)==0){for(v2=_2,y2=g2,w2=b2;g2=(C3=r3.distcode[w2+((u3&(1<<v2+y2)-1)>>v2)])>>>16&255,b2=65535&C3,!(v2+(_2=C3>>>24)<=l3);){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}u3>>>=v2,l3-=v2,r3.back+=v2}if(u3>>>=_2,l3-=_2,r3.back+=_2,64&g2){e3.msg="invalid distance code",r3.mode=30;break}r3.offset=b2,r3.extra=15&g2,r3.mode=24;case 24:if(r3.extra){for(z2=r3.extra;l3<z2;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}r3.offset+=u3&(1<<r3.extra)-1,u3>>>=r3.extra,l3-=r3.extra,r3.back+=r3.extra}if(r3.offset>r3.dmax){e3.msg="invalid distance too far back",r3.mode=30;break}r3.mode=25;case 25:if(h3===0)break e;if(d2=c2-h3,r3.offset>d2){if((d2=r3.offset-d2)>r3.whave&&r3.sane){e3.msg="invalid distance too far back",r3.mode=30;break}p2=d2>r3.wnext?(d2-=r3.wnext,r3.wsize-d2):r3.wnext-d2,d2>r3.length&&(d2=r3.length),m2=r3.window}else m2=i3,p2=a3-r3.offset,d2=r3.length;for(h3<d2&&(d2=h3),h3-=d2,r3.length-=d2;i3[a3++]=m2[p2++],--d2;);r3.length===0&&(r3.mode=21);break;case 26:if(h3===0)break e;i3[a3++]=r3.length,h3--,r3.mode=21;break;case 27:if(r3.wrap){for(;l3<32;){if(o3===0)break e;o3--,u3|=n4[s3++]<<l3,l3+=8}if(c2-=h3,e3.total_out+=c2,r3.total+=c2,c2&&(e3.adler=r3.check=r3.flags?B2(r3.check,i3,c2,a3-c2):O2(r3.check,i3,c2,a3-c2)),c2=h3,(r3.flags?u3:L2(u3))!==r3.check){e3.msg="incorrect data check",r3.mode=30;break}l3=u3=0}r3.mode=28;case 28:if(r3.wrap&&r3.flags){for(;l3<32;){if(o3===0)break e;o3--,u3+=n4[s3++]<<l3,l3+=8}if(u3!==(4294967295&r3.total)){e3.msg="incorrect length check",r3.mode=30;break}l3=u3=0}r3.mode=29;case 29:x2=1;break e;case 30:x2=-3;break e;case 31:return-4;case 32:default:return U2}return e3.next_out=a3,e3.avail_out=h3,e3.next_in=s3,e3.avail_in=o3,r3.hold=u3,r3.bits=l3,(r3.wsize||c2!==e3.avail_out&&r3.mode<30&&(r3.mode<27||t3!==4))&&Z2(e3,e3.output,e3.next_out,c2-e3.avail_out)?(r3.mode=31,-4):(f3-=e3.avail_in,c2-=e3.avail_out,e3.total_in+=f3,e3.total_out+=c2,r3.total+=c2,r3.wrap&&c2&&(e3.adler=r3.check=r3.flags?B2(r3.check,i3,c2,e3.next_out-c2):O2(r3.check,i3,c2,e3.next_out-c2)),e3.data_type=r3.bits+(r3.last?64:0)+(r3.mode===12?128:0)+(r3.mode===20||r3.mode===15?256:0),(f3==0&&c2===0||t3===4)&&x2===N2&&(x2=-5),x2)},r2.inflateEnd=function(e3){if(!e3||!e3.state)return U2;var t3=e3.state;return t3.window&&(t3.window=null),e3.state=null,N2},r2.inflateGetHeader=function(e3,t3){var r3;return e3&&e3.state?(2&(r3=e3.state).wrap)==0?U2:((r3.head=t3).done=!1,N2):U2},r2.inflateSetDictionary=function(e3,t3){var r3,n4=t3.length;return e3&&e3.state?(r3=e3.state).wrap!==0&&r3.mode!==11?U2:r3.mode===11&&O2(1,t3,n4,0)!==r3.check?-3:Z2(e3,t3,n4,n4)?(r3.mode=31,-4):(r3.havedict=1,N2):U2},r2.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e2,t2,r2){var D2=e2("../utils/common"),F2=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N2=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U2=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P2=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t2.exports=function(e3,t3,r3,n3,i2,s2,a2,o2){var h2,u2,l2,f2,c,d2,p2,m2,_2,g2=o2.bits,b2=0,v2=0,y2=0,w2=0,k2=0,x2=0,S2=0,z2=0,C3=0,E2=0,A2=null,I2=0,O2=new D2.Buf16(16),B2=new D2.Buf16(16),R2=null,T2=0;for(b2=0;b2<=15;b2++)O2[b2]=0;for(v2=0;v2<n3;v2++)O2[t3[r3+v2]]++;for(k2=g2,w2=15;1<=w2&&O2[w2]===0;w2--);if(w2<k2&&(k2=w2),w2===0)return i2[s2++]=20971520,i2[s2++]=20971520,o2.bits=1,0;for(y2=1;y2<w2&&O2[y2]===0;y2++);for(k2<y2&&(k2=y2),b2=z2=1;b2<=15;b2++)if(z2<<=1,(z2-=O2[b2])<0)return-1;if(0<z2&&(e3===0||w2!==1))return-1;for(B2[1]=0,b2=1;b2<15;b2++)B2[b2+1]=B2[b2]+O2[b2];for(v2=0;v2<n3;v2++)t3[r3+v2]!==0&&(a2[B2[t3[r3+v2]]++]=v2);if(d2=e3===0?(A2=R2=a2,19):e3===1?(A2=F2,I2-=257,R2=N2,T2-=257,256):(A2=U2,R2=P2,-1),b2=y2,c=s2,S2=v2=E2=0,l2=-1,f2=(C3=1<<(x2=k2))-1,e3===1&&852<C3||e3===2&&592<C3)return 1;for(;;){for(p2=b2-S2,_2=a2[v2]<d2?(m2=0,a2[v2]):a2[v2]>d2?(m2=R2[T2+a2[v2]],A2[I2+a2[v2]]):(m2=96,0),h2=1<<b2-S2,y2=u2=1<<x2;i2[c+(E2>>S2)+(u2-=h2)]=p2<<24|m2<<16|_2|0,u2!==0;);for(h2=1<<b2-1;E2&h2;)h2>>=1;if(h2!==0?(E2&=h2-1,E2+=h2):E2=0,v2++,--O2[b2]==0){if(b2===w2)break;b2=t3[r3+a2[v2]]}if(k2<b2&&(E2&f2)!==l2){for(S2===0&&(S2=k2),c+=y2,z2=1<<(x2=b2-S2);x2+S2<w2&&!((z2-=O2[x2+S2])<=0);)x2++,z2<<=1;if(C3+=1<<x2,e3===1&&852<C3||e3===2&&592<C3)return 1;i2[l2=E2&f2]=k2<<24|x2<<16|c-s2|0}}return E2!==0&&(i2[c+E2]=b2-S2<<24|64<<16|0),o2.bits=k2,0}},{"../utils/common":41}],51:[function(e2,t2,r2){t2.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e2,t2,r2){var i2=e2("../utils/common"),o2=0,h2=1;function n3(e3){for(var t3=e3.length;0<=--t3;)e3[t3]=0}__name(n3,"n");var s2=0,a2=29,u2=256,l2=u2+1+a2,f2=30,c=19,_2=2*l2+1,g2=15,d2=16,p2=7,m2=256,b2=16,v2=17,y2=18,w2=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k2=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S2=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z2=new Array(2*(l2+2));n3(z2);var C3=new Array(2*f2);n3(C3);var E2=new Array(512);n3(E2);var A2=new Array(256);n3(A2);var I2=new Array(a2);n3(I2);var O2,B2,R2,T2=new Array(f2);function D2(e3,t3,r3,n4,i3){this.static_tree=e3,this.extra_bits=t3,this.extra_base=r3,this.elems=n4,this.max_length=i3,this.has_stree=e3&&e3.length}__name(D2,"D");function F2(e3,t3){this.dyn_tree=e3,this.max_code=0,this.stat_desc=t3}__name(F2,"F");function N2(e3){return e3<256?E2[e3]:E2[256+(e3>>>7)]}__name(N2,"N");function U2(e3,t3){e3.pending_buf[e3.pending++]=255&t3,e3.pending_buf[e3.pending++]=t3>>>8&255}__name(U2,"U");function P2(e3,t3,r3){e3.bi_valid>d2-r3?(e3.bi_buf|=t3<<e3.bi_valid&65535,U2(e3,e3.bi_buf),e3.bi_buf=t3>>d2-e3.bi_valid,e3.bi_valid+=r3-d2):(e3.bi_buf|=t3<<e3.bi_valid&65535,e3.bi_valid+=r3)}__name(P2,"P");function L2(e3,t3,r3){P2(e3,r3[2*t3],r3[2*t3+1])}__name(L2,"L");function j2(e3,t3){for(var r3=0;r3|=1&e3,e3>>>=1,r3<<=1,0<--t3;);return r3>>>1}__name(j2,"j");function Z2(e3,t3,r3){var n4,i3,s3=new Array(g2+1),a3=0;for(n4=1;n4<=g2;n4++)s3[n4]=a3=a3+r3[n4-1]<<1;for(i3=0;i3<=t3;i3++){var o3=e3[2*i3+1];o3!==0&&(e3[2*i3]=j2(s3[o3]++,o3))}}__name(Z2,"Z");function W2(e3){var t3;for(t3=0;t3<l2;t3++)e3.dyn_ltree[2*t3]=0;for(t3=0;t3<f2;t3++)e3.dyn_dtree[2*t3]=0;for(t3=0;t3<c;t3++)e3.bl_tree[2*t3]=0;e3.dyn_ltree[2*m2]=1,e3.opt_len=e3.static_len=0,e3.last_lit=e3.matches=0}__name(W2,"W");function M2(e3){8<e3.bi_valid?U2(e3,e3.bi_buf):0<e3.bi_valid&&(e3.pending_buf[e3.pending++]=e3.bi_buf),e3.bi_buf=0,e3.bi_valid=0}__name(M2,"M");function H2(e3,t3,r3,n4){var i3=2*t3,s3=2*r3;return e3[i3]<e3[s3]||e3[i3]===e3[s3]&&n4[t3]<=n4[r3]}__name(H2,"H");function G2(e3,t3,r3){for(var n4=e3.heap[r3],i3=r3<<1;i3<=e3.heap_len&&(i3<e3.heap_len&&H2(t3,e3.heap[i3+1],e3.heap[i3],e3.depth)&&i3++,!H2(t3,n4,e3.heap[i3],e3.depth));)e3.heap[r3]=e3.heap[i3],r3=i3,i3<<=1;e3.heap[r3]=n4}__name(G2,"G");function K2(e3,t3,r3){var n4,i3,s3,a3,o3=0;if(e3.last_lit!==0)for(;n4=e3.pending_buf[e3.d_buf+2*o3]<<8|e3.pending_buf[e3.d_buf+2*o3+1],i3=e3.pending_buf[e3.l_buf+o3],o3++,n4===0?L2(e3,i3,t3):(L2(e3,(s3=A2[i3])+u2+1,t3),(a3=w2[s3])!==0&&P2(e3,i3-=I2[s3],a3),L2(e3,s3=N2(--n4),r3),(a3=k2[s3])!==0&&P2(e3,n4-=T2[s3],a3)),o3<e3.last_lit;);L2(e3,m2,t3)}__name(K2,"K");function Y2(e3,t3){var r3,n4,i3,s3=t3.dyn_tree,a3=t3.stat_desc.static_tree,o3=t3.stat_desc.has_stree,h3=t3.stat_desc.elems,u3=-1;for(e3.heap_len=0,e3.heap_max=_2,r3=0;r3<h3;r3++)s3[2*r3]!==0?(e3.heap[++e3.heap_len]=u3=r3,e3.depth[r3]=0):s3[2*r3+1]=0;for(;e3.heap_len<2;)s3[2*(i3=e3.heap[++e3.heap_len]=u3<2?++u3:0)]=1,e3.depth[i3]=0,e3.opt_len--,o3&&(e3.static_len-=a3[2*i3+1]);for(t3.max_code=u3,r3=e3.heap_len>>1;1<=r3;r3--)G2(e3,s3,r3);for(i3=h3;r3=e3.heap[1],e3.heap[1]=e3.heap[e3.heap_len--],G2(e3,s3,1),n4=e3.heap[1],e3.heap[--e3.heap_max]=r3,e3.heap[--e3.heap_max]=n4,s3[2*i3]=s3[2*r3]+s3[2*n4],e3.depth[i3]=(e3.depth[r3]>=e3.depth[n4]?e3.depth[r3]:e3.depth[n4])+1,s3[2*r3+1]=s3[2*n4+1]=i3,e3.heap[1]=i3++,G2(e3,s3,1),2<=e3.heap_len;);e3.heap[--e3.heap_max]=e3.heap[1],function(e4,t4){var r4,n5,i4,s4,a4,o4,h4=t4.dyn_tree,u4=t4.max_code,l3=t4.stat_desc.static_tree,f3=t4.stat_desc.has_stree,c2=t4.stat_desc.extra_bits,d3=t4.stat_desc.extra_base,p3=t4.stat_desc.max_length,m3=0;for(s4=0;s4<=g2;s4++)e4.bl_count[s4]=0;for(h4[2*e4.heap[e4.heap_max]+1]=0,r4=e4.heap_max+1;r4<_2;r4++)p3<(s4=h4[2*h4[2*(n5=e4.heap[r4])+1]+1]+1)&&(s4=p3,m3++),h4[2*n5+1]=s4,u4<n5||(e4.bl_count[s4]++,a4=0,d3<=n5&&(a4=c2[n5-d3]),o4=h4[2*n5],e4.opt_len+=o4*(s4+a4),f3&&(e4.static_len+=o4*(l3[2*n5+1]+a4)));if(m3!==0){do{for(s4=p3-1;e4.bl_count[s4]===0;)s4--;e4.bl_count[s4]--,e4.bl_count[s4+1]+=2,e4.bl_count[p3]--,m3-=2}while(0<m3);for(s4=p3;s4!==0;s4--)for(n5=e4.bl_count[s4];n5!==0;)u4<(i4=e4.heap[--r4])||(h4[2*i4+1]!==s4&&(e4.opt_len+=(s4-h4[2*i4+1])*h4[2*i4],h4[2*i4+1]=s4),n5--)}}(e3,t3),Z2(s3,u3,e3.bl_count)}__name(Y2,"Y");function X2(e3,t3,r3){var n4,i3,s3=-1,a3=t3[1],o3=0,h3=7,u3=4;for(a3===0&&(h3=138,u3=3),t3[2*(r3+1)+1]=65535,n4=0;n4<=r3;n4++)i3=a3,a3=t3[2*(n4+1)+1],++o3<h3&&i3===a3||(o3<u3?e3.bl_tree[2*i3]+=o3:i3!==0?(i3!==s3&&e3.bl_tree[2*i3]++,e3.bl_tree[2*b2]++):o3<=10?e3.bl_tree[2*v2]++:e3.bl_tree[2*y2]++,s3=i3,u3=(o3=0)===a3?(h3=138,3):i3===a3?(h3=6,3):(h3=7,4))}__name(X2,"X");function V2(e3,t3,r3){var n4,i3,s3=-1,a3=t3[1],o3=0,h3=7,u3=4;for(a3===0&&(h3=138,u3=3),n4=0;n4<=r3;n4++)if(i3=a3,a3=t3[2*(n4+1)+1],!(++o3<h3&&i3===a3)){if(o3<u3)for(;L2(e3,i3,e3.bl_tree),--o3!=0;);else i3!==0?(i3!==s3&&(L2(e3,i3,e3.bl_tree),o3--),L2(e3,b2,e3.bl_tree),P2(e3,o3-3,2)):o3<=10?(L2(e3,v2,e3.bl_tree),P2(e3,o3-3,3)):(L2(e3,y2,e3.bl_tree),P2(e3,o3-11,7));s3=i3,u3=(o3=0)===a3?(h3=138,3):i3===a3?(h3=6,3):(h3=7,4)}}__name(V2,"V"),n3(T2);var q2=!1;function J2(e3,t3,r3,n4){P2(e3,(s2<<1)+(n4?1:0),3),function(e4,t4,r4,n5){M2(e4),U2(e4,r4),U2(e4,~r4),i2.arraySet(e4.pending_buf,e4.window,t4,r4,e4.pending),e4.pending+=r4}(e3,t3,r3)}__name(J2,"J"),r2._tr_init=function(e3){q2||(function(){var e4,t3,r3,n4,i3,s3=new Array(g2+1);for(n4=r3=0;n4<a2-1;n4++)for(I2[n4]=r3,e4=0;e4<1<<w2[n4];e4++)A2[r3++]=n4;for(A2[r3-1]=n4,n4=i3=0;n4<16;n4++)for(T2[n4]=i3,e4=0;e4<1<<k2[n4];e4++)E2[i3++]=n4;for(i3>>=7;n4<f2;n4++)for(T2[n4]=i3<<7,e4=0;e4<1<<k2[n4]-7;e4++)E2[256+i3++]=n4;for(t3=0;t3<=g2;t3++)s3[t3]=0;for(e4=0;e4<=143;)z2[2*e4+1]=8,e4++,s3[8]++;for(;e4<=255;)z2[2*e4+1]=9,e4++,s3[9]++;for(;e4<=279;)z2[2*e4+1]=7,e4++,s3[7]++;for(;e4<=287;)z2[2*e4+1]=8,e4++,s3[8]++;for(Z2(z2,l2+1,s3),e4=0;e4<f2;e4++)C3[2*e4+1]=5,C3[2*e4]=j2(e4,5);O2=new D2(z2,w2,u2+1,l2,g2),B2=new D2(C3,k2,0,f2,g2),R2=new D2(new Array(0),x2,0,c,p2)}(),q2=!0),e3.l_desc=new F2(e3.dyn_ltree,O2),e3.d_desc=new F2(e3.dyn_dtree,B2),e3.bl_desc=new F2(e3.bl_tree,R2),e3.bi_buf=0,e3.bi_valid=0,W2(e3)},r2._tr_stored_block=J2,r2._tr_flush_block=function(e3,t3,r3,n4){var i3,s3,a3=0;0<e3.level?(e3.strm.data_type===2&&(e3.strm.data_type=function(e4){var t4,r4=4093624447;for(t4=0;t4<=31;t4++,r4>>>=1)if(1&r4&&e4.dyn_ltree[2*t4]!==0)return o2;if(e4.dyn_ltree[18]!==0||e4.dyn_ltree[20]!==0||e4.dyn_ltree[26]!==0)return h2;for(t4=32;t4<u2;t4++)if(e4.dyn_ltree[2*t4]!==0)return h2;return o2}(e3)),Y2(e3,e3.l_desc),Y2(e3,e3.d_desc),a3=function(e4){var t4;for(X2(e4,e4.dyn_ltree,e4.l_desc.max_code),X2(e4,e4.dyn_dtree,e4.d_desc.max_code),Y2(e4,e4.bl_desc),t4=c-1;3<=t4&&e4.bl_tree[2*S2[t4]+1]===0;t4--);return e4.opt_len+=3*(t4+1)+5+5+4,t4}(e3),i3=e3.opt_len+3+7>>>3,(s3=e3.static_len+3+7>>>3)<=i3&&(i3=s3)):i3=s3=r3+5,r3+4<=i3&&t3!==-1?J2(e3,t3,r3,n4):e3.strategy===4||s3===i3?(P2(e3,2+(n4?1:0),3),K2(e3,z2,C3)):(P2(e3,4+(n4?1:0),3),function(e4,t4,r4,n5){var i4;for(P2(e4,t4-257,5),P2(e4,r4-1,5),P2(e4,n5-4,4),i4=0;i4<n5;i4++)P2(e4,e4.bl_tree[2*S2[i4]+1],3);V2(e4,e4.dyn_ltree,t4-1),V2(e4,e4.dyn_dtree,r4-1)}(e3,e3.l_desc.max_code+1,e3.d_desc.max_code+1,a3+1),K2(e3,e3.dyn_ltree,e3.dyn_dtree)),W2(e3),n4&&M2(e3)},r2._tr_tally=function(e3,t3,r3){return e3.pending_buf[e3.d_buf+2*e3.last_lit]=t3>>>8&255,e3.pending_buf[e3.d_buf+2*e3.last_lit+1]=255&t3,e3.pending_buf[e3.l_buf+e3.last_lit]=255&r3,e3.last_lit++,t3===0?e3.dyn_ltree[2*r3]++:(e3.matches++,t3--,e3.dyn_ltree[2*(A2[r3]+u2+1)]++,e3.dyn_dtree[2*N2(t3)]++),e3.last_lit===e3.lit_bufsize-1},r2._tr_align=function(e3){P2(e3,2,3),L2(e3,m2,z2),function(e4){e4.bi_valid===16?(U2(e4,e4.bi_buf),e4.bi_buf=0,e4.bi_valid=0):8<=e4.bi_valid&&(e4.pending_buf[e4.pending++]=255&e4.bi_buf,e4.bi_buf>>=8,e4.bi_valid-=8)}(e3)}},{"../utils/common":41}],53:[function(e2,t2,r2){t2.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e2,t2,r2){(function(e3){(function(r3,n3){if(!r3.setImmediate){var i2,s2,t3,a2,o2=1,h2={},u2=!1,l2=r3.document,e4=Object.getPrototypeOf&&Object.getPrototypeOf(r3);e4=e4&&e4.setTimeout?e4:r3,i2={}.toString.call(r3.process)==="[object process]"?function(e5){process.nextTick(function(){c(e5)})}:function(){if(r3.postMessage&&!r3.importScripts){var e5=!0,t4=r3.onmessage;return r3.onmessage=function(){e5=!1},r3.postMessage("","*"),r3.onmessage=t4,e5}}()?(a2="setImmediate$"+Math.random()+"$",r3.addEventListener?r3.addEventListener("message",d2,!1):r3.attachEvent("onmessage",d2),function(e5){r3.postMessage(a2+e5,"*")}):r3.MessageChannel?((t3=new MessageChannel).port1.onmessage=function(e5){c(e5.data)},function(e5){t3.port2.postMessage(e5)}):l2&&"onreadystatechange"in l2.createElement("script")?(s2=l2.documentElement,function(e5){var t4=l2.createElement("script");t4.onreadystatechange=function(){c(e5),t4.onreadystatechange=null,s2.removeChild(t4),t4=null},s2.appendChild(t4)}):function(e5){setTimeout(c,0,e5)},e4.setImmediate=function(e5){typeof e5!="function"&&(e5=new Function(""+e5));for(var t4=new Array(arguments.length-1),r4=0;r4<t4.length;r4++)t4[r4]=arguments[r4+1];var n4={callback:e5,args:t4};return h2[o2]=n4,i2(o2),o2++},e4.clearImmediate=f2}function f2(e5){delete h2[e5]}__name(f2,"f");function c(e5){if(u2)setTimeout(c,0,e5);else{var t4=h2[e5];if(t4){u2=!0;try{(function(e6){var t5=e6.callback,r4=e6.args;switch(r4.length){case 0:t5();break;case 1:t5(r4[0]);break;case 2:t5(r4[0],r4[1]);break;case 3:t5(r4[0],r4[1],r4[2]);break;default:t5.apply(n3,r4)}})(t4)}finally{f2(e5),u2=!1}}}}__name(c,"c");function d2(e5){e5.source===r3&&typeof e5.data=="string"&&e5.data.indexOf(a2)===0&&c(+e5.data.slice(a2.length))}__name(d2,"d")})(typeof self>"u"?e3===void 0?this:e3:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(jszip_min)),jszip_min.exports}__name(requireJszip_min,"requireJszip_min");var jszip_minExports=requireJszip_min();const JSZip=getDefaultExportFromCjs(jszip_minExports);var __accessCheck2=__name((obj,member,msg)=>{if(!member.has(obj))throw TypeError("Cannot "+msg)},"__accessCheck"),__privateGet2=__name((obj,member,getter)=>(__accessCheck2(obj,member,"read from private field"),getter?getter.call(obj):member.get(obj)),"__privateGet"),__privateAdd2=__name((obj,member,value)=>{if(member.has(obj))throw TypeError("Cannot add the same private member more than once");member instanceof WeakSet?member.add(obj):member.set(obj,value)},"__privateAdd"),__privateSet2=__name((obj,member,value,setter)=>(__accessCheck2(obj,member,"write to private field"),member.set(obj,value),value),"__privateSet"),__privateWrapper=__name((obj,member,setter,getter)=>({set _(value){__privateSet2(obj,member,value)},get _(){return __privateGet2(obj,member,getter)}}),"__privateWrapper"),__privateMethod2=__name((obj,member,method)=>(__accessCheck2(obj,member,"access private method"),method),"__privateMethod"),bytes=new Uint8Array(8),view=new DataView(bytes.buffer),u8=__name(value=>[(value%256+256)%256],"u8"),u16=__name(value=>(view.setUint16(0,value,!1),[bytes[0],bytes[1]]),"u16"),i16=__name(value=>(view.setInt16(0,value,!1),[bytes[0],bytes[1]]),"i16"),u24=__name(value=>(view.setUint32(0,value,!1),[bytes[1],bytes[2],bytes[3]]),"u24"),u32=__name(value=>(view.setUint32(0,value,!1),[bytes[0],bytes[1],bytes[2],bytes[3]]),"u32"),i32=__name(value=>(view.setInt32(0,value,!1),[bytes[0],bytes[1],bytes[2],bytes[3]]),"i32"),u64=__name(value=>(view.setUint32(0,Math.floor(value/2**32),!1),view.setUint32(4,value,!1),[bytes[0],bytes[1],bytes[2],bytes[3],bytes[4],bytes[5],bytes[6],bytes[7]]),"u64"),fixed_8_8=__name(value=>(view.setInt16(0,2**8*value,!1),[bytes[0],bytes[1]]),"fixed_8_8"),fixed_16_16=__name(value=>(view.setInt32(0,2**16*value,!1),[bytes[0],bytes[1],bytes[2],bytes[3]]),"fixed_16_16"),fixed_2_30=__name(value=>(view.setInt32(0,2**30*value,!1),[bytes[0],bytes[1],bytes[2],bytes[3]]),"fixed_2_30"),ascii=__name((text,nullTerminated=!1)=>{let bytes2=Array(text.length).fill(null).map((_2,i2)=>text.charCodeAt(i2));return nullTerminated&&bytes2.push(0),bytes2},"ascii"),last=__name(arr=>arr&&arr[arr.length-1],"last"),lastPresentedSample=__name(samples=>{let result;for(let sample of samples)(!result||sample.presentationTimestamp>result.presentationTimestamp)&&(result=sample);return result},"lastPresentedSample"),intoTimescale=__name((timeInSeconds,timescale,round2=!0)=>{let value=timeInSeconds*timescale;return round2?Math.round(value):value},"intoTimescale"),rotationMatrix=__name(rotationInDegrees=>{let theta=rotationInDegrees*(Math.PI/180),cosTheta=Math.cos(theta),sinTheta=Math.sin(theta);return[cosTheta,sinTheta,0,-sinTheta,cosTheta,0,0,0,1]},"rotationMatrix"),IDENTITY_MATRIX=rotationMatrix(0),matrixToBytes=__name(matrix2=>[fixed_16_16(matrix2[0]),fixed_16_16(matrix2[1]),fixed_2_30(matrix2[2]),fixed_16_16(matrix2[3]),fixed_16_16(matrix2[4]),fixed_2_30(matrix2[5]),fixed_16_16(matrix2[6]),fixed_16_16(matrix2[7]),fixed_2_30(matrix2[8])],"matrixToBytes"),deepClone=__name(x2=>!x2||typeof x2!="object"?x2:Array.isArray(x2)?x2.map(deepClone):Object.fromEntries(Object.entries(x2).map(([key,value])=>[key,deepClone(value)])),"deepClone"),isU32=__name(value=>value>=0&&value<2**32,"isU32"),box=__name((type,contents,children)=>({type,contents:contents&&new Uint8Array(contents.flat(10)),children}),"box"),fullBox=__name((type,version,flags,contents,children)=>box(type,[u8(version),u24(flags),contents??[]],children),"fullBox"),ftyp=__name(details=>{let minorVersion=512;return details.fragmented?box("ftyp",[ascii("iso5"),u32(minorVersion),ascii("iso5"),ascii("iso6"),ascii("mp41")]):box("ftyp",[ascii("isom"),u32(minorVersion),ascii("isom"),details.holdsAvc?ascii("avc1"):[],ascii("mp41")])},"ftyp"),mdat=__name(reserveLargeSize=>({type:"mdat",largeSize:reserveLargeSize}),"mdat"),free=__name(size2=>({type:"free",size:size2}),"free"),moov=__name((tracks,creationTime,fragmented=!1)=>box("moov",null,[mvhd(creationTime,tracks),...tracks.map(x2=>trak(x2,creationTime)),fragmented?mvex(tracks):null]),"moov"),mvhd=__name((creationTime,tracks)=>{let duration=intoTimescale(Math.max(0,...tracks.filter(x2=>x2.samples.length>0).map(x2=>{const lastSample=lastPresentedSample(x2.samples);return lastSample.presentationTimestamp+lastSample.duration})),GLOBAL_TIMESCALE),nextTrackId=Math.max(...tracks.map(x2=>x2.id))+1,needsU64=!isU32(creationTime)||!isU32(duration),u32OrU64=needsU64?u64:u32;return fullBox("mvhd",+needsU64,0,[u32OrU64(creationTime),u32OrU64(creationTime),u32(GLOBAL_TIMESCALE),u32OrU64(duration),fixed_16_16(1),fixed_8_8(1),Array(10).fill(0),matrixToBytes(IDENTITY_MATRIX),Array(24).fill(0),u32(nextTrackId)])},"mvhd"),trak=__name((track,creationTime)=>box("trak",null,[tkhd(track,creationTime),mdia(track,creationTime)]),"trak"),tkhd=__name((track,creationTime)=>{let lastSample=lastPresentedSample(track.samples),durationInGlobalTimescale=intoTimescale(lastSample?lastSample.presentationTimestamp+lastSample.duration:0,GLOBAL_TIMESCALE),needsU64=!isU32(creationTime)||!isU32(durationInGlobalTimescale),u32OrU64=needsU64?u64:u32,matrix2;return track.info.type==="video"?matrix2=typeof track.info.rotation=="number"?rotationMatrix(track.info.rotation):track.info.rotation:matrix2=IDENTITY_MATRIX,fullBox("tkhd",+needsU64,3,[u32OrU64(creationTime),u32OrU64(creationTime),u32(track.id),u32(0),u32OrU64(durationInGlobalTimescale),Array(8).fill(0),u16(0),u16(0),fixed_8_8(track.info.type==="audio"?1:0),u16(0),matrixToBytes(matrix2),fixed_16_16(track.info.type==="video"?track.info.width:0),fixed_16_16(track.info.type==="video"?track.info.height:0)])},"tkhd"),mdia=__name((track,creationTime)=>box("mdia",null,[mdhd(track,creationTime),hdlr(track.info.type==="video"?"vide":"soun"),minf(track)]),"mdia"),mdhd=__name((track,creationTime)=>{let lastSample=lastPresentedSample(track.samples),localDuration=intoTimescale(lastSample?lastSample.presentationTimestamp+lastSample.duration:0,track.timescale),needsU64=!isU32(creationTime)||!isU32(localDuration),u32OrU64=needsU64?u64:u32;return fullBox("mdhd",+needsU64,0,[u32OrU64(creationTime),u32OrU64(creationTime),u32(track.timescale),u32OrU64(localDuration),u16(21956),u16(0)])},"mdhd"),hdlr=__name(componentSubtype=>fullBox("hdlr",0,0,[ascii("mhlr"),ascii(componentSubtype),u32(0),u32(0),u32(0),ascii("mp4-muxer-hdlr",!0)]),"hdlr"),minf=__name(track=>box("minf",null,[track.info.type==="video"?vmhd():smhd(),dinf(),stbl(track)]),"minf"),vmhd=__name(()=>fullBox("vmhd",0,1,[u16(0),u16(0),u16(0),u16(0)]),"vmhd"),smhd=__name(()=>fullBox("smhd",0,0,[u16(0),u16(0)]),"smhd"),dinf=__name(()=>box("dinf",null,[dref()]),"dinf"),dref=__name(()=>fullBox("dref",0,0,[u32(1)],[url()]),"dref"),url=__name(()=>fullBox("url ",0,1),"url"),stbl=__name(track=>{const needsCtts=track.compositionTimeOffsetTable.length>1||track.compositionTimeOffsetTable.some(x2=>x2.sampleCompositionTimeOffset!==0);return box("stbl",null,[stsd(track),stts(track),stss(track),stsc(track),stsz(track),stco(track),needsCtts?ctts(track):null])},"stbl"),stsd=__name(track=>fullBox("stsd",0,0,[u32(1)],[track.info.type==="video"?videoSampleDescription(VIDEO_CODEC_TO_BOX_NAME[track.info.codec],track):soundSampleDescription(AUDIO_CODEC_TO_BOX_NAME[track.info.codec],track)]),"stsd"),videoSampleDescription=__name((compressionType,track)=>box(compressionType,[Array(6).fill(0),u16(1),u16(0),u16(0),Array(12).fill(0),u16(track.info.width),u16(track.info.height),u32(4718592),u32(4718592),u32(0),u16(1),Array(32).fill(0),u16(24),i16(65535)],[VIDEO_CODEC_TO_CONFIGURATION_BOX[track.info.codec](track),track.info.decoderConfig.colorSpace?colr(track):null]),"videoSampleDescription"),COLOR_PRIMARIES_MAP={bt709:1,bt470bg:5,smpte170m:6},TRANSFER_CHARACTERISTICS_MAP={bt709:1,smpte170m:6,"iec61966-2-1":13},MATRIX_COEFFICIENTS_MAP={rgb:0,bt709:1,bt470bg:5,smpte170m:6},colr=__name(track=>box("colr",[ascii("nclx"),u16(COLOR_PRIMARIES_MAP[track.info.decoderConfig.colorSpace.primaries]),u16(TRANSFER_CHARACTERISTICS_MAP[track.info.decoderConfig.colorSpace.transfer]),u16(MATRIX_COEFFICIENTS_MAP[track.info.decoderConfig.colorSpace.matrix]),u8((track.info.decoderConfig.colorSpace.fullRange?1:0)<<7)]),"colr"),avcC=__name(track=>track.info.decoderConfig&&box("avcC",[...new Uint8Array(track.info.decoderConfig.description)]),"avcC"),hvcC=__name(track=>track.info.decoderConfig&&box("hvcC",[...new Uint8Array(track.info.decoderConfig.description)]),"hvcC"),vpcC=__name(track=>{if(!track.info.decoderConfig)return null;let decoderConfig=track.info.decoderConfig;if(!decoderConfig.colorSpace)throw new Error("'colorSpace' is required in the decoder config for VP9.");let parts=decoderConfig.codec.split("."),profile=Number(parts[1]),level=Number(parts[2]),thirdByte=(Number(parts[3])<<4)+(0<<1)+Number(decoderConfig.colorSpace.fullRange);return fullBox("vpcC",1,0,[u8(profile),u8(level),u8(thirdByte),u8(2),u8(2),u8(2),u16(0)])},"vpcC"),av1C=__name(()=>{let firstByte=(1<<7)+1;return box("av1C",[firstByte,0,0,0])},"av1C"),soundSampleDescription=__name((compressionType,track)=>box(compressionType,[Array(6).fill(0),u16(1),u16(0),u16(0),u32(0),u16(track.info.numberOfChannels),u16(16),u16(0),u16(0),fixed_16_16(track.info.sampleRate)],[AUDIO_CODEC_TO_CONFIGURATION_BOX[track.info.codec](track)]),"soundSampleDescription"),esds=__name(track=>{let description=new Uint8Array(track.info.decoderConfig.description);return fullBox("esds",0,0,[u32(58753152),u8(32+description.byteLength),u16(1),u8(0),u32(75530368),u8(18+description.byteLength),u8(64),u8(21),u24(0),u32(130071),u32(130071),u32(92307584),u8(description.byteLength),...description,u32(109084800),u8(1),u8(2)])},"esds"),dOps=__name(track=>{var _a26;let preskip=3840,gain=0;const description=(_a26=track.info.decoderConfig)==null?void 0:_a26.description;if(description){if(description.byteLength<18)throw new TypeError("Invalid decoder description provided for Opus; must be at least 18 bytes long.");const view2=ArrayBuffer.isView(description)?new DataView(description.buffer,description.byteOffset,description.byteLength):new DataView(description);preskip=view2.getUint16(10,!0),gain=view2.getInt16(14,!0)}return box("dOps",[u8(0),u8(track.info.numberOfChannels),u16(preskip),u32(track.info.sampleRate),fixed_8_8(gain),u8(0)])},"dOps"),stts=__name(track=>fullBox("stts",0,0,[u32(track.timeToSampleTable.length),track.timeToSampleTable.map(x2=>[u32(x2.sampleCount),u32(x2.sampleDelta)])]),"stts"),stss=__name(track=>{if(track.samples.every(x2=>x2.type==="key"))return null;let keySamples=[...track.samples.entries()].filter(([,sample])=>sample.type==="key");return fullBox("stss",0,0,[u32(keySamples.length),keySamples.map(([index])=>u32(index+1))])},"stss"),stsc=__name(track=>fullBox("stsc",0,0,[u32(track.compactlyCodedChunkTable.length),track.compactlyCodedChunkTable.map(x2=>[u32(x2.firstChunk),u32(x2.samplesPerChunk),u32(1)])]),"stsc"),stsz=__name(track=>fullBox("stsz",0,0,[u32(0),u32(track.samples.length),track.samples.map(x2=>u32(x2.size))]),"stsz"),stco=__name(track=>track.finalizedChunks.length>0&&last(track.finalizedChunks).offset>=2**32?fullBox("co64",0,0,[u32(track.finalizedChunks.length),track.finalizedChunks.map(x2=>u64(x2.offset))]):fullBox("stco",0,0,[u32(track.finalizedChunks.length),track.finalizedChunks.map(x2=>u32(x2.offset))]),"stco"),ctts=__name(track=>fullBox("ctts",0,0,[u32(track.compositionTimeOffsetTable.length),track.compositionTimeOffsetTable.map(x2=>[u32(x2.sampleCount),u32(x2.sampleCompositionTimeOffset)])]),"ctts"),mvex=__name(tracks=>box("mvex",null,tracks.map(trex)),"mvex"),trex=__name(track=>fullBox("trex",0,0,[u32(track.id),u32(1),u32(0),u32(0),u32(0)]),"trex"),moof=__name((sequenceNumber,tracks)=>box("moof",null,[mfhd(sequenceNumber),...tracks.map(traf)]),"moof"),mfhd=__name(sequenceNumber=>fullBox("mfhd",0,0,[u32(sequenceNumber)]),"mfhd"),fragmentSampleFlags=__name(sample=>{let byte1=0,byte2=0,byte3=0,byte4=0,sampleIsDifferenceSample=sample.type==="delta";return byte2|=+sampleIsDifferenceSample,sampleIsDifferenceSample?byte1|=1:byte1|=2,byte1<<24|byte2<<16|byte3<<8|byte4},"fragmentSampleFlags"),traf=__name(track=>box("traf",null,[tfhd(track),tfdt(track),trun(track)]),"traf"),tfhd=__name(track=>{let tfFlags=0;tfFlags|=8,tfFlags|=16,tfFlags|=32,tfFlags|=131072;let referenceSample=track.currentChunk.samples[1]??track.currentChunk.samples[0],referenceSampleInfo={duration:referenceSample.timescaleUnitsToNextSample,size:referenceSample.size,flags:fragmentSampleFlags(referenceSample)};return fullBox("tfhd",0,tfFlags,[u32(track.id),u32(referenceSampleInfo.duration),u32(referenceSampleInfo.size),u32(referenceSampleInfo.flags)])},"tfhd"),tfdt=__name(track=>fullBox("tfdt",1,0,[u64(intoTimescale(track.currentChunk.startTimestamp,track.timescale))]),"tfdt"),trun=__name(track=>{let allSampleDurations=track.currentChunk.samples.map(x2=>x2.timescaleUnitsToNextSample),allSampleSizes=track.currentChunk.samples.map(x2=>x2.size),allSampleFlags=track.currentChunk.samples.map(fragmentSampleFlags),allSampleCompositionTimeOffsets=track.currentChunk.samples.map(x2=>intoTimescale(x2.presentationTimestamp-x2.decodeTimestamp,track.timescale)),uniqueSampleDurations=new Set(allSampleDurations),uniqueSampleSizes=new Set(allSampleSizes),uniqueSampleFlags=new Set(allSampleFlags),uniqueSampleCompositionTimeOffsets=new Set(allSampleCompositionTimeOffsets),firstSampleFlagsPresent=uniqueSampleFlags.size===2&&allSampleFlags[0]!==allSampleFlags[1],sampleDurationPresent=uniqueSampleDurations.size>1,sampleSizePresent=uniqueSampleSizes.size>1,sampleFlagsPresent=!firstSampleFlagsPresent&&uniqueSampleFlags.size>1,sampleCompositionTimeOffsetsPresent=uniqueSampleCompositionTimeOffsets.size>1||[...uniqueSampleCompositionTimeOffsets].some(x2=>x2!==0),flags=0;return flags|=1,flags|=4*+firstSampleFlagsPresent,flags|=256*+sampleDurationPresent,flags|=512*+sampleSizePresent,flags|=1024*+sampleFlagsPresent,flags|=2048*+sampleCompositionTimeOffsetsPresent,fullBox("trun",1,flags,[u32(track.currentChunk.samples.length),u32(track.currentChunk.offset-track.currentChunk.moofOffset||0),firstSampleFlagsPresent?u32(allSampleFlags[0]):[],track.currentChunk.samples.map((_2,i2)=>[sampleDurationPresent?u32(allSampleDurations[i2]):[],sampleSizePresent?u32(allSampleSizes[i2]):[],sampleFlagsPresent?u32(allSampleFlags[i2]):[],sampleCompositionTimeOffsetsPresent?i32(allSampleCompositionTimeOffsets[i2]):[]])])},"trun"),mfra=__name(tracks=>box("mfra",null,[...tracks.map(tfra),mfro()]),"mfra"),tfra=__name((track,trackIndex)=>fullBox("tfra",1,0,[u32(track.id),u32(63),u32(track.finalizedChunks.length),track.finalizedChunks.map(chunk=>[u64(intoTimescale(chunk.startTimestamp,track.timescale)),u64(chunk.moofOffset),u32(trackIndex+1),u32(1),u32(1)])]),"tfra"),mfro=__name(()=>fullBox("mfro",0,0,[u32(0)]),"mfro"),VIDEO_CODEC_TO_BOX_NAME={avc:"avc1",hevc:"hvc1",vp9:"vp09",av1:"av01"},VIDEO_CODEC_TO_CONFIGURATION_BOX={avc:avcC,hevc:hvcC,vp9:vpcC,av1:av1C},AUDIO_CODEC_TO_BOX_NAME={aac:"mp4a",opus:"Opus"},AUDIO_CODEC_TO_CONFIGURATION_BOX={aac:esds,opus:dOps},_a5,Target=(_a5=class{},__name(_a5,"Target"),_a5),_a6,ArrayBufferTarget=(_a6=class extends Target{constructor(){super(...arguments),this.buffer=null}},__name(_a6,"ArrayBufferTarget"),_a6),_a7,StreamTarget=(_a7=class extends Target{constructor(options){if(super(),this.options=options,typeof options!="object")throw new TypeError("StreamTarget requires an options object to be passed to its constructor.");if(options.onData){if(typeof options.onData!="function")throw new TypeError("options.onData, when provided, must be a function.");if(options.onData.length<2)throw new TypeError("options.onData, when provided, must be a function that takes in at least two arguments (data and position). Ignoring the position argument, which specifies the byte offset at which the data is to be written, can lead to broken outputs.")}if(options.chunked!==void 0&&typeof options.chunked!="boolean")throw new TypeError("options.chunked, when provided, must be a boolean.");if(options.chunkSize!==void 0&&(!Number.isInteger(options.chunkSize)||options.chunkSize<1024))throw new TypeError("options.chunkSize, when provided, must be an integer and not smaller than 1024.")}},__name(_a7,"StreamTarget"),_a7),_a8,FileSystemWritableFileStreamTarget=(_a8=class extends Target{constructor(stream,options){if(super(),this.stream=stream,this.options=options,!(stream instanceof FileSystemWritableFileStream))throw new TypeError("FileSystemWritableFileStreamTarget requires a FileSystemWritableFileStream instance.");if(options!==void 0&&typeof options!="object")throw new TypeError("FileSystemWritableFileStreamTarget's options, when provided, must be an object.");if(options&&options.chunkSize!==void 0&&(!Number.isInteger(options.chunkSize)||options.chunkSize<=0))throw new TypeError("options.chunkSize, when provided, must be a positive integer")}},__name(_a8,"FileSystemWritableFileStreamTarget"),_a8),_helper,_helperView,_a9,Writer=(_a9=class{constructor(){this.pos=0,__privateAdd2(this,_helper,new Uint8Array(8)),__privateAdd2(this,_helperView,new DataView(__privateGet2(this,_helper).buffer)),this.offsets=new WeakMap}seek(newPos){this.pos=newPos}writeU32(value){__privateGet2(this,_helperView).setUint32(0,value,!1),this.write(__privateGet2(this,_helper).subarray(0,4))}writeU64(value){__privateGet2(this,_helperView).setUint32(0,Math.floor(value/2**32),!1),__privateGet2(this,_helperView).setUint32(4,value,!1),this.write(__privateGet2(this,_helper).subarray(0,8))}writeAscii(text){for(let i2=0;i2<text.length;i2++)__privateGet2(this,_helperView).setUint8(i2%8,text.charCodeAt(i2)),i2%8===7&&this.write(__privateGet2(this,_helper));text.length%8!==0&&this.write(__privateGet2(this,_helper).subarray(0,text.length%8))}writeBox(box2){if(this.offsets.set(box2,this.pos),box2.contents&&!box2.children)this.writeBoxHeader(box2,box2.size??box2.contents.byteLength+8),this.write(box2.contents);else{let startPos=this.pos;if(this.writeBoxHeader(box2,0),box2.contents&&this.write(box2.contents),box2.children)for(let child of box2.children)child&&this.writeBox(child);let endPos=this.pos,size2=box2.size??endPos-startPos;this.seek(startPos),this.writeBoxHeader(box2,size2),this.seek(endPos)}}writeBoxHeader(box2,size2){this.writeU32(box2.largeSize?1:size2),this.writeAscii(box2.type),box2.largeSize&&this.writeU64(size2)}measureBoxHeader(box2){return 8+(box2.largeSize?8:0)}patchBox(box2){let endPos=this.pos;this.seek(this.offsets.get(box2)),this.writeBox(box2),this.seek(endPos)}measureBox(box2){if(box2.contents&&!box2.children)return this.measureBoxHeader(box2)+box2.contents.byteLength;{let result=this.measureBoxHeader(box2);if(box2.contents&&(result+=box2.contents.byteLength),box2.children)for(let child of box2.children)child&&(result+=this.measureBox(child));return result}}},__name(_a9,"Writer"),_a9);_helper=new WeakMap;_helperView=new WeakMap;var _target,_buffer,_bytes,_maxPos,_ensureSize,ensureSize_fn,_a10,ArrayBufferTargetWriter=(_a10=class extends Writer{constructor(target){super(),__privateAdd2(this,_ensureSize),__privateAdd2(this,_target,void 0),__privateAdd2(this,_buffer,new ArrayBuffer(2**16)),__privateAdd2(this,_bytes,new Uint8Array(__privateGet2(this,_buffer))),__privateAdd2(this,_maxPos,0),__privateSet2(this,_target,target)}write(data){__privateMethod2(this,_ensureSize,ensureSize_fn).call(this,this.pos+data.byteLength),__privateGet2(this,_bytes).set(data,this.pos),this.pos+=data.byteLength,__privateSet2(this,_maxPos,Math.max(__privateGet2(this,_maxPos),this.pos))}finalize(){__privateMethod2(this,_ensureSize,ensureSize_fn).call(this,this.pos),__privateGet2(this,_target).buffer=__privateGet2(this,_buffer).slice(0,Math.max(__privateGet2(this,_maxPos),this.pos))}},__name(_a10,"ArrayBufferTargetWriter"),_a10);_target=new WeakMap;_buffer=new WeakMap;_bytes=new WeakMap;_maxPos=new WeakMap;_ensureSize=new WeakSet;ensureSize_fn=__name(function(size2){let newLength=__privateGet2(this,_buffer).byteLength;for(;newLength<size2;)newLength*=2;if(newLength===__privateGet2(this,_buffer).byteLength)return;let newBuffer=new ArrayBuffer(newLength),newBytes=new Uint8Array(newBuffer);newBytes.set(__privateGet2(this,_bytes),0),__privateSet2(this,_buffer,newBuffer),__privateSet2(this,_bytes,newBytes)},"ensureSize_fn");var DEFAULT_CHUNK_SIZE=2**24,MAX_CHUNKS_AT_ONCE=2,_target2,_sections,_chunked,_chunkSize,_chunks,_writeDataIntoChunks,writeDataIntoChunks_fn,_insertSectionIntoChunk,insertSectionIntoChunk_fn,_createChunk,createChunk_fn,_flushChunks,flushChunks_fn,_a11,StreamTargetWriter=(_a11=class extends Writer{constructor(target){var _a26,_b;super(),__privateAdd2(this,_writeDataIntoChunks),__privateAdd2(this,_insertSectionIntoChunk),__privateAdd2(this,_createChunk),__privateAdd2(this,_flushChunks),__privateAdd2(this,_target2,void 0),__privateAdd2(this,_sections,[]),__privateAdd2(this,_chunked,void 0),__privateAdd2(this,_chunkSize,void 0),__privateAdd2(this,_chunks,[]),__privateSet2(this,_target2,target),__privateSet2(this,_chunked,((_a26=target.options)==null?void 0:_a26.chunked)??!1),__privateSet2(this,_chunkSize,((_b=target.options)==null?void 0:_b.chunkSize)??DEFAULT_CHUNK_SIZE)}write(data){__privateGet2(this,_sections).push({data:data.slice(),start:this.pos}),this.pos+=data.byteLength}flush(){var _a26,_b;if(__privateGet2(this,_sections).length===0)return;let chunks=[],sorted=[...__privateGet2(this,_sections)].sort((a2,b2)=>a2.start-b2.start);chunks.push({start:sorted[0].start,size:sorted[0].data.byteLength});for(let i2=1;i2<sorted.length;i2++){let lastChunk=chunks[chunks.length-1],section=sorted[i2];section.start<=lastChunk.start+lastChunk.size?lastChunk.size=Math.max(lastChunk.size,section.start+section.data.byteLength-lastChunk.start):chunks.push({start:section.start,size:section.data.byteLength})}for(let chunk of chunks){chunk.data=new Uint8Array(chunk.size);for(let section of __privateGet2(this,_sections))chunk.start<=section.start&&section.start<chunk.start+chunk.size&&chunk.data.set(section.data,section.start-chunk.start);__privateGet2(this,_chunked)?(__privateMethod2(this,_writeDataIntoChunks,writeDataIntoChunks_fn).call(this,chunk.data,chunk.start),__privateMethod2(this,_flushChunks,flushChunks_fn).call(this)):(_b=(_a26=__privateGet2(this,_target2).options).onData)==null||_b.call(_a26,chunk.data,chunk.start)}__privateGet2(this,_sections).length=0}finalize(){__privateGet2(this,_chunked)&&__privateMethod2(this,_flushChunks,flushChunks_fn).call(this,!0)}},__name(_a11,"StreamTargetWriter"),_a11);_target2=new WeakMap;_sections=new WeakMap;_chunked=new WeakMap;_chunkSize=new WeakMap;_chunks=new WeakMap;_writeDataIntoChunks=new WeakSet;writeDataIntoChunks_fn=__name(function(data,position){let chunkIndex=__privateGet2(this,_chunks).findIndex(x2=>x2.start<=position&&position<x2.start+__privateGet2(this,_chunkSize));chunkIndex===-1&&(chunkIndex=__privateMethod2(this,_createChunk,createChunk_fn).call(this,position));let chunk=__privateGet2(this,_chunks)[chunkIndex],relativePosition=position-chunk.start,toWrite=data.subarray(0,Math.min(__privateGet2(this,_chunkSize)-relativePosition,data.byteLength));chunk.data.set(toWrite,relativePosition);let section={start:relativePosition,end:relativePosition+toWrite.byteLength};if(__privateMethod2(this,_insertSectionIntoChunk,insertSectionIntoChunk_fn).call(this,chunk,section),chunk.written[0].start===0&&chunk.written[0].end===__privateGet2(this,_chunkSize)&&(chunk.shouldFlush=!0),__privateGet2(this,_chunks).length>MAX_CHUNKS_AT_ONCE){for(let i2=0;i2<__privateGet2(this,_chunks).length-1;i2++)__privateGet2(this,_chunks)[i2].shouldFlush=!0;__privateMethod2(this,_flushChunks,flushChunks_fn).call(this)}toWrite.byteLength<data.byteLength&&__privateMethod2(this,_writeDataIntoChunks,writeDataIntoChunks_fn).call(this,data.subarray(toWrite.byteLength),position+toWrite.byteLength)},"writeDataIntoChunks_fn");_insertSectionIntoChunk=new WeakSet;insertSectionIntoChunk_fn=__name(function(chunk,section){let low=0,high=chunk.written.length-1,index=-1;for(;low<=high;){let mid=Math.floor(low+(high-low+1)/2);chunk.written[mid].start<=section.start?(low=mid+1,index=mid):high=mid-1}for(chunk.written.splice(index+1,0,section),(index===-1||chunk.written[index].end<section.start)&&index++;index<chunk.written.length-1&&chunk.written[index].end>=chunk.written[index+1].start;)chunk.written[index].end=Math.max(chunk.written[index].end,chunk.written[index+1].end),chunk.written.splice(index+1,1)},"insertSectionIntoChunk_fn");_createChunk=new WeakSet;createChunk_fn=__name(function(includesPosition){let chunk={start:Math.floor(includesPosition/__privateGet2(this,_chunkSize))*__privateGet2(this,_chunkSize),data:new Uint8Array(__privateGet2(this,_chunkSize)),written:[],shouldFlush:!1};return __privateGet2(this,_chunks).push(chunk),__privateGet2(this,_chunks).sort((a2,b2)=>a2.start-b2.start),__privateGet2(this,_chunks).indexOf(chunk)},"createChunk_fn");_flushChunks=new WeakSet;flushChunks_fn=__name(function(force=!1){var _a26,_b;for(let i2=0;i2<__privateGet2(this,_chunks).length;i2++){let chunk=__privateGet2(this,_chunks)[i2];if(!(!chunk.shouldFlush&&!force)){for(let section of chunk.written)(_b=(_a26=__privateGet2(this,_target2).options).onData)==null||_b.call(_a26,chunk.data.subarray(section.start,section.end),chunk.start+section.start);__privateGet2(this,_chunks).splice(i2--,1)}}},"flushChunks_fn");var _a12,FileSystemWritableFileStreamTargetWriter=(_a12=class extends StreamTargetWriter{constructor(target){var _a26;super(new StreamTarget({onData:__name((data,position)=>target.stream.write({type:"write",data,position}),"onData"),chunked:!0,chunkSize:(_a26=target.options)==null?void 0:_a26.chunkSize}))}},__name(_a12,"FileSystemWritableFileStreamTargetWriter"),_a12),GLOBAL_TIMESCALE=1e3,SUPPORTED_VIDEO_CODECS=["avc","hevc","vp9","av1"],SUPPORTED_AUDIO_CODECS=["aac","opus"],TIMESTAMP_OFFSET=2082844800,FIRST_TIMESTAMP_BEHAVIORS=["strict","offset","cross-track-offset"],_options,_writer,_ftypSize,_mdat,_videoTrack,_audioTrack,_creationTime,_finalizedChunks,_nextFragmentNumber,_videoSampleQueue,_audioSampleQueue,_finalized,_validateOptions,validateOptions_fn,_writeHeader,writeHeader_fn,_computeMoovSizeUpperBound,computeMoovSizeUpperBound_fn,_prepareTracks,prepareTracks_fn,_generateMpeg4AudioSpecificConfig,generateMpeg4AudioSpecificConfig_fn,_createSampleForTrack,createSampleForTrack_fn,_addSampleToTrack,addSampleToTrack_fn,_validateTimestamp,validateTimestamp_fn,_finalizeCurrentChunk,finalizeCurrentChunk_fn,_finalizeFragment,finalizeFragment_fn,_maybeFlushStreamingTargetWriter,maybeFlushStreamingTargetWriter_fn,_ensureNotFinalized,ensureNotFinalized_fn,_a13,Muxer=(_a13=class{constructor(options){if(__privateAdd2(this,_validateOptions),__privateAdd2(this,_writeHeader),__privateAdd2(this,_computeMoovSizeUpperBound),__privateAdd2(this,_prepareTracks),__privateAdd2(this,_generateMpeg4AudioSpecificConfig),__privateAdd2(this,_createSampleForTrack),__privateAdd2(this,_addSampleToTrack),__privateAdd2(this,_validateTimestamp),__privateAdd2(this,_finalizeCurrentChunk),__privateAdd2(this,_finalizeFragment),__privateAdd2(this,_maybeFlushStreamingTargetWriter),__privateAdd2(this,_ensureNotFinalized),__privateAdd2(this,_options,void 0),__privateAdd2(this,_writer,void 0),__privateAdd2(this,_ftypSize,void 0),__privateAdd2(this,_mdat,void 0),__privateAdd2(this,_videoTrack,null),__privateAdd2(this,_audioTrack,null),__privateAdd2(this,_creationTime,Math.floor(Date.now()/1e3)+TIMESTAMP_OFFSET),__privateAdd2(this,_finalizedChunks,[]),__privateAdd2(this,_nextFragmentNumber,1),__privateAdd2(this,_videoSampleQueue,[]),__privateAdd2(this,_audioSampleQueue,[]),__privateAdd2(this,_finalized,!1),__privateMethod2(this,_validateOptions,validateOptions_fn).call(this,options),options.video=deepClone(options.video),options.audio=deepClone(options.audio),options.fastStart=deepClone(options.fastStart),this.target=options.target,__privateSet2(this,_options,{firstTimestampBehavior:"strict",...options}),options.target instanceof ArrayBufferTarget)__privateSet2(this,_writer,new ArrayBufferTargetWriter(options.target));else if(options.target instanceof StreamTarget)__privateSet2(this,_writer,new StreamTargetWriter(options.target));else if(options.target instanceof FileSystemWritableFileStreamTarget)__privateSet2(this,_writer,new FileSystemWritableFileStreamTargetWriter(options.target));else throw new Error(`Invalid target: ${options.target}`);__privateMethod2(this,_prepareTracks,prepareTracks_fn).call(this),__privateMethod2(this,_writeHeader,writeHeader_fn).call(this)}addVideoChunk(sample,meta,timestamp,compositionTimeOffset){if(!(sample instanceof EncodedVideoChunk))throw new TypeError("addVideoChunk's first argument (sample) must be of type EncodedVideoChunk.");if(meta&&typeof meta!="object")throw new TypeError("addVideoChunk's second argument (meta), when provided, must be an object.");if(timestamp!==void 0&&(!Number.isFinite(timestamp)||timestamp<0))throw new TypeError("addVideoChunk's third argument (timestamp), when provided, must be a non-negative real number.");if(compositionTimeOffset!==void 0&&!Number.isFinite(compositionTimeOffset))throw new TypeError("addVideoChunk's fourth argument (compositionTimeOffset), when provided, must be a real number.");let data=new Uint8Array(sample.byteLength);sample.copyTo(data),this.addVideoChunkRaw(data,sample.type,timestamp??sample.timestamp,sample.duration,meta,compositionTimeOffset)}addVideoChunkRaw(data,type,timestamp,duration,meta,compositionTimeOffset){if(!(data instanceof Uint8Array))throw new TypeError("addVideoChunkRaw's first argument (data) must be an instance of Uint8Array.");if(type!=="key"&&type!=="delta")throw new TypeError("addVideoChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(timestamp)||timestamp<0)throw new TypeError("addVideoChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(duration)||duration<0)throw new TypeError("addVideoChunkRaw's fourth argument (duration) must be a non-negative real number.");if(meta&&typeof meta!="object")throw new TypeError("addVideoChunkRaw's fifth argument (meta), when provided, must be an object.");if(compositionTimeOffset!==void 0&&!Number.isFinite(compositionTimeOffset))throw new TypeError("addVideoChunkRaw's sixth argument (compositionTimeOffset), when provided, must be a real number.");if(__privateMethod2(this,_ensureNotFinalized,ensureNotFinalized_fn).call(this),!__privateGet2(this,_options).video)throw new Error("No video track declared.");if(typeof __privateGet2(this,_options).fastStart=="object"&&__privateGet2(this,_videoTrack).samples.length===__privateGet2(this,_options).fastStart.expectedVideoChunks)throw new Error(`Cannot add more video chunks than specified in 'fastStart' (${__privateGet2(this,_options).fastStart.expectedVideoChunks}).`);let videoSample=__privateMethod2(this,_createSampleForTrack,createSampleForTrack_fn).call(this,__privateGet2(this,_videoTrack),data,type,timestamp,duration,meta,compositionTimeOffset);if(__privateGet2(this,_options).fastStart==="fragmented"&&__privateGet2(this,_audioTrack)){for(;__privateGet2(this,_audioSampleQueue).length>0&&__privateGet2(this,_audioSampleQueue)[0].decodeTimestamp<=videoSample.decodeTimestamp;){let audioSample=__privateGet2(this,_audioSampleQueue).shift();__privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_audioTrack),audioSample)}videoSample.decodeTimestamp<=__privateGet2(this,_audioTrack).lastDecodeTimestamp?__privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_videoTrack),videoSample):__privateGet2(this,_videoSampleQueue).push(videoSample)}else __privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_videoTrack),videoSample)}addAudioChunk(sample,meta,timestamp){if(!(sample instanceof EncodedAudioChunk))throw new TypeError("addAudioChunk's first argument (sample) must be of type EncodedAudioChunk.");if(meta&&typeof meta!="object")throw new TypeError("addAudioChunk's second argument (meta), when provided, must be an object.");if(timestamp!==void 0&&(!Number.isFinite(timestamp)||timestamp<0))throw new TypeError("addAudioChunk's third argument (timestamp), when provided, must be a non-negative real number.");let data=new Uint8Array(sample.byteLength);sample.copyTo(data),this.addAudioChunkRaw(data,sample.type,timestamp??sample.timestamp,sample.duration,meta)}addAudioChunkRaw(data,type,timestamp,duration,meta){if(!(data instanceof Uint8Array))throw new TypeError("addAudioChunkRaw's first argument (data) must be an instance of Uint8Array.");if(type!=="key"&&type!=="delta")throw new TypeError("addAudioChunkRaw's second argument (type) must be either 'key' or 'delta'.");if(!Number.isFinite(timestamp)||timestamp<0)throw new TypeError("addAudioChunkRaw's third argument (timestamp) must be a non-negative real number.");if(!Number.isFinite(duration)||duration<0)throw new TypeError("addAudioChunkRaw's fourth argument (duration) must be a non-negative real number.");if(meta&&typeof meta!="object")throw new TypeError("addAudioChunkRaw's fifth argument (meta), when provided, must be an object.");if(__privateMethod2(this,_ensureNotFinalized,ensureNotFinalized_fn).call(this),!__privateGet2(this,_options).audio)throw new Error("No audio track declared.");if(typeof __privateGet2(this,_options).fastStart=="object"&&__privateGet2(this,_audioTrack).samples.length===__privateGet2(this,_options).fastStart.expectedAudioChunks)throw new Error(`Cannot add more audio chunks than specified in 'fastStart' (${__privateGet2(this,_options).fastStart.expectedAudioChunks}).`);let audioSample=__privateMethod2(this,_createSampleForTrack,createSampleForTrack_fn).call(this,__privateGet2(this,_audioTrack),data,type,timestamp,duration,meta);if(__privateGet2(this,_options).fastStart==="fragmented"&&__privateGet2(this,_videoTrack)){for(;__privateGet2(this,_videoSampleQueue).length>0&&__privateGet2(this,_videoSampleQueue)[0].decodeTimestamp<=audioSample.decodeTimestamp;){let videoSample=__privateGet2(this,_videoSampleQueue).shift();__privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_videoTrack),videoSample)}audioSample.decodeTimestamp<=__privateGet2(this,_videoTrack).lastDecodeTimestamp?__privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_audioTrack),audioSample):__privateGet2(this,_audioSampleQueue).push(audioSample)}else __privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_audioTrack),audioSample)}finalize(){if(__privateGet2(this,_finalized))throw new Error("Cannot finalize a muxer more than once.");if(__privateGet2(this,_options).fastStart==="fragmented"){for(let videoSample of __privateGet2(this,_videoSampleQueue))__privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_videoTrack),videoSample);for(let audioSample of __privateGet2(this,_audioSampleQueue))__privateMethod2(this,_addSampleToTrack,addSampleToTrack_fn).call(this,__privateGet2(this,_audioTrack),audioSample);__privateMethod2(this,_finalizeFragment,finalizeFragment_fn).call(this,!1)}else __privateGet2(this,_videoTrack)&&__privateMethod2(this,_finalizeCurrentChunk,finalizeCurrentChunk_fn).call(this,__privateGet2(this,_videoTrack)),__privateGet2(this,_audioTrack)&&__privateMethod2(this,_finalizeCurrentChunk,finalizeCurrentChunk_fn).call(this,__privateGet2(this,_audioTrack));let tracks=[__privateGet2(this,_videoTrack),__privateGet2(this,_audioTrack)].filter(Boolean);if(__privateGet2(this,_options).fastStart==="in-memory"){let mdatSize;for(let i2=0;i2<2;i2++){let movieBox2=moov(tracks,__privateGet2(this,_creationTime)),movieBoxSize=__privateGet2(this,_writer).measureBox(movieBox2);mdatSize=__privateGet2(this,_writer).measureBox(__privateGet2(this,_mdat));let currentChunkPos=__privateGet2(this,_writer).pos+movieBoxSize+mdatSize;for(let chunk of __privateGet2(this,_finalizedChunks)){chunk.offset=currentChunkPos;for(let{data}of chunk.samples)currentChunkPos+=data.byteLength,mdatSize+=data.byteLength}if(currentChunkPos<2**32)break;mdatSize>=2**32&&(__privateGet2(this,_mdat).largeSize=!0)}let movieBox=moov(tracks,__privateGet2(this,_creationTime));__privateGet2(this,_writer).writeBox(movieBox),__privateGet2(this,_mdat).size=mdatSize,__privateGet2(this,_writer).writeBox(__privateGet2(this,_mdat));for(let chunk of __privateGet2(this,_finalizedChunks))for(let sample of chunk.samples)__privateGet2(this,_writer).write(sample.data),sample.data=null}else if(__privateGet2(this,_options).fastStart==="fragmented"){let startPos=__privateGet2(this,_writer).pos,mfraBox=mfra(tracks);__privateGet2(this,_writer).writeBox(mfraBox);let mfraBoxSize=__privateGet2(this,_writer).pos-startPos;__privateGet2(this,_writer).seek(__privateGet2(this,_writer).pos-4),__privateGet2(this,_writer).writeU32(mfraBoxSize)}else{let mdatPos=__privateGet2(this,_writer).offsets.get(__privateGet2(this,_mdat)),mdatSize=__privateGet2(this,_writer).pos-mdatPos;__privateGet2(this,_mdat).size=mdatSize,__privateGet2(this,_mdat).largeSize=mdatSize>=2**32,__privateGet2(this,_writer).patchBox(__privateGet2(this,_mdat));let movieBox=moov(tracks,__privateGet2(this,_creationTime));if(typeof __privateGet2(this,_options).fastStart=="object"){__privateGet2(this,_writer).seek(__privateGet2(this,_ftypSize)),__privateGet2(this,_writer).writeBox(movieBox);let remainingBytes=mdatPos-__privateGet2(this,_writer).pos;__privateGet2(this,_writer).writeBox(free(remainingBytes))}else __privateGet2(this,_writer).writeBox(movieBox)}__privateMethod2(this,_maybeFlushStreamingTargetWriter,maybeFlushStreamingTargetWriter_fn).call(this),__privateGet2(this,_writer).finalize(),__privateSet2(this,_finalized,!0)}},__name(_a13,"Muxer"),_a13);_options=new WeakMap;_writer=new WeakMap;_ftypSize=new WeakMap;_mdat=new WeakMap;_videoTrack=new WeakMap;_audioTrack=new WeakMap;_creationTime=new WeakMap;_finalizedChunks=new WeakMap;_nextFragmentNumber=new WeakMap;_videoSampleQueue=new WeakMap;_audioSampleQueue=new WeakMap;_finalized=new WeakMap;_validateOptions=new WeakSet;validateOptions_fn=__name(function(options){if(typeof options!="object")throw new TypeError("The muxer requires an options object to be passed to its constructor.");if(!(options.target instanceof Target))throw new TypeError("The target must be provided and an instance of Target.");if(options.video){if(!SUPPORTED_VIDEO_CODECS.includes(options.video.codec))throw new TypeError(`Unsupported video codec: ${options.video.codec}`);if(!Number.isInteger(options.video.width)||options.video.width<=0)throw new TypeError(`Invalid video width: ${options.video.width}. Must be a positive integer.`);if(!Number.isInteger(options.video.height)||options.video.height<=0)throw new TypeError(`Invalid video height: ${options.video.height}. Must be a positive integer.`);const videoRotation=options.video.rotation;if(typeof videoRotation=="number"&&![0,90,180,270].includes(videoRotation))throw new TypeError(`Invalid video rotation: ${videoRotation}. Has to be 0, 90, 180 or 270.`);if(Array.isArray(videoRotation)&&(videoRotation.length!==9||videoRotation.some(value=>typeof value!="number")))throw new TypeError(`Invalid video transformation matrix: ${videoRotation.join()}`);if(options.video.frameRate!==void 0&&(!Number.isInteger(options.video.frameRate)||options.video.frameRate<=0))throw new TypeError(`Invalid video frame rate: ${options.video.frameRate}. Must be a positive integer.`)}if(options.audio){if(!SUPPORTED_AUDIO_CODECS.includes(options.audio.codec))throw new TypeError(`Unsupported audio codec: ${options.audio.codec}`);if(!Number.isInteger(options.audio.numberOfChannels)||options.audio.numberOfChannels<=0)throw new TypeError(`Invalid number of audio channels: ${options.audio.numberOfChannels}. Must be a positive integer.`);if(!Number.isInteger(options.audio.sampleRate)||options.audio.sampleRate<=0)throw new TypeError(`Invalid audio sample rate: ${options.audio.sampleRate}. Must be a positive integer.`)}if(options.firstTimestampBehavior&&!FIRST_TIMESTAMP_BEHAVIORS.includes(options.firstTimestampBehavior))throw new TypeError(`Invalid first timestamp behavior: ${options.firstTimestampBehavior}`);if(typeof options.fastStart=="object"){if(options.video){if(options.fastStart.expectedVideoChunks===void 0)throw new TypeError("'fastStart' is an object but is missing property 'expectedVideoChunks'.");if(!Number.isInteger(options.fastStart.expectedVideoChunks)||options.fastStart.expectedVideoChunks<0)throw new TypeError("'expectedVideoChunks' must be a non-negative integer.")}if(options.audio){if(options.fastStart.expectedAudioChunks===void 0)throw new TypeError("'fastStart' is an object but is missing property 'expectedAudioChunks'.");if(!Number.isInteger(options.fastStart.expectedAudioChunks)||options.fastStart.expectedAudioChunks<0)throw new TypeError("'expectedAudioChunks' must be a non-negative integer.")}}else if(![!1,"in-memory","fragmented"].includes(options.fastStart))throw new TypeError("'fastStart' option must be false, 'in-memory', 'fragmented' or an object.");if(options.minFragmentDuration!==void 0&&(!Number.isFinite(options.minFragmentDuration)||options.minFragmentDuration<0))throw new TypeError("'minFragmentDuration' must be a non-negative number.")},"validateOptions_fn");_writeHeader=new WeakSet;writeHeader_fn=__name(function(){var _a26;if(__privateGet2(this,_writer).writeBox(ftyp({holdsAvc:((_a26=__privateGet2(this,_options).video)==null?void 0:_a26.codec)==="avc",fragmented:__privateGet2(this,_options).fastStart==="fragmented"})),__privateSet2(this,_ftypSize,__privateGet2(this,_writer).pos),__privateGet2(this,_options).fastStart==="in-memory")__privateSet2(this,_mdat,mdat(!1));else if(__privateGet2(this,_options).fastStart!=="fragmented"){if(typeof __privateGet2(this,_options).fastStart=="object"){let moovSizeUpperBound=__privateMethod2(this,_computeMoovSizeUpperBound,computeMoovSizeUpperBound_fn).call(this);__privateGet2(this,_writer).seek(__privateGet2(this,_writer).pos+moovSizeUpperBound)}__privateSet2(this,_mdat,mdat(!0)),__privateGet2(this,_writer).writeBox(__privateGet2(this,_mdat))}__privateMethod2(this,_maybeFlushStreamingTargetWriter,maybeFlushStreamingTargetWriter_fn).call(this)},"writeHeader_fn");_computeMoovSizeUpperBound=new WeakSet;computeMoovSizeUpperBound_fn=__name(function(){if(typeof __privateGet2(this,_options).fastStart!="object")return;let upperBound=0,sampleCounts=[__privateGet2(this,_options).fastStart.expectedVideoChunks,__privateGet2(this,_options).fastStart.expectedAudioChunks];for(let n3 of sampleCounts)n3&&(upperBound+=8*Math.ceil(2/3*n3),upperBound+=4*n3,upperBound+=12*Math.ceil(2/3*n3),upperBound+=4*n3,upperBound+=8*n3);return upperBound+=4096,upperBound},"computeMoovSizeUpperBound_fn");_prepareTracks=new WeakSet;prepareTracks_fn=__name(function(){if(__privateGet2(this,_options).video&&__privateSet2(this,_videoTrack,{id:1,info:{type:"video",codec:__privateGet2(this,_options).video.codec,width:__privateGet2(this,_options).video.width,height:__privateGet2(this,_options).video.height,rotation:__privateGet2(this,_options).video.rotation??0,decoderConfig:null},timescale:__privateGet2(this,_options).video.frameRate??57600,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),__privateGet2(this,_options).audio&&(__privateSet2(this,_audioTrack,{id:__privateGet2(this,_options).video?2:1,info:{type:"audio",codec:__privateGet2(this,_options).audio.codec,numberOfChannels:__privateGet2(this,_options).audio.numberOfChannels,sampleRate:__privateGet2(this,_options).audio.sampleRate,decoderConfig:null},timescale:__privateGet2(this,_options).audio.sampleRate,samples:[],finalizedChunks:[],currentChunk:null,firstDecodeTimestamp:void 0,lastDecodeTimestamp:-1,timeToSampleTable:[],compositionTimeOffsetTable:[],lastTimescaleUnits:null,lastSample:null,compactlyCodedChunkTable:[]}),__privateGet2(this,_options).audio.codec==="aac")){let guessedCodecPrivate=__privateMethod2(this,_generateMpeg4AudioSpecificConfig,generateMpeg4AudioSpecificConfig_fn).call(this,2,__privateGet2(this,_options).audio.sampleRate,__privateGet2(this,_options).audio.numberOfChannels);__privateGet2(this,_audioTrack).info.decoderConfig={codec:__privateGet2(this,_options).audio.codec,description:guessedCodecPrivate,numberOfChannels:__privateGet2(this,_options).audio.numberOfChannels,sampleRate:__privateGet2(this,_options).audio.sampleRate}}},"prepareTracks_fn");_generateMpeg4AudioSpecificConfig=new WeakSet;generateMpeg4AudioSpecificConfig_fn=__name(function(objectType,sampleRate,numberOfChannels){let frequencyIndex=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350].indexOf(sampleRate),channelConfig=numberOfChannels,configBits="";configBits+=objectType.toString(2).padStart(5,"0"),configBits+=frequencyIndex.toString(2).padStart(4,"0"),frequencyIndex===15&&(configBits+=sampleRate.toString(2).padStart(24,"0")),configBits+=channelConfig.toString(2).padStart(4,"0");let paddingLength=Math.ceil(configBits.length/8)*8;configBits=configBits.padEnd(paddingLength,"0");let configBytes=new Uint8Array(configBits.length/8);for(let i2=0;i2<configBits.length;i2+=8)configBytes[i2/8]=parseInt(configBits.slice(i2,i2+8),2);return configBytes},"generateMpeg4AudioSpecificConfig_fn");_createSampleForTrack=new WeakSet;createSampleForTrack_fn=__name(function(track,data,type,timestamp,duration,meta,compositionTimeOffset){let presentationTimestampInSeconds=timestamp/1e6,decodeTimestampInSeconds=(timestamp-(compositionTimeOffset??0))/1e6,durationInSeconds=duration/1e6,adjusted=__privateMethod2(this,_validateTimestamp,validateTimestamp_fn).call(this,presentationTimestampInSeconds,decodeTimestampInSeconds,track);return presentationTimestampInSeconds=adjusted.presentationTimestamp,decodeTimestampInSeconds=adjusted.decodeTimestamp,meta!=null&&meta.decoderConfig&&(track.info.decoderConfig===null?track.info.decoderConfig=meta.decoderConfig:Object.assign(track.info.decoderConfig,meta.decoderConfig)),{presentationTimestamp:presentationTimestampInSeconds,decodeTimestamp:decodeTimestampInSeconds,duration:durationInSeconds,data,size:data.byteLength,type,timescaleUnitsToNextSample:intoTimescale(durationInSeconds,track.timescale)}},"createSampleForTrack_fn");_addSampleToTrack=new WeakSet;addSampleToTrack_fn=__name(function(track,sample){__privateGet2(this,_options).fastStart!=="fragmented"&&track.samples.push(sample);const sampleCompositionTimeOffset=intoTimescale(sample.presentationTimestamp-sample.decodeTimestamp,track.timescale);if(track.lastTimescaleUnits!==null){let timescaleUnits=intoTimescale(sample.decodeTimestamp,track.timescale,!1),delta=Math.round(timescaleUnits-track.lastTimescaleUnits);if(track.lastTimescaleUnits+=delta,track.lastSample.timescaleUnitsToNextSample=delta,__privateGet2(this,_options).fastStart!=="fragmented"){let lastTableEntry=last(track.timeToSampleTable);lastTableEntry.sampleCount===1?(lastTableEntry.sampleDelta=delta,lastTableEntry.sampleCount++):lastTableEntry.sampleDelta===delta?lastTableEntry.sampleCount++:(lastTableEntry.sampleCount--,track.timeToSampleTable.push({sampleCount:2,sampleDelta:delta}));const lastCompositionTimeOffsetTableEntry=last(track.compositionTimeOffsetTable);lastCompositionTimeOffsetTableEntry.sampleCompositionTimeOffset===sampleCompositionTimeOffset?lastCompositionTimeOffsetTableEntry.sampleCount++:track.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset})}}else track.lastTimescaleUnits=0,__privateGet2(this,_options).fastStart!=="fragmented"&&(track.timeToSampleTable.push({sampleCount:1,sampleDelta:intoTimescale(sample.duration,track.timescale)}),track.compositionTimeOffsetTable.push({sampleCount:1,sampleCompositionTimeOffset}));track.lastSample=sample;let beginNewChunk=!1;if(!track.currentChunk)beginNewChunk=!0;else{let currentChunkDuration=sample.presentationTimestamp-track.currentChunk.startTimestamp;if(__privateGet2(this,_options).fastStart==="fragmented"){let mostImportantTrack=__privateGet2(this,_videoTrack)??__privateGet2(this,_audioTrack);const chunkDuration=__privateGet2(this,_options).minFragmentDuration??1;track===mostImportantTrack&&sample.type==="key"&&currentChunkDuration>=chunkDuration&&(beginNewChunk=!0,__privateMethod2(this,_finalizeFragment,finalizeFragment_fn).call(this))}else beginNewChunk=currentChunkDuration>=.5}beginNewChunk&&(track.currentChunk&&__privateMethod2(this,_finalizeCurrentChunk,finalizeCurrentChunk_fn).call(this,track),track.currentChunk={startTimestamp:sample.presentationTimestamp,samples:[]}),track.currentChunk.samples.push(sample)},"addSampleToTrack_fn");_validateTimestamp=new WeakSet;validateTimestamp_fn=__name(function(presentationTimestamp,decodeTimestamp,track){var _a26,_b;const strictTimestampBehavior=__privateGet2(this,_options).firstTimestampBehavior==="strict",noLastDecodeTimestamp=track.lastDecodeTimestamp===-1;if(strictTimestampBehavior&&noLastDecodeTimestamp&&decodeTimestamp!==0)throw new Error(`The first chunk for your media track must have a timestamp of 0 (received DTS=${decodeTimestamp}).Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of thedocument, which is probably what you want.

If you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.
`);if(__privateGet2(this,_options).firstTimestampBehavior==="offset"||__privateGet2(this,_options).firstTimestampBehavior==="cross-track-offset"){track.firstDecodeTimestamp===void 0&&(track.firstDecodeTimestamp=decodeTimestamp);let baseDecodeTimestamp;__privateGet2(this,_options).firstTimestampBehavior==="offset"?baseDecodeTimestamp=track.firstDecodeTimestamp:baseDecodeTimestamp=Math.min(((_a26=__privateGet2(this,_videoTrack))==null?void 0:_a26.firstDecodeTimestamp)??1/0,((_b=__privateGet2(this,_audioTrack))==null?void 0:_b.firstDecodeTimestamp)??1/0),decodeTimestamp-=baseDecodeTimestamp,presentationTimestamp-=baseDecodeTimestamp}if(decodeTimestamp<track.lastDecodeTimestamp)throw new Error(`Timestamps must be monotonically increasing (DTS went from ${track.lastDecodeTimestamp*1e6} to ${decodeTimestamp*1e6}).`);return track.lastDecodeTimestamp=decodeTimestamp,{presentationTimestamp,decodeTimestamp}},"validateTimestamp_fn");_finalizeCurrentChunk=new WeakSet;finalizeCurrentChunk_fn=__name(function(track){if(__privateGet2(this,_options).fastStart==="fragmented")throw new Error("Can't finalize individual chunks if 'fastStart' is set to 'fragmented'.");if(track.currentChunk){if(track.finalizedChunks.push(track.currentChunk),__privateGet2(this,_finalizedChunks).push(track.currentChunk),(track.compactlyCodedChunkTable.length===0||last(track.compactlyCodedChunkTable).samplesPerChunk!==track.currentChunk.samples.length)&&track.compactlyCodedChunkTable.push({firstChunk:track.finalizedChunks.length,samplesPerChunk:track.currentChunk.samples.length}),__privateGet2(this,_options).fastStart==="in-memory"){track.currentChunk.offset=0;return}track.currentChunk.offset=__privateGet2(this,_writer).pos;for(let sample of track.currentChunk.samples)__privateGet2(this,_writer).write(sample.data),sample.data=null;__privateMethod2(this,_maybeFlushStreamingTargetWriter,maybeFlushStreamingTargetWriter_fn).call(this)}},"finalizeCurrentChunk_fn");_finalizeFragment=new WeakSet;finalizeFragment_fn=__name(function(flushStreamingWriter=!0){if(__privateGet2(this,_options).fastStart!=="fragmented")throw new Error("Can't finalize a fragment unless 'fastStart' is set to 'fragmented'.");let tracks=[__privateGet2(this,_videoTrack),__privateGet2(this,_audioTrack)].filter(track=>track&&track.currentChunk);if(tracks.length===0)return;let fragmentNumber=__privateWrapper(this,_nextFragmentNumber)._++;if(fragmentNumber===1){let movieBox=moov(tracks,__privateGet2(this,_creationTime),!0);__privateGet2(this,_writer).writeBox(movieBox)}let moofOffset=__privateGet2(this,_writer).pos,moofBox=moof(fragmentNumber,tracks);__privateGet2(this,_writer).writeBox(moofBox);{let mdatBox=mdat(!1),totalTrackSampleSize=0;for(let track of tracks)for(let sample of track.currentChunk.samples)totalTrackSampleSize+=sample.size;let mdatSize=__privateGet2(this,_writer).measureBox(mdatBox)+totalTrackSampleSize;mdatSize>=2**32&&(mdatBox.largeSize=!0,mdatSize=__privateGet2(this,_writer).measureBox(mdatBox)+totalTrackSampleSize),mdatBox.size=mdatSize,__privateGet2(this,_writer).writeBox(mdatBox)}for(let track of tracks){track.currentChunk.offset=__privateGet2(this,_writer).pos,track.currentChunk.moofOffset=moofOffset;for(let sample of track.currentChunk.samples)__privateGet2(this,_writer).write(sample.data),sample.data=null}let endPos=__privateGet2(this,_writer).pos;__privateGet2(this,_writer).seek(__privateGet2(this,_writer).offsets.get(moofBox));let newMoofBox=moof(fragmentNumber,tracks);__privateGet2(this,_writer).writeBox(newMoofBox),__privateGet2(this,_writer).seek(endPos);for(let track of tracks)track.finalizedChunks.push(track.currentChunk),__privateGet2(this,_finalizedChunks).push(track.currentChunk),track.currentChunk=null;flushStreamingWriter&&__privateMethod2(this,_maybeFlushStreamingTargetWriter,maybeFlushStreamingTargetWriter_fn).call(this)},"finalizeFragment_fn");_maybeFlushStreamingTargetWriter=new WeakSet;maybeFlushStreamingTargetWriter_fn=__name(function(){__privateGet2(this,_writer)instanceof StreamTargetWriter&&__privateGet2(this,_writer).flush()},"maybeFlushStreamingTargetWriter_fn");_ensureNotFinalized=new WeakSet;ensureNotFinalized_fn=__name(function(){if(__privateGet2(this,_finalized))throw new Error("Cannot add new video or audio chunks after the file has been finalized.")},"ensureNotFinalized_fn");async function imagesToMp4$3(frames,{width,height,fps,bitrate=2e7,filename="video.mp4"}){if(!("VideoEncoder"in globalThis))throw new Error("WebCodecs VideoEncoder is not available in this environment.");const target=new ArrayBufferTarget,muxer=new Muxer({target,video:{codec:"avc",width,height,frameRate:fps},fastStart:"in-memory"}),encoder=new VideoEncoder({output:__name((chunk,meta)=>muxer.addVideoChunk(chunk,meta),"output"),error:__name(e2=>console.error("VideoEncoder error:",e2),"error")});encoder.configure({codec:"avc1.42003D",width,height,bitrate,framerate:fps});const frameDurationUs=1e6/fps;let pts=0;for(const dataUrl of frames){const blob=await(await fetch(dataUrl)).blob(),bitmap=await createImageBitmap(blob),videoFrame=new VideoFrame(bitmap,{timestamp:pts});encoder.encode(videoFrame),videoFrame.close(),bitmap.close(),pts+=frameDurationUs}await encoder.flush(),encoder.close(),muxer.finalize();const{buffer}=target;return new Blob([buffer],{type:"video/mp4"})}__name(imagesToMp4$3,"imagesToMp4$3");var _timeline,_width,_height,_canvas,_anticipatedFrame,_frames,_subscribers,_status,_renderMode,_rendering,_a14;let FrameSaver$3=(_a14=class{constructor({timeline,width,height}){__privateAdd(this,_timeline);__privateAdd(this,_width);__privateAdd(this,_height);__privateAdd(this,_canvas);__privateAdd(this,_anticipatedFrame);__privateAdd(this,_frames,[]);__privateAdd(this,_subscribers,[]);__privateAdd(this,_status,{rendering:!1,totalFrames:0,renderedFrames:0});__privateAdd(this,_renderMode,"imseq");__privateAdd(this,_rendering,!1);__privateSet(this,_timeline,timeline),__privateSet(this,_width,width),__privateSet(this,_height,height)}setSize(width,height){__privateSet(this,_width,width),__privateSet(this,_height,height)}addCanvas(canvas){__privateSet(this,_canvas,canvas)}subscribe(cb){return __privateGet(this,_subscribers).push(cb),()=>{__privateSet(this,_subscribers,__privateGet(this,_subscribers).filter(s2=>s2!==cb))}}getStatus(){return __privateGet(this,_status)}frame(){if(!__privateGet(this,_rendering)||!__privateGet(this,_canvas))return;const project=__privateGet(this,_timeline).getProject(),currentFrame=project.timelineData.playheadPosition;if(currentFrame!==__privateGet(this,_anticipatedFrame))return;const focusRange=project.timelineData.focusRange;if(currentFrame<focusRange[1]){const canvas=document.querySelector("canvas");__privateGet(this,_frames).push(canvas.toDataURL()),__privateSet(this,_anticipatedFrame,currentFrame+1),__privateGet(this,_timeline).projectTools.updatePlayheadPosition(currentFrame+1,!0),__privateSet(this,_status,{...__privateGet(this,_status),renderedFrames:__privateGet(this,_status).renderedFrames+1})}else{const jszip=new JSZip,folder=jszip.folder("frames");__privateGet(this,_frames).forEach((frame,index)=>{const base64Data=frame.split(",")[1],binaryString=window.atob(base64Data),binaryLen=binaryString.length,bytes2=new Uint8Array(binaryLen);for(let i2=0;i2<binaryLen;i2++)bytes2[i2]=binaryString.charCodeAt(i2);const fileName="frame"+String(index).padStart(5,"0")+".png";folder.file(fileName,bytes2,{base64:!0})}),__privateGet(this,_renderMode)==="imseq"&&jszip.generateAsync({type:"blob"}).then(content=>{const blobUrl=URL.createObjectURL(content),a2=document.createElement("a");a2.href=blobUrl,a2.download="frames.zip",a2.click(),URL.revokeObjectURL(blobUrl),__privateSet(this,_status,{...__privateGet(this,_status),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline).projectTools.updatePlayheadPosition(0,!0)}),__privateGet(this,_renderMode)==="mp4"&&imagesToMp4$3(__privateGet(this,_frames),{width:__privateGet(this,_width),height:__privateGet(this,_height),fps:30}).then(mp4Blob=>{const mp4BlobUrl=URL.createObjectURL(mp4Blob),a2=document.createElement("a");a2.href=mp4BlobUrl,a2.download="animation.mp4",a2.click(),URL.revokeObjectURL(mp4BlobUrl),__privateSet(this,_status,{...__privateGet(this,_status),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline).projectTools.updatePlayheadPosition(0,!0)}),__privateSet(this,_frames,[]),__privateSet(this,_anticipatedFrame,0),__privateSet(this,_rendering,!1)}}beginImSeq(){__privateGet(this,_rendering)||(__privateSet(this,_renderMode,"imseq"),this.begin())}beginMp4(){__privateGet(this,_rendering)||(__privateSet(this,_renderMode,"mp4"),this.begin())}begin(){__privateSet(this,_rendering,!0);const focusRange=__privateGet(this,_timeline).getProject().timelineData.focusRange;__privateSet(this,_anticipatedFrame,focusRange[0]),__privateSet(this,_status,{rendering:!0,totalFrames:focusRange[1]-focusRange[0],renderedFrames:0}),__privateGet(this,_timeline).projectTools.updatePlayheadPosition(focusRange[0],!0)}},_timeline=new WeakMap,_width=new WeakMap,_height=new WeakMap,_canvas=new WeakMap,_anticipatedFrame=new WeakMap,_frames=new WeakMap,_subscribers=new WeakMap,_status=new WeakMap,_renderMode=new WeakMap,_rendering=new WeakMap,__name(_a14,"FrameSaver"),_a14);function isBrowserKnownToWork$3(){const ua=navigator.userAgent;return/Chrome\/\d+/.test(ua)&&!/Edg/.test(ua)&&!/OPR/.test(ua)?!0:(/Firefox/.test(ua)||/Safari/.test(ua)&&!/Chrome/.test(ua),!1)}__name(isBrowserKnownToWork$3,"isBrowserKnownToWork$3");function FrameSaverScreen$3({frameSaver,recordEvent}){const{rendering,totalFrames,renderedFrames}=React.useSyncExternalStore(frameSaver.subscribe.bind(frameSaver),frameSaver.getStatus.bind(frameSaver)),videoEncoderAvailable=isBrowserKnownToWork$3(),{FreeWorkload}=useCK();useUnit(unit=>"beginRender"in unit.payload,(unit,workload)=>{workload.thread("default").worker(globalThis.CK_INSTANCE,{beginRender_response:!0}),workload.dispatch()});const[displayOverlay,setDisplayOverlay]=React.useState(!1),registerUnitProcessor=useRegisterUnitProcessor();return jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:10},children:[jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginImSeq(),recordEvent({path:"cyberspaghetti-renderframes",event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export image sequence",iconName:"animated_images"}),videoEncoderAvailable&&jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginMp4(),recordEvent({path:"cyberspaghetti-renderframes",event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export as .mp4",iconName:"movie"}),displayOverlay&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:30,color:"var(--gray6)",backgroundColor:"var(--gray1)",borderRadius:"var(--borderRadiusSmall)",marginLeft:20,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:40},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:10,right:10},children:!rendering&&jsxRuntimeExports.jsx(Icon,{iconName:"close",onClick:__name(()=>{setDisplayOverlay(!1)},"onClick")})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",fontSize:20,fontWeight:600},children:rendering?`Rendering: ${renderedFrames} / ${totalFrames}`:"Done!"}),jsxRuntimeExports.jsx("div",{children:rendering?"Your download will begin shortly...":null})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{children:"If you enjoy using this tool, subscribe to our email newsletter to get updates on new features and releases!"}),jsxRuntimeExports.jsx(Button,{bgColor:"var(--yellow3)",color:"var(--gray1)",hoverBgColor:"var(--yellow2)",hoverColor:"var(--gray1)",onClick:__name(()=>{window.open("http://eepurl.com/i6WBsQ","_blank")},"onClick"),text:"Subscribe to newsletter",iconName:"email"})]})]})]})}__name(FrameSaverScreen$3,"FrameSaverScreen$3");const isLocal=window.localStorage.getItem("isLocal")==="true";function useTracker(defaultEvent2){return reactExports.useEffect(()=>{defaultEvent2&&typeof window<"u"&&window.goatcounter&&typeof window.goatcounter.count=="function"&&window.goatcounter.count(defaultEvent2),defaultEvent2&&window.location.hostname!=="localhost"&&typeof window<"u"&&window.op&&typeof window.op=="function"&&defaultEvent2.path&&!isLocal&&window.op("track",defaultEvent2.path)},[defaultEvent2]),{recordEvent:reactExports.useCallback(event=>{window.location.hostname!=="localhost"&&(typeof window<"u"&&window.goatcounter&&typeof window.goatcounter.count=="function"&&window.goatcounter.count(event),typeof window<"u"&&window.op&&typeof window.op=="function"&&event.path&&!isLocal&&window.op("track",event.path))},[])}}__name(useTracker,"useTracker");let gl=null;const objectTypes=Object.create(null),SimpleWebGL2={__init__,__defineobject__,__createtexture__,__updatetexture__,__end__init__,__begin__,__drawobjectinstances__,__end__,__getgl__,__adopttexture__};function __adopttexture__(name2,tex,width,height){textures[name2]={tex,width,height}}__name(__adopttexture__,"__adopttexture__");function __getgl__(){if(!gl)throw new Error("Call __init__ first");return gl}__name(__getgl__,"__getgl__");function __init__(canvas){if(gl=canvas.getContext("webgl2",{antialias:!1,preserveDrawingBuffer:!0}),!gl)throw new Error("WebGL 2 not supported by this browser");gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.pixelStorei(gl.UNPACK_ALIGNMENT,1)}__name(__init__,"__init__");function __defineobject__(def){if(!gl)throw new Error("Call __init__ first");const glCtx=gl;if(objectTypes[def.name])throw new Error(`Object type "${def.name}" already exists`);if(!Array.isArray(def.instanceAttributes))throw new Error("instanceAttributes must be an array");const program=linkProgram(def.vertexShader,def.fragmentShader),vao=glCtx.createVertexArray(),vboQuad=glCtx.createBuffer(),iboQuad=glCtx.createBuffer(),instVBO=glCtx.createBuffer();glCtx.bindBuffer(glCtx.ARRAY_BUFFER,vboQuad),glCtx.bufferData(glCtx.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),glCtx.STATIC_DRAW),glCtx.bindBuffer(glCtx.ELEMENT_ARRAY_BUFFER,iboQuad),glCtx.bufferData(glCtx.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),glCtx.STATIC_DRAW),glCtx.bindVertexArray(vao),glCtx.bindBuffer(glCtx.ELEMENT_ARRAY_BUFFER,iboQuad);const locPos=glCtx.getAttribLocation(program,"a_pos");if(locPos<0)throw new Error("vertex shader must declare 'in vec2 a_pos'");glCtx.bindBuffer(glCtx.ARRAY_BUFFER,vboQuad),glCtx.enableVertexAttribArray(locPos),glCtx.vertexAttribPointer(locPos,2,glCtx.FLOAT,!1,0,0),glCtx.vertexAttribDivisor(locPos,0),glCtx.bindBuffer(glCtx.ARRAY_BUFFER,instVBO);const strideBytes=def.instanceAttributes.reduce((s2,a2)=>s2+a2.size,0)*4;let offsetBytes=0;def.instanceAttributes.forEach(attr=>{const loc=glCtx.getAttribLocation(program,attr.name);if(loc<0)throw new Error(`Shader missing attribute ${attr.name}`);glCtx.enableVertexAttribArray(loc),attr.type==="int"?glCtx.vertexAttribIPointer(loc,attr.size,glCtx.INT,strideBytes,offsetBytes):glCtx.vertexAttribPointer(loc,attr.size,glCtx.FLOAT,!1,strideBytes,offsetBytes),glCtx.vertexAttribDivisor(loc,1),offsetBytes+=attr.size*4}),glCtx.bindVertexArray(null);let dynTex,dynUniformLoc,dynW=0,dynH=0;def.dynamicData&&(dynW=def.dynamicData.width|0,dynH=def.dynamicData.height|0,dynTex=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,dynTex),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texImage2D(gl.TEXTURE_2D,0,gl.R32F,dynW,dynH,0,gl.RED,gl.FLOAT,null),dynUniformLoc=gl.getUniformLocation(program,"u_dyn")||void 0),objectTypes[def.name]={program,vao,instVBO,stride:strideBytes,attributes:def.instanceAttributes,dynTex,dynUniformLoc,dynW,dynH}}__name(__defineobject__,"__defineobject__");function __end__init__(){}__name(__end__init__,"__end__init__");function __begin__(){if(!gl)throw new Error("Call __init__ first");gl.viewport(0,0,gl.canvas.width,gl.canvas.height),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT)}__name(__begin__,"__begin__");const textures={};function __createtexture__(spec){if(!gl)throw new Error("Call __init__ first");if(textures[spec.name])throw new Error(`Texture "${spec.name}" already exists`);const fmt=gl.R8,type=gl.UNSIGNED_BYTE,base=gl.RED,tex=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,tex),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,spec.filter==="nearest"?gl.NEAREST:gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,spec.filter==="nearest"?gl.NEAREST:gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,spec.wrap==="clamp"?gl.CLAMP_TO_EDGE:gl.REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,spec.wrap==="clamp"?gl.CLAMP_TO_EDGE:gl.REPEAT),gl.texImage2D(gl.TEXTURE_2D,0,fmt,spec.width,spec.height,0,base,type,spec.initial||null),textures[spec.name]={tex,width:spec.width,height:spec.height}}__name(__createtexture__,"__createtexture__");function __updatetexture__(name2,data){if(!gl)throw new Error("Call __init__ first");const t2=textures[name2];if(!t2)throw new Error(`Texture "${name2}" not found`);gl.bindTexture(gl.TEXTURE_2D,t2.tex),gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,t2.width,t2.height,gl.RED,gl.UNSIGNED_BYTE,data)}__name(__updatetexture__,"__updatetexture__");function __drawobjectinstances__(typeName,params){if(!gl)throw new Error("Call __init__ first");const type=objectTypes[typeName];if(!type)throw new Error(`Unknown object type "${typeName}"`);const count=params.count|0;if(count<=0)return;let blendFunc,blendEquation,blendModeObj=params.blendMode;if(typeof params.blendMode=="string"&&(blendModeObj={mode:params.blendMode}),blendModeObj){if(blendModeObj.mode)switch(blendModeObj.mode){case"add":case"additive":blendFunc=[gl.SRC_ALPHA,gl.ONE],blendEquation=gl.FUNC_ADD;break;case"regular":case"alpha":default:blendFunc=[gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA],blendEquation=gl.FUNC_ADD;break}blendModeObj.func&&(blendFunc=blendModeObj.func),blendModeObj.equation!==void 0&&(blendEquation=blendModeObj.equation)}else blendFunc=[gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA],blendEquation=gl.FUNC_ADD;blendFunc&&gl.blendFunc(blendFunc[0],blendFunc[1]),blendEquation!==void 0&&gl.blendEquation(blendEquation);const totalStride=type.stride,buffer=new ArrayBuffer(count*totalStride);let offsetBytes=0;const attributeWriters=type.attributes.map(attr=>{const byteOffset=offsetBytes,entrySize=attr.size,write=attr.type==="int"?(view22,val,offset2)=>{for(let i2=0;i2<entrySize;++i2)view22.setInt32(offset2+i2*4,val[i2],!0)}:(view22,val,offset2)=>{for(let i2=0;i2<entrySize;++i2)view22.setFloat32(offset2+i2*4,val[i2],!0)};return offsetBytes+=entrySize*4,{name:attr.name,byteOffset,entrySize,write}}),view2=new DataView(buffer);for(let inst=0;inst<count;++inst){const instOffset=inst*totalStride;for(const attr of attributeWriters){const src2=params.attributes[attr.name];if(!src2)throw new Error(`Missing attribute "${attr.name}" in draw params`);const sub2=src2.subarray(inst*attr.entrySize,(inst+1)*attr.entrySize);attr.write(view2,sub2,instOffset+attr.byteOffset)}}gl.bindBuffer(gl.ARRAY_BUFFER,type.instVBO),gl.bufferData(gl.ARRAY_BUFFER,buffer,gl.DYNAMIC_DRAW),gl.useProgram(type.program);let texUnit=0;if(type.dynTex&&params.dynamicData&&(gl.activeTexture(gl.TEXTURE0+texUnit),gl.bindTexture(gl.TEXTURE_2D,type.dynTex),gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,type.dynW,type.dynH,gl.RED,gl.FLOAT,params.dynamicData)),type.dynUniformLoc&&(gl.uniform1i(type.dynUniformLoc,texUnit),texUnit++),params&&params.textures)for(const[uName,texName]of Object.entries(params.textures)){const rec=textures[texName];if(!rec)throw new Error(`Texture "${texName}" not found for unit "${uName}"`);gl.activeTexture(gl.TEXTURE0+texUnit),gl.bindTexture(gl.TEXTURE_2D,rec.tex);const loc=gl.getUniformLocation(type.program,uName);if(loc===null)throw new Error(`Uniform "${uName}" not found in program for type "${typeName}"`);gl.uniform1i(loc,texUnit),texUnit++}gl.bindVertexArray(type.vao),gl.drawElementsInstanced(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0,count),gl.bindVertexArray(null)}__name(__drawobjectinstances__,"__drawobjectinstances__");function __end__(){gl&&gl.flush()}__name(__end__,"__end__");function compileShader(src2,typeEnum){const sh=gl.createShader(typeEnum);if(gl.shaderSource(sh,src2),gl.compileShader(sh),!gl.getShaderParameter(sh,gl.COMPILE_STATUS))throw new Error(gl.getShaderInfoLog(sh)||"shader compile error");return sh}__name(compileShader,"compileShader");function linkProgram(vsSrc,fsSrc){const prog=gl.createProgram();if(gl.attachShader(prog,compileShader(vsSrc,gl.VERTEX_SHADER)),gl.attachShader(prog,compileShader(fsSrc,gl.FRAGMENT_SHADER)),gl.linkProgram(prog),!gl.getProgramParameter(prog,gl.LINK_STATUS))throw new Error(gl.getProgramInfoLog(prog)||"program link error");return(gl.getAttachedShaders(prog)||[]).forEach(sh=>gl.detachShader(prog,sh)),prog}__name(linkProgram,"linkProgram");const circleVS=`#version 300 es
in vec2 a_pos;          // quad corner (-1..1)
in float relTime;
in float radius;        // instance radius (clip-space)
in vec3 fillColor;      // per-instance RGB
in vec2 resolution;     // instance resolution (not used, but required)
in vec2 linePointA;     // start of the line
in vec2 linePointB;     // end of the line
in vec3 stroke; // thickness and cap and feather
in float offsetStart; // normalized [0,1] start of the capsule segment
in float offsetEnd;   // normalized [0,1] end of the capsule segment
in float amplitude; // amplitude of the distortion
in float frequency; // frequency of the distortion
in float perspectiveSkew; // perspective skew factor (0 = no skew, 1 = full skew)
in int distortType; // distortion type: 0 = sine, 1 = zigzag, 2 = electric
in float phaseOffset; // phase offset for the distortion
out vec2 v_local;        // coord inside quad (-1..1)
out vec3 v_color;
out float v_thickness;   // thickness parameter
out float v_feather;     // feather parameter
out float v_length; // length of the line segment
out float v_offsetStart;
out float v_offsetEnd;
out float v_relTime;
out float v_strokeCap; // not used, but required for WebGL2
out float v_amplitude; // amplitude of the distortion
out float v_frequency; // frequency of the distortion
out float v_perspectiveSkew; // perspective skew factor
out float v_phaseOffset; // phase offset for the distortion
flat out int v_distortType; // distortion type: 0 = sine, 1 = zigzag, 2 = electric

// ---------------------------------------------------------------------
// Perspective matrix  (column-major, OpenGL clip conventions)
//
// fovDeg      vertical field of view in degrees
// aspect      viewport width / height
// zNear/zFar  clip planes (>0, zNear < zFar)
// vpOffset    vanishing-point offset in NDC units  (0,0 = centre)
//
// Returns a mat4 that you can multiply with view & model transforms.
//
// ---------------------------------------------------------------------
mat4 makePerspective(float fovDeg,
                     float aspect,
                     float zNear,
                     float zFar,
                     vec2  vpOffset)
{
    float f = 1.0 / tan(radians(fovDeg) * 0.5);    // cot(fov/2)
    float nf = 1.0 / (zNear - zFar);

    // Column-major constructor: each group of four numbers is a column.
    return mat4(
        f / aspect, 0.0,        vpOffset.x,                0.0,
        0.0,        f,          vpOffset.y,                0.0,
        0.0,        0.0,  (zFar + zNear)*nf,  2.0*zFar*zNear*nf,
        0.0,        0.0,       -1.0,                      0.0
    );
}



mat4 lookAtMatrix(vec3 eye, vec3 center, vec3 up)
{
    // Forward (camera > world)   points from eye to target
    vec3  f = normalize(center - eye);

    // Side axis
    vec3  s = normalize(cross(f, up));

    // True up  (re-orthogonalised)
    vec3  u = cross(s, f);

    // Column-major constructor: each group of 4 values is ONE column
    return mat4(
        vec4(  s,           0.0),          // X-axis
        vec4(  u,           0.0),          // Y-axis
        vec4(-f,           0.0),           // Z (camera looks down Z)
        vec4(-dot(s, eye),                 // translation
             -dot(u, eye),
              dot(f, eye),
              1.0)
    );
}  

void main() {

  float aspect = resolution.x / resolution.y; // aspect ratio from instance attributes
  float zFar = mix(-0.5, -10., perspectiveSkew);
  float zNear = -0.5;
  vec3 lA = normalize(vec3(linePointA,1.)) * zFar;
  vec3 lB = normalize(vec3(linePointB,1.)) * zNear;

  float t = (a_pos.x + 1.0) * 0.5; // [0,1] along the segment
  vec3 lineDir = normalize(lB - lA);
  vec3 originDir = normalize(lA - vec3(0.0, 0.0, 0.0));
  // The plane is spanned by originDir and lineDir
  vec3 extrusionDir = normalize(cross(originDir, lineDir));
  vec3 center = mix(lA, lB, t); 

  float extrusion = stroke.x * (1.+amplitude) * 2.;
  vec4 eyePos = vec4(center + extrusionDir * (a_pos.y * extrusion), 1.0);

  // --- correct projection ---
  mat4 proj = makePerspective(5.0, aspect, 3., 100.0, vec2(0.));

  // --- final clip coords ---
  gl_Position = proj * eyePos;

  v_local = vec2(a_pos.x, a_pos.y);

  v_length = length(lB - lA); // pass length to fragment shader
  v_phaseOffset = phaseOffset; // pass phase offset to fragment shader

  v_color = fillColor;
  v_thickness = stroke.x;
  v_feather = stroke.z;
  v_offsetStart = offsetStart * 2. - 1.; // normalize to [-1,1]
  v_offsetEnd = offsetEnd * 2. - 1.; // normalize to [-1,1]
  v_amplitude = amplitude * 0.5;
  v_frequency = frequency;
  v_strokeCap = stroke.y; // not used, but required for WebGL2
  v_perspectiveSkew = perspectiveSkew;
  v_relTime = relTime; // pass relative time to fragment shader
  v_distortType = distortType; // pass distortion type to fragment shader
}`,circleFS=`#version 300 es
precision highp float;
in  vec2 v_local;
in  vec3 v_color;
in float v_length; // length of the line segment
in float v_thickness; // thickness parameter
in float v_feather; // feather parameter
in float v_offsetStart;
in float v_offsetEnd;
in float v_strokeCap; // not used, but required for WebGL2
in float v_relTime; // relative time for each ray
in float v_amplitude; // amplitude of the distortion
in float v_frequency; // frequency of the distortion
in float v_perspectiveSkew; // perspective skew factor
in float v_phaseOffset; // phase offset for the distortion
flat in int v_distortType; // distortion type: 0 = sine, 1 = zigzag, 2 = electric
out vec4 outColor;

// Toggle bounding box display
const bool showBoundingBox = false;



// Signed distance to normalized uneven capsule between two points with varying radii
// Returns -1 at the innermost point, 0 at the edge
float sdUnevenCapsuleNorm(vec2 p, vec3 a, vec3 b) {
    vec2 pa = p - a.xy;
    vec2 ba = b.xy - a.xy;
    float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);
    float r = mix(a.z, b.z, h);
    vec2 c = a.xy + ba * h;
    float d_1 = length(p - c) - r;
    // Distance from point to line segment (without radii)
    float d_2 = length(p - c);
    // Blend as requested
    float d = d_2 / (d_2 - d_1);
    return d - 1.;
}

// Signed distance to axis-aligned bounding box in normalized capsule space
// The quad is now p.x in [-1,1], p.y in [-1,1] after normalization
float sdBoundingBox(vec2 p, vec2 b) {
    // b.x = half-extent in x, b.y = half-extent in y
    vec2 center = vec2(0.0, 0.0); // after normalization, center is at (0,0)
    vec2 d = abs(p - center) - b;
    return length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);
}

// helper 
float freqModulate(float x, float t ) {
  return (t * ((exp(t*x)-1.)/(exp(t)-1.)));

}

// Distortion function for the ray
vec2 distortRay(vec2 p, float amplitude, float frequency, float phase, int type, float balance, float time) {
    float x = p.x;
    float y = p.y;
    // Modulate amplitude by balance: balance=1  full amplitude, balance=0  amplitude ramps from 0 to full
    float t = (x + 1.0) * 0.5; // map x from [-1,1] to [0,1]

    // Modulate phase nonlinearly for perspective effect
    float phaseT = 1.-t; 
    //float ampMod = mix(t*t,1.,balance*balance); // x in [-1,1], so x*x ramps from 0 to 1 at ends
    float localAmp = amplitude; // * ampMod;
    float offset = 0.0;
    if (type == 0) {
        // Sine
        offset = localAmp * sin(phaseT * frequency + phase + time * .5 * frequency);
    } else if (type == 1) {
        // Zigzag (triangle wave)
        float tri = abs(fract(phaseT * frequency / 3.14159265359 + phase + time * .25 * frequency) * 2.0 - 1.0) * 2.0 - 1.0;
        offset = localAmp * tri;
    } else if (type == 2) {
        // Electric (randomized jagged)
        float s = sin(phaseT * frequency + phase) * sin(3.7 * phaseT * frequency + 1.3 + phase) * sin(7.3 * phaseT * frequency + 2.1 + phase);
        offset = localAmp * s;
    }
    return vec2(x, y + offset);
}

float stroke(vec2 p, float offsetStart, float offsetEnd, float thickness, float cap) {
  float y = abs(p.y);
  float maxStrokeCap = 15.;
  cap = cap * maxStrokeCap + .1;
  float x = 2.*smoothstep(offsetStart, offsetEnd, p.x) -1.;
  float n = cap;
  float rY = pow((1.-pow(abs(x),n)),1./n) * thickness;
  float d = (y - rY) / thickness;
  return d;
}

void main() {

  float v_balance = 1.-v_perspectiveSkew; // balance is 1 when skew is 0, 0 when skew is 1


  // Normalize x so circles stay circles regardless of v_length
  float aspect = v_length / 2.0;
  vec2 p = v_local;

  // Distortion parameters (could be uniforms or varyings in future)
  float amplitude = v_amplitude;
  float thickness = v_thickness;
  float frequency = v_frequency * 100.;
  float phase = v_phaseOffset * 6.28318530718; // 2 * PI for full cycle

  // Apply distortion to the normalized coordinates, modulated by balance
  vec2 p_distorted = distortRay(p, amplitude, frequency, phase, v_distortType, v_balance, v_relTime);
  float width = v_offsetEnd - v_offsetStart;
  float d = stroke(p_distorted,v_offsetStart, v_offsetEnd, thickness / ((1.+amplitude) * 2.), v_strokeCap);

  // Draw bounding box if enabled
  if (showBoundingBox) {
    float bbox = sdBoundingBox(p, vec2(1.0, 1.0));
    if (abs(bbox) < 0.01) {
      outColor = vec4(1.,1.,1., 1.0);
      return;
    }
  }

  // UV overlay for debugging: (-1,-1) = red, (1,1) = green
  bool showUVOverlay = false;
  if (showUVOverlay) {
    // p is the normalized coordinate in [-1,1] for both axes
    float t = clamp((p.x + p.y + 2.0) * 0.25, 0.0, 1.0); // 0 at (-1,-1), 1 at (1,1)
    vec3 uvColor = mix(vec3(1,0,0), vec3(0,1,0), t);
    outColor = vec4(uvColor, 0.5); // semi-transparent overlay
    return;
  }

  // Feathered edge logic using normalized SDF and thresholded smoothstep
  float alpha = 1.0 - (smoothstep(-sqrt(v_feather), 0.0, d));
  //float alpha = pow(baseAlpha,1.);
  // Apply smoothstep fade at start and end of v_local.x
  alpha *= smoothstep(-1., -.9, v_local.x) * smoothstep(1.0, 0.9, v_local.x);
  
  // if (alpha <= 0.0) discard;
  
  // === UV debug output flag ===
  const bool showUV = false; // Set to false to disable UV debug
  if (showUV) {
    // Perspective-correct UV debug output
    vec2 uv = (v_local + 1.0) * 0.5;
    outColor = vec4(uv, 0.0, 1.0);
    return;
  }
  // === End UV debug ===
  
  outColor = vec4(v_color, alpha);
}`,circleObject$1={name:"circle",instanceAttributes:[{name:"stroke",size:3},{name:"linePointA",size:2},{name:"linePointB",size:2},{name:"fillColor",size:3},{name:"resolution",size:2},{name:"offsetStart",size:1},{name:"offsetEnd",size:1},{name:"amplitude",size:1},{name:"frequency",size:1},{name:"perspectiveSkew",size:1},{name:"distortType",size:1,type:"int"},{name:"phaseOffset",size:1},{name:"relTime",size:1}],vertexShader:circleVS,fragmentShader:circleFS};function getDistortType(pattern){switch(pattern){case"sine":return 0;case"zigzag":return 1;case"jitter":return 2;default:return console.warn(`Unknown distortion pattern: ${pattern}, defaulting to sine.`),0}}__name(getDistortType,"getDistortType");function repeat(val,times,options={type:"float32"}){const array=[];if(typeof val=="number")array.push(...Array(times).fill(val));else if(Array.isArray(val))for(let i2=0;i2<times;i2++)array.push(...val);else throw new Error("Unsupported value type for repeat: "+typeof val);if(options.type==="uint32")return new Uint32Array(array);if(options.type==="float32")return new Float32Array(array)}__name(repeat,"repeat");function circleDraw$1(particleSystem){const numRays=particleSystem.CONFIG.numRays,offsetStart=[],offsetEnd=[],linePointA=[],linePointB=[],fillColor=[],stroke=[],phaseOffset=[],relTime=[];for(let i2=0;i2<numRays;i2++){const ray=particleSystem.rays[i2];ray&&(offsetStart.push(ray.offset[0]),offsetEnd.push(ray.offset[1]),linePointA.push(ray.startPoint[0],ray.startPoint[1]),linePointB.push(ray.endPoint[0],ray.endPoint[1]),fillColor.push(...ray.color.map(c=>c/255)),phaseOffset.push(ray.phaseOffset),stroke.push(ray.thickness,particleSystem.CONFIG.strokeCap,particleSystem.CONFIG.feather),relTime.push(ray.relTime))}return{count:numRays,attributes:{fillColor:new Float32Array(fillColor),linePointA:new Float32Array(linePointA),linePointB:new Float32Array(linePointB),resolution:repeat([particleSystem.CONFIG.canvasWidth,particleSystem.CONFIG.canvasHeight],numRays),offsetStart:new Float32Array(offsetStart),offsetEnd:new Float32Array(offsetEnd),amplitude:repeat(particleSystem.CONFIG.amplitude,numRays),frequency:repeat(particleSystem.CONFIG.frequency,numRays),perspectiveSkew:repeat(particleSystem.CONFIG.perspectiveSkew,numRays),distortType:repeat(getDistortType(particleSystem.CONFIG.pattern),numRays,{type:"uint32"}),phaseOffset:new Float32Array(phaseOffset),relTime:new Float32Array(relTime),stroke:new Float32Array(stroke)},blendMode:particleSystem.CONFIG.blendMode==="additive"?"add":"regular"}}__name(circleDraw$1,"circleDraw$1");const backgroundVS=`#version 300 es
in vec2 a_pos;
in vec3 fillColor;
out vec3 v_color;
void main() {
  v_color = fillColor;
  gl_Position = vec4(a_pos, 0.0, 1.0);
}`,backgroundFS=`#version 300 es
precision highp float;
in vec3 v_color;
out vec4 outColor;
void main() {
  outColor = vec4(v_color, 1.0);
}`,backgroundObject={name:"background",instanceAttributes:[{name:"fillColor",size:3}],vertexShader:backgroundVS,fragmentShader:backgroundFS};function backgroundDraw(particleSystem){const{CONFIG:CONFIG2}=particleSystem,{backgroundColor}=CONFIG2,fillColor=backgroundColor.map(c=>c/255);return{count:1,attributes:{fillColor:new Float32Array(fillColor)}}}__name(backgroundDraw,"backgroundDraw");var _a15;let WebGL2Renderer$1=(_a15=class{constructor(canvas,particleSystem){this.canvas=canvas,this.particleSys=particleSystem,SimpleWebGL2.__init__(canvas),SimpleWebGL2.__defineobject__(circleObject$1),SimpleWebGL2.__defineobject__(backgroundObject)}async init(){}async onFrameReady(cb){return cb()}draw(){SimpleWebGL2.__begin__(),SimpleWebGL2.__drawobjectinstances__("background",backgroundDraw(this.particleSys)),SimpleWebGL2.__drawobjectinstances__("circle",circleDraw$1(this.particleSys)),SimpleWebGL2.__end__()}},__name(_a15,"WebGL2Renderer"),_a15);function PlayButton$3({togglePlaying,playing}){return jsxRuntimeExports.jsx(Button,{iconName:playing?"pause":"play_arrow",bgColor:"var(--green2)",hoverBgColor:"var(--green1)",color:"var(--gray8)",onClick:togglePlaying})}__name(PlayButton$3,"PlayButton$3");function TimelineBar$3({timeline}){const project=reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline)),togglePlaying=__name(()=>{const project2=timeline.getProject(),isPlaying=project2.timelineData.playing,currentFrame=project2.timelineData.playheadPosition;isPlaying?timeline.projectTools.updatePlayheadPosition(currentFrame,!0):timeline.projectTools.startPlayback()},"togglePlaying");return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:"20px"},children:[jsxRuntimeExports.jsx(PlayButton$3,{togglePlaying,playing:timeline.getProject().timelineData.playing}),jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",width:"100px"},children:`${project.timelineData.playheadPosition} / ${project.timelineData.focusRange[1]}`})]})}__name(TimelineBar$3,"TimelineBar$3");const defaultEvent$3={path:"cyberspaghettiviewer-loaded",event:!0};function CyberSpaghettiInterior({timeline,controls}){const canvasRef=reactExports.useRef(null),containerRef=reactExports.useRef(null),particleSystem=reactExports.useRef(new ParticleSystem$1).current,rendererRef=reactExports.useRef(null),controlsSnapshot=reactExports.useSyncExternalStore(controls.subscribeInternal.bind(controls),controls.getSnapshot.bind(controls));reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline));const{canvasWidth:width,canvasHeight:height}=controlsSnapshot;particleSystem.update(controlsSnapshot,timeline);const{recordEvent}=useTracker(defaultEvent$3);reactExports.useEffect(()=>{if(!canvasRef.current)return;const canvas=canvasRef.current;canvas.width=width,canvas.height=height},[width,height,canvasRef]),reactExports.useEffect(()=>{function resizeCanvasToFit(container,canvas,aspectRatio){const containerWidth=container.clientWidth,containerHeight=container.clientHeight,containerAspect=containerWidth/containerHeight;let dwidth,dheight;containerAspect>aspectRatio?(dheight=containerHeight,dwidth=dheight*aspectRatio):(dwidth=containerWidth,dheight=dwidth/aspectRatio),canvas.style.width=`${dwidth}px`,canvas.style.height=`${dheight}px`}__name(resizeCanvasToFit,"resizeCanvasToFit");const handleResize=__name(()=>{if(canvasRef.current&&containerRef.current){const container=containerRef.current,canvas=canvasRef.current,aspectRatio=width/height;resizeCanvasToFit(container,canvas,aspectRatio)}},"handleResize");return window.addEventListener("resize",handleResize),handleResize(),()=>{window.removeEventListener("resize",handleResize)}},[width,height]);const frameSaver=reactExports.useRef(new FrameSaver$3({timeline,width,height})).current;return frameSaver.setSize(width,height),reactExports.useEffect(()=>{const canvas=canvasRef.current;if(canvas){if(frameSaver.addCanvas(canvas),canvas.width=width,canvas.height=height,!rendererRef.current){rendererRef.current=new WebGL2Renderer$1(canvas,particleSystem);const renderer=rendererRef.current;rendererRef.current.init().then(()=>{const loop=__name(()=>{rendererRef.current.draw();const{rendering}=frameSaver.getStatus();rendering&&renderer.onFrameReady&&renderer.onFrameReady(frameSaver.frame.bind(frameSaver)),requestAnimationFrame(loop)},"loop");requestAnimationFrame(loop)})}return()=>{}}},[width,height,timeline,controls,particleSystem]),timeline?jsxRuntimeExports.jsxs("div",{style:{width:"100vw",height:"100vh",backgroundColor:"var(--gray1)",position:"relative"},children:[jsxRuntimeExports.jsx("div",{ref:containerRef,style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)"},children:jsxRuntimeExports.jsx("canvas",{ref:canvasRef,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"60px",backgroundColor:"var(--gray2)"},children:jsxRuntimeExports.jsx(TimelineBar$3,{timeline})}),jsxRuntimeExports.jsx(FrameSaverScreen$3,{frameSaver,recordEvent})]}):jsxRuntimeExports.jsx("div",{children:"No timeline found"})}__name(CyberSpaghettiInterior,"CyberSpaghettiInterior");function CyberSpaghettiSetup({timeline,controls}){return timeline&&controls?jsxRuntimeExports.jsx(CyberSpaghettiInterior,{controls,timeline}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(CyberSpaghettiSetup,"CyberSpaghettiSetup");const pb$3=new u$1.ProjectBuilder;pb$3.setTimelineData(3500,30,45);pb$3.addContinuousSignal("s1","Unused Signal",[0,1]);pb$3.addContinuousSignal("cx","Center X",[0,1]);pb$3.addPin("cx",0,0,"return easyLinear()");pb$3.addPin("cx",50,1,"return easyLinear()");pb$3.addPin("cx",900,1,"return easyLinear()");pb$3.addContinuousSignal("cy","Center Y",[0,1]);pb$3.addPin("cy",0,0,"return easyLinear()");pb$3.addPin("cy",50,1,"return easyLinear()");pb$3.addPin("cy",900,1,"return easyLinear()");pb$3.setSignalActiveStatus("s1",!0);pb$3.setSignalActiveStatus("cx",!1);pb$3.setSignalActiveStatus("cy",!1);const defaultProject$3=__name(()=>{const project=pb$3.getProject();return _e.TimelineController.fromProject(project).serialize()},"defaultProject$3"),defaultName$2="cyberspaghetti.timeline";function CyberSpaghettiExterior$3(){const timeline=useTimeline(),controls=useControls$2();return jsxRuntimeExports.jsx(CyberSpaghettiSetup,{timeline,controls})}__name(CyberSpaghettiExterior$3,"CyberSpaghettiExterior$3");function CyberSpaghetti(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(TimelineProvider,{defaultProject:defaultProject$3,defaultName:defaultName$2,shouldCreate:!0,children:jsxRuntimeExports.jsx(ControlsProvider$2,{children:jsxRuntimeExports.jsx(CyberSpaghettiExterior$3,{})})})})}__name(CyberSpaghetti,"CyberSpaghetti");function hexToRgb$1(hex){if(hex=hex.replace(/^#/,""),hex.length===3&&(hex=hex.split("").map(c=>c+c).join("")),hex.length!==6||/[^0-9a-f]/i.test(hex))throw new Error("Invalid hex color");const num=parseInt(hex,16);return[num>>16&255,num>>8&255,num&255]}__name(hexToRgb$1,"hexToRgb$1");function rgbToHex$1([r2,g2,b2]){return"#"+((1<<24)+(r2<<16)+(g2<<8)+b2).toString(16).slice(1)}__name(rgbToHex$1,"rgbToHex$1");const speed_lines={canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,innerRadius:.2,outerRadius:.8,innerRadiusRandomization:.5,outerRadiusRandomization:.1,startAngle:0,endAngle:360,rayLife:20,numCycles:6,numRays:100,rayColors:[[100,100,100]],blendMode:"normal",thickness:.05,feather:.1,amplitude:.04,frequency:.2,pattern:"sine",perspectiveSkew:.5,includeFadeInOut:!0,phaseRandomization:.1,backgroundColor:[0,0,0],rayLength:.5,rayLengthRandomization:.4,thicknessRandomization:0,strokeCap:.5},warp_speed={canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,innerRadius:.2,outerRadius:1,innerRadiusRandomization:.9,outerRadiusRandomization:.1,startAngle:0,endAngle:360,rayLife:50,numCycles:3,numRays:1500,rayColors:[[150,50,250],[0,30,180],[150,200,250]],blendMode:"additive",thickness:.06,feather:.8,amplitude:0,frequency:0,pattern:"sine",perspectiveSkew:.9,includeFadeInOut:!1,phaseRandomization:.1,backgroundColor:[0,0,66],rayLength:.5,rayLengthRandomization:.5,thicknessRandomization:.5,strokeCap:.1},star_shimmer={canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,innerRadius:0,outerRadius:.05,innerRadiusRandomization:.9,outerRadiusRandomization:1,startAngle:0,endAngle:360,rayLife:100,numCycles:3,numRays:100,rayColors:[[250,60,240],[70,30,180],[0,250,250],[255,255,255]],blendMode:"additive",thickness:.1,feather:.8,amplitude:0,frequency:0,pattern:"sine",perspectiveSkew:1,includeFadeInOut:!1,phaseRandomization:.1,backgroundColor:[30,0,66],rayLength:.8,rayLengthRandomization:.1,thicknessRandomization:.1,strokeCap:.08},star_field={canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,innerRadius:.5,outerRadius:1,innerRadiusRandomization:1,outerRadiusRandomization:.1,startAngle:0,endAngle:360,rayLife:150,numCycles:3,numRays:400,rayColors:[[255,200,150],[250,0,0]],blendMode:"additive",thickness:.03,feather:1,amplitude:.2,frequency:.2,pattern:"sine",perspectiveSkew:.3,includeFadeInOut:!1,phaseRandomization:.1,backgroundColor:[20,0,0],rayLength:.04,rayLengthRandomization:0,thicknessRandomization:.8,strokeCap:.1},spaghetti={canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,innerRadius:.05,outerRadius:.7,innerRadiusRandomization:1,outerRadiusRandomization:0,startAngle:0,endAngle:360,rayLife:150,numCycles:3,numRays:100,rayColors:[[255,160,0],[255,180,90],[230,130,50]],blendMode:"normal",thickness:.1,feather:.1,amplitude:.15,frequency:.2,pattern:"sine",perspectiveSkew:.7,includeFadeInOut:!1,phaseRandomization:.1,backgroundColor:[200,0,0],rayLength:1,rayLengthRandomization:.3,thicknessRandomization:0,strokeCap:.8},tarea="_tarea_10m7b_1",styles={tarea};function FeedbackBox(p2){const[state,setState]=reactExports.useState("editing"),textboxRef=reactExports.useRef(null),sendFeedback=__name(async()=>{if(textboxRef.current){const feedback=textboxRef.current.value,postEndpoint="https://pins-and-curves-logging.duckdns.org/1349064888063889449/feedback";setState("sending");try{(await fetch(postEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:p2.preamble+feedback})})).ok?setState("sent"):setState("error")}catch(err){setState("error"),console.error("Error sending feedback:",err)}}},"sendFeedback");if(state==="editing"||state==="sending")return jsxRuntimeExports.jsxs("div",{style:{position:"relative",width:"100%",height:"250px"},children:[jsxRuntimeExports.jsx("textarea",{ref:textboxRef,style:{width:"100%",height:"250px",borderRadius:"var(--borderRadiusSmall)",border:"2px solid var(--gray5)",backgroundColor:"var(--gray2)",color:"var(--gray8)",padding:"0.5rem",resize:"none",position:"absolute",top:"0",left:"0"},disabled:state==="sending",className:styles.tarea,placeholder:"How can we improve? If you'd like us to get back to you, please include your email address in your message."}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:"0",right:"0",padding:"0.5rem"},children:jsxRuntimeExports.jsx(Button,{text:state==="editing"?"Send":"Sending...",iconName:"send",bgColor:"var(--green3)",hoverBgColor:"var(--green2)",color:"white",hoverColor:"white",onClick:sendFeedback})})]});if(state==="error"||state==="sent")return jsxRuntimeExports.jsxs("div",{style:{width:"100%",height:"250px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid var(--gray5)",borderRadius:"var(--borderRadiusSmall)",flexDirection:"column",gap:"0.5rem"},children:[jsxRuntimeExports.jsx("div",{className:"materialSymbols",style:{fontSize:"3rem"},children:state==="error"?"heart_broken":"favorite"}),state==="error"?jsxRuntimeExports.jsx("div",{children:"Something went wrong. Please try again later."}):jsxRuntimeExports.jsx("div",{children:"Thank you for your feedback! We appreciate your input."}),jsxRuntimeExports.jsx(Button,{text:"Write another feedback",iconName:"edit",onClick:__name(()=>setState("editing"),"onClick")})]})}__name(FeedbackBox,"FeedbackBox");function PresetButton$2({text,presetConfig,update,updateLoop}){return jsxRuntimeExports.jsx("div",{style:{padding:"1rem 1rem",backgroundColor:"var(--gray1)",border:"2px solid var(--gray4)",color:"var(--gray7)",borderRadius:"var(--borderRadiusSmall)",cursor:"pointer",display:"inline-block",margin:"0.25rem 0",transition:"background-color 0.2s, color 0.2s"},onClick:__name(()=>{update(presetConfig),updateLoop==null||updateLoop(presetConfig.rayLife,presetConfig.numCycles,presetConfig.includeFadeInOut)},"onClick"),children:text})}__name(PresetButton$2,"PresetButton$2");function CyberSpaghettiControlsInterior$3({controls}){const state=reactExports.useSyncExternalStore(controls.subscribeInternal.bind(controls),controls.getSnapshot.bind(controls));reactExports.useSyncExternalStore(controls.subscribeToExternalState.bind(controls),controls.getExternalState.bind(controls));const update=__name(patch=>{const next={...state,...patch};controls.setData(next)},"update"),timeline=useTimeline(),determineFocusRange=__name((rayLife,numCycles,includeFadeInOut)=>{const c=(numCycles===1?2:numCycles+2)*rayLife;return includeFadeInOut||numCycles===1?[0,c]:[rayLife,c-rayLife]},"determineFocusRange"),updateLoop=__name((rayLife,numCycles,includeFadeInOut)=>{timeline==null||timeline.projectTools.updateFocusRange(determineFocusRange(rayLife,numCycles,includeFadeInOut!==void 0?includeFadeInOut:state.includeFadeInOut),!0),numCycles===1&&update({includeFadeInOut:!0})},"updateLoop"),updateColor=__name((idx,value)=>{const colors=state.rayColors.slice();colors[idx]=value,update({rayColors:colors})},"updateColor"),addColor=__name(()=>update({rayColors:[...state.rayColors,[255,255,255]]}),"addColor"),removeColor=__name(idx=>{state.rayColors.length!==1&&update({rayColors:state.rayColors.filter((_2,i2)=>i2!==idx)})},"removeColor"),labelRowStyle={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:2},groupedRowStyle={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:2},colorBoxStyle={backgroundColor:"var(--gray2)",borderRadius:"var(--borderRadiusSmall)",padding:"0.5rem",display:"flex",flexWrap:"wrap",gap:8,margin:"0.5rem 0",alignItems:"center"};return jsxRuntimeExports.jsxs("div",{className:"hyperspeed-controls",style:{display:"flex",gap:"20px",flexDirection:"column",backgroundColor:"var(--gray1)",width:"100vw",height:"100vh",padding:"1rem",color:"var(--gray6)",overflow:"scroll",scrollbarColor:"var(--gray3) var(--gray1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx("h2",{style:{color:"var(--gray7)",fontWeight:"normal"},children:"Cyber Spaghetti (Beta)"}),"v.0.0.0"]}),jsxRuntimeExports.jsx("hr",{}),"Get started with a preset",jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"1rem",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(PresetButton$2,{text:"Star Shimmer",presetConfig:star_shimmer,update,updateLoop}),jsxRuntimeExports.jsx(PresetButton$2,{text:"Cartoon Speed Lines",presetConfig:speed_lines,update,updateLoop}),jsxRuntimeExports.jsx(PresetButton$2,{text:"Flying Sparks",presetConfig:star_field,update,updateLoop}),jsxRuntimeExports.jsx(PresetButton$2,{text:"Warp Speed",presetConfig:warp_speed,update,updateLoop}),jsxRuntimeExports.jsx(PresetButton$2,{text:"Spaghetti",presetConfig:spaghetti,update,updateLoop})]}),"Customize to your liking below.",jsxRuntimeExports.jsxs(CollapsibleSection,{iconName:"grid_guides",title:"Composition",children:[jsxRuntimeExports.jsxs("div",{style:groupedRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Background Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:rgbToHex$1(state.backgroundColor),onChange:__name(e2=>update({backgroundColor:hexToRgb$1(e2.target.value)}),"onChange"),style:{width:35,height:35,background:"none",border:"none"}})]}),jsxRuntimeExports.jsxs("div",{style:groupedRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Canvas Size"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasWidth,min:0,max:3840,step:10,onChange:__name(v2=>update({canvasWidth:v2}),"onChange")}),jsxRuntimeExports.jsx("span",{style:{margin:"0 0.5rem"},children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasHeight,min:0,max:3840,step:10,onChange:__name(v2=>update({canvasHeight:v2}),"onChange")})]})]}),jsxRuntimeExports.jsxs("div",{style:groupedRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Ray Origin"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.centerX,min:0,max:1,step:.01,onChange:__name(v2=>update({centerX:v2}),"onChange")}),jsxRuntimeExports.jsx("span",{style:{margin:"0 0.5rem"},children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.centerY,min:0,max:1,step:.01,onChange:__name(v2=>update({centerY:v2}),"onChange")})]})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Number of Rays"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.numRays,min:0,max:1e4,step:5,onChange:__name(v2=>update({numRays:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Outer Radius"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.outerRadius,min:0,max:1,step:.01,onChange:__name(v2=>update({outerRadius:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:" Outer Radius Randomization"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.outerRadiusRandomization,min:0,max:1,step:.01,onChange:__name(v2=>update({outerRadiusRandomization:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Inner Radius"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.innerRadius,min:0,max:1,step:.01,onChange:__name(v2=>update({innerRadius:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:" Inner Radius Randomization"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.innerRadiusRandomization,min:0,max:1,step:.01,onChange:__name(v2=>update({innerRadiusRandomization:v2}),"onChange")})]})]}),jsxRuntimeExports.jsxs(CollapsibleSection,{iconName:"animation",title:"Motion",children:[jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Ray Cycle Lifespan (frames)"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.rayLife,min:0,max:300,step:1,onChange:__name(v2=>(updateLoop(v2,state.numCycles),update({rayLife:v2})),"onChange"),onCommit:__name(v2=>(updateLoop(v2,state.numCycles),update({rayLife:v2})),"onCommit")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Number of Cycles"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.numCycles,min:1,max:10,step:1,onChange:__name(v2=>(updateLoop(state.rayLife,v2),update({numCycles:v2})),"onChange"),onCommit:__name(v2=>(updateLoop(state.rayLife,v2),update({numCycles:v2})),"onCommit")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Include Fade In/Out"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:state.includeFadeInOut,onChange:__name(e2=>{timeline==null||timeline.projectTools.updateFocusRange(determineFocusRange(state.rayLife,state.numCycles,e2.target.checked),!0),update({includeFadeInOut:e2.target.checked&&state.numCycles!==1})},"onChange")})]})]}),jsxRuntimeExports.jsxs(CollapsibleSection,{iconName:"line_weight",title:"Rays Appearance",children:[jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Blend Mode"}),jsxRuntimeExports.jsx(SingleSelectButtonGroup,{options:[{label:"Normal",value:"normal"},{label:"Additive",value:"additive"}],value:state.blendMode,onChange:__name(v2=>update({blendMode:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{style:{display:"block",marginBottom:4,color:"var(--gray6)",fontWeight:500},children:"Colors"}),jsxRuntimeExports.jsxs("div",{style:colorBoxStyle,children:[state.rayColors.map((color,i2)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,border:"2px solid var(--gray4)",borderRadius:"var(--borderRadiusSmall)",padding:"2px 8px"},children:[jsxRuntimeExports.jsx("input",{type:"color",value:rgbToHex$1(color),onChange:__name(e2=>updateColor(i2,hexToRgb$1(e2.target.value)),"onChange"),style:{width:35,height:35,background:"none",border:"none"}}),jsxRuntimeExports.jsx(Icon,{iconName:"delete",onClick:__name(()=>removeColor(i2),"onClick")})]},i2)),jsxRuntimeExports.jsx(Button,{text:"+ add color",onClick:addColor})]})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Stroke Middle Thickness"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.thickness,min:0,max:.2,step:.001,onChange:__name(v2=>update({thickness:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Stroke Ends Thickness (Relative)"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.strokeCap,min:0,max:1,step:.01,onChange:__name(v2=>update({strokeCap:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:" Thickness Randomization"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.thicknessRandomization,min:0,max:1,step:.01,onChange:__name(v2=>update({thicknessRandomization:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Ray Length"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.rayLength,min:0,max:1,step:.01,onChange:__name(v2=>update({rayLength:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:" Ray Length Randomization"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.rayLengthRandomization,min:0,max:1,step:.01,onChange:__name(v2=>update({rayLengthRandomization:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Feather"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.feather,min:0,max:1,step:.01,onChange:__name(v2=>update({feather:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Perspective Skew"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.perspectiveSkew,min:0,max:1,step:.01,onChange:__name(v2=>update({perspectiveSkew:v2}),"onChange")})]})]}),jsxRuntimeExports.jsxs(CollapsibleSection,{iconName:"waves",title:"Distortion",children:[jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Pattern"}),jsxRuntimeExports.jsx(SingleSelectButtonGroup,{options:[{label:"Zigzag",value:"zigzag"},{label:"Sine",value:"sine"},{label:"Jitter",value:"jitter"}],value:state.pattern,onChange:__name(v2=>update({pattern:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Amplitude"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.amplitude,min:0,max:1,step:.01,onChange:__name(v2=>update({amplitude:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Frequency"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.frequency,min:0,max:1,step:.01,onChange:__name(v2=>update({frequency:v2}),"onChange")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:" Phase Randomization"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.phaseRandomization,min:0,max:1,step:.01,onChange:__name(v2=>update({phaseRandomization:v2}),"onChange")})]})]}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Give Feedback",iconName:"favorite",children:jsxRuntimeExports.jsx("div",{style:{marginBottom:"1rem",color:"var(--gray6)"},children:jsxRuntimeExports.jsx(FeedbackBox,{preamble:"[FEEDBACK FROM CYBERSPAGHETTI] "})})})]})}__name(CyberSpaghettiControlsInterior$3,"CyberSpaghettiControlsInterior$3");function CyberSpaghettiExterior$2(){const controls=useControls$2();return controls?jsxRuntimeExports.jsx(CyberSpaghettiControlsInterior$3,{controls}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(CyberSpaghettiExterior$2,"CyberSpaghettiExterior$2");function SingleSelectButtonGroup({options,value,onChange,style={}}){return jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:8,...style},children:options.map(opt=>jsxRuntimeExports.jsx("div",{style:{},children:jsxRuntimeExports.jsx(Button,{text:opt.label,onClick:__name(()=>onChange(opt.value),"onClick"),bgColor:value===opt.value?"var(--gray4)":"var(--gray2)",color:value===opt.value?"var(--gray8)":"var(--gray6)"})},opt.value))})}__name(SingleSelectButtonGroup,"SingleSelectButtonGroup");function CyberSpaghettiControls$3(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(ControlsProvider$2,{children:jsxRuntimeExports.jsx(TimelineProvider,{shouldCreate:!1,defaultName:"cyberspaghetti.timeline",children:jsxRuntimeExports.jsx(CyberSpaghettiExterior$2,{})})})})}__name(CyberSpaghettiControls$3,"CyberSpaghettiControls$3");const LISSAJOUS_CURVES=[{a:1,b:1,c:1,a_delta:0,b_delta:.8,c_delta:.6},{a:1,b:2,c:1,a_delta:.6,b_delta:.4,c_delta:1},{a:1,b:3,c:1,a_delta:.6,b_delta:1,c_delta:.2},{a:2,b:3,c:1,a_delta:.4,b_delta:1,c_delta:.4},{a:5,b:3,c:1,a_delta:.4,b_delta:.4,c_delta:.2},{a:5,b:7,c:1,a_delta:.4,b_delta:.8,c_delta:.8}];function lissajousKnot(t2,params){const x2=Math.cos(params.a*t2+params.a_delta),y2=Math.cos(params.b*t2+params.b_delta),z2=Math.cos(params.c*t2+params.c_delta);return[x2,y2,z2]}__name(lissajousKnot,"lissajousKnot");function integrateLissajousKnot(params,steps=1e3){const values=[];for(let i2=0;i2<steps;i2++){const t2=i2/(steps-1)*2*Math.PI,[x2,y2,z2]=lissajousKnot(t2,params);values.push([x2,y2,z2])}let integral=0;for(let i2=1;i2<values.length-1;i2++){const[x0,y0,z0]=values[i2-1],[x1,y1,z1]=values[i2],length=Math.sqrt((x1-x0)**2+(y1-y0)**2+(z1-z0)**2);integral+=length}return integral}__name(integrateLissajousKnot,"integrateLissajousKnot");for(const curve of LISSAJOUS_CURVES)curve.integral=integrateLissajousKnot(curve);const LISSAJOUS_CURVES_MAX_INTEGRAL=Math.max(...LISSAJOUS_CURVES.map(c=>c.integral||0));var _externalStateSubscribers2,_Controls_instances2,notifyExternalStateSubscribers_fn2,_internalSubscribers2,notifyInternalSubscribers_fn2,_externalSubscribers2,notifyExternalSubscribers_fn2,_a16;let Controls$1=(_a16=class{constructor(data){__privateAdd(this,_Controls_instances2);__publicField(this,"data");__publicField(this,"externalState",crypto.randomUUID());__privateAdd(this,_externalStateSubscribers2,[]);__privateAdd(this,_internalSubscribers2,[]);__privateAdd(this,_externalSubscribers2,[]);this.data=data}setData(data){this.data=data,__privateMethod(this,_Controls_instances2,notifyExternalSubscribers_fn2).call(this)}receiveExternalUpdate(update){this.data=update,this.externalState=crypto.randomUUID(),__privateMethod(this,_Controls_instances2,notifyExternalStateSubscribers_fn2).call(this),__privateMethod(this,_Controls_instances2,notifyInternalSubscribers_fn2).call(this)}subscribeToExternalState(cb){return __privateGet(this,_externalStateSubscribers2).push(cb),()=>{__privateSet(this,_externalStateSubscribers2,__privateGet(this,_externalStateSubscribers2).filter(c=>c!==cb))}}getExternalState(){return this.externalState}subscribeInternal(cb){return __privateGet(this,_internalSubscribers2).push(cb),()=>{__privateSet(this,_internalSubscribers2,__privateGet(this,_internalSubscribers2).filter(c=>c!==cb))}}subscribeExternal(cb){return __privateGet(this,_externalSubscribers2).push(cb),()=>{__privateSet(this,_externalSubscribers2,__privateGet(this,_externalSubscribers2).filter(c=>c!==cb))}}getSnapshot(){return this.data}},_externalStateSubscribers2=new WeakMap,_Controls_instances2=new WeakSet,notifyExternalStateSubscribers_fn2=__name(function(){__privateGet(this,_externalStateSubscribers2).forEach(cb=>cb())},"#notifyExternalStateSubscribers"),_internalSubscribers2=new WeakMap,notifyInternalSubscribers_fn2=__name(function(){console.log("Internal subscribers count:",__privateGet(this,_internalSubscribers2)),__privateGet(this,_internalSubscribers2).forEach(cb=>cb())},"#notifyInternalSubscribers"),_externalSubscribers2=new WeakMap,notifyExternalSubscribers_fn2=__name(function(){__privateGet(this,_externalSubscribers2).forEach(cb=>cb())},"#notifyExternalSubscribers"),__name(_a16,"Controls"),__publicField(_a16,"defaultControls",{particleCount:10,particleColors:[[255,0,0],[0,255,0],[0,0,255]],backgroundColor:[0,0,0],loopLifecycle:300,mixingIntensity:.3,showLissajousFigure:!1,ratioA:1,ratioB:2,offset:Math.PI/2,width:1920,height:1080,figureScaleX:.2,figureScaleY:.3,noiseEnabled:!0,noiseScale:.1,noiseIntensity:.1,noiseSpeed:.1,fluidWarpEnabled:!0,fluidWarpIntensity:.1,fluidWarpScale:.1,fluidWarpSpeed:.1,lissajousParams:LISSAJOUS_CURVES[0],animationSpeed:.2,rotateVertical:0,rotateHorizontal:0,exportPerfectLoop:!1,exportDuration:10}),_a16);var _a17;let Controller$3=(_a17=class{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=new Controls$1(data),this.data.subscribeExternal(()=>{var _a26;const update=(_a26=this.data)==null?void 0:_a26.getSnapshot();this.update(update)}),this.initialised=!0}receiveUpdate(update){var _a26;(_a26=this.data)==null||_a26.receiveExternalUpdate(update)}receiveMetadataUpdate(){}getSnapshot(){var _a26;return(_a26=this.data)==null?void 0:_a26.getSnapshot()}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}},__name(_a17,"Controller"),_a17);const ControlsContext$1=reactExports.createContext(null);function ControlsProvider$1({children}){const{initialized:indexInitialized,index}=useIndex(),tController=reactExports.useRef(new Controller$3),timelineAssets=indexInitialized?Object.entries(index.data).filter(([assetId2,assetMetadata])=>assetMetadata.type==="controls"&&assetMetadata.name==="liquidlissajous.controls").map(([assetId2,assetMetadata])=>({assetId:assetId2,assetController:tController.current})):[],assetId=timelineAssets.length>0?timelineAssets[0].assetId:void 0,{FreeWorkload}=useCK();reactExports.useEffect(()=>{if(indexInitialized&&assetId===void 0){const workload=FreeWorkload();workload.thread("default").worker({instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},{createAsset:{asset:{data:Controls$1.defaultControls,metadata:{type:"controls",name:"liquidlissajous.controls",preferredEditorAddress:CONFIG.SELF_HOST+"liquidlissajous-controlconsole"},on_update:{type:"simple"},id:"liquidlissajous.controls"}}}),workload.dispatch()}},[assetId,indexInitialized]);const{initialized:assetsInitialized,assets}=useAssets(timelineAssets),controls=indexInitialized&&assetsInitialized&&assetId!==void 0&&assets[assetId]!==void 0?assets[assetId].data:void 0;return jsxRuntimeExports.jsx(ControlsContext$1.Provider,{value:controls,children})}__name(ControlsProvider$1,"ControlsProvider$1");function useControls$1(){return React.useContext(ControlsContext$1)}__name(useControls$1,"useControls$1");function new_oklab(){return{L:0,a:0,b:0}}__name(new_oklab,"new_oklab");function rgb_to_oklab(c,o2){if(!o2)return o2=new_oklab(),rgb_to_oklab(c,o2),o2;const r2=gamma_inv(c.r/255),g2=gamma_inv(c.g/255),b2=gamma_inv(c.b/255),l2=Math.cbrt(.4122214708*r2+.5363325363*g2+.0514459929*b2),m2=Math.cbrt(.2119034982*r2+.6806995451*g2+.1073969566*b2),s2=Math.cbrt(.0883024619*r2+.2817188376*g2+.6299787005*b2);o2.L=l2*.2104542553+m2*.793617785+s2*-.0040720468,o2.a=l2*1.9779984951+m2*-2.428592205+s2*.4505937099,o2.b=l2*.0259040371+m2*.7827717662+s2*-.808675766}__name(rgb_to_oklab,"rgb_to_oklab");function gamma(x2){return x2>=.0031308?1.055*Math.pow(x2,1/2.4)-.055:12.92*x2}__name(gamma,"gamma");function gamma_inv(x2){return x2>=.04045?Math.pow((x2+.055)/(1+.055),2.4):x2/12.92}__name(gamma_inv,"gamma_inv");const powVal=1.5,src=[[219,204,242,43,188,184],[32,42,132,43,188,184],[255,255,255,255,0,0],[255,255,255,0,255,0],[255,255,255,0,0,255]];src.map(c=>({colA:[c[0],c[1],c[2]].map(v2=>Math.pow(v2/255,powVal)),colB:[c[3],c[4],c[5]].map(v2=>Math.pow(v2/255,powVal))}));const colorConvert=__name(c=>{const r2=c[0]/255,g2=c[1]/255,b2=c[2]/255;return[Math.pow(r2,powVal),Math.pow(g2,powVal),Math.pow(b2,powVal)]},"colorConvert");function rgbToHsl([r2,g2,b2]){r2=Math.max(0,Math.min(1,r2)),g2=Math.max(0,Math.min(1,g2)),b2=Math.max(0,Math.min(1,b2));const max2=Math.max(r2,g2,b2),min2=Math.min(r2,g2,b2);let h2=0,s2=0;const l2=(max2+min2)/2;if(max2!==min2){const d2=max2-min2;switch(s2=l2>.5?d2/(2-max2-min2):d2/(max2+min2),max2){case r2:h2=(g2-b2)/d2+(g2<b2?6:0);break;case g2:h2=(b2-r2)/d2+2;break;case b2:h2=(r2-g2)/d2+4;break}h2/=6}return[h2,s2,l2]}__name(rgbToHsl,"rgbToHsl");function hslToRgb([h2,s2,l2]){let r2,g2,b2;if(s2===0)r2=g2=b2=l2;else{const hue2rgb=__name((p22,q22,t2)=>(t2<0&&(t2+=1),t2>1&&(t2-=1),t2<.16666666666666666?p22+(q22-p22)*6*t2:t2<.5?q22:t2<.6666666666666666?p22+(q22-p22)*(.6666666666666666-t2)*6:p22),"hue2rgb"),q2=l2<.5?l2*(1+s2):l2+s2-l2*s2,p2=2*l2-q2;r2=hue2rgb(p2,q2,h2+1/3),g2=hue2rgb(p2,q2,h2),b2=hue2rgb(p2,q2,h2-1/3)}return[r2,g2,b2]}__name(hslToRgb,"hslToRgb");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n3){for(var e2=1;e2<arguments.length;e2++){var t2=arguments[e2];for(var r2 in t2)({}).hasOwnProperty.call(t2,r2)&&(n3[r2]=t2[r2])}return n3},_extends.apply(null,arguments)}__name(_extends,"_extends");var DEFAULT_CONFIG={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function getSafeProperty(object,prop){if(isSafeProperty(object,prop))return object[prop];throw typeof object[prop]=="function"&&isSafeMethod(object,prop)?new Error('Cannot access method "'+prop+'" as a property'):new Error('No access to property "'+prop+'"')}__name(getSafeProperty,"getSafeProperty");function setSafeProperty(object,prop,value){if(isSafeProperty(object,prop))return object[prop]=value,value;throw new Error('No access to property "'+prop+'"')}__name(setSafeProperty,"setSafeProperty");function isSafeProperty(object,prop){return!isPlainObject(object)&&!Array.isArray(object)?!1:hasOwnProperty(safeNativeProperties,prop)?!0:!(prop in Object.prototype||prop in Function.prototype)}__name(isSafeProperty,"isSafeProperty");function isSafeMethod(object,method){return object==null||typeof object[method]!="function"||hasOwnProperty(object,method)&&Object.getPrototypeOf&&method in Object.getPrototypeOf(object)?!1:hasOwnProperty(safeNativeMethods,method)?!0:!(method in Object.prototype||method in Function.prototype)}__name(isSafeMethod,"isSafeMethod");function isPlainObject(object){return typeof object=="object"&&object&&object.constructor===Object}__name(isPlainObject,"isPlainObject");var safeNativeProperties={length:!0,name:!0},safeNativeMethods={toString:!0,valueOf:!0,toLocaleString:!0};const _ObjectWrappingMap=class _ObjectWrappingMap{constructor(object){this.wrappedObject=object,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(key=>this.has(key)).values()}get(key){return getSafeProperty(this.wrappedObject,key)}set(key,value){return setSafeProperty(this.wrappedObject,key,value),this}has(key){return isSafeProperty(this.wrappedObject,key)&&key in this.wrappedObject}entries(){return mapIterator(this.keys(),key=>[key,this.get(key)])}forEach(callback){for(var key of this.keys())callback(this.get(key),key,this)}delete(key){isSafeProperty(this.wrappedObject,key)&&delete this.wrappedObject[key]}clear(){for(var key of this.keys())this.delete(key)}get size(){return Object.keys(this.wrappedObject).length}};__name(_ObjectWrappingMap,"ObjectWrappingMap");let ObjectWrappingMap=_ObjectWrappingMap;function mapIterator(it2,callback){return{next:__name(()=>{var n3=it2.next();return n3.done?n3:{value:callback(n3.value),done:!1}},"next")}}__name(mapIterator,"mapIterator");function isNumber(x2){return typeof x2=="number"}__name(isNumber,"isNumber");function isBigNumber(x2){return!x2||typeof x2!="object"||typeof x2.constructor!="function"?!1:x2.isBigNumber===!0&&typeof x2.constructor.prototype=="object"&&x2.constructor.prototype.isBigNumber===!0||typeof x2.constructor.isDecimal=="function"&&x2.constructor.isDecimal(x2)===!0}__name(isBigNumber,"isBigNumber");function isBigInt(x2){return typeof x2=="bigint"}__name(isBigInt,"isBigInt");function isComplex(x2){return x2&&typeof x2=="object"&&Object.getPrototypeOf(x2).isComplex===!0||!1}__name(isComplex,"isComplex");function isFraction(x2){return x2&&typeof x2=="object"&&Object.getPrototypeOf(x2).isFraction===!0||!1}__name(isFraction,"isFraction");function isUnit(x2){return x2&&x2.constructor.prototype.isUnit===!0||!1}__name(isUnit,"isUnit");function isString(x2){return typeof x2=="string"}__name(isString,"isString");var isArray=Array.isArray;function isMatrix(x2){return x2&&x2.constructor.prototype.isMatrix===!0||!1}__name(isMatrix,"isMatrix");function isCollection(x2){return Array.isArray(x2)||isMatrix(x2)}__name(isCollection,"isCollection");function isDenseMatrix(x2){return x2&&x2.isDenseMatrix&&x2.constructor.prototype.isMatrix===!0||!1}__name(isDenseMatrix,"isDenseMatrix");function isSparseMatrix(x2){return x2&&x2.isSparseMatrix&&x2.constructor.prototype.isMatrix===!0||!1}__name(isSparseMatrix,"isSparseMatrix");function isRange(x2){return x2&&x2.constructor.prototype.isRange===!0||!1}__name(isRange,"isRange");function isIndex(x2){return x2&&x2.constructor.prototype.isIndex===!0||!1}__name(isIndex,"isIndex");function isBoolean(x2){return typeof x2=="boolean"}__name(isBoolean,"isBoolean");function isResultSet(x2){return x2&&x2.constructor.prototype.isResultSet===!0||!1}__name(isResultSet,"isResultSet");function isHelp(x2){return x2&&x2.constructor.prototype.isHelp===!0||!1}__name(isHelp,"isHelp");function isFunction$1(x2){return typeof x2=="function"}__name(isFunction$1,"isFunction$1");function isDate(x2){return x2 instanceof Date}__name(isDate,"isDate");function isRegExp(x2){return x2 instanceof RegExp}__name(isRegExp,"isRegExp");function isObject(x2){return!!(x2&&typeof x2=="object"&&x2.constructor===Object&&!isComplex(x2)&&!isFraction(x2))}__name(isObject,"isObject");function isMap(object){return object?object instanceof Map||object instanceof ObjectWrappingMap||typeof object.set=="function"&&typeof object.get=="function"&&typeof object.keys=="function"&&typeof object.has=="function":!1}__name(isMap,"isMap");function isNull(x2){return x2===null}__name(isNull,"isNull");function isUndefined(x2){return x2===void 0}__name(isUndefined,"isUndefined");function isAccessorNode(x2){return x2&&x2.isAccessorNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isAccessorNode,"isAccessorNode");function isArrayNode(x2){return x2&&x2.isArrayNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isArrayNode,"isArrayNode");function isAssignmentNode(x2){return x2&&x2.isAssignmentNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isAssignmentNode,"isAssignmentNode");function isBlockNode(x2){return x2&&x2.isBlockNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isBlockNode,"isBlockNode");function isConditionalNode(x2){return x2&&x2.isConditionalNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isConditionalNode,"isConditionalNode");function isConstantNode(x2){return x2&&x2.isConstantNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isConstantNode,"isConstantNode");function isFunctionAssignmentNode(x2){return x2&&x2.isFunctionAssignmentNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isFunctionAssignmentNode,"isFunctionAssignmentNode");function isFunctionNode(x2){return x2&&x2.isFunctionNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isFunctionNode,"isFunctionNode");function isIndexNode(x2){return x2&&x2.isIndexNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isIndexNode,"isIndexNode");function isNode(x2){return x2&&x2.isNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isNode,"isNode");function isObjectNode(x2){return x2&&x2.isObjectNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isObjectNode,"isObjectNode");function isOperatorNode(x2){return x2&&x2.isOperatorNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isOperatorNode,"isOperatorNode");function isParenthesisNode(x2){return x2&&x2.isParenthesisNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isParenthesisNode,"isParenthesisNode");function isRangeNode(x2){return x2&&x2.isRangeNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isRangeNode,"isRangeNode");function isRelationalNode(x2){return x2&&x2.isRelationalNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isRelationalNode,"isRelationalNode");function isSymbolNode(x2){return x2&&x2.isSymbolNode===!0&&x2.constructor.prototype.isNode===!0||!1}__name(isSymbolNode,"isSymbolNode");function isChain(x2){return x2&&x2.constructor.prototype.isChain===!0||!1}__name(isChain,"isChain");function typeOf(x2){var t2=typeof x2;return t2==="object"?x2===null?"null":isBigNumber(x2)?"BigNumber":x2.constructor&&x2.constructor.name?x2.constructor.name:"Object":t2}__name(typeOf,"typeOf");function clone$2(x2){var type=typeof x2;if(type==="number"||type==="bigint"||type==="string"||type==="boolean"||x2===null||x2===void 0)return x2;if(typeof x2.clone=="function")return x2.clone();if(Array.isArray(x2))return x2.map(function(value){return clone$2(value)});if(x2 instanceof Date)return new Date(x2.valueOf());if(isBigNumber(x2))return x2;if(isObject(x2))return mapObject(x2,clone$2);if(type==="function")return x2;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(x2,")"))}__name(clone$2,"clone$2");function mapObject(object,callback){var clone2={};for(var key in object)hasOwnProperty(object,key)&&(clone2[key]=callback(object[key]));return clone2}__name(mapObject,"mapObject");function deepStrictEqual(a2,b2){var prop,i2,len;if(Array.isArray(a2)){if(!Array.isArray(b2)||a2.length!==b2.length)return!1;for(i2=0,len=a2.length;i2<len;i2++)if(!deepStrictEqual(a2[i2],b2[i2]))return!1;return!0}else{if(typeof a2=="function")return a2===b2;if(a2 instanceof Object){if(Array.isArray(b2)||!(b2 instanceof Object))return!1;for(prop in a2)if(!(prop in b2)||!deepStrictEqual(a2[prop],b2[prop]))return!1;for(prop in b2)if(!(prop in a2))return!1;return!0}else return a2===b2}}__name(deepStrictEqual,"deepStrictEqual");function hasOwnProperty(object,property){return object&&Object.hasOwnProperty.call(object,property)}__name(hasOwnProperty,"hasOwnProperty");function pickShallow(object,properties){for(var copy={},i2=0;i2<properties.length;i2++){var key=properties[i2],value=object[key];value!==void 0&&(copy[key]=value)}return copy}__name(pickShallow,"pickShallow");var MATRIX_OPTIONS=["Matrix","Array"],NUMBER_OPTIONS=["number","BigNumber","Fraction"],config$1=__name(function(options){if(options)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(DEFAULT_CONFIG)},"config");_extends(config$1,DEFAULT_CONFIG,{MATRIX_OPTIONS,NUMBER_OPTIONS});function ok(){return!0}__name(ok,"ok");function notOk(){return!1}__name(notOk,"notOk");function undef(){}__name(undef,"undef");const NOT_TYPED_FUNCTION="Argument is not a typed-function.";function create(){function isPlainObject2(x2){return typeof x2=="object"&&x2!==null&&x2.constructor===Object}__name(isPlainObject2,"isPlainObject");const _types=[{name:"number",test:__name(function(x2){return typeof x2=="number"},"test")},{name:"string",test:__name(function(x2){return typeof x2=="string"},"test")},{name:"boolean",test:__name(function(x2){return typeof x2=="boolean"},"test")},{name:"Function",test:__name(function(x2){return typeof x2=="function"},"test")},{name:"Array",test:Array.isArray},{name:"Date",test:__name(function(x2){return x2 instanceof Date},"test")},{name:"RegExp",test:__name(function(x2){return x2 instanceof RegExp},"test")},{name:"Object",test:isPlainObject2},{name:"null",test:__name(function(x2){return x2===null},"test")},{name:"undefined",test:__name(function(x2){return x2===void 0},"test")}],anyType={name:"any",test:ok,isAny:!0};let typeMap,typeList,nConversions=0,typed2={createCount:0};function findType(typeName){const type=typeMap.get(typeName);if(type)return type;let message='Unknown type "'+typeName+'"';const name2=typeName.toLowerCase();let otherName;for(otherName of typeList)if(otherName.toLowerCase()===name2){message+='. Did you mean "'+otherName+'" ?';break}throw new TypeError(message)}__name(findType,"findType");function addTypes(types){let beforeSpec=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const beforeIndex=beforeSpec?findType(beforeSpec).index:typeList.length,newTypes=[];for(let i2=0;i2<types.length;++i2){if(!types[i2]||typeof types[i2].name!="string"||typeof types[i2].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const typeName=types[i2].name;if(typeMap.has(typeName))throw new TypeError('Duplicate type name "'+typeName+'"');newTypes.push(typeName),typeMap.set(typeName,{name:typeName,test:types[i2].test,isAny:types[i2].isAny,index:beforeIndex+i2,conversionsTo:[]})}const affectedTypes=typeList.slice(beforeIndex);typeList=typeList.slice(0,beforeIndex).concat(newTypes).concat(affectedTypes);for(let i2=beforeIndex+newTypes.length;i2<typeList.length;++i2)typeMap.get(typeList[i2]).index=i2}__name(addTypes,"addTypes");function clear(){typeMap=new Map,typeList=[],nConversions=0,addTypes([anyType],!1)}__name(clear,"clear"),clear(),addTypes(_types);function clearConversions(){let typeName;for(typeName of typeList)typeMap.get(typeName).conversionsTo=[];nConversions=0}__name(clearConversions,"clearConversions");function findTypeNames(value){const matches=typeList.filter(name2=>{const type=typeMap.get(name2);return!type.isAny&&type.test(value)});return matches.length?matches:["any"]}__name(findTypeNames,"findTypeNames");function isTypedFunction(entity){return entity&&typeof entity=="function"&&"_typedFunctionData"in entity}__name(isTypedFunction,"isTypedFunction");function findSignature(fn,signature,options){if(!isTypedFunction(fn))throw new TypeError(NOT_TYPED_FUNCTION);const exact=options&&options.exact,stringSignature=Array.isArray(signature)?signature.join(","):signature,params=parseSignature(stringSignature),canonicalSignature=stringifyParams(params);if(!exact||canonicalSignature in fn.signatures){const match=fn._typedFunctionData.signatureMap.get(canonicalSignature);if(match)return match}const nParams=params.length;let remainingSignatures;if(exact){remainingSignatures=[];let name2;for(name2 in fn.signatures)remainingSignatures.push(fn._typedFunctionData.signatureMap.get(name2))}else remainingSignatures=fn._typedFunctionData.signatures;for(let i2=0;i2<nParams;++i2){const want=params[i2],filteredSignatures=[];let possibility;for(possibility of remainingSignatures){const have=getParamAtIndex(possibility.params,i2);if(!(!have||want.restParam&&!have.restParam)){if(!have.hasAny){const haveTypes=paramTypeSet(have);if(want.types.some(wtype=>!haveTypes.has(wtype.name)))continue}filteredSignatures.push(possibility)}}if(remainingSignatures=filteredSignatures,remainingSignatures.length===0)break}let candidate;for(candidate of remainingSignatures)if(candidate.params.length<=nParams)return candidate;throw new TypeError("Signature not found (signature: "+(fn.name||"unnamed")+"("+stringifyParams(params,", ")+"))")}__name(findSignature,"findSignature");function find(fn,signature,options){return findSignature(fn,signature,options).implementation}__name(find,"find");function convert(value,typeName){const type=findType(typeName);if(type.test(value))return value;const conversions=type.conversionsTo;if(conversions.length===0)throw new Error("There are no conversions to "+typeName+" defined.");for(let i2=0;i2<conversions.length;i2++)if(findType(conversions[i2].from).test(value))return conversions[i2].convert(value);throw new Error("Cannot convert "+value+" to "+typeName)}__name(convert,"convert");function stringifyParams(params){let separator=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return params.map(p2=>p2.name).join(separator)}__name(stringifyParams,"stringifyParams");function parseParam(param){const restParam=param.indexOf("...")===0,typeDefs=(restParam?param.length>3?param.slice(3):"any":param).split("|").map(s2=>findType(s2.trim()));let hasAny=!1,paramName=restParam?"...":"";return{types:typeDefs.map(function(type){return hasAny=type.isAny||hasAny,paramName+=type.name+"|",{name:type.name,typeIndex:type.index,test:type.test,isAny:type.isAny,conversion:null,conversionIndex:-1}}),name:paramName.slice(0,-1),hasAny,hasConversion:!1,restParam}}__name(parseParam,"parseParam");function expandParam(param){const typeNames=param.types.map(t2=>t2.name),matchingConversions=availableConversions(typeNames);let hasAny=param.hasAny,newName=param.name;const convertibleTypes=matchingConversions.map(function(conversion){const type=findType(conversion.from);return hasAny=type.isAny||hasAny,newName+="|"+conversion.from,{name:conversion.from,typeIndex:type.index,test:type.test,isAny:type.isAny,conversion,conversionIndex:conversion.index}});return{types:param.types.concat(convertibleTypes),name:newName,hasAny,hasConversion:convertibleTypes.length>0,restParam:param.restParam}}__name(expandParam,"expandParam");function paramTypeSet(param){return param.typeSet||(param.typeSet=new Set,param.types.forEach(type=>param.typeSet.add(type.name))),param.typeSet}__name(paramTypeSet,"paramTypeSet");function parseSignature(rawSignature){const params=[];if(typeof rawSignature!="string")throw new TypeError("Signatures must be strings");const signature=rawSignature.trim();if(signature==="")return params;const rawParams=signature.split(",");for(let i2=0;i2<rawParams.length;++i2){const parsedParam=parseParam(rawParams[i2].trim());if(parsedParam.restParam&&i2!==rawParams.length-1)throw new SyntaxError('Unexpected rest parameter "'+rawParams[i2]+'": only allowed for the last parameter');if(parsedParam.types.length===0)return null;params.push(parsedParam)}return params}__name(parseSignature,"parseSignature");function hasRestParam(params){const param=last2(params);return param?param.restParam:!1}__name(hasRestParam,"hasRestParam");function compileTest(param){if(!param||param.types.length===0)return ok;if(param.types.length===1)return findType(param.types[0].name).test;if(param.types.length===2){const test0=findType(param.types[0].name).test,test1=findType(param.types[1].name).test;return __name(function(x2){return test0(x2)||test1(x2)},"or")}else{const tests=param.types.map(function(type){return findType(type.name).test});return __name(function(x2){for(let i2=0;i2<tests.length;i2++)if(tests[i2](x2))return!0;return!1},"or")}}__name(compileTest,"compileTest");function compileTests(params){let tests,test0,test1;if(hasRestParam(params)){tests=initial(params).map(compileTest);const varIndex=tests.length,lastTest=compileTest(last2(params)),testRestParam=__name(function(args){for(let i2=varIndex;i2<args.length;i2++)if(!lastTest(args[i2]))return!1;return!0},"testRestParam");return __name(function(args){for(let i2=0;i2<tests.length;i2++)if(!tests[i2](args[i2]))return!1;return testRestParam(args)&&args.length>=varIndex+1},"testArgs")}else return params.length===0?__name(function(args){return args.length===0},"testArgs"):params.length===1?(test0=compileTest(params[0]),__name(function(args){return test0(args[0])&&args.length===1},"testArgs")):params.length===2?(test0=compileTest(params[0]),test1=compileTest(params[1]),__name(function(args){return test0(args[0])&&test1(args[1])&&args.length===2},"testArgs")):(tests=params.map(compileTest),__name(function(args){for(let i2=0;i2<tests.length;i2++)if(!tests[i2](args[i2]))return!1;return args.length===tests.length},"testArgs"))}__name(compileTests,"compileTests");function getParamAtIndex(params,index){return index<params.length?params[index]:hasRestParam(params)?last2(params):null}__name(getParamAtIndex,"getParamAtIndex");function getTypeSetAtIndex(params,index){const param=getParamAtIndex(params,index);return param?paramTypeSet(param):new Set}__name(getTypeSetAtIndex,"getTypeSetAtIndex");function isExactType(type){return type.conversion===null||type.conversion===void 0}__name(isExactType,"isExactType");function mergeExpectedParams(signatures,index){const typeSet=new Set;return signatures.forEach(signature=>{const paramSet=getTypeSetAtIndex(signature.params,index);let name2;for(name2 of paramSet)typeSet.add(name2)}),typeSet.has("any")?["any"]:Array.from(typeSet)}__name(mergeExpectedParams,"mergeExpectedParams");function createError(name2,args,signatures){let err,expected;const _name=name2||"unnamed";let matchingSignatures=signatures,index;for(index=0;index<args.length;index++){const nextMatchingDefs=[];if(matchingSignatures.forEach(signature=>{const param=getParamAtIndex(signature.params,index),test=compileTest(param);(index<signature.params.length||hasRestParam(signature.params))&&test(args[index])&&nextMatchingDefs.push(signature)}),nextMatchingDefs.length===0){if(expected=mergeExpectedParams(matchingSignatures,index),expected.length>0){const actualTypes=findTypeNames(args[index]);return err=new TypeError("Unexpected type of argument in function "+_name+" (expected: "+expected.join(" or ")+", actual: "+actualTypes.join(" | ")+", index: "+index+")"),err.data={category:"wrongType",fn:_name,index,actual:actualTypes,expected},err}}else matchingSignatures=nextMatchingDefs}const lengths=matchingSignatures.map(function(signature){return hasRestParam(signature.params)?1/0:signature.params.length});if(args.length<Math.min.apply(null,lengths))return expected=mergeExpectedParams(matchingSignatures,index),err=new TypeError("Too few arguments in function "+_name+" (expected: "+expected.join(" or ")+", index: "+args.length+")"),err.data={category:"tooFewArgs",fn:_name,index:args.length,expected},err;const maxLength=Math.max.apply(null,lengths);if(args.length>maxLength)return err=new TypeError("Too many arguments in function "+_name+" (expected: "+maxLength+", actual: "+args.length+")"),err.data={category:"tooManyArgs",fn:_name,index:args.length,expectedLength:maxLength},err;const argTypes=[];for(let i2=0;i2<args.length;++i2)argTypes.push(findTypeNames(args[i2]).join("|"));return err=new TypeError('Arguments of type "'+argTypes.join(", ")+'" do not match any of the defined signatures of function '+_name+"."),err.data={category:"mismatch",actual:argTypes},err}__name(createError,"createError");function getLowestTypeIndex(param){let min2=typeList.length+1;for(let i2=0;i2<param.types.length;i2++)isExactType(param.types[i2])&&(min2=Math.min(min2,param.types[i2].typeIndex));return min2}__name(getLowestTypeIndex,"getLowestTypeIndex");function getLowestConversionIndex(param){let min2=nConversions+1;for(let i2=0;i2<param.types.length;i2++)isExactType(param.types[i2])||(min2=Math.min(min2,param.types[i2].conversionIndex));return min2}__name(getLowestConversionIndex,"getLowestConversionIndex");function compareParams(param1,param2){if(param1.hasAny){if(!param2.hasAny)return 1}else if(param2.hasAny)return-1;if(param1.restParam){if(!param2.restParam)return 1}else if(param2.restParam)return-1;if(param1.hasConversion){if(!param2.hasConversion)return 1}else if(param2.hasConversion)return-1;const typeDiff=getLowestTypeIndex(param1)-getLowestTypeIndex(param2);if(typeDiff<0)return-1;if(typeDiff>0)return 1;const convDiff=getLowestConversionIndex(param1)-getLowestConversionIndex(param2);return convDiff<0?-1:convDiff>0?1:0}__name(compareParams,"compareParams");function compareSignatures(signature1,signature2){const pars1=signature1.params,pars2=signature2.params,last1=last2(pars1),last22=last2(pars2),hasRest1=hasRestParam(pars1),hasRest2=hasRestParam(pars2);if(hasRest1&&last1.hasAny){if(!hasRest2||!last22.hasAny)return 1}else if(hasRest2&&last22.hasAny)return-1;let any1=0,conv1=0,par;for(par of pars1)par.hasAny&&++any1,par.hasConversion&&++conv1;let any2=0,conv2=0;for(par of pars2)par.hasAny&&++any2,par.hasConversion&&++conv2;if(any1!==any2)return any1-any2;if(hasRest1&&last1.hasConversion){if(!hasRest2||!last22.hasConversion)return 1}else if(hasRest2&&last22.hasConversion)return-1;if(conv1!==conv2)return conv1-conv2;if(hasRest1){if(!hasRest2)return 1}else if(hasRest2)return-1;const lengthCriterion=(pars1.length-pars2.length)*(hasRest1?-1:1);if(lengthCriterion!==0)return lengthCriterion;const comparisons=[];let tc=0;for(let i2=0;i2<pars1.length;++i2){const thisComparison=compareParams(pars1[i2],pars2[i2]);comparisons.push(thisComparison),tc+=thisComparison}if(tc!==0)return tc;let c;for(c of comparisons)if(c!==0)return c;return 0}__name(compareSignatures,"compareSignatures");function availableConversions(typeNames){if(typeNames.length===0)return[];const types=typeNames.map(findType);typeNames.length>1&&types.sort((t1,t2)=>t1.index-t2.index);let matches=types[0].conversionsTo;if(typeNames.length===1)return matches;matches=matches.concat([]);const knownTypes=new Set(typeNames);for(let i2=1;i2<types.length;++i2){let newMatch;for(newMatch of types[i2].conversionsTo)knownTypes.has(newMatch.from)||(matches.push(newMatch),knownTypes.add(newMatch.from))}return matches}__name(availableConversions,"availableConversions");function compileArgsPreprocessing(params,fn){let fnConvert=fn;if(params.some(p2=>p2.hasConversion)){const restParam=hasRestParam(params),compiledConversions=params.map(compileArgConversion);fnConvert=__name(function(){const args=[],last3=restParam?arguments.length-1:arguments.length;for(let i2=0;i2<last3;i2++)args[i2]=compiledConversions[i2](arguments[i2]);return restParam&&(args[last3]=arguments[last3].map(compiledConversions[last3])),fn.apply(this,args)},"convertArgs")}let fnPreprocess=fnConvert;if(hasRestParam(params)){const offset2=params.length-1;fnPreprocess=__name(function(){return fnConvert.apply(this,slice(arguments,0,offset2).concat([slice(arguments,offset2)]))},"preprocessRestParams")}return fnPreprocess}__name(compileArgsPreprocessing,"compileArgsPreprocessing");function compileArgConversion(param){let test0,test1,conversion0,conversion1;const tests=[],conversions=[];switch(param.types.forEach(function(type){type.conversion&&(tests.push(findType(type.conversion.from).test),conversions.push(type.conversion.convert))}),conversions.length){case 0:return __name(function(arg){return arg},"convertArg");case 1:return test0=tests[0],conversion0=conversions[0],__name(function(arg){return test0(arg)?conversion0(arg):arg},"convertArg");case 2:return test0=tests[0],test1=tests[1],conversion0=conversions[0],conversion1=conversions[1],__name(function(arg){return test0(arg)?conversion0(arg):test1(arg)?conversion1(arg):arg},"convertArg");default:return __name(function(arg){for(let i2=0;i2<conversions.length;i2++)if(tests[i2](arg))return conversions[i2](arg);return arg},"convertArg")}}__name(compileArgConversion,"compileArgConversion");function splitParams(params){function _splitParams(params2,index,paramsSoFar){if(index<params2.length){const param=params2[index];let resultingParams=[];if(param.restParam){const exactTypes=param.types.filter(isExactType);exactTypes.length<param.types.length&&resultingParams.push({types:exactTypes,name:"..."+exactTypes.map(t2=>t2.name).join("|"),hasAny:exactTypes.some(t2=>t2.isAny),hasConversion:!1,restParam:!0}),resultingParams.push(param)}else resultingParams=param.types.map(function(type){return{types:[type],name:type.name,hasAny:type.isAny,hasConversion:type.conversion,restParam:!1}});return flatMap(resultingParams,function(nextParam){return _splitParams(params2,index+1,paramsSoFar.concat([nextParam]))})}else return[paramsSoFar]}return __name(_splitParams,"_splitParams"),_splitParams(params,0,[])}__name(splitParams,"splitParams");function conflicting(params1,params2){const ii=Math.max(params1.length,params2.length);for(let i2=0;i2<ii;i2++){const typeSet1=getTypeSetAtIndex(params1,i2),typeSet2=getTypeSetAtIndex(params2,i2);let overlap=!1,name2;for(name2 of typeSet2)if(typeSet1.has(name2)){overlap=!0;break}if(!overlap)return!1}const len1=params1.length,len2=params2.length,restParam1=hasRestParam(params1),restParam2=hasRestParam(params2);return restParam1?restParam2?len1===len2:len2>=len1:restParam2?len1>=len2:len1===len2}__name(conflicting,"conflicting");function clearResolutions(functionList){return functionList.map(fn=>isReferToSelf(fn)?referToSelf(fn.referToSelf.callback):isReferTo(fn)?makeReferTo(fn.referTo.references,fn.referTo.callback):fn)}__name(clearResolutions,"clearResolutions");function collectResolutions(references,functionList,signatureMap){const resolvedReferences=[];let reference;for(reference of references){let resolution=signatureMap[reference];if(typeof resolution!="number")throw new TypeError('No definition for referenced signature "'+reference+'"');if(resolution=functionList[resolution],typeof resolution!="function")return!1;resolvedReferences.push(resolution)}return resolvedReferences}__name(collectResolutions,"collectResolutions");function resolveReferences(functionList,signatureMap,self2){const resolvedFunctions=clearResolutions(functionList),isResolved=new Array(resolvedFunctions.length).fill(!1);let leftUnresolved=!0;for(;leftUnresolved;){leftUnresolved=!1;let nothingResolved=!0;for(let i2=0;i2<resolvedFunctions.length;++i2){if(isResolved[i2])continue;const fn=resolvedFunctions[i2];if(isReferToSelf(fn))resolvedFunctions[i2]=fn.referToSelf.callback(self2),resolvedFunctions[i2].referToSelf=fn.referToSelf,isResolved[i2]=!0,nothingResolved=!1;else if(isReferTo(fn)){const resolvedReferences=collectResolutions(fn.referTo.references,resolvedFunctions,signatureMap);resolvedReferences?(resolvedFunctions[i2]=fn.referTo.callback.apply(this,resolvedReferences),resolvedFunctions[i2].referTo=fn.referTo,isResolved[i2]=!0,nothingResolved=!1):leftUnresolved=!0}}if(nothingResolved&&leftUnresolved)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return resolvedFunctions}__name(resolveReferences,"resolveReferences");function validateDeprecatedThis(signaturesMap){const deprecatedThisRegex=/\bthis(\(|\.signatures\b)/;Object.keys(signaturesMap).forEach(signature=>{const fn=signaturesMap[signature];if(deprecatedThisRegex.test(fn.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}__name(validateDeprecatedThis,"validateDeprecatedThis");function createTypedFunction(name2,rawSignaturesMap){if(typed2.createCount++,Object.keys(rawSignaturesMap).length===0)throw new SyntaxError("No signatures provided");typed2.warnAgainstDeprecatedThis&&validateDeprecatedThis(rawSignaturesMap);const parsedParams=[],originalFunctions=[],signaturesMap={},preliminarySignatures=[];let signature;for(signature in rawSignaturesMap){if(!Object.prototype.hasOwnProperty.call(rawSignaturesMap,signature))continue;const params=parseSignature(signature);if(!params)continue;parsedParams.forEach(function(pp){if(conflicting(pp,params))throw new TypeError('Conflicting signatures "'+stringifyParams(pp)+'" and "'+stringifyParams(params)+'".')}),parsedParams.push(params);const functionIndex=originalFunctions.length;originalFunctions.push(rawSignaturesMap[signature]);const conversionParams=params.map(expandParam);let sp;for(sp of splitParams(conversionParams)){const spName=stringifyParams(sp);preliminarySignatures.push({params:sp,name:spName,fn:functionIndex}),sp.every(p2=>!p2.hasConversion)&&(signaturesMap[spName]=functionIndex)}}preliminarySignatures.sort(compareSignatures);const resolvedFunctions=resolveReferences(originalFunctions,signaturesMap,theTypedFn);let s2;for(s2 in signaturesMap)Object.prototype.hasOwnProperty.call(signaturesMap,s2)&&(signaturesMap[s2]=resolvedFunctions[signaturesMap[s2]]);const signatures=[],internalSignatureMap=new Map;for(s2 of preliminarySignatures)internalSignatureMap.has(s2.name)||(s2.fn=resolvedFunctions[s2.fn],signatures.push(s2),internalSignatureMap.set(s2.name,s2));const ok0=signatures[0]&&signatures[0].params.length<=2&&!hasRestParam(signatures[0].params),ok1=signatures[1]&&signatures[1].params.length<=2&&!hasRestParam(signatures[1].params),ok2=signatures[2]&&signatures[2].params.length<=2&&!hasRestParam(signatures[2].params),ok3=signatures[3]&&signatures[3].params.length<=2&&!hasRestParam(signatures[3].params),ok4=signatures[4]&&signatures[4].params.length<=2&&!hasRestParam(signatures[4].params),ok5=signatures[5]&&signatures[5].params.length<=2&&!hasRestParam(signatures[5].params),allOk=ok0&&ok1&&ok2&&ok3&&ok4&&ok5;for(let i2=0;i2<signatures.length;++i2)signatures[i2].test=compileTests(signatures[i2].params);const test00=ok0?compileTest(signatures[0].params[0]):notOk,test10=ok1?compileTest(signatures[1].params[0]):notOk,test20=ok2?compileTest(signatures[2].params[0]):notOk,test30=ok3?compileTest(signatures[3].params[0]):notOk,test40=ok4?compileTest(signatures[4].params[0]):notOk,test50=ok5?compileTest(signatures[5].params[0]):notOk,test01=ok0?compileTest(signatures[0].params[1]):notOk,test11=ok1?compileTest(signatures[1].params[1]):notOk,test21=ok2?compileTest(signatures[2].params[1]):notOk,test31=ok3?compileTest(signatures[3].params[1]):notOk,test41=ok4?compileTest(signatures[4].params[1]):notOk,test51=ok5?compileTest(signatures[5].params[1]):notOk;for(let i2=0;i2<signatures.length;++i2)signatures[i2].implementation=compileArgsPreprocessing(signatures[i2].params,signatures[i2].fn);const fn0=ok0?signatures[0].implementation:undef,fn1=ok1?signatures[1].implementation:undef,fn2=ok2?signatures[2].implementation:undef,fn3=ok3?signatures[3].implementation:undef,fn4=ok4?signatures[4].implementation:undef,fn5=ok5?signatures[5].implementation:undef,len0=ok0?signatures[0].params.length:-1,len1=ok1?signatures[1].params.length:-1,len2=ok2?signatures[2].params.length:-1,len3=ok3?signatures[3].params.length:-1,len4=ok4?signatures[4].params.length:-1,len5=ok5?signatures[5].params.length:-1,iStart=allOk?6:0,iEnd=signatures.length,tests=signatures.map(s3=>s3.test),fns=signatures.map(s3=>s3.implementation),generic=__name(function(){for(let i2=iStart;i2<iEnd;i2++)if(tests[i2](arguments))return fns[i2].apply(this,arguments);return typed2.onMismatch(name2,arguments,signatures)},"generic");function theTypedFn(arg0,arg1){return arguments.length===len0&&test00(arg0)&&test01(arg1)?fn0.apply(this,arguments):arguments.length===len1&&test10(arg0)&&test11(arg1)?fn1.apply(this,arguments):arguments.length===len2&&test20(arg0)&&test21(arg1)?fn2.apply(this,arguments):arguments.length===len3&&test30(arg0)&&test31(arg1)?fn3.apply(this,arguments):arguments.length===len4&&test40(arg0)&&test41(arg1)?fn4.apply(this,arguments):arguments.length===len5&&test50(arg0)&&test51(arg1)?fn5.apply(this,arguments):generic.apply(this,arguments)}__name(theTypedFn,"theTypedFn");try{Object.defineProperty(theTypedFn,"name",{value:name2})}catch{}return theTypedFn.signatures=signaturesMap,theTypedFn._typedFunctionData={signatures,signatureMap:internalSignatureMap},theTypedFn}__name(createTypedFunction,"createTypedFunction");function _onMismatch(name2,args,signatures){throw createError(name2,args,signatures)}__name(_onMismatch,"_onMismatch");function initial(arr){return slice(arr,0,arr.length-1)}__name(initial,"initial");function last2(arr){return arr[arr.length-1]}__name(last2,"last");function slice(arr,start,end){return Array.prototype.slice.call(arr,start,end)}__name(slice,"slice");function findInArray(arr,test){for(let i2=0;i2<arr.length;i2++)if(test(arr[i2]))return arr[i2]}__name(findInArray,"findInArray");function flatMap(arr,callback){return Array.prototype.concat.apply([],arr.map(callback))}__name(flatMap,"flatMap");function referTo(){const references=initial(arguments).map(s2=>stringifyParams(parseSignature(s2))),callback=last2(arguments);if(typeof callback!="function")throw new TypeError("Callback function expected as last argument");return makeReferTo(references,callback)}__name(referTo,"referTo");function makeReferTo(references,callback){return{referTo:{references,callback}}}__name(makeReferTo,"makeReferTo");function referToSelf(callback){if(typeof callback!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback}}}__name(referToSelf,"referToSelf");function isReferTo(objectOrFn){return objectOrFn&&typeof objectOrFn.referTo=="object"&&Array.isArray(objectOrFn.referTo.references)&&typeof objectOrFn.referTo.callback=="function"}__name(isReferTo,"isReferTo");function isReferToSelf(objectOrFn){return objectOrFn&&typeof objectOrFn.referToSelf=="object"&&typeof objectOrFn.referToSelf.callback=="function"}__name(isReferToSelf,"isReferToSelf");function checkName(nameSoFar,newName){if(!nameSoFar)return newName;if(newName&&newName!==nameSoFar){const err=new Error("Function names do not match (expected: "+nameSoFar+", actual: "+newName+")");throw err.data={actual:newName,expected:nameSoFar},err}return nameSoFar}__name(checkName,"checkName");function getObjectName(obj){let name2;for(const key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(isTypedFunction(obj[key])||typeof obj[key].signature=="string")&&(name2=checkName(name2,obj[key].name));return name2}__name(getObjectName,"getObjectName");function mergeSignatures(dest,source){let key;for(key in source)if(Object.prototype.hasOwnProperty.call(source,key)){if(key in dest&&source[key]!==dest[key]){const err=new Error('Signature "'+key+'" is defined twice');throw err.data={signature:key,sourceFunction:source[key],destFunction:dest[key]},err}dest[key]=source[key]}}__name(mergeSignatures,"mergeSignatures");const saveTyped=typed2;typed2=__name(function(maybeName){const named=typeof maybeName=="string",start=named?1:0;let name2=named?maybeName:"";const allSignatures={};for(let i2=start;i2<arguments.length;++i2){const item=arguments[i2];let theseSignatures={},thisName;if(typeof item=="function"?(thisName=item.name,typeof item.signature=="string"?theseSignatures[item.signature]=item:isTypedFunction(item)&&(theseSignatures=item.signatures)):isPlainObject2(item)&&(theseSignatures=item,named||(thisName=getObjectName(item))),Object.keys(theseSignatures).length===0){const err=new TypeError("Argument to 'typed' at index "+i2+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw err.data={index:i2,argument:item},err}named||(name2=checkName(name2,thisName)),mergeSignatures(allSignatures,theseSignatures)}return createTypedFunction(name2||"",allSignatures)},"typed"),typed2.create=create,typed2.createCount=saveTyped.createCount,typed2.onMismatch=_onMismatch,typed2.throwMismatchError=_onMismatch,typed2.createError=createError,typed2.clear=clear,typed2.clearConversions=clearConversions,typed2.addTypes=addTypes,typed2._findType=findType,typed2.referTo=referTo,typed2.referToSelf=referToSelf,typed2.convert=convert,typed2.findSignature=findSignature,typed2.find=find,typed2.isTypedFunction=isTypedFunction,typed2.warnAgainstDeprecatedThis=!0,typed2.addType=function(type,beforeObjectTest){let before="any";beforeObjectTest!==!1&&typeMap.has("Object")&&(before="Object"),typed2.addTypes([type],before)};function _validateConversion(conversion){if(!conversion||typeof conversion.from!="string"||typeof conversion.to!="string"||typeof conversion.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(conversion.to===conversion.from)throw new SyntaxError('Illegal to define conversion from "'+conversion.from+'" to itself.')}return __name(_validateConversion,"_validateConversion"),typed2.addConversion=function(conversion){let options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};_validateConversion(conversion);const to=findType(conversion.to),existing=to.conversionsTo.find(other=>other.from===conversion.from);if(existing)if(options&&options.override)typed2.removeConversion({from:existing.from,to:conversion.to,convert:existing.convert});else throw new Error('There is already a conversion from "'+conversion.from+'" to "'+to.name+'"');to.conversionsTo.push({from:conversion.from,convert:conversion.convert,index:nConversions++})},typed2.addConversions=function(conversions,options){conversions.forEach(conversion=>typed2.addConversion(conversion,options))},typed2.removeConversion=function(conversion){_validateConversion(conversion);const to=findType(conversion.to),existingConversion=findInArray(to.conversionsTo,c=>c.from===conversion.from);if(!existingConversion)throw new Error("Attempt to remove nonexistent conversion from "+conversion.from+" to "+conversion.to);if(existingConversion.convert!==conversion.convert)throw new Error("Conversion to remove does not match existing conversion");const index=to.conversionsTo.indexOf(existingConversion);to.conversionsTo.splice(index,1)},typed2.resolve=function(tf,argList){if(!isTypedFunction(tf))throw new TypeError(NOT_TYPED_FUNCTION);const sigs=tf._typedFunctionData.signatures;for(let i2=0;i2<sigs.length;++i2)if(sigs[i2].test(argList))return sigs[i2];return null},typed2}__name(create,"create");const typedFunction=create();function factory(name2,dependencies2,create2,meta){function assertAndCreate(scope){var deps=pickShallow(scope,dependencies2.map(stripOptionalNotation));return assertDependencies(name2,dependencies2,scope),create2(deps)}return __name(assertAndCreate,"assertAndCreate"),assertAndCreate.isFactory=!0,assertAndCreate.fn=name2,assertAndCreate.dependencies=dependencies2.slice().sort(),meta&&(assertAndCreate.meta=meta),assertAndCreate}__name(factory,"factory");function assertDependencies(name2,dependencies2,scope){var allDefined=dependencies2.filter(dependency=>!isOptionalDependency(dependency)).every(dependency=>scope[dependency]!==void 0);if(!allDefined){var missingDependencies=dependencies2.filter(dependency=>scope[dependency]===void 0);throw new Error('Cannot create function "'.concat(name2,'", ')+"some dependencies are missing: ".concat(missingDependencies.map(d2=>'"'.concat(d2,'"')).join(", "),"."))}}__name(assertDependencies,"assertDependencies");function isOptionalDependency(dependency){return dependency&&dependency[0]==="?"}__name(isOptionalDependency,"isOptionalDependency");function stripOptionalNotation(dependency){return dependency&&dependency[0]==="?"?dependency.slice(1):dependency}__name(stripOptionalNotation,"stripOptionalNotation");function isInteger(value){return typeof value=="boolean"?!0:isFinite(value)?value===Math.round(value):!1}__name(isInteger,"isInteger");function formatNumberToBase(n3,base,size2){var prefixes={2:"0b",8:"0o",16:"0x"},prefix=prefixes[base],suffix="";if(size2){if(size2<1)throw new Error("size must be in greater than 0");if(!isInteger(size2))throw new Error("size must be an integer");if(n3>2**(size2-1)-1||n3<-(2**(size2-1)))throw new Error("Value must be in range [-2^".concat(size2-1,", 2^").concat(size2-1,"-1]"));if(!isInteger(n3))throw new Error("Value must be an integer");n3<0&&(n3=n3+2**size2),suffix="i".concat(size2)}var sign2="";return n3<0&&(n3=-n3,sign2="-"),"".concat(sign2).concat(prefix).concat(n3.toString(base)).concat(suffix)}__name(formatNumberToBase,"formatNumberToBase");function format$2(value,options){if(typeof options=="function")return options(value);if(value===1/0)return"Infinity";if(value===-1/0)return"-Infinity";if(isNaN(value))return"NaN";var{notation,precision,wordSize}=normalizeFormatOptions(options);switch(notation){case"fixed":return toFixed$1(value,precision);case"exponential":return toExponential$1(value,precision);case"engineering":return toEngineering$1(value,precision);case"bin":return formatNumberToBase(value,2,wordSize);case"oct":return formatNumberToBase(value,8,wordSize);case"hex":return formatNumberToBase(value,16,wordSize);case"auto":return toPrecision(value,precision,options).replace(/((\.\d*?)(0+))($|e)/,function(){var digits2=arguments[2],e2=arguments[4];return digits2!=="."?digits2+e2:e2});default:throw new Error('Unknown notation "'+notation+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}__name(format$2,"format$2");function normalizeFormatOptions(options){var notation="auto",precision,wordSize;if(options!==void 0)if(isNumber(options))precision=options;else if(isBigNumber(options))precision=options.toNumber();else if(isObject(options))options.precision!==void 0&&(precision=_toNumberOrThrow(options.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),options.wordSize!==void 0&&(wordSize=_toNumberOrThrow(options.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),options.notation&&(notation=options.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation,precision,wordSize}}__name(normalizeFormatOptions,"normalizeFormatOptions");function splitNumber(value){var match=String(value).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!match)throw new SyntaxError("Invalid number "+value);var sign2=match[1],digits2=match[2],exponent=parseFloat(match[4]||"0"),dot2=digits2.indexOf(".");exponent+=dot2!==-1?dot2-1:digits2.length-1;var coefficients=digits2.replace(".","").replace(/^0*/,function(zeros2){return exponent-=zeros2.length,""}).replace(/0*$/,"").split("").map(function(d2){return parseInt(d2)});return coefficients.length===0&&(coefficients.push(0),exponent++),{sign:sign2,coefficients,exponent}}__name(splitNumber,"splitNumber");function toEngineering$1(value,precision){if(isNaN(value)||!isFinite(value))return String(value);var split=splitNumber(value),rounded=roundDigits(split,precision),e2=rounded.exponent,c=rounded.coefficients,newExp=e2%3===0?e2:e2<0?e2-3-e2%3:e2-e2%3;if(isNumber(precision))for(;precision>c.length||e2-newExp+1>c.length;)c.push(0);else for(var missingZeros=Math.abs(e2-newExp)-(c.length-1),i2=0;i2<missingZeros;i2++)c.push(0);for(var expDiff=Math.abs(e2-newExp),decimalIdx=1;expDiff>0;)decimalIdx++,expDiff--;var decimals=c.slice(decimalIdx).join(""),decimalVal=isNumber(precision)&&decimals.length||decimals.match(/[1-9]/)?"."+decimals:"",str=c.slice(0,decimalIdx).join("")+decimalVal+"e"+(e2>=0?"+":"")+newExp.toString();return rounded.sign+str}__name(toEngineering$1,"toEngineering$1");function toFixed$1(value,precision){if(isNaN(value)||!isFinite(value))return String(value);var splitValue=splitNumber(value),rounded=typeof precision=="number"?roundDigits(splitValue,splitValue.exponent+1+precision):splitValue,c=rounded.coefficients,p2=rounded.exponent+1,pp=p2+(precision||0);return c.length<pp&&(c=c.concat(zeros(pp-c.length))),p2<0&&(c=zeros(-p2+1).concat(c),p2=1),p2<c.length&&c.splice(p2,0,p2===0?"0.":"."),rounded.sign+c.join("")}__name(toFixed$1,"toFixed$1");function toExponential$1(value,precision){if(isNaN(value)||!isFinite(value))return String(value);var split=splitNumber(value),rounded=precision?roundDigits(split,precision):split,c=rounded.coefficients,e2=rounded.exponent;c.length<precision&&(c=c.concat(zeros(precision-c.length)));var first=c.shift();return rounded.sign+first+(c.length>0?"."+c.join(""):"")+"e"+(e2>=0?"+":"")+e2}__name(toExponential$1,"toExponential$1");function toPrecision(value,precision,options){if(isNaN(value)||!isFinite(value))return String(value);var lowerExp=_toNumberOrDefault$1(options==null?void 0:options.lowerExp,-3),upperExp=_toNumberOrDefault$1(options==null?void 0:options.upperExp,5),split=splitNumber(value),rounded=precision?roundDigits(split,precision):split;if(rounded.exponent<lowerExp||rounded.exponent>=upperExp)return toExponential$1(value,precision);var c=rounded.coefficients,e2=rounded.exponent;c.length<precision&&(c=c.concat(zeros(precision-c.length))),c=c.concat(zeros(e2-c.length+1+(c.length<precision?precision-c.length:0))),c=zeros(-e2).concat(c);var dot2=e2>0?e2:0;return dot2<c.length-1&&c.splice(dot2+1,0,"."),rounded.sign+c.join("")}__name(toPrecision,"toPrecision");function roundDigits(split,precision){for(var rounded={sign:split.sign,coefficients:split.coefficients,exponent:split.exponent},c=rounded.coefficients;precision<=0;)c.unshift(0),rounded.exponent++,precision++;if(c.length>precision){var removed=c.splice(precision,c.length-precision);if(removed[0]>=5){var i2=precision-1;for(c[i2]++;c[i2]===10;)c.pop(),i2===0&&(c.unshift(0),rounded.exponent++,i2++),i2--,c[i2]++}}return rounded}__name(roundDigits,"roundDigits");function zeros(length){for(var arr=[],i2=0;i2<length;i2++)arr.push(0);return arr}__name(zeros,"zeros");function digits(value){return value.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}__name(digits,"digits");function nearlyEqual$1(a2,b2){var relTol=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,absTol=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(relTol<=0)throw new Error("Relative tolerance must be greater than 0");if(absTol<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(a2)||isNaN(b2)?!1:!isFinite(a2)||!isFinite(b2)?a2===b2:a2===b2?!0:Math.abs(a2-b2)<=Math.max(relTol*Math.max(Math.abs(a2),Math.abs(b2)),absTol)}__name(nearlyEqual$1,"nearlyEqual$1");function _toNumberOrThrow(value,onError){if(isNumber(value))return value;if(isBigNumber(value))return value.toNumber();onError()}__name(_toNumberOrThrow,"_toNumberOrThrow");function _toNumberOrDefault$1(value,defaultValue){return isNumber(value)?value:isBigNumber(value)?value.toNumber():defaultValue}__name(_toNumberOrDefault$1,"_toNumberOrDefault$1");var _createTyped2=__name(function(){return _createTyped2=typedFunction.create,typedFunction},"_createTyped"),dependencies$t=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],createTyped=factory("typed",dependencies$t,__name(function(_ref){var{BigNumber:BigNumber2,Complex:Complex2,DenseMatrix:DenseMatrix2,Fraction:Fraction2}=_ref,typed2=_createTyped2();return typed2.clear(),typed2.addTypes([{name:"number",test:isNumber},{name:"Complex",test:isComplex},{name:"BigNumber",test:isBigNumber},{name:"bigint",test:isBigInt},{name:"Fraction",test:isFraction},{name:"Unit",test:isUnit},{name:"identifier",test:__name(s2=>isString&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s2),"test")},{name:"string",test:isString},{name:"Chain",test:isChain},{name:"Array",test:isArray},{name:"Matrix",test:isMatrix},{name:"DenseMatrix",test:isDenseMatrix},{name:"SparseMatrix",test:isSparseMatrix},{name:"Range",test:isRange},{name:"Index",test:isIndex},{name:"boolean",test:isBoolean},{name:"ResultSet",test:isResultSet},{name:"Help",test:isHelp},{name:"function",test:isFunction$1},{name:"Date",test:isDate},{name:"RegExp",test:isRegExp},{name:"null",test:isNull},{name:"undefined",test:isUndefined},{name:"AccessorNode",test:isAccessorNode},{name:"ArrayNode",test:isArrayNode},{name:"AssignmentNode",test:isAssignmentNode},{name:"BlockNode",test:isBlockNode},{name:"ConditionalNode",test:isConditionalNode},{name:"ConstantNode",test:isConstantNode},{name:"FunctionNode",test:isFunctionNode},{name:"FunctionAssignmentNode",test:isFunctionAssignmentNode},{name:"IndexNode",test:isIndexNode},{name:"Node",test:isNode},{name:"ObjectNode",test:isObjectNode},{name:"OperatorNode",test:isOperatorNode},{name:"ParenthesisNode",test:isParenthesisNode},{name:"RangeNode",test:isRangeNode},{name:"RelationalNode",test:isRelationalNode},{name:"SymbolNode",test:isSymbolNode},{name:"Map",test:isMap},{name:"Object",test:isObject}]),typed2.addConversions([{from:"number",to:"BigNumber",convert:__name(function(x2){if(BigNumber2||throwNoBignumber(x2),digits(x2)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+x2+"). Use function bignumber(x) to convert to BigNumber.");return new BigNumber2(x2)},"convert")},{from:"number",to:"Complex",convert:__name(function(x2){return Complex2||throwNoComplex(x2),new Complex2(x2,0)},"convert")},{from:"BigNumber",to:"Complex",convert:__name(function(x2){return Complex2||throwNoComplex(x2),new Complex2(x2.toNumber(),0)},"convert")},{from:"bigint",to:"number",convert:__name(function(x2){if(x2>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+x2+")");return Number(x2)},"convert")},{from:"bigint",to:"BigNumber",convert:__name(function(x2){return BigNumber2||throwNoBignumber(x2),new BigNumber2(x2.toString())},"convert")},{from:"bigint",to:"Fraction",convert:__name(function(x2){return Fraction2||throwNoFraction(x2),new Fraction2(x2)},"convert")},{from:"Fraction",to:"BigNumber",convert:__name(function(x2){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")},"convert")},{from:"Fraction",to:"Complex",convert:__name(function(x2){return Complex2||throwNoComplex(x2),new Complex2(x2.valueOf(),0)},"convert")},{from:"number",to:"Fraction",convert:__name(function(x2){Fraction2||throwNoFraction(x2);var f2=new Fraction2(x2);if(f2.valueOf()!==x2)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+x2+"). Use function fraction(x) to convert to Fraction.");return f2},"convert")},{from:"string",to:"number",convert:__name(function(x2){var n3=Number(x2);if(isNaN(n3))throw new Error('Cannot convert "'+x2+'" to a number');return n3},"convert")},{from:"string",to:"BigNumber",convert:__name(function(x2){BigNumber2||throwNoBignumber(x2);try{return new BigNumber2(x2)}catch{throw new Error('Cannot convert "'+x2+'" to BigNumber')}},"convert")},{from:"string",to:"bigint",convert:__name(function(x2){try{return BigInt(x2)}catch{throw new Error('Cannot convert "'+x2+'" to BigInt')}},"convert")},{from:"string",to:"Fraction",convert:__name(function(x2){Fraction2||throwNoFraction(x2);try{return new Fraction2(x2)}catch{throw new Error('Cannot convert "'+x2+'" to Fraction')}},"convert")},{from:"string",to:"Complex",convert:__name(function(x2){Complex2||throwNoComplex(x2);try{return new Complex2(x2)}catch{throw new Error('Cannot convert "'+x2+'" to Complex')}},"convert")},{from:"boolean",to:"number",convert:__name(function(x2){return+x2},"convert")},{from:"boolean",to:"BigNumber",convert:__name(function(x2){return BigNumber2||throwNoBignumber(x2),new BigNumber2(+x2)},"convert")},{from:"boolean",to:"bigint",convert:__name(function(x2){return BigInt(+x2)},"convert")},{from:"boolean",to:"Fraction",convert:__name(function(x2){return Fraction2||throwNoFraction(x2),new Fraction2(+x2)},"convert")},{from:"boolean",to:"string",convert:__name(function(x2){return String(x2)},"convert")},{from:"Array",to:"Matrix",convert:__name(function(array){return DenseMatrix2||throwNoMatrix(),new DenseMatrix2(array)},"convert")},{from:"Matrix",to:"Array",convert:__name(function(matrix2){return matrix2.valueOf()},"convert")}]),typed2.onMismatch=(name2,args,signatures)=>{var usualError=typed2.createError(name2,args,signatures);if(["wrongType","mismatch"].includes(usualError.data.category)&&args.length===1&&isCollection(args[0])&&signatures.some(sig=>!sig.params.includes(","))){var err=new TypeError("Function '".concat(name2,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(name2,")'."));throw err.data=usualError.data,err}throw usualError},typed2.onMismatch=(name2,args,signatures)=>{var usualError=typed2.createError(name2,args,signatures);if(["wrongType","mismatch"].includes(usualError.data.category)&&args.length===1&&isCollection(args[0])&&signatures.some(sig=>!sig.params.includes(","))){var err=new TypeError("Function '".concat(name2,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(name2,")'."));throw err.data=usualError.data,err}throw usualError},typed2},"createTyped"));function throwNoBignumber(x2){throw new Error("Cannot convert value ".concat(x2," into a BigNumber: no class 'BigNumber' provided"))}__name(throwNoBignumber,"throwNoBignumber");function throwNoComplex(x2){throw new Error("Cannot convert value ".concat(x2," into a Complex number: no class 'Complex' provided"))}__name(throwNoComplex,"throwNoComplex");function throwNoMatrix(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}__name(throwNoMatrix,"throwNoMatrix");function throwNoFraction(x2){throw new Error("Cannot convert value ".concat(x2," into a Fraction, no class 'Fraction' provided."))}__name(throwNoFraction,"throwNoFraction");/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external$1=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P$2={toStringTag:tag};P$2.absoluteValue=P$2.abs=function(){var x2=new this.constructor(this);return x2.s<0&&(x2.s=1),finalise(x2)};P$2.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P$2.clampedTo=P$2.clamp=function(min2,max2){var k2,x2=this,Ctor=x2.constructor;if(min2=new Ctor(min2),max2=new Ctor(max2),!min2.s||!max2.s)return new Ctor(NaN);if(min2.gt(max2))throw Error(invalidArgument+max2);return k2=x2.cmp(min2),k2<0?min2:x2.cmp(max2)>0?max2:new Ctor(x2)};P$2.comparedTo=P$2.cmp=function(y2){var i2,j2,xdL,ydL,x2=this,xd=x2.d,yd=(y2=new x2.constructor(y2)).d,xs=x2.s,ys=y2.s;if(!xd||!yd)return!xs||!ys?NaN:xs!==ys?xs:xd===yd?0:!xd^xs<0?1:-1;if(!xd[0]||!yd[0])return xd[0]?xs:yd[0]?-ys:0;if(xs!==ys)return xs;if(x2.e!==y2.e)return x2.e>y2.e^xs<0?1:-1;for(xdL=xd.length,ydL=yd.length,i2=0,j2=xdL<ydL?xdL:ydL;i2<j2;++i2)if(xd[i2]!==yd[i2])return xd[i2]>yd[i2]^xs<0?1:-1;return xdL===ydL?0:xdL>ydL^xs<0?1:-1};P$2.cosine=P$2.cos=function(){var pr,rm,x2=this,Ctor=x2.constructor;return x2.d?x2.d[0]?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x2.e,x2.sd())+LOG_BASE,Ctor.rounding=1,x2=cosine(Ctor,toLessThanHalfPi(Ctor,x2)),Ctor.precision=pr,Ctor.rounding=rm,finalise(quadrant==2||quadrant==3?x2.neg():x2,pr,rm,!0)):new Ctor(1):new Ctor(NaN)};P$2.cubeRoot=P$2.cbrt=function(){var e2,m2,n3,r2,rep,s2,sd,t2,t3,t3plusx,x2=this,Ctor=x2.constructor;if(!x2.isFinite()||x2.isZero())return new Ctor(x2);for(external$1=!1,s2=x2.s*mathpow(x2.s*x2,1/3),!s2||Math.abs(s2)==1/0?(n3=digitsToString(x2.d),e2=x2.e,(s2=(e2-n3.length+1)%3)&&(n3+=s2==1||s2==-2?"0":"00"),s2=mathpow(n3,1/3),e2=mathfloor((e2+1)/3)-(e2%3==(e2<0?-1:2)),s2==1/0?n3="5e"+e2:(n3=s2.toExponential(),n3=n3.slice(0,n3.indexOf("e")+1)+e2),r2=new Ctor(n3),r2.s=x2.s):r2=new Ctor(s2.toString()),sd=(e2=Ctor.precision)+3;;)if(t2=r2,t3=t2.times(t2).times(t2),t3plusx=t3.plus(x2),r2=divide(t3plusx.plus(x2).times(t2),t3plusx.plus(t3),sd+2,1),digitsToString(t2.d).slice(0,sd)===(n3=digitsToString(r2.d)).slice(0,sd))if(n3=n3.slice(sd-3,sd+1),n3=="9999"||!rep&&n3=="4999"){if(!rep&&(finalise(t2,e2+1,0),t2.times(t2).times(t2).eq(x2))){r2=t2;break}sd+=4,rep=1}else{(!+n3||!+n3.slice(1)&&n3.charAt(0)=="5")&&(finalise(r2,e2+1,1),m2=!r2.times(r2).times(r2).eq(x2));break}return external$1=!0,finalise(r2,e2,Ctor.rounding,m2)};P$2.decimalPlaces=P$2.dp=function(){var w2,d2=this.d,n3=NaN;if(d2){if(w2=d2.length-1,n3=(w2-mathfloor(this.e/LOG_BASE))*LOG_BASE,w2=d2[w2],w2)for(;w2%10==0;w2/=10)n3--;n3<0&&(n3=0)}return n3};P$2.dividedBy=P$2.div=function(y2){return divide(this,new this.constructor(y2))};P$2.dividedToIntegerBy=P$2.divToInt=function(y2){var x2=this,Ctor=x2.constructor;return finalise(divide(x2,new Ctor(y2),0,1,1),Ctor.precision,Ctor.rounding)};P$2.equals=P$2.eq=function(y2){return this.cmp(y2)===0};P$2.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P$2.greaterThan=P$2.gt=function(y2){return this.cmp(y2)>0};P$2.greaterThanOrEqualTo=P$2.gte=function(y2){var k2=this.cmp(y2);return k2==1||k2===0};P$2.hyperbolicCosine=P$2.cosh=function(){var k2,n3,pr,rm,len,x2=this,Ctor=x2.constructor,one=new Ctor(1);if(!x2.isFinite())return new Ctor(x2.s?1/0:NaN);if(x2.isZero())return one;pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x2.e,x2.sd())+4,Ctor.rounding=1,len=x2.d.length,len<32?(k2=Math.ceil(len/3),n3=(1/tinyPow(4,k2)).toString()):(k2=16,n3="2.3283064365386962890625e-10"),x2=taylorSeries(Ctor,1,x2.times(n3),new Ctor(1),!0);for(var cosh2_x,i2=k2,d8=new Ctor(8);i2--;)cosh2_x=x2.times(x2),x2=one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));return finalise(x2,Ctor.precision=pr,Ctor.rounding=rm,!0)};P$2.hyperbolicSine=P$2.sinh=function(){var k2,pr,rm,len,x2=this,Ctor=x2.constructor;if(!x2.isFinite()||x2.isZero())return new Ctor(x2);if(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x2.e,x2.sd())+4,Ctor.rounding=1,len=x2.d.length,len<3)x2=taylorSeries(Ctor,2,x2,x2,!0);else{k2=1.4*Math.sqrt(len),k2=k2>16?16:k2|0,x2=x2.times(1/tinyPow(5,k2)),x2=taylorSeries(Ctor,2,x2,x2,!0);for(var sinh2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k2--;)sinh2_x=x2.times(x2),x2=x2.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))))}return Ctor.precision=pr,Ctor.rounding=rm,finalise(x2,pr,rm,!0)};P$2.hyperbolicTangent=P$2.tanh=function(){var pr,rm,x2=this,Ctor=x2.constructor;return x2.isFinite()?x2.isZero()?new Ctor(x2):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+7,Ctor.rounding=1,divide(x2.sinh(),x2.cosh(),Ctor.precision=pr,Ctor.rounding=rm)):new Ctor(x2.s)};P$2.inverseCosine=P$2.acos=function(){var x2=this,Ctor=x2.constructor,k2=x2.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding;return k2!==-1?k2===0?x2.isNeg()?getPi(Ctor,pr,rm):new Ctor(0):new Ctor(NaN):x2.isZero()?getPi(Ctor,pr+4,rm).times(.5):(Ctor.precision=pr+6,Ctor.rounding=1,x2=new Ctor(1).minus(x2).div(x2.plus(1)).sqrt().atan(),Ctor.precision=pr,Ctor.rounding=rm,x2.times(2))};P$2.inverseHyperbolicCosine=P$2.acosh=function(){var pr,rm,x2=this,Ctor=x2.constructor;return x2.lte(1)?new Ctor(x2.eq(1)?0:NaN):x2.isFinite()?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(Math.abs(x2.e),x2.sd())+4,Ctor.rounding=1,external$1=!1,x2=x2.times(x2).minus(1).sqrt().plus(x2),external$1=!0,Ctor.precision=pr,Ctor.rounding=rm,x2.ln()):new Ctor(x2)};P$2.inverseHyperbolicSine=P$2.asinh=function(){var pr,rm,x2=this,Ctor=x2.constructor;return!x2.isFinite()||x2.isZero()?new Ctor(x2):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+2*Math.max(Math.abs(x2.e),x2.sd())+6,Ctor.rounding=1,external$1=!1,x2=x2.times(x2).plus(1).sqrt().plus(x2),external$1=!0,Ctor.precision=pr,Ctor.rounding=rm,x2.ln())};P$2.inverseHyperbolicTangent=P$2.atanh=function(){var pr,rm,wpr,xsd,x2=this,Ctor=x2.constructor;return x2.isFinite()?x2.e>=0?new Ctor(x2.abs().eq(1)?x2.s/0:x2.isZero()?x2:NaN):(pr=Ctor.precision,rm=Ctor.rounding,xsd=x2.sd(),Math.max(xsd,pr)<2*-x2.e-1?finalise(new Ctor(x2),pr,rm,!0):(Ctor.precision=wpr=xsd-x2.e,x2=divide(x2.plus(1),new Ctor(1).minus(x2),wpr+pr,1),Ctor.precision=pr+4,Ctor.rounding=1,x2=x2.ln(),Ctor.precision=pr,Ctor.rounding=rm,x2.times(.5))):new Ctor(NaN)};P$2.inverseSine=P$2.asin=function(){var halfPi,k2,pr,rm,x2=this,Ctor=x2.constructor;return x2.isZero()?new Ctor(x2):(k2=x2.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding,k2!==-1?k2===0?(halfPi=getPi(Ctor,pr+4,rm).times(.5),halfPi.s=x2.s,halfPi):new Ctor(NaN):(Ctor.precision=pr+6,Ctor.rounding=1,x2=x2.div(new Ctor(1).minus(x2.times(x2)).sqrt().plus(1)).atan(),Ctor.precision=pr,Ctor.rounding=rm,x2.times(2)))};P$2.inverseTangent=P$2.atan=function(){var i2,j2,k2,n3,px,t2,r2,wpr,x2,x3=this,Ctor=x3.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(x3.isFinite()){if(x3.isZero())return new Ctor(x3);if(x3.abs().eq(1)&&pr+4<=PI_PRECISION)return r2=getPi(Ctor,pr+4,rm).times(.25),r2.s=x3.s,r2}else{if(!x3.s)return new Ctor(NaN);if(pr+4<=PI_PRECISION)return r2=getPi(Ctor,pr+4,rm).times(.5),r2.s=x3.s,r2}for(Ctor.precision=wpr=pr+10,Ctor.rounding=1,k2=Math.min(28,wpr/LOG_BASE+2|0),i2=k2;i2;--i2)x3=x3.div(x3.times(x3).plus(1).sqrt().plus(1));for(external$1=!1,j2=Math.ceil(wpr/LOG_BASE),n3=1,x2=x3.times(x3),r2=new Ctor(x3),px=x3;i2!==-1;)if(px=px.times(x2),t2=r2.minus(px.div(n3+=2)),px=px.times(x2),r2=t2.plus(px.div(n3+=2)),r2.d[j2]!==void 0)for(i2=j2;r2.d[i2]===t2.d[i2]&&i2--;);return k2&&(r2=r2.times(2<<k2-1)),external$1=!0,finalise(r2,Ctor.precision=pr,Ctor.rounding=rm,!0)};P$2.isFinite=function(){return!!this.d};P$2.isInteger=P$2.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P$2.isNaN=function(){return!this.s};P$2.isNegative=P$2.isNeg=function(){return this.s<0};P$2.isPositive=P$2.isPos=function(){return this.s>0};P$2.isZero=function(){return!!this.d&&this.d[0]===0};P$2.lessThan=P$2.lt=function(y2){return this.cmp(y2)<0};P$2.lessThanOrEqualTo=P$2.lte=function(y2){return this.cmp(y2)<1};P$2.logarithm=P$2.log=function(base){var isBase10,d2,denominator,k2,inf,num,sd,r2,arg=this,Ctor=arg.constructor,pr=Ctor.precision,rm=Ctor.rounding,guard=5;if(base==null)base=new Ctor(10),isBase10=!0;else{if(base=new Ctor(base),d2=base.d,base.s<0||!d2||!d2[0]||base.eq(1))return new Ctor(NaN);isBase10=base.eq(10)}if(d2=arg.d,arg.s<0||!d2||!d2[0]||arg.eq(1))return new Ctor(d2&&!d2[0]?-1/0:arg.s!=1?NaN:d2?0:1/0);if(isBase10)if(d2.length>1)inf=!0;else{for(k2=d2[0];k2%10===0;)k2/=10;inf=k2!==1}if(external$1=!1,sd=pr+guard,num=naturalLogarithm(arg,sd),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),r2=divide(num,denominator,sd,1),checkRoundingDigits(r2.d,k2=pr,rm))do if(sd+=10,num=naturalLogarithm(arg,sd),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),r2=divide(num,denominator,sd,1),!inf){+digitsToString(r2.d).slice(k2+1,k2+15)+1==1e14&&(r2=finalise(r2,pr+1,0));break}while(checkRoundingDigits(r2.d,k2+=10,rm));return external$1=!0,finalise(r2,pr,rm)};P$2.minus=P$2.sub=function(y2){var d2,e2,i2,j2,k2,len,pr,rm,xd,xe2,xLTy,yd,x2=this,Ctor=x2.constructor;if(y2=new Ctor(y2),!x2.d||!y2.d)return!x2.s||!y2.s?y2=new Ctor(NaN):x2.d?y2.s=-y2.s:y2=new Ctor(y2.d||x2.s!==y2.s?x2:NaN),y2;if(x2.s!=y2.s)return y2.s=-y2.s,x2.plus(y2);if(xd=x2.d,yd=y2.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0]){if(yd[0])y2.s=-y2.s;else if(xd[0])y2=new Ctor(x2);else return new Ctor(rm===3?-0:0);return external$1?finalise(y2,pr,rm):y2}if(e2=mathfloor(y2.e/LOG_BASE),xe2=mathfloor(x2.e/LOG_BASE),xd=xd.slice(),k2=xe2-e2,k2){for(xLTy=k2<0,xLTy?(d2=xd,k2=-k2,len=yd.length):(d2=yd,e2=xe2,len=xd.length),i2=Math.max(Math.ceil(pr/LOG_BASE),len)+2,k2>i2&&(k2=i2,d2.length=1),d2.reverse(),i2=k2;i2--;)d2.push(0);d2.reverse()}else{for(i2=xd.length,len=yd.length,xLTy=i2<len,xLTy&&(len=i2),i2=0;i2<len;i2++)if(xd[i2]!=yd[i2]){xLTy=xd[i2]<yd[i2];break}k2=0}for(xLTy&&(d2=xd,xd=yd,yd=d2,y2.s=-y2.s),len=xd.length,i2=yd.length-len;i2>0;--i2)xd[len++]=0;for(i2=yd.length;i2>k2;){if(xd[--i2]<yd[i2]){for(j2=i2;j2&&xd[--j2]===0;)xd[j2]=BASE-1;--xd[j2],xd[i2]+=BASE}xd[i2]-=yd[i2]}for(;xd[--len]===0;)xd.pop();for(;xd[0]===0;xd.shift())--e2;return xd[0]?(y2.d=xd,y2.e=getBase10Exponent(xd,e2),external$1?finalise(y2,pr,rm):y2):new Ctor(rm===3?-0:0)};P$2.modulo=P$2.mod=function(y2){var q2,x2=this,Ctor=x2.constructor;return y2=new Ctor(y2),!x2.d||!y2.s||y2.d&&!y2.d[0]?new Ctor(NaN):!y2.d||x2.d&&!x2.d[0]?finalise(new Ctor(x2),Ctor.precision,Ctor.rounding):(external$1=!1,Ctor.modulo==9?(q2=divide(x2,y2.abs(),0,3,1),q2.s*=y2.s):q2=divide(x2,y2,0,Ctor.modulo,1),q2=q2.times(y2),external$1=!0,x2.minus(q2))};P$2.naturalExponential=P$2.exp=function(){return naturalExponential(this)};P$2.naturalLogarithm=P$2.ln=function(){return naturalLogarithm(this)};P$2.negated=P$2.neg=function(){var x2=new this.constructor(this);return x2.s=-x2.s,finalise(x2)};P$2.plus=P$2.add=function(y2){var carry,d2,e2,i2,k2,len,pr,rm,xd,yd,x2=this,Ctor=x2.constructor;if(y2=new Ctor(y2),!x2.d||!y2.d)return!x2.s||!y2.s?y2=new Ctor(NaN):x2.d||(y2=new Ctor(y2.d||x2.s===y2.s?x2:NaN)),y2;if(x2.s!=y2.s)return y2.s=-y2.s,x2.minus(y2);if(xd=x2.d,yd=y2.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0])return yd[0]||(y2=new Ctor(x2)),external$1?finalise(y2,pr,rm):y2;if(k2=mathfloor(x2.e/LOG_BASE),e2=mathfloor(y2.e/LOG_BASE),xd=xd.slice(),i2=k2-e2,i2){for(i2<0?(d2=xd,i2=-i2,len=yd.length):(d2=yd,e2=k2,len=xd.length),k2=Math.ceil(pr/LOG_BASE),len=k2>len?k2+1:len+1,i2>len&&(i2=len,d2.length=1),d2.reverse();i2--;)d2.push(0);d2.reverse()}for(len=xd.length,i2=yd.length,len-i2<0&&(i2=len,d2=yd,yd=xd,xd=d2),carry=0;i2;)carry=(xd[--i2]=xd[i2]+yd[i2]+carry)/BASE|0,xd[i2]%=BASE;for(carry&&(xd.unshift(carry),++e2),len=xd.length;xd[--len]==0;)xd.pop();return y2.d=xd,y2.e=getBase10Exponent(xd,e2),external$1?finalise(y2,pr,rm):y2};P$2.precision=P$2.sd=function(z2){var k2,x2=this;if(z2!==void 0&&z2!==!!z2&&z2!==1&&z2!==0)throw Error(invalidArgument+z2);return x2.d?(k2=getPrecision(x2.d),z2&&x2.e+1>k2&&(k2=x2.e+1)):k2=NaN,k2};P$2.round=function(){var x2=this,Ctor=x2.constructor;return finalise(new Ctor(x2),x2.e+1,Ctor.rounding)};P$2.sine=P$2.sin=function(){var pr,rm,x2=this,Ctor=x2.constructor;return x2.isFinite()?x2.isZero()?new Ctor(x2):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x2.e,x2.sd())+LOG_BASE,Ctor.rounding=1,x2=sine(Ctor,toLessThanHalfPi(Ctor,x2)),Ctor.precision=pr,Ctor.rounding=rm,finalise(quadrant>2?x2.neg():x2,pr,rm,!0)):new Ctor(NaN)};P$2.squareRoot=P$2.sqrt=function(){var m2,n3,sd,r2,rep,t2,x2=this,d2=x2.d,e2=x2.e,s2=x2.s,Ctor=x2.constructor;if(s2!==1||!d2||!d2[0])return new Ctor(!s2||s2<0&&(!d2||d2[0])?NaN:d2?x2:1/0);for(external$1=!1,s2=Math.sqrt(+x2),s2==0||s2==1/0?(n3=digitsToString(d2),(n3.length+e2)%2==0&&(n3+="0"),s2=Math.sqrt(n3),e2=mathfloor((e2+1)/2)-(e2<0||e2%2),s2==1/0?n3="5e"+e2:(n3=s2.toExponential(),n3=n3.slice(0,n3.indexOf("e")+1)+e2),r2=new Ctor(n3)):r2=new Ctor(s2.toString()),sd=(e2=Ctor.precision)+3;;)if(t2=r2,r2=t2.plus(divide(x2,t2,sd+2,1)).times(.5),digitsToString(t2.d).slice(0,sd)===(n3=digitsToString(r2.d)).slice(0,sd))if(n3=n3.slice(sd-3,sd+1),n3=="9999"||!rep&&n3=="4999"){if(!rep&&(finalise(t2,e2+1,0),t2.times(t2).eq(x2))){r2=t2;break}sd+=4,rep=1}else{(!+n3||!+n3.slice(1)&&n3.charAt(0)=="5")&&(finalise(r2,e2+1,1),m2=!r2.times(r2).eq(x2));break}return external$1=!0,finalise(r2,e2,Ctor.rounding,m2)};P$2.tangent=P$2.tan=function(){var pr,rm,x2=this,Ctor=x2.constructor;return x2.isFinite()?x2.isZero()?new Ctor(x2):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+10,Ctor.rounding=1,x2=x2.sin(),x2.s=1,x2=divide(x2,new Ctor(1).minus(x2.times(x2)).sqrt(),pr+10,0),Ctor.precision=pr,Ctor.rounding=rm,finalise(quadrant==2||quadrant==4?x2.neg():x2,pr,rm,!0)):new Ctor(NaN)};P$2.times=P$2.mul=function(y2){var carry,e2,i2,k2,r2,rL,t2,xdL,ydL,x2=this,Ctor=x2.constructor,xd=x2.d,yd=(y2=new Ctor(y2)).d;if(y2.s*=x2.s,!xd||!xd[0]||!yd||!yd[0])return new Ctor(!y2.s||xd&&!xd[0]&&!yd||yd&&!yd[0]&&!xd?NaN:!xd||!yd?y2.s/0:y2.s*0);for(e2=mathfloor(x2.e/LOG_BASE)+mathfloor(y2.e/LOG_BASE),xdL=xd.length,ydL=yd.length,xdL<ydL&&(r2=xd,xd=yd,yd=r2,rL=xdL,xdL=ydL,ydL=rL),r2=[],rL=xdL+ydL,i2=rL;i2--;)r2.push(0);for(i2=ydL;--i2>=0;){for(carry=0,k2=xdL+i2;k2>i2;)t2=r2[k2]+yd[i2]*xd[k2-i2-1]+carry,r2[k2--]=t2%BASE|0,carry=t2/BASE|0;r2[k2]=(r2[k2]+carry)%BASE|0}for(;!r2[--rL];)r2.pop();return carry?++e2:r2.shift(),y2.d=r2,y2.e=getBase10Exponent(r2,e2),external$1?finalise(y2,Ctor.precision,Ctor.rounding):y2};P$2.toBinary=function(sd,rm){return toStringBinary(this,2,sd,rm)};P$2.toDecimalPlaces=P$2.toDP=function(dp,rm){var x2=this,Ctor=x2.constructor;return x2=new Ctor(x2),dp===void 0?x2:(checkInt32(dp,0,MAX_DIGITS),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8),finalise(x2,dp+x2.e+1,rm))};P$2.toExponential=function(dp,rm){var str,x2=this,Ctor=x2.constructor;return dp===void 0?str=finiteToString(x2,!0):(checkInt32(dp,0,MAX_DIGITS),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8),x2=finalise(new Ctor(x2),dp+1,rm),str=finiteToString(x2,!0,dp+1)),x2.isNeg()&&!x2.isZero()?"-"+str:str};P$2.toFixed=function(dp,rm){var str,y2,x2=this,Ctor=x2.constructor;return dp===void 0?str=finiteToString(x2):(checkInt32(dp,0,MAX_DIGITS),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8),y2=finalise(new Ctor(x2),dp+x2.e+1,rm),str=finiteToString(y2,!1,dp+y2.e+1)),x2.isNeg()&&!x2.isZero()?"-"+str:str};P$2.toFraction=function(maxD){var d2,d0,d1,d22,e2,k2,n3,n0,n12,pr,q2,r2,x2=this,xd=x2.d,Ctor=x2.constructor;if(!xd)return new Ctor(x2);if(n12=d0=new Ctor(1),d1=n0=new Ctor(0),d2=new Ctor(d1),e2=d2.e=getPrecision(xd)-x2.e-1,k2=e2%LOG_BASE,d2.d[0]=mathpow(10,k2<0?LOG_BASE+k2:k2),maxD==null)maxD=e2>0?d2:n12;else{if(n3=new Ctor(maxD),!n3.isInt()||n3.lt(n12))throw Error(invalidArgument+n3);maxD=n3.gt(d2)?e2>0?d2:n12:n3}for(external$1=!1,n3=new Ctor(digitsToString(xd)),pr=Ctor.precision,Ctor.precision=e2=xd.length*LOG_BASE*2;q2=divide(n3,d2,0,1,1),d22=d0.plus(q2.times(d1)),d22.cmp(maxD)!=1;)d0=d1,d1=d22,d22=n12,n12=n0.plus(q2.times(d22)),n0=d22,d22=d2,d2=n3.minus(q2.times(d22)),n3=d22;return d22=divide(maxD.minus(d0),d1,0,1,1),n0=n0.plus(d22.times(n12)),d0=d0.plus(d22.times(d1)),n0.s=n12.s=x2.s,r2=divide(n12,d1,e2,1).minus(x2).abs().cmp(divide(n0,d0,e2,1).minus(x2).abs())<1?[n12,d1]:[n0,d0],Ctor.precision=pr,external$1=!0,r2};P$2.toHexadecimal=P$2.toHex=function(sd,rm){return toStringBinary(this,16,sd,rm)};P$2.toNearest=function(y2,rm){var x2=this,Ctor=x2.constructor;if(x2=new Ctor(x2),y2==null){if(!x2.d)return x2;y2=new Ctor(1),rm=Ctor.rounding}else{if(y2=new Ctor(y2),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8),!x2.d)return y2.s?x2:y2;if(!y2.d)return y2.s&&(y2.s=x2.s),y2}return y2.d[0]?(external$1=!1,x2=divide(x2,y2,0,rm,1).times(y2),external$1=!0,finalise(x2)):(y2.s=x2.s,x2=y2),x2};P$2.toNumber=function(){return+this};P$2.toOctal=function(sd,rm){return toStringBinary(this,8,sd,rm)};P$2.toPower=P$2.pow=function(y2){var e2,k2,pr,r2,rm,s2,x2=this,Ctor=x2.constructor,yn=+(y2=new Ctor(y2));if(!x2.d||!y2.d||!x2.d[0]||!y2.d[0])return new Ctor(mathpow(+x2,yn));if(x2=new Ctor(x2),x2.eq(1))return x2;if(pr=Ctor.precision,rm=Ctor.rounding,y2.eq(1))return finalise(x2,pr,rm);if(e2=mathfloor(y2.e/LOG_BASE),e2>=y2.d.length-1&&(k2=yn<0?-yn:yn)<=MAX_SAFE_INTEGER)return r2=intPow(Ctor,x2,k2,pr),y2.s<0?new Ctor(1).div(r2):finalise(r2,pr,rm);if(s2=x2.s,s2<0){if(e2<y2.d.length-1)return new Ctor(NaN);if((y2.d[e2]&1)==0&&(s2=1),x2.e==0&&x2.d[0]==1&&x2.d.length==1)return x2.s=s2,x2}return k2=mathpow(+x2,yn),e2=k2==0||!isFinite(k2)?mathfloor(yn*(Math.log("0."+digitsToString(x2.d))/Math.LN10+x2.e+1)):new Ctor(k2+"").e,e2>Ctor.maxE+1||e2<Ctor.minE-1?new Ctor(e2>0?s2/0:0):(external$1=!1,Ctor.rounding=x2.s=1,k2=Math.min(12,(e2+"").length),r2=naturalExponential(y2.times(naturalLogarithm(x2,pr+k2)),pr),r2.d&&(r2=finalise(r2,pr+5,1),checkRoundingDigits(r2.d,pr,rm)&&(e2=pr+10,r2=finalise(naturalExponential(y2.times(naturalLogarithm(x2,e2+k2)),e2),e2+5,1),+digitsToString(r2.d).slice(pr+1,pr+15)+1==1e14&&(r2=finalise(r2,pr+1,0)))),r2.s=s2,external$1=!0,Ctor.rounding=rm,finalise(r2,pr,rm))};P$2.toPrecision=function(sd,rm){var str,x2=this,Ctor=x2.constructor;return sd===void 0?str=finiteToString(x2,x2.e<=Ctor.toExpNeg||x2.e>=Ctor.toExpPos):(checkInt32(sd,1,MAX_DIGITS),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8),x2=finalise(new Ctor(x2),sd,rm),str=finiteToString(x2,sd<=x2.e||x2.e<=Ctor.toExpNeg,sd)),x2.isNeg()&&!x2.isZero()?"-"+str:str};P$2.toSignificantDigits=P$2.toSD=function(sd,rm){var x2=this,Ctor=x2.constructor;return sd===void 0?(sd=Ctor.precision,rm=Ctor.rounding):(checkInt32(sd,1,MAX_DIGITS),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8)),finalise(new Ctor(x2),sd,rm)};P$2.toString=function(){var x2=this,Ctor=x2.constructor,str=finiteToString(x2,x2.e<=Ctor.toExpNeg||x2.e>=Ctor.toExpPos);return x2.isNeg()&&!x2.isZero()?"-"+str:str};P$2.truncated=P$2.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P$2.valueOf=P$2.toJSON=function(){var x2=this,Ctor=x2.constructor,str=finiteToString(x2,x2.e<=Ctor.toExpNeg||x2.e>=Ctor.toExpPos);return x2.isNeg()?"-"+str:str};function digitsToString(d2){var i2,k2,ws,indexOfLastWord=d2.length-1,str="",w2=d2[0];if(indexOfLastWord>0){for(str+=w2,i2=1;i2<indexOfLastWord;i2++)ws=d2[i2]+"",k2=LOG_BASE-ws.length,k2&&(str+=getZeroString(k2)),str+=ws;w2=d2[i2],ws=w2+"",k2=LOG_BASE-ws.length,k2&&(str+=getZeroString(k2))}else if(w2===0)return"0";for(;w2%10===0;)w2/=10;return str+w2}__name(digitsToString,"digitsToString");function checkInt32(i2,min2,max2){if(i2!==~~i2||i2<min2||i2>max2)throw Error(invalidArgument+i2)}__name(checkInt32,"checkInt32");function checkRoundingDigits(d2,i2,rm,repeating){var di,k2,r2,rd;for(k2=d2[0];k2>=10;k2/=10)--i2;return--i2<0?(i2+=LOG_BASE,di=0):(di=Math.ceil((i2+1)/LOG_BASE),i2%=LOG_BASE),k2=mathpow(10,LOG_BASE-i2),rd=d2[di]%k2|0,repeating==null?i2<3?(i2==0?rd=rd/100|0:i2==1&&(rd=rd/10|0),r2=rm<4&&rd==99999||rm>3&&rd==49999||rd==5e4||rd==0):r2=(rm<4&&rd+1==k2||rm>3&&rd+1==k2/2)&&(d2[di+1]/k2/100|0)==mathpow(10,i2-2)-1||(rd==k2/2||rd==0)&&(d2[di+1]/k2/100|0)==0:i2<4?(i2==0?rd=rd/1e3|0:i2==1?rd=rd/100|0:i2==2&&(rd=rd/10|0),r2=(repeating||rm<4)&&rd==9999||!repeating&&rm>3&&rd==4999):r2=((repeating||rm<4)&&rd+1==k2||!repeating&&rm>3&&rd+1==k2/2)&&(d2[di+1]/k2/1e3|0)==mathpow(10,i2-3)-1,r2}__name(checkRoundingDigits,"checkRoundingDigits");function convertBase(str,baseIn,baseOut){for(var j2,arr=[0],arrL,i2=0,strL=str.length;i2<strL;){for(arrL=arr.length;arrL--;)arr[arrL]*=baseIn;for(arr[0]+=NUMERALS.indexOf(str.charAt(i2++)),j2=0;j2<arr.length;j2++)arr[j2]>baseOut-1&&(arr[j2+1]===void 0&&(arr[j2+1]=0),arr[j2+1]+=arr[j2]/baseOut|0,arr[j2]%=baseOut)}return arr.reverse()}__name(convertBase,"convertBase");function cosine(Ctor,x2){var k2,len,y2;if(x2.isZero())return x2;len=x2.d.length,len<32?(k2=Math.ceil(len/3),y2=(1/tinyPow(4,k2)).toString()):(k2=16,y2="2.3283064365386962890625e-10"),Ctor.precision+=k2,x2=taylorSeries(Ctor,1,x2.times(y2),new Ctor(1));for(var i2=k2;i2--;){var cos2x=x2.times(x2);x2=cos2x.times(cos2x).minus(cos2x).times(8).plus(1)}return Ctor.precision-=k2,x2}__name(cosine,"cosine");var divide=function(){function multiplyInteger(x2,k2,base){var temp,carry=0,i2=x2.length;for(x2=x2.slice();i2--;)temp=x2[i2]*k2+carry,x2[i2]=temp%base|0,carry=temp/base|0;return carry&&x2.unshift(carry),x2}__name(multiplyInteger,"multiplyInteger");function compare(a2,b2,aL,bL){var i2,r2;if(aL!=bL)r2=aL>bL?1:-1;else for(i2=r2=0;i2<aL;i2++)if(a2[i2]!=b2[i2]){r2=a2[i2]>b2[i2]?1:-1;break}return r2}__name(compare,"compare");function subtract(a2,b2,aL,base){for(var i2=0;aL--;)a2[aL]-=i2,i2=a2[aL]<b2[aL]?1:0,a2[aL]=i2*base+a2[aL]-b2[aL];for(;!a2[0]&&a2.length>1;)a2.shift()}return __name(subtract,"subtract"),function(x2,y2,pr,rm,dp,base){var cmp,e2,i2,k2,logBase,more,prod,prodL,q2,qd,rem,remL,rem0,sd,t2,xi,xL,yd0,yL,yz,Ctor=x2.constructor,sign2=x2.s==y2.s?1:-1,xd=x2.d,yd=y2.d;if(!xd||!xd[0]||!yd||!yd[0])return new Ctor(!x2.s||!y2.s||(xd?yd&&xd[0]==yd[0]:!yd)?NaN:xd&&xd[0]==0||!yd?sign2*0:sign2/0);for(base?(logBase=1,e2=x2.e-y2.e):(base=BASE,logBase=LOG_BASE,e2=mathfloor(x2.e/logBase)-mathfloor(y2.e/logBase)),yL=yd.length,xL=xd.length,q2=new Ctor(sign2),qd=q2.d=[],i2=0;yd[i2]==(xd[i2]||0);i2++);if(yd[i2]>(xd[i2]||0)&&e2--,pr==null?(sd=pr=Ctor.precision,rm=Ctor.rounding):dp?sd=pr+(x2.e-y2.e)+1:sd=pr,sd<0)qd.push(1),more=!0;else{if(sd=sd/logBase+2|0,i2=0,yL==1){for(k2=0,yd=yd[0],sd++;(i2<xL||k2)&&sd--;i2++)t2=k2*base+(xd[i2]||0),qd[i2]=t2/yd|0,k2=t2%yd|0;more=k2||i2<xL}else{for(k2=base/(yd[0]+1)|0,k2>1&&(yd=multiplyInteger(yd,k2,base),xd=multiplyInteger(xd,k2,base),yL=yd.length,xL=xd.length),xi=yL,rem=xd.slice(0,yL),remL=rem.length;remL<yL;)rem[remL++]=0;yz=yd.slice(),yz.unshift(0),yd0=yd[0],yd[1]>=base/2&&++yd0;do k2=0,cmp=compare(yd,rem,yL,remL),cmp<0?(rem0=rem[0],yL!=remL&&(rem0=rem0*base+(rem[1]||0)),k2=rem0/yd0|0,k2>1?(k2>=base&&(k2=base-1),prod=multiplyInteger(yd,k2,base),prodL=prod.length,remL=rem.length,cmp=compare(prod,rem,prodL,remL),cmp==1&&(k2--,subtract(prod,yL<prodL?yz:yd,prodL,base))):(k2==0&&(cmp=k2=1),prod=yd.slice()),prodL=prod.length,prodL<remL&&prod.unshift(0),subtract(rem,prod,remL,base),cmp==-1&&(remL=rem.length,cmp=compare(yd,rem,yL,remL),cmp<1&&(k2++,subtract(rem,yL<remL?yz:yd,remL,base))),remL=rem.length):cmp===0&&(k2++,rem=[0]),qd[i2++]=k2,cmp&&rem[0]?rem[remL++]=xd[xi]||0:(rem=[xd[xi]],remL=1);while((xi++<xL||rem[0]!==void 0)&&sd--);more=rem[0]!==void 0}qd[0]||qd.shift()}if(logBase==1)q2.e=e2,inexact=more;else{for(i2=1,k2=qd[0];k2>=10;k2/=10)i2++;q2.e=i2+e2*logBase-1,finalise(q2,dp?pr+q2.e+1:pr,rm,more)}return q2}}();function finalise(x2,sd,rm,isTruncated){var digits2,i2,j2,k2,rd,roundUp,w2,xd,xdi,Ctor=x2.constructor;out:if(sd!=null){if(xd=x2.d,!xd)return x2;for(digits2=1,k2=xd[0];k2>=10;k2/=10)digits2++;if(i2=sd-digits2,i2<0)i2+=LOG_BASE,j2=sd,w2=xd[xdi=0],rd=w2/mathpow(10,digits2-j2-1)%10|0;else if(xdi=Math.ceil((i2+1)/LOG_BASE),k2=xd.length,xdi>=k2)if(isTruncated){for(;k2++<=xdi;)xd.push(0);w2=rd=0,digits2=1,i2%=LOG_BASE,j2=i2-LOG_BASE+1}else break out;else{for(w2=k2=xd[xdi],digits2=1;k2>=10;k2/=10)digits2++;i2%=LOG_BASE,j2=i2-LOG_BASE+digits2,rd=j2<0?0:w2/mathpow(10,digits2-j2-1)%10|0}if(isTruncated=isTruncated||sd<0||xd[xdi+1]!==void 0||(j2<0?w2:w2%mathpow(10,digits2-j2-1)),roundUp=rm<4?(rd||isTruncated)&&(rm==0||rm==(x2.s<0?3:2)):rd>5||rd==5&&(rm==4||isTruncated||rm==6&&(i2>0?j2>0?w2/mathpow(10,digits2-j2):0:xd[xdi-1])%10&1||rm==(x2.s<0?8:7)),sd<1||!xd[0])return xd.length=0,roundUp?(sd-=x2.e+1,xd[0]=mathpow(10,(LOG_BASE-sd%LOG_BASE)%LOG_BASE),x2.e=-sd||0):xd[0]=x2.e=0,x2;if(i2==0?(xd.length=xdi,k2=1,xdi--):(xd.length=xdi+1,k2=mathpow(10,LOG_BASE-i2),xd[xdi]=j2>0?(w2/mathpow(10,digits2-j2)%mathpow(10,j2)|0)*k2:0),roundUp)for(;;)if(xdi==0){for(i2=1,j2=xd[0];j2>=10;j2/=10)i2++;for(j2=xd[0]+=k2,k2=1;j2>=10;j2/=10)k2++;i2!=k2&&(x2.e++,xd[0]==BASE&&(xd[0]=1));break}else{if(xd[xdi]+=k2,xd[xdi]!=BASE)break;xd[xdi--]=0,k2=1}for(i2=xd.length;xd[--i2]===0;)xd.pop()}return external$1&&(x2.e>Ctor.maxE?(x2.d=null,x2.e=NaN):x2.e<Ctor.minE&&(x2.e=0,x2.d=[0])),x2}__name(finalise,"finalise");function finiteToString(x2,isExp,sd){if(!x2.isFinite())return nonFiniteToString(x2);var k2,e2=x2.e,str=digitsToString(x2.d),len=str.length;return isExp?(sd&&(k2=sd-len)>0?str=str.charAt(0)+"."+str.slice(1)+getZeroString(k2):len>1&&(str=str.charAt(0)+"."+str.slice(1)),str=str+(x2.e<0?"e":"e+")+x2.e):e2<0?(str="0."+getZeroString(-e2-1)+str,sd&&(k2=sd-len)>0&&(str+=getZeroString(k2))):e2>=len?(str+=getZeroString(e2+1-len),sd&&(k2=sd-e2-1)>0&&(str=str+"."+getZeroString(k2))):((k2=e2+1)<len&&(str=str.slice(0,k2)+"."+str.slice(k2)),sd&&(k2=sd-len)>0&&(e2+1===len&&(str+="."),str+=getZeroString(k2))),str}__name(finiteToString,"finiteToString");function getBase10Exponent(digits2,e2){var w2=digits2[0];for(e2*=LOG_BASE;w2>=10;w2/=10)e2++;return e2}__name(getBase10Exponent,"getBase10Exponent");function getLn10(Ctor,sd,pr){if(sd>LN10_PRECISION)throw external$1=!0,pr&&(Ctor.precision=pr),Error(precisionLimitExceeded);return finalise(new Ctor(LN10),sd,1,!0)}__name(getLn10,"getLn10");function getPi(Ctor,sd,rm){if(sd>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new Ctor(PI),sd,rm,!0)}__name(getPi,"getPi");function getPrecision(digits2){var w2=digits2.length-1,len=w2*LOG_BASE+1;if(w2=digits2[w2],w2){for(;w2%10==0;w2/=10)len--;for(w2=digits2[0];w2>=10;w2/=10)len++}return len}__name(getPrecision,"getPrecision");function getZeroString(k2){for(var zs="";k2--;)zs+="0";return zs}__name(getZeroString,"getZeroString");function intPow(Ctor,x2,n3,pr){var isTruncated,r2=new Ctor(1),k2=Math.ceil(pr/LOG_BASE+4);for(external$1=!1;;){if(n3%2&&(r2=r2.times(x2),truncate(r2.d,k2)&&(isTruncated=!0)),n3=mathfloor(n3/2),n3===0){n3=r2.d.length-1,isTruncated&&r2.d[n3]===0&&++r2.d[n3];break}x2=x2.times(x2),truncate(x2.d,k2)}return external$1=!0,r2}__name(intPow,"intPow");function isOdd(n3){return n3.d[n3.d.length-1]&1}__name(isOdd,"isOdd");function maxOrMin(Ctor,args,n3){for(var k2,y2,x2=new Ctor(args[0]),i2=0;++i2<args.length;){if(y2=new Ctor(args[i2]),!y2.s){x2=y2;break}k2=x2.cmp(y2),(k2===n3||k2===0&&x2.s===n3)&&(x2=y2)}return x2}__name(maxOrMin,"maxOrMin");function naturalExponential(x2,sd){var denominator,guard,j2,pow2,sum2,t2,wpr,rep=0,i2=0,k2=0,Ctor=x2.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(!x2.d||!x2.d[0]||x2.e>17)return new Ctor(x2.d?x2.d[0]?x2.s<0?0:1/0:1:x2.s?x2.s<0?0:x2:NaN);for(sd==null?(external$1=!1,wpr=pr):wpr=sd,t2=new Ctor(.03125);x2.e>-2;)x2=x2.times(t2),k2+=5;for(guard=Math.log(mathpow(2,k2))/Math.LN10*2+5|0,wpr+=guard,denominator=pow2=sum2=new Ctor(1),Ctor.precision=wpr;;){if(pow2=finalise(pow2.times(x2),wpr,1),denominator=denominator.times(++i2),t2=sum2.plus(divide(pow2,denominator,wpr,1)),digitsToString(t2.d).slice(0,wpr)===digitsToString(sum2.d).slice(0,wpr)){for(j2=k2;j2--;)sum2=finalise(sum2.times(sum2),wpr,1);if(sd==null)if(rep<3&&checkRoundingDigits(sum2.d,wpr-guard,rm,rep))Ctor.precision=wpr+=10,denominator=pow2=t2=new Ctor(1),i2=0,rep++;else return finalise(sum2,Ctor.precision=pr,rm,external$1=!0);else return Ctor.precision=pr,sum2}sum2=t2}}__name(naturalExponential,"naturalExponential");function naturalLogarithm(y2,sd){var c,c0,denominator,e2,numerator,rep,sum2,t2,wpr,x1,x2,n3=1,guard=10,x3=y2,xd=x3.d,Ctor=x3.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(x3.s<0||!xd||!xd[0]||!x3.e&&xd[0]==1&&xd.length==1)return new Ctor(xd&&!xd[0]?-1/0:x3.s!=1?NaN:xd?0:x3);if(sd==null?(external$1=!1,wpr=pr):wpr=sd,Ctor.precision=wpr+=guard,c=digitsToString(xd),c0=c.charAt(0),Math.abs(e2=x3.e)<15e14){for(;c0<7&&c0!=1||c0==1&&c.charAt(1)>3;)x3=x3.times(y2),c=digitsToString(x3.d),c0=c.charAt(0),n3++;e2=x3.e,c0>1?(x3=new Ctor("0."+c),e2++):x3=new Ctor(c0+"."+c.slice(1))}else return t2=getLn10(Ctor,wpr+2,pr).times(e2+""),x3=naturalLogarithm(new Ctor(c0+"."+c.slice(1)),wpr-guard).plus(t2),Ctor.precision=pr,sd==null?finalise(x3,pr,rm,external$1=!0):x3;for(x1=x3,sum2=numerator=x3=divide(x3.minus(1),x3.plus(1),wpr,1),x2=finalise(x3.times(x3),wpr,1),denominator=3;;){if(numerator=finalise(numerator.times(x2),wpr,1),t2=sum2.plus(divide(numerator,new Ctor(denominator),wpr,1)),digitsToString(t2.d).slice(0,wpr)===digitsToString(sum2.d).slice(0,wpr))if(sum2=sum2.times(2),e2!==0&&(sum2=sum2.plus(getLn10(Ctor,wpr+2,pr).times(e2+""))),sum2=divide(sum2,new Ctor(n3),wpr,1),sd==null)if(checkRoundingDigits(sum2.d,wpr-guard,rm,rep))Ctor.precision=wpr+=guard,t2=numerator=x3=divide(x1.minus(1),x1.plus(1),wpr,1),x2=finalise(x3.times(x3),wpr,1),denominator=rep=1;else return finalise(sum2,Ctor.precision=pr,rm,external$1=!0);else return Ctor.precision=pr,sum2;sum2=t2,denominator+=2}}__name(naturalLogarithm,"naturalLogarithm");function nonFiniteToString(x2){return String(x2.s*x2.s/0)}__name(nonFiniteToString,"nonFiniteToString");function parseDecimal(x2,str){var e2,i2,len;for((e2=str.indexOf("."))>-1&&(str=str.replace(".","")),(i2=str.search(/e/i))>0?(e2<0&&(e2=i2),e2+=+str.slice(i2+1),str=str.substring(0,i2)):e2<0&&(e2=str.length),i2=0;str.charCodeAt(i2)===48;i2++);for(len=str.length;str.charCodeAt(len-1)===48;--len);if(str=str.slice(i2,len),str){if(len-=i2,x2.e=e2=e2-i2-1,x2.d=[],i2=(e2+1)%LOG_BASE,e2<0&&(i2+=LOG_BASE),i2<len){for(i2&&x2.d.push(+str.slice(0,i2)),len-=LOG_BASE;i2<len;)x2.d.push(+str.slice(i2,i2+=LOG_BASE));str=str.slice(i2),i2=LOG_BASE-str.length}else i2-=len;for(;i2--;)str+="0";x2.d.push(+str),external$1&&(x2.e>x2.constructor.maxE?(x2.d=null,x2.e=NaN):x2.e<x2.constructor.minE&&(x2.e=0,x2.d=[0]))}else x2.e=0,x2.d=[0];return x2}__name(parseDecimal,"parseDecimal");function parseOther(x2,str){var base,Ctor,divisor,i2,isFloat,len,p2,xd,xe2;if(str.indexOf("_")>-1){if(str=str.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(str))return parseDecimal(x2,str)}else if(str==="Infinity"||str==="NaN")return+str||(x2.s=NaN),x2.e=NaN,x2.d=null,x2;if(isHex.test(str))base=16,str=str.toLowerCase();else if(isBinary.test(str))base=2;else if(isOctal.test(str))base=8;else throw Error(invalidArgument+str);for(i2=str.search(/p/i),i2>0?(p2=+str.slice(i2+1),str=str.substring(2,i2)):str=str.slice(2),i2=str.indexOf("."),isFloat=i2>=0,Ctor=x2.constructor,isFloat&&(str=str.replace(".",""),len=str.length,i2=len-i2,divisor=intPow(Ctor,new Ctor(base),i2,i2*2)),xd=convertBase(str,base,BASE),xe2=xd.length-1,i2=xe2;xd[i2]===0;--i2)xd.pop();return i2<0?new Ctor(x2.s*0):(x2.e=getBase10Exponent(xd,xe2),x2.d=xd,external$1=!1,isFloat&&(x2=divide(x2,divisor,len*4)),p2&&(x2=x2.times(Math.abs(p2)<54?mathpow(2,p2):Decimal.pow(2,p2))),external$1=!0,x2)}__name(parseOther,"parseOther");function sine(Ctor,x2){var k2,len=x2.d.length;if(len<3)return x2.isZero()?x2:taylorSeries(Ctor,2,x2,x2);k2=1.4*Math.sqrt(len),k2=k2>16?16:k2|0,x2=x2.times(1/tinyPow(5,k2)),x2=taylorSeries(Ctor,2,x2,x2);for(var sin2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k2--;)sin2_x=x2.times(x2),x2=x2.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));return x2}__name(sine,"sine");function taylorSeries(Ctor,n3,x2,y2,isHyperbolic){var j2,t2,u2,x22,pr=Ctor.precision,k2=Math.ceil(pr/LOG_BASE);for(external$1=!1,x22=x2.times(x2),u2=new Ctor(y2);;){if(t2=divide(u2.times(x22),new Ctor(n3++*n3++),pr,1),u2=isHyperbolic?y2.plus(t2):y2.minus(t2),y2=divide(t2.times(x22),new Ctor(n3++*n3++),pr,1),t2=u2.plus(y2),t2.d[k2]!==void 0){for(j2=k2;t2.d[j2]===u2.d[j2]&&j2--;);if(j2==-1)break}j2=u2,u2=y2,y2=t2,t2=j2}return external$1=!0,t2.d.length=k2+1,t2}__name(taylorSeries,"taylorSeries");function tinyPow(b2,e2){for(var n3=b2;--e2;)n3*=b2;return n3}__name(tinyPow,"tinyPow");function toLessThanHalfPi(Ctor,x2){var t2,isNeg=x2.s<0,pi=getPi(Ctor,Ctor.precision,1),halfPi=pi.times(.5);if(x2=x2.abs(),x2.lte(halfPi))return quadrant=isNeg?4:1,x2;if(t2=x2.divToInt(pi),t2.isZero())quadrant=isNeg?3:2;else{if(x2=x2.minus(t2.times(pi)),x2.lte(halfPi))return quadrant=isOdd(t2)?isNeg?2:3:isNeg?4:1,x2;quadrant=isOdd(t2)?isNeg?1:4:isNeg?3:2}return x2.minus(pi).abs()}__name(toLessThanHalfPi,"toLessThanHalfPi");function toStringBinary(x2,baseOut,sd,rm){var base,e2,i2,k2,len,roundUp,str,xd,y2,Ctor=x2.constructor,isExp=sd!==void 0;if(isExp?(checkInt32(sd,1,MAX_DIGITS),rm===void 0?rm=Ctor.rounding:checkInt32(rm,0,8)):(sd=Ctor.precision,rm=Ctor.rounding),!x2.isFinite())str=nonFiniteToString(x2);else{for(str=finiteToString(x2),i2=str.indexOf("."),isExp?(base=2,baseOut==16?sd=sd*4-3:baseOut==8&&(sd=sd*3-2)):base=baseOut,i2>=0&&(str=str.replace(".",""),y2=new Ctor(1),y2.e=str.length-i2,y2.d=convertBase(finiteToString(y2),10,base),y2.e=y2.d.length),xd=convertBase(str,10,base),e2=len=xd.length;xd[--len]==0;)xd.pop();if(!xd[0])str=isExp?"0p+0":"0";else{if(i2<0?e2--:(x2=new Ctor(x2),x2.d=xd,x2.e=e2,x2=divide(x2,y2,sd,rm,0,base),xd=x2.d,e2=x2.e,roundUp=inexact),i2=xd[sd],k2=base/2,roundUp=roundUp||xd[sd+1]!==void 0,roundUp=rm<4?(i2!==void 0||roundUp)&&(rm===0||rm===(x2.s<0?3:2)):i2>k2||i2===k2&&(rm===4||roundUp||rm===6&&xd[sd-1]&1||rm===(x2.s<0?8:7)),xd.length=sd,roundUp)for(;++xd[--sd]>base-1;)xd[sd]=0,sd||(++e2,xd.unshift(1));for(len=xd.length;!xd[len-1];--len);for(i2=0,str="";i2<len;i2++)str+=NUMERALS.charAt(xd[i2]);if(isExp){if(len>1)if(baseOut==16||baseOut==8){for(i2=baseOut==16?4:3,--len;len%i2;len++)str+="0";for(xd=convertBase(str,base,baseOut),len=xd.length;!xd[len-1];--len);for(i2=1,str="1.";i2<len;i2++)str+=NUMERALS.charAt(xd[i2])}else str=str.charAt(0)+"."+str.slice(1);str=str+(e2<0?"p":"p+")+e2}else if(e2<0){for(;++e2;)str="0"+str;str="0."+str}else if(++e2>len)for(e2-=len;e2--;)str+="0";else e2<len&&(str=str.slice(0,e2)+"."+str.slice(e2))}str=(baseOut==16?"0x":baseOut==2?"0b":baseOut==8?"0o":"")+str}return x2.s<0?"-"+str:str}__name(toStringBinary,"toStringBinary");function truncate(arr,len){if(arr.length>len)return arr.length=len,!0}__name(truncate,"truncate");function abs$1(x2){return new this(x2).abs()}__name(abs$1,"abs$1");function acos(x2){return new this(x2).acos()}__name(acos,"acos");function acosh(x2){return new this(x2).acosh()}__name(acosh,"acosh");function add(x2,y2){return new this(x2).plus(y2)}__name(add,"add");function asin(x2){return new this(x2).asin()}__name(asin,"asin");function asinh(x2){return new this(x2).asinh()}__name(asinh,"asinh");function atan(x2){return new this(x2).atan()}__name(atan,"atan");function atanh(x2){return new this(x2).atanh()}__name(atanh,"atanh");function atan2(y2,x2){y2=new this(y2),x2=new this(x2);var r2,pr=this.precision,rm=this.rounding,wpr=pr+4;return!y2.s||!x2.s?r2=new this(NaN):!y2.d&&!x2.d?(r2=getPi(this,wpr,1).times(x2.s>0?.25:.75),r2.s=y2.s):!x2.d||y2.isZero()?(r2=x2.s<0?getPi(this,pr,rm):new this(0),r2.s=y2.s):!y2.d||x2.isZero()?(r2=getPi(this,wpr,1).times(.5),r2.s=y2.s):x2.s<0?(this.precision=wpr,this.rounding=1,r2=this.atan(divide(y2,x2,wpr,1)),x2=getPi(this,wpr,1),this.precision=pr,this.rounding=rm,r2=y2.s<0?r2.minus(x2):r2.plus(x2)):r2=this.atan(divide(y2,x2,wpr,1)),r2}__name(atan2,"atan2");function cbrt(x2){return new this(x2).cbrt()}__name(cbrt,"cbrt");function ceil(x2){return finalise(x2=new this(x2),x2.e+1,2)}__name(ceil,"ceil");function clamp(x2,min2,max2){return new this(x2).clamp(min2,max2)}__name(clamp,"clamp");function config2(obj){if(!obj||typeof obj!="object")throw Error(decimalError+"Object expected");var i2,p2,v2,useDefaults=obj.defaults===!0,ps=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-9e15,0,"modulo",0,9];for(i2=0;i2<ps.length;i2+=3)if(p2=ps[i2],useDefaults&&(this[p2]=DEFAULTS[p2]),(v2=obj[p2])!==void 0)if(mathfloor(v2)===v2&&v2>=ps[i2+1]&&v2<=ps[i2+2])this[p2]=v2;else throw Error(invalidArgument+p2+": "+v2);if(p2="crypto",useDefaults&&(this[p2]=DEFAULTS[p2]),(v2=obj[p2])!==void 0)if(v2===!0||v2===!1||v2===0||v2===1)if(v2)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[p2]=!0;else throw Error(cryptoUnavailable);else this[p2]=!1;else throw Error(invalidArgument+p2+": "+v2);return this}__name(config2,"config");function cos(x2){return new this(x2).cos()}__name(cos,"cos");function cosh$1(x2){return new this(x2).cosh()}__name(cosh$1,"cosh$1");function clone$1(obj){var i2,p2,ps;function Decimal2(v2){var e2,i3,t2,x2=this;if(!(x2 instanceof Decimal2))return new Decimal2(v2);if(x2.constructor=Decimal2,isDecimalInstance(v2)){x2.s=v2.s,external$1?!v2.d||v2.e>Decimal2.maxE?(x2.e=NaN,x2.d=null):v2.e<Decimal2.minE?(x2.e=0,x2.d=[0]):(x2.e=v2.e,x2.d=v2.d.slice()):(x2.e=v2.e,x2.d=v2.d?v2.d.slice():v2.d);return}if(t2=typeof v2,t2==="number"){if(v2===0){x2.s=1/v2<0?-1:1,x2.e=0,x2.d=[0];return}if(v2<0?(v2=-v2,x2.s=-1):x2.s=1,v2===~~v2&&v2<1e7){for(e2=0,i3=v2;i3>=10;i3/=10)e2++;external$1?e2>Decimal2.maxE?(x2.e=NaN,x2.d=null):e2<Decimal2.minE?(x2.e=0,x2.d=[0]):(x2.e=e2,x2.d=[v2]):(x2.e=e2,x2.d=[v2]);return}if(v2*0!==0){v2||(x2.s=NaN),x2.e=NaN,x2.d=null;return}return parseDecimal(x2,v2.toString())}if(t2==="string")return(i3=v2.charCodeAt(0))===45?(v2=v2.slice(1),x2.s=-1):(i3===43&&(v2=v2.slice(1)),x2.s=1),isDecimal.test(v2)?parseDecimal(x2,v2):parseOther(x2,v2);if(t2==="bigint")return v2<0?(v2=-v2,x2.s=-1):x2.s=1,parseDecimal(x2,v2.toString());throw Error(invalidArgument+v2)}if(__name(Decimal2,"Decimal"),Decimal2.prototype=P$2,Decimal2.ROUND_UP=0,Decimal2.ROUND_DOWN=1,Decimal2.ROUND_CEIL=2,Decimal2.ROUND_FLOOR=3,Decimal2.ROUND_HALF_UP=4,Decimal2.ROUND_HALF_DOWN=5,Decimal2.ROUND_HALF_EVEN=6,Decimal2.ROUND_HALF_CEIL=7,Decimal2.ROUND_HALF_FLOOR=8,Decimal2.EUCLID=9,Decimal2.config=Decimal2.set=config2,Decimal2.clone=clone$1,Decimal2.isDecimal=isDecimalInstance,Decimal2.abs=abs$1,Decimal2.acos=acos,Decimal2.acosh=acosh,Decimal2.add=add,Decimal2.asin=asin,Decimal2.asinh=asinh,Decimal2.atan=atan,Decimal2.atanh=atanh,Decimal2.atan2=atan2,Decimal2.cbrt=cbrt,Decimal2.ceil=ceil,Decimal2.clamp=clamp,Decimal2.cos=cos,Decimal2.cosh=cosh$1,Decimal2.div=div,Decimal2.exp=exp,Decimal2.floor=floor,Decimal2.hypot=hypot$1,Decimal2.ln=ln,Decimal2.log=log,Decimal2.log10=log10,Decimal2.log2=log2,Decimal2.max=max,Decimal2.min=min,Decimal2.mod=mod,Decimal2.mul=mul,Decimal2.pow=pow,Decimal2.random=random,Decimal2.round=round,Decimal2.sign=sign,Decimal2.sin=sin,Decimal2.sinh=sinh$1,Decimal2.sqrt=sqrt,Decimal2.sub=sub,Decimal2.sum=sum$1,Decimal2.tan=tan,Decimal2.tanh=tanh,Decimal2.trunc=trunc$1,obj===void 0&&(obj={}),obj&&obj.defaults!==!0)for(ps=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i2=0;i2<ps.length;)obj.hasOwnProperty(p2=ps[i2++])||(obj[p2]=this[p2]);return Decimal2.config(obj),Decimal2}__name(clone$1,"clone$1");function div(x2,y2){return new this(x2).div(y2)}__name(div,"div");function exp(x2){return new this(x2).exp()}__name(exp,"exp");function floor(x2){return finalise(x2=new this(x2),x2.e+1,3)}__name(floor,"floor");function hypot$1(){var i2,n3,t2=new this(0);for(external$1=!1,i2=0;i2<arguments.length;)if(n3=new this(arguments[i2++]),n3.d)t2.d&&(t2=t2.plus(n3.times(n3)));else{if(n3.s)return external$1=!0,new this(1/0);t2=n3}return external$1=!0,t2.sqrt()}__name(hypot$1,"hypot$1");function isDecimalInstance(obj){return obj instanceof Decimal||obj&&obj.toStringTag===tag||!1}__name(isDecimalInstance,"isDecimalInstance");function ln(x2){return new this(x2).ln()}__name(ln,"ln");function log(x2,y2){return new this(x2).log(y2)}__name(log,"log");function log2(x2){return new this(x2).log(2)}__name(log2,"log2");function log10(x2){return new this(x2).log(10)}__name(log10,"log10");function max(){return maxOrMin(this,arguments,-1)}__name(max,"max");function min(){return maxOrMin(this,arguments,1)}__name(min,"min");function mod(x2,y2){return new this(x2).mod(y2)}__name(mod,"mod");function mul(x2,y2){return new this(x2).mul(y2)}__name(mul,"mul");function pow(x2,y2){return new this(x2).pow(y2)}__name(pow,"pow");function random(sd){var d2,e2,k2,n3,i2=0,r2=new this(1),rd=[];if(sd===void 0?sd=this.precision:checkInt32(sd,1,MAX_DIGITS),k2=Math.ceil(sd/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(d2=crypto.getRandomValues(new Uint32Array(k2));i2<k2;)n3=d2[i2],n3>=429e7?d2[i2]=crypto.getRandomValues(new Uint32Array(1))[0]:rd[i2++]=n3%1e7;else if(crypto.randomBytes){for(d2=crypto.randomBytes(k2*=4);i2<k2;)n3=d2[i2]+(d2[i2+1]<<8)+(d2[i2+2]<<16)+((d2[i2+3]&127)<<24),n3>=214e7?crypto.randomBytes(4).copy(d2,i2):(rd.push(n3%1e7),i2+=4);i2=k2/4}else throw Error(cryptoUnavailable);else for(;i2<k2;)rd[i2++]=Math.random()*1e7|0;for(k2=rd[--i2],sd%=LOG_BASE,k2&&sd&&(n3=mathpow(10,LOG_BASE-sd),rd[i2]=(k2/n3|0)*n3);rd[i2]===0;i2--)rd.pop();if(i2<0)e2=0,rd=[0];else{for(e2=-1;rd[0]===0;e2-=LOG_BASE)rd.shift();for(k2=1,n3=rd[0];n3>=10;n3/=10)k2++;k2<LOG_BASE&&(e2-=LOG_BASE-k2)}return r2.e=e2,r2.d=rd,r2}__name(random,"random");function round(x2){return finalise(x2=new this(x2),x2.e+1,this.rounding)}__name(round,"round");function sign(x2){return x2=new this(x2),x2.d?x2.d[0]?x2.s:0*x2.s:x2.s||NaN}__name(sign,"sign");function sin(x2){return new this(x2).sin()}__name(sin,"sin");function sinh$1(x2){return new this(x2).sinh()}__name(sinh$1,"sinh$1");function sqrt(x2){return new this(x2).sqrt()}__name(sqrt,"sqrt");function sub(x2,y2){return new this(x2).sub(y2)}__name(sub,"sub");function sum$1(){var i2=0,args=arguments,x2=new this(args[i2]);for(external$1=!1;x2.s&&++i2<args.length;)x2=x2.plus(args[i2]);return external$1=!0,finalise(x2,this.precision,this.rounding)}__name(sum$1,"sum$1");function tan(x2){return new this(x2).tan()}__name(tan,"tan");function tanh(x2){return new this(x2).tanh()}__name(tanh,"tanh");function trunc$1(x2){return finalise(x2=new this(x2),x2.e+1,1)}__name(trunc$1,"trunc$1");P$2[Symbol.for("nodejs.util.inspect.custom")]=P$2.toString;P$2[Symbol.toStringTag]="Decimal";var Decimal=P$2.constructor=clone$1(DEFAULTS);LN10=new Decimal(LN10);PI=new Decimal(PI);var name$s="BigNumber",dependencies$s=["?on","config"],createBigNumberClass=factory(name$s,dependencies$s,_ref=>{var{on,config:config3}=_ref,BigNumber2=Decimal.clone({precision:config3.precision,modulo:Decimal.EUCLID});return BigNumber2.prototype=Object.create(BigNumber2.prototype),BigNumber2.prototype.type="BigNumber",BigNumber2.prototype.isBigNumber=!0,BigNumber2.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},BigNumber2.fromJSON=function(json){return new BigNumber2(json.value)},on&&on("config",function(curr,prev){curr.precision!==prev.precision&&BigNumber2.config({precision:curr.precision})}),BigNumber2},{isClass:!0});const cosh=Math.cosh||function(x2){return Math.abs(x2)<1e-9?1-x2:(Math.exp(x2)+Math.exp(-x2))*.5},sinh=Math.sinh||function(x2){return Math.abs(x2)<1e-9?x2:(Math.exp(x2)-Math.exp(-x2))*.5},cosm1=__name(function(x2){const b2=Math.PI/4;if(-b2>x2||x2>b2)return Math.cos(x2)-1;const xx=x2*x2;return xx*(xx*(xx*(xx*(xx*(xx*(xx*(xx/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},"cosm1"),hypot=__name(function(x2,y2){return x2=Math.abs(x2),y2=Math.abs(y2),x2<y2&&([x2,y2]=[y2,x2]),x2<1e8?Math.sqrt(x2*x2+y2*y2):(y2/=x2,x2*Math.sqrt(1+y2*y2))},"hypot"),parser_exit=__name(function(){throw SyntaxError("Invalid Param")},"parser_exit");function logHypot(a2,b2){const _a26=Math.abs(a2),_b=Math.abs(b2);return a2===0?Math.log(_b):b2===0?Math.log(_a26):_a26<3e3&&_b<3e3?Math.log(a2*a2+b2*b2)*.5:(a2=a2*.5,b2=b2*.5,.5*Math.log(a2*a2+b2*b2)+Math.LN2)}__name(logHypot,"logHypot");const P$1={re:0,im:0},parse$1=__name(function(a2,b2){const z2=P$1;if(a2==null)z2.re=z2.im=0;else if(b2!==void 0)z2.re=a2,z2.im=b2;else switch(typeof a2){case"object":if("im"in a2&&"re"in a2)z2.re=a2.re,z2.im=a2.im;else if("abs"in a2&&"arg"in a2){if(!isFinite(a2.abs)&&isFinite(a2.arg))return Complex$1.INFINITY;z2.re=a2.abs*Math.cos(a2.arg),z2.im=a2.abs*Math.sin(a2.arg)}else if("r"in a2&&"phi"in a2){if(!isFinite(a2.r)&&isFinite(a2.phi))return Complex$1.INFINITY;z2.re=a2.r*Math.cos(a2.phi),z2.im=a2.r*Math.sin(a2.phi)}else a2.length===2?(z2.re=a2[0],z2.im=a2[1]):parser_exit();break;case"string":z2.im=z2.re=0;const tokens=a2.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let plus=1,minus=0;tokens===null&&parser_exit();for(let i2=0;i2<tokens.length;i2++){const c=tokens[i2];c===" "||c==="	"||c===`
`||(c==="+"?plus++:c==="-"?minus++:c==="i"||c==="I"?(plus+minus===0&&parser_exit(),tokens[i2+1]!==" "&&!isNaN(tokens[i2+1])?(z2.im+=parseFloat((minus%2?"-":"")+tokens[i2+1]),i2++):z2.im+=parseFloat((minus%2?"-":"")+"1"),plus=minus=0):((plus+minus===0||isNaN(c))&&parser_exit(),tokens[i2+1]==="i"||tokens[i2+1]==="I"?(z2.im+=parseFloat((minus%2?"-":"")+c),i2++):z2.re+=parseFloat((minus%2?"-":"")+c),plus=minus=0))}plus+minus>0&&parser_exit();break;case"number":z2.im=0,z2.re=a2;break;default:parser_exit()}return isNaN(z2.re)||isNaN(z2.im),z2},"parse$1");function Complex$1(a2,b2){if(!(this instanceof Complex$1))return new Complex$1(a2,b2);const z2=parse$1(a2,b2);this.re=z2.re,this.im=z2.im}__name(Complex$1,"Complex$1");Complex$1.prototype={re:0,im:0,sign:__name(function(){const abs2=hypot(this.re,this.im);return new Complex$1(this.re/abs2,this.im/abs2)},"sign"),add:__name(function(a2,b2){const z2=parse$1(a2,b2),tInfin=this.isInfinite(),zInfin=!(isFinite(z2.re)&&isFinite(z2.im));return tInfin||zInfin?tInfin&&zInfin?Complex$1.NAN:Complex$1.INFINITY:new Complex$1(this.re+z2.re,this.im+z2.im)},"add"),sub:__name(function(a2,b2){const z2=parse$1(a2,b2),tInfin=this.isInfinite(),zInfin=!(isFinite(z2.re)&&isFinite(z2.im));return tInfin||zInfin?tInfin&&zInfin?Complex$1.NAN:Complex$1.INFINITY:new Complex$1(this.re-z2.re,this.im-z2.im)},"sub"),mul:__name(function(a2,b2){const z2=parse$1(a2,b2),tInfin=this.isInfinite(),zInfin=!(isFinite(z2.re)&&isFinite(z2.im)),tIsZero=this.re===0&&this.im===0,zIsZero=z2.re===0&&z2.im===0;return tInfin&&zIsZero||zInfin&&tIsZero?Complex$1.NAN:tInfin||zInfin?Complex$1.INFINITY:z2.im===0&&this.im===0?new Complex$1(this.re*z2.re,0):new Complex$1(this.re*z2.re-this.im*z2.im,this.re*z2.im+this.im*z2.re)},"mul"),div:__name(function(a2,b2){const z2=parse$1(a2,b2),tInfin=this.isInfinite(),zInfin=!(isFinite(z2.re)&&isFinite(z2.im)),tIsZero=this.re===0&&this.im===0,zIsZero=z2.re===0&&z2.im===0;if(tIsZero&&zIsZero||tInfin&&zInfin)return Complex$1.NAN;if(zIsZero||tInfin)return Complex$1.INFINITY;if(tIsZero||zInfin)return Complex$1.ZERO;if(z2.im===0)return new Complex$1(this.re/z2.re,this.im/z2.re);if(Math.abs(z2.re)<Math.abs(z2.im)){const x2=z2.re/z2.im,t2=z2.re*x2+z2.im;return new Complex$1((this.re*x2+this.im)/t2,(this.im*x2-this.re)/t2)}else{const x2=z2.im/z2.re,t2=z2.im*x2+z2.re;return new Complex$1((this.re+this.im*x2)/t2,(this.im-this.re*x2)/t2)}},"div"),pow:__name(function(a2,b2){const z2=parse$1(a2,b2),tIsZero=this.re===0&&this.im===0;if(z2.re===0&&z2.im===0)return Complex$1.ONE;if(z2.im===0){if(this.im===0&&this.re>0)return new Complex$1(Math.pow(this.re,z2.re),0);if(this.re===0)switch((z2.re%4+4)%4){case 0:return new Complex$1(Math.pow(this.im,z2.re),0);case 1:return new Complex$1(0,Math.pow(this.im,z2.re));case 2:return new Complex$1(-Math.pow(this.im,z2.re),0);case 3:return new Complex$1(0,-Math.pow(this.im,z2.re))}}if(tIsZero&&z2.re>0)return Complex$1.ZERO;const arg=Math.atan2(this.im,this.re),loh=logHypot(this.re,this.im);let re2=Math.exp(z2.re*loh-z2.im*arg),im=z2.im*loh+z2.re*arg;return new Complex$1(re2*Math.cos(im),re2*Math.sin(im))},"pow"),sqrt:__name(function(){const a2=this.re,b2=this.im;if(b2===0)return a2>=0?new Complex$1(Math.sqrt(a2),0):new Complex$1(0,Math.sqrt(-a2));const r2=hypot(a2,b2);let re2=Math.sqrt(.5*(r2+Math.abs(a2))),im=Math.abs(b2)/(2*re2);return a2>=0?new Complex$1(re2,b2<0?-im:im):new Complex$1(im,b2<0?-re2:re2)},"sqrt"),exp:__name(function(){const er=Math.exp(this.re);return this.im===0?new Complex$1(er,0):new Complex$1(er*Math.cos(this.im),er*Math.sin(this.im))},"exp"),expm1:__name(function(){const a2=this.re,b2=this.im;return new Complex$1(Math.expm1(a2)*Math.cos(b2)+cosm1(b2),Math.exp(a2)*Math.sin(b2))},"expm1"),log:__name(function(){const a2=this.re,b2=this.im;return b2===0&&a2>0?new Complex$1(Math.log(a2),0):new Complex$1(logHypot(a2,b2),Math.atan2(b2,a2))},"log"),abs:__name(function(){return hypot(this.re,this.im)},"abs"),arg:__name(function(){return Math.atan2(this.im,this.re)},"arg"),sin:__name(function(){const a2=this.re,b2=this.im;return new Complex$1(Math.sin(a2)*cosh(b2),Math.cos(a2)*sinh(b2))},"sin"),cos:__name(function(){const a2=this.re,b2=this.im;return new Complex$1(Math.cos(a2)*cosh(b2),-Math.sin(a2)*sinh(b2))},"cos"),tan:__name(function(){const a2=2*this.re,b2=2*this.im,d2=Math.cos(a2)+cosh(b2);return new Complex$1(Math.sin(a2)/d2,sinh(b2)/d2)},"tan"),cot:__name(function(){const a2=2*this.re,b2=2*this.im,d2=Math.cos(a2)-cosh(b2);return new Complex$1(-Math.sin(a2)/d2,sinh(b2)/d2)},"cot"),sec:__name(function(){const a2=this.re,b2=this.im,d2=.5*cosh(2*b2)+.5*Math.cos(2*a2);return new Complex$1(Math.cos(a2)*cosh(b2)/d2,Math.sin(a2)*sinh(b2)/d2)},"sec"),csc:__name(function(){const a2=this.re,b2=this.im,d2=.5*cosh(2*b2)-.5*Math.cos(2*a2);return new Complex$1(Math.sin(a2)*cosh(b2)/d2,-Math.cos(a2)*sinh(b2)/d2)},"csc"),asin:__name(function(){const a2=this.re,b2=this.im,t1=new Complex$1(b2*b2-a2*a2+1,-2*a2*b2).sqrt(),t2=new Complex$1(t1.re-b2,t1.im+a2).log();return new Complex$1(t2.im,-t2.re)},"asin"),acos:__name(function(){const a2=this.re,b2=this.im,t1=new Complex$1(b2*b2-a2*a2+1,-2*a2*b2).sqrt(),t2=new Complex$1(t1.re-b2,t1.im+a2).log();return new Complex$1(Math.PI/2-t2.im,t2.re)},"acos"),atan:__name(function(){const a2=this.re,b2=this.im;if(a2===0){if(b2===1)return new Complex$1(0,1/0);if(b2===-1)return new Complex$1(0,-1/0)}const d2=a2*a2+(1-b2)*(1-b2),t1=new Complex$1((1-b2*b2-a2*a2)/d2,-2*a2/d2).log();return new Complex$1(-.5*t1.im,.5*t1.re)},"atan"),acot:__name(function(){const a2=this.re,b2=this.im;if(b2===0)return new Complex$1(Math.atan2(1,a2),0);const d2=a2*a2+b2*b2;return d2!==0?new Complex$1(a2/d2,-b2/d2).atan():new Complex$1(a2!==0?a2/0:0,b2!==0?-b2/0:0).atan()},"acot"),asec:__name(function(){const a2=this.re,b2=this.im;if(a2===0&&b2===0)return new Complex$1(0,1/0);const d2=a2*a2+b2*b2;return d2!==0?new Complex$1(a2/d2,-b2/d2).acos():new Complex$1(a2!==0?a2/0:0,b2!==0?-b2/0:0).acos()},"asec"),acsc:__name(function(){const a2=this.re,b2=this.im;if(a2===0&&b2===0)return new Complex$1(Math.PI/2,1/0);const d2=a2*a2+b2*b2;return d2!==0?new Complex$1(a2/d2,-b2/d2).asin():new Complex$1(a2!==0?a2/0:0,b2!==0?-b2/0:0).asin()},"acsc"),sinh:__name(function(){const a2=this.re,b2=this.im;return new Complex$1(sinh(a2)*Math.cos(b2),cosh(a2)*Math.sin(b2))},"sinh"),cosh:__name(function(){const a2=this.re,b2=this.im;return new Complex$1(cosh(a2)*Math.cos(b2),sinh(a2)*Math.sin(b2))},"cosh"),tanh:__name(function(){const a2=2*this.re,b2=2*this.im,d2=cosh(a2)+Math.cos(b2);return new Complex$1(sinh(a2)/d2,Math.sin(b2)/d2)},"tanh"),coth:__name(function(){const a2=2*this.re,b2=2*this.im,d2=cosh(a2)-Math.cos(b2);return new Complex$1(sinh(a2)/d2,-Math.sin(b2)/d2)},"coth"),csch:__name(function(){const a2=this.re,b2=this.im,d2=Math.cos(2*b2)-cosh(2*a2);return new Complex$1(-2*sinh(a2)*Math.cos(b2)/d2,2*cosh(a2)*Math.sin(b2)/d2)},"csch"),sech:__name(function(){const a2=this.re,b2=this.im,d2=Math.cos(2*b2)+cosh(2*a2);return new Complex$1(2*cosh(a2)*Math.cos(b2)/d2,-2*sinh(a2)*Math.sin(b2)/d2)},"sech"),asinh:__name(function(){let tmp=this.im;this.im=-this.re,this.re=tmp;const res=this.asin();return this.re=-this.im,this.im=tmp,tmp=res.re,res.re=-res.im,res.im=tmp,res},"asinh"),acosh:__name(function(){const res=this.acos();if(res.im<=0){const tmp=res.re;res.re=-res.im,res.im=tmp}else{const tmp=res.im;res.im=-res.re,res.re=tmp}return res},"acosh"),atanh:__name(function(){const a2=this.re,b2=this.im,noIM=a2>1&&b2===0,oneMinus=1-a2,onePlus=1+a2,d2=oneMinus*oneMinus+b2*b2,x2=d2!==0?new Complex$1((onePlus*oneMinus-b2*b2)/d2,(b2*oneMinus+onePlus*b2)/d2):new Complex$1(a2!==-1?a2/0:0,b2!==0?b2/0:0),temp=x2.re;return x2.re=logHypot(x2.re,x2.im)/2,x2.im=Math.atan2(x2.im,temp)/2,noIM&&(x2.im=-x2.im),x2},"atanh"),acoth:__name(function(){const a2=this.re,b2=this.im;if(a2===0&&b2===0)return new Complex$1(0,Math.PI/2);const d2=a2*a2+b2*b2;return d2!==0?new Complex$1(a2/d2,-b2/d2).atanh():new Complex$1(a2!==0?a2/0:0,b2!==0?-b2/0:0).atanh()},"acoth"),acsch:__name(function(){const a2=this.re,b2=this.im;if(b2===0)return new Complex$1(a2!==0?Math.log(a2+Math.sqrt(a2*a2+1)):1/0,0);const d2=a2*a2+b2*b2;return d2!==0?new Complex$1(a2/d2,-b2/d2).asinh():new Complex$1(a2!==0?a2/0:0,b2!==0?-b2/0:0).asinh()},"acsch"),asech:__name(function(){const a2=this.re,b2=this.im;if(this.isZero())return Complex$1.INFINITY;const d2=a2*a2+b2*b2;return d2!==0?new Complex$1(a2/d2,-b2/d2).acosh():new Complex$1(a2!==0?a2/0:0,b2!==0?-b2/0:0).acosh()},"asech"),inverse:__name(function(){if(this.isZero())return Complex$1.INFINITY;if(this.isInfinite())return Complex$1.ZERO;const a2=this.re,b2=this.im,d2=a2*a2+b2*b2;return new Complex$1(a2/d2,-b2/d2)},"inverse"),conjugate:__name(function(){return new Complex$1(this.re,-this.im)},"conjugate"),neg:__name(function(){return new Complex$1(-this.re,-this.im)},"neg"),ceil:__name(function(places){return places=Math.pow(10,places||0),new Complex$1(Math.ceil(this.re*places)/places,Math.ceil(this.im*places)/places)},"ceil"),floor:__name(function(places){return places=Math.pow(10,places||0),new Complex$1(Math.floor(this.re*places)/places,Math.floor(this.im*places)/places)},"floor"),round:__name(function(places){return places=Math.pow(10,places||0),new Complex$1(Math.round(this.re*places)/places,Math.round(this.im*places)/places)},"round"),equals:__name(function(a2,b2){const z2=parse$1(a2,b2);return Math.abs(z2.re-this.re)<=Complex$1.EPSILON&&Math.abs(z2.im-this.im)<=Complex$1.EPSILON},"equals"),clone:__name(function(){return new Complex$1(this.re,this.im)},"clone"),toString:__name(function(){let a2=this.re,b2=this.im,ret="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a2)<Complex$1.EPSILON&&(a2=0),Math.abs(b2)<Complex$1.EPSILON&&(b2=0),b2===0?ret+a2:(a2!==0?(ret+=a2,ret+=" ",b2<0?(b2=-b2,ret+="-"):ret+="+",ret+=" "):b2<0&&(b2=-b2,ret+="-"),b2!==1&&(ret+=b2),ret+"i"))},"toString"),toVector:__name(function(){return[this.re,this.im]},"toVector"),valueOf:__name(function(){return this.im===0?this.re:null},"valueOf"),isNaN:__name(function(){return isNaN(this.re)||isNaN(this.im)},"isNaN"),isZero:__name(function(){return this.im===0&&this.re===0},"isZero"),isFinite:__name(function(){return isFinite(this.re)&&isFinite(this.im)},"isFinite"),isInfinite:__name(function(){return!this.isFinite()},"isInfinite")};Complex$1.ZERO=new Complex$1(0,0);Complex$1.ONE=new Complex$1(1,0);Complex$1.I=new Complex$1(0,1);Complex$1.PI=new Complex$1(Math.PI,0);Complex$1.E=new Complex$1(Math.E,0);Complex$1.INFINITY=new Complex$1(1/0,1/0);Complex$1.NAN=new Complex$1(NaN,NaN);Complex$1.EPSILON=1e-15;var name$r="Complex",dependencies$r=[],createComplexClass=factory(name$r,dependencies$r,()=>(Object.defineProperty(Complex$1,"name",{value:"Complex"}),Complex$1.prototype.constructor=Complex$1,Complex$1.prototype.type="Complex",Complex$1.prototype.isComplex=!0,Complex$1.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Complex$1.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Complex$1.prototype.format=function(options){var str="",im=this.im,re2=this.re,strRe=format$2(this.re,options),strIm=format$2(this.im,options),precision=isNumber(options)?options:options?options.precision:null;if(precision!==null){var epsilon2=Math.pow(10,-precision);Math.abs(re2/im)<epsilon2&&(re2=0),Math.abs(im/re2)<epsilon2&&(im=0)}return im===0?str=strRe:re2===0?im===1?str="i":im===-1?str="-i":str=strIm+"i":im<0?im===-1?str=strRe+" - i":str=strRe+" - "+strIm.substring(1)+"i":im===1?str=strRe+" + i":str=strRe+" + "+strIm+"i",str},Complex$1.fromPolar=function(args){switch(arguments.length){case 1:{var arg=arguments[0];if(typeof arg=="object")return Complex$1(arg);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r2=arguments[0],phi=arguments[1];if(isNumber(r2)){if(isUnit(phi)&&phi.hasBase("ANGLE")&&(phi=phi.toNumber("rad")),isNumber(phi))return new Complex$1({r:r2,phi});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Complex$1.prototype.valueOf=Complex$1.prototype.toString,Complex$1.fromJSON=function(json){return new Complex$1(json)},Complex$1.compare=function(a2,b2){return a2.re>b2.re?1:a2.re<b2.re?-1:a2.im>b2.im?1:a2.im<b2.im?-1:0},Complex$1),{isClass:!0});typeof BigInt>"u"&&(BigInt=__name(function(n3){if(isNaN(n3))throw new Error("");return n3},"BigInt"));const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_FIVE=BigInt(5),C_TEN=BigInt(10),MAX_CYCLE_LEN=2e3,P={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(n3,s2){try{n3=BigInt(n3)}catch{throw InvalidParameter()}return n3*s2}__name(assign,"assign");function trunc(x2){return typeof x2=="bigint"?x2:Math.floor(x2)}__name(trunc,"trunc");function newFraction(n3,d2){if(d2===C_ZERO)throw DivisionByZero();const f2=Object.create(Fraction$1.prototype);f2.s=n3<C_ZERO?-C_ONE:C_ONE,n3=n3<C_ZERO?-n3:n3;const a2=gcd(n3,d2);return f2.n=n3/a2,f2.d=d2/a2,f2}__name(newFraction,"newFraction");function factorize(num){const factors={};let n3=num,i2=C_TWO,s2=C_FIVE-C_ONE;for(;s2<=n3;){for(;n3%i2===C_ZERO;)n3/=i2,factors[i2]=(factors[i2]||C_ZERO)+C_ONE;s2+=C_ONE+C_TWO*i2++}return n3!==num?n3>1&&(factors[n3]=(factors[n3]||C_ZERO)+C_ONE):factors[num]=(factors[num]||C_ZERO)+C_ONE,factors}__name(factorize,"factorize");const parse=__name(function(p1,p2){let n3=C_ZERO,d2=C_ONE,s2=C_ONE;if(p1!=null)if(p2!==void 0){if(typeof p1=="bigint")n3=p1;else{if(isNaN(p1))throw InvalidParameter();if(p1%1!==0)throw NonIntegerParameter();n3=BigInt(p1)}if(typeof p2=="bigint")d2=p2;else{if(isNaN(p2))throw InvalidParameter();if(p2%1!==0)throw NonIntegerParameter();d2=BigInt(p2)}s2=n3*d2}else if(typeof p1=="object"){if("d"in p1&&"n"in p1)n3=BigInt(p1.n),d2=BigInt(p1.d),"s"in p1&&(n3*=BigInt(p1.s));else if(0 in p1)n3=BigInt(p1[0]),1 in p1&&(d2=BigInt(p1[1]));else if(typeof p1=="bigint")n3=p1;else throw InvalidParameter();s2=n3*d2}else if(typeof p1=="number"){if(isNaN(p1))throw InvalidParameter();if(p1<0&&(s2=-C_ONE,p1=-p1),p1%1===0)n3=BigInt(p1);else{let z2=1,A2=0,B2=1,C3=1,D2=1,N2=1e7;for(p1>=1&&(z2=10**Math.floor(1+Math.log10(p1)),p1/=z2);B2<=N2&&D2<=N2;){let M2=(A2+C3)/(B2+D2);if(p1===M2){B2+D2<=N2?(n3=A2+C3,d2=B2+D2):D2>B2?(n3=C3,d2=D2):(n3=A2,d2=B2);break}else p1>M2?(A2+=C3,B2+=D2):(C3+=A2,D2+=B2),B2>N2?(n3=C3,d2=D2):(n3=A2,d2=B2)}n3=BigInt(n3)*BigInt(z2),d2=BigInt(d2)}}else if(typeof p1=="string"){let ndx=0,v2=C_ZERO,w2=C_ZERO,x2=C_ZERO,y2=C_ONE,z2=C_ONE,match=p1.replace(/_/g,"").match(/\d+|./g);if(match===null)throw InvalidParameter();if(match[ndx]==="-"?(s2=-C_ONE,ndx++):match[ndx]==="+"&&ndx++,match.length===ndx+1?w2=assign(match[ndx++],s2):match[ndx+1]==="."||match[ndx]==="."?(match[ndx]!=="."&&(v2=assign(match[ndx++],s2)),ndx++,(ndx+1===match.length||match[ndx+1]==="("&&match[ndx+3]===")"||match[ndx+1]==="'"&&match[ndx+3]==="'")&&(w2=assign(match[ndx],s2),y2=C_TEN**BigInt(match[ndx].length),ndx++),(match[ndx]==="("&&match[ndx+2]===")"||match[ndx]==="'"&&match[ndx+2]==="'")&&(x2=assign(match[ndx+1],s2),z2=C_TEN**BigInt(match[ndx+1].length)-C_ONE,ndx+=3)):match[ndx+1]==="/"||match[ndx+1]===":"?(w2=assign(match[ndx],s2),y2=assign(match[ndx+2],C_ONE),ndx+=3):match[ndx+3]==="/"&&match[ndx+1]===" "&&(v2=assign(match[ndx],s2),w2=assign(match[ndx+2],s2),y2=assign(match[ndx+4],C_ONE),ndx+=5),match.length<=ndx)d2=y2*z2,s2=n3=x2+d2*v2+z2*w2;else throw InvalidParameter()}else if(typeof p1=="bigint")n3=p1,s2=p1,d2=C_ONE;else throw InvalidParameter();if(d2===C_ZERO)throw DivisionByZero();P.s=s2<C_ZERO?-C_ONE:C_ONE,P.n=n3<C_ZERO?-n3:n3,P.d=d2<C_ZERO?-d2:d2},"parse");function modpow(b2,e2,m2){let r2=C_ONE;for(;e2>C_ZERO;b2=b2*b2%m2,e2>>=C_ONE)e2&C_ONE&&(r2=r2*b2%m2);return r2}__name(modpow,"modpow");function cycleLen(n3,d2){for(;d2%C_TWO===C_ZERO;d2/=C_TWO);for(;d2%C_FIVE===C_ZERO;d2/=C_FIVE);if(d2===C_ONE)return C_ZERO;let rem=C_TEN%d2,t2=1;for(;rem!==C_ONE;t2++)if(rem=rem*C_TEN%d2,t2>MAX_CYCLE_LEN)return C_ZERO;return BigInt(t2)}__name(cycleLen,"cycleLen");function cycleStart(n3,d2,len){let rem1=C_ONE,rem2=modpow(C_TEN,len,d2);for(let t2=0;t2<300;t2++){if(rem1===rem2)return BigInt(t2);rem1=rem1*C_TEN%d2,rem2=rem2*C_TEN%d2}return 0}__name(cycleStart,"cycleStart");function gcd(a2,b2){if(!a2)return b2;if(!b2)return a2;for(;;){if(a2%=b2,!a2)return b2;if(b2%=a2,!b2)return a2}}__name(gcd,"gcd");function Fraction$1(a2,b2){if(parse(a2,b2),this instanceof Fraction$1)a2=gcd(P.d,P.n),this.s=P.s,this.n=P.n/a2,this.d=P.d/a2;else return newFraction(P.s*P.n,P.d)}__name(Fraction$1,"Fraction$1");var DivisionByZero=__name(function(){return new Error("Division by Zero")},"DivisionByZero"),InvalidParameter=__name(function(){return new Error("Invalid argument")},"InvalidParameter"),NonIntegerParameter=__name(function(){return new Error("Parameters must be integer")},"NonIntegerParameter");Fraction$1.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:__name(function(){return newFraction(this.n,this.d)},"abs"),neg:__name(function(){return newFraction(-this.s*this.n,this.d)},"neg"),add:__name(function(a2,b2){return parse(a2,b2),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},"add"),sub:__name(function(a2,b2){return parse(a2,b2),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},"sub"),mul:__name(function(a2,b2){return parse(a2,b2),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},"mul"),div:__name(function(a2,b2){return parse(a2,b2),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},"div"),clone:__name(function(){return newFraction(this.s*this.n,this.d)},"clone"),mod:__name(function(a2,b2){if(a2===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse(a2,b2),C_ZERO===P.n*this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},"mod"),gcd:__name(function(a2,b2){return parse(a2,b2),newFraction(gcd(P.n,this.n)*gcd(P.d,this.d),P.d*this.d)},"gcd"),lcm:__name(function(a2,b2){return parse(a2,b2),P.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P.n*this.n,gcd(P.n,this.n)*gcd(P.d,this.d))},"lcm"),inverse:__name(function(){return newFraction(this.s*this.d,this.n)},"inverse"),pow:__name(function(a2,b2){if(parse(a2,b2),P.d===C_ONE)return P.s<C_ZERO?newFraction((this.s*this.d)**P.n,this.n**P.n):newFraction((this.s*this.n)**P.n,this.d**P.n);if(this.s<C_ZERO)return null;let N2=factorize(this.n),D2=factorize(this.d),n3=C_ONE,d2=C_ONE;for(let k2 in N2)if(k2!=="1"){if(k2==="0"){n3=C_ZERO;break}if(N2[k2]*=P.n,N2[k2]%P.d===C_ZERO)N2[k2]/=P.d;else return null;n3*=BigInt(k2)**N2[k2]}for(let k2 in D2)if(k2!=="1"){if(D2[k2]*=P.n,D2[k2]%P.d===C_ZERO)D2[k2]/=P.d;else return null;d2*=BigInt(k2)**D2[k2]}return P.s<C_ZERO?newFraction(d2,n3):newFraction(n3,d2)},"pow"),log:__name(function(a2,b2){if(parse(a2,b2),this.s<=C_ZERO||P.s<=C_ZERO)return null;const allPrimes={},baseFactors=factorize(P.n),T1=factorize(P.d),numberFactors=factorize(this.n),T2=factorize(this.d);for(const prime in T1)baseFactors[prime]=(baseFactors[prime]||C_ZERO)-T1[prime];for(const prime in T2)numberFactors[prime]=(numberFactors[prime]||C_ZERO)-T2[prime];for(const prime in baseFactors)prime!=="1"&&(allPrimes[prime]=!0);for(const prime in numberFactors)prime!=="1"&&(allPrimes[prime]=!0);let retN=null,retD=null;for(const prime in allPrimes){const baseExponent=baseFactors[prime]||C_ZERO,numberExponent=numberFactors[prime]||C_ZERO;if(baseExponent===C_ZERO){if(numberExponent!==C_ZERO)return null;continue}let curN=numberExponent,curD=baseExponent;const gcdValue=gcd(curN,curD);if(curN/=gcdValue,curD/=gcdValue,retN===null&&retD===null)retN=curN,retD=curD;else if(curN*retD!==retN*curD)return null}return retN!==null&&retD!==null?newFraction(retN,retD):null},"log"),equals:__name(function(a2,b2){return parse(a2,b2),this.s*this.n*P.d===P.s*P.n*this.d},"equals"),lt:__name(function(a2,b2){return parse(a2,b2),this.s*this.n*P.d<P.s*P.n*this.d},"lt"),lte:__name(function(a2,b2){return parse(a2,b2),this.s*this.n*P.d<=P.s*P.n*this.d},"lte"),gt:__name(function(a2,b2){return parse(a2,b2),this.s*this.n*P.d>P.s*P.n*this.d},"gt"),gte:__name(function(a2,b2){return parse(a2,b2),this.s*this.n*P.d>=P.s*P.n*this.d},"gte"),compare:__name(function(a2,b2){parse(a2,b2);let t2=this.s*this.n*P.d-P.s*P.n*this.d;return(C_ZERO<t2)-(t2<C_ZERO)},"compare"),ceil:__name(function(places){return places=C_TEN**BigInt(places||0),newFraction(trunc(this.s*places*this.n/this.d)+(places*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),places)},"ceil"),floor:__name(function(places){return places=C_TEN**BigInt(places||0),newFraction(trunc(this.s*places*this.n/this.d)-(places*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),places)},"floor"),round:__name(function(places){return places=C_TEN**BigInt(places||0),newFraction(trunc(this.s*places*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(places*this.n%this.d)>this.d?C_ONE:C_ZERO),places)},"round"),roundTo:__name(function(a2,b2){parse(a2,b2);const n3=this.n*P.d,d2=this.d*P.n,r2=n3%d2;let k2=trunc(n3/d2);return r2+r2>=d2&&k2++,newFraction(this.s*k2*P.n,P.d)},"roundTo"),divisible:__name(function(a2,b2){return parse(a2,b2),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},"divisible"),valueOf:__name(function(){return Number(this.s*this.n)/Number(this.d)},"valueOf"),toString:__name(function(dec){let N2=this.n,D2=this.d;dec=dec||15;let cycLen=cycleLen(N2,D2),cycOff=cycleStart(N2,D2,cycLen),str=this.s<C_ZERO?"-":"";if(str+=trunc(N2/D2),N2%=D2,N2*=C_TEN,N2&&(str+="."),cycLen){for(let i2=cycOff;i2--;)str+=trunc(N2/D2),N2%=D2,N2*=C_TEN;str+="(";for(let i2=cycLen;i2--;)str+=trunc(N2/D2),N2%=D2,N2*=C_TEN;str+=")"}else for(let i2=dec;N2&&i2--;)str+=trunc(N2/D2),N2%=D2,N2*=C_TEN;return str},"toString"),toFraction:__name(function(showMixed){let n3=this.n,d2=this.d,str=this.s<C_ZERO?"-":"";if(d2===C_ONE)str+=n3;else{let whole=trunc(n3/d2);showMixed&&whole>C_ZERO&&(str+=whole,str+=" ",n3%=d2),str+=n3,str+="/",str+=d2}return str},"toFraction"),toLatex:__name(function(showMixed){let n3=this.n,d2=this.d,str=this.s<C_ZERO?"-":"";if(d2===C_ONE)str+=n3;else{let whole=trunc(n3/d2);showMixed&&whole>C_ZERO&&(str+=whole,n3%=d2),str+="\\frac{",str+=n3,str+="}{",str+=d2,str+="}"}return str},"toLatex"),toContinued:__name(function(){let a2=this.n,b2=this.d,res=[];do{res.push(trunc(a2/b2));let t2=a2%b2;a2=b2,b2=t2}while(a2!==C_ONE);return res},"toContinued"),simplify:__name(function(eps){const ieps=BigInt(1/(eps||.001)|0),thisABS=this.abs(),cont=thisABS.toContinued();for(let i2=1;i2<cont.length;i2++){let s2=newFraction(cont[i2-1],C_ONE);for(let k2=i2-2;k2>=0;k2--)s2=s2.inverse().add(cont[k2]);let t2=s2.sub(thisABS);if(t2.n*ieps<t2.d)return s2.mul(this.s)}return this},"simplify")};var name$q="Fraction",dependencies$q=[],createFractionClass=factory(name$q,dependencies$q,()=>(Object.defineProperty(Fraction$1,"name",{value:"Fraction"}),Fraction$1.prototype.constructor=Fraction$1,Fraction$1.prototype.type="Fraction",Fraction$1.prototype.isFraction=!0,Fraction$1.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Fraction$1.fromJSON=function(json){return new Fraction$1(json)},Fraction$1),{isClass:!0}),name$p="Matrix",dependencies$p=[],createMatrixClass=factory(name$p,dependencies$p,()=>{function Matrix2(){if(!(this instanceof Matrix2))throw new SyntaxError("Constructor must be called with the new operator")}return __name(Matrix2,"Matrix"),Matrix2.prototype.type="Matrix",Matrix2.prototype.isMatrix=!0,Matrix2.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},Matrix2.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},Matrix2.prototype.create=function(data,datatype){throw new Error("Cannot invoke create on a Matrix interface")},Matrix2.prototype.subset=function(index,replacement,defaultValue){throw new Error("Cannot invoke subset on a Matrix interface")},Matrix2.prototype.get=function(index){throw new Error("Cannot invoke get on a Matrix interface")},Matrix2.prototype.set=function(index,value,defaultValue){throw new Error("Cannot invoke set on a Matrix interface")},Matrix2.prototype.resize=function(size2,defaultValue){throw new Error("Cannot invoke resize on a Matrix interface")},Matrix2.prototype.reshape=function(size2,defaultValue){throw new Error("Cannot invoke reshape on a Matrix interface")},Matrix2.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},Matrix2.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},Matrix2.prototype.map=function(callback,skipZeros){throw new Error("Cannot invoke map on a Matrix interface")},Matrix2.prototype.forEach=function(callback){throw new Error("Cannot invoke forEach on a Matrix interface")},Matrix2.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},Matrix2.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},Matrix2.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},Matrix2.prototype.format=function(options){throw new Error("Cannot invoke format on a Matrix interface")},Matrix2.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},Matrix2},{isClass:!0});function formatBigNumberToBase(n3,base,size2){var BigNumberCtor=n3.constructor,big2=new BigNumberCtor(2),suffix="";if(size2){if(size2<1)throw new Error("size must be in greater than 0");if(!isInteger(size2))throw new Error("size must be an integer");if(n3.greaterThan(big2.pow(size2-1).sub(1))||n3.lessThan(big2.pow(size2-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(size2-1,", 2^").concat(size2-1,"-1]"));if(!n3.isInteger())throw new Error("Value must be an integer");n3.lessThan(0)&&(n3=n3.add(big2.pow(size2))),suffix="i".concat(size2)}switch(base){case 2:return"".concat(n3.toBinary()).concat(suffix);case 8:return"".concat(n3.toOctal()).concat(suffix);case 16:return"".concat(n3.toHexadecimal()).concat(suffix);default:throw new Error("Base ".concat(base," not supported "))}}__name(formatBigNumberToBase,"formatBigNumberToBase");function format$1(value,options){if(typeof options=="function")return options(value);if(!value.isFinite())return value.isNaN()?"NaN":value.gt(0)?"Infinity":"-Infinity";var{notation,precision,wordSize}=normalizeFormatOptions(options);switch(notation){case"fixed":return toFixed(value,precision);case"exponential":return toExponential(value,precision);case"engineering":return toEngineering(value,precision);case"bin":return formatBigNumberToBase(value,2,wordSize);case"oct":return formatBigNumberToBase(value,8,wordSize);case"hex":return formatBigNumberToBase(value,16,wordSize);case"auto":{var lowerExp=_toNumberOrDefault(options==null?void 0:options.lowerExp,-3),upperExp=_toNumberOrDefault(options==null?void 0:options.upperExp,5);if(value.isZero())return"0";var str,rounded=value.toSignificantDigits(precision),exp2=rounded.e;return exp2>=lowerExp&&exp2<upperExp?str=rounded.toFixed():str=toExponential(value,precision),str.replace(/((\.\d*?)(0+))($|e)/,function(){var digits2=arguments[2],e2=arguments[4];return digits2!=="."?digits2+e2:e2})}default:throw new Error('Unknown notation "'+notation+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}__name(format$1,"format$1");function toEngineering(value,precision){var e2=value.e,newExp=e2%3===0?e2:e2<0?e2-3-e2%3:e2-e2%3,valueWithoutExp=value.mul(Math.pow(10,-newExp)),valueStr=valueWithoutExp.toPrecision(precision);if(valueStr.includes("e")){var BigNumber2=value.constructor;valueStr=new BigNumber2(valueStr).toFixed()}return valueStr+"e"+(e2>=0?"+":"")+newExp.toString()}__name(toEngineering,"toEngineering");function toExponential(value,precision){return precision!==void 0?value.toExponential(precision-1):value.toExponential()}__name(toExponential,"toExponential");function toFixed(value,precision){return value.toFixed(precision)}__name(toFixed,"toFixed");function _toNumberOrDefault(value,defaultValue){return isNumber(value)?value:isBigNumber(value)?value.toNumber():defaultValue}__name(_toNumberOrDefault,"_toNumberOrDefault");function format(value,options){var result=_format(value,options);return options&&typeof options=="object"&&"truncate"in options&&result.length>options.truncate?result.substring(0,options.truncate-3)+"...":result}__name(format,"format");function _format(value,options){if(typeof value=="number")return format$2(value,options);if(isBigNumber(value))return format$1(value,options);if(looksLikeFraction(value))return!options||options.fraction!=="decimal"?"".concat(value.s*value.n,"/").concat(value.d):value.toString();if(Array.isArray(value))return formatArray(value,options);if(isString(value))return stringify(value);if(typeof value=="function")return value.syntax?String(value.syntax):"function";if(value&&typeof value=="object"){if(typeof value.format=="function")return value.format(options);if(value&&value.toString(options)!=={}.toString())return value.toString(options);var entries=Object.keys(value).map(key=>stringify(key)+": "+format(value[key],options));return"{"+entries.join(", ")+"}"}return String(value)}__name(_format,"_format");function stringify(value){for(var text=String(value),escaped="",i2=0;i2<text.length;){var c=text.charAt(i2);escaped+=c in controlCharacters?controlCharacters[c]:c,i2++}return'"'+escaped+'"'}__name(stringify,"stringify");var controlCharacters={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function formatArray(array,options){if(Array.isArray(array)){for(var str="[",len=array.length,i2=0;i2<len;i2++)i2!==0&&(str+=", "),str+=formatArray(array[i2],options);return str+="]",str}else return format(array,options)}__name(formatArray,"formatArray");function looksLikeFraction(value){return value&&typeof value=="object"&&typeof value.s=="bigint"&&typeof value.n=="bigint"&&typeof value.d=="bigint"||!1}__name(looksLikeFraction,"looksLikeFraction");function DimensionError(actual,expected,relation){if(!(this instanceof DimensionError))throw new SyntaxError("Constructor must be called with the new operator");this.actual=actual,this.expected=expected,this.relation=relation,this.message="Dimension mismatch ("+(Array.isArray(actual)?"["+actual.join(", ")+"]":actual)+" "+(this.relation||"!=")+" "+(Array.isArray(expected)?"["+expected.join(", ")+"]":expected)+")",this.stack=new Error().stack}__name(DimensionError,"DimensionError");DimensionError.prototype=new RangeError;DimensionError.prototype.constructor=RangeError;DimensionError.prototype.name="DimensionError";DimensionError.prototype.isDimensionError=!0;function IndexError(index,min2,max2){if(!(this instanceof IndexError))throw new SyntaxError("Constructor must be called with the new operator");this.index=index,arguments.length<3?(this.min=0,this.max=min2):(this.min=min2,this.max=max2),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}__name(IndexError,"IndexError");IndexError.prototype=new RangeError;IndexError.prototype.constructor=RangeError;IndexError.prototype.name="IndexError";IndexError.prototype.isIndexError=!0;function arraySize(x2){for(var s2=[];Array.isArray(x2);)s2.push(x2.length),x2=x2[0];return s2}__name(arraySize,"arraySize");function _validate(array,size2,dim){var i2,len=array.length;if(len!==size2[dim])throw new DimensionError(len,size2[dim]);if(dim<size2.length-1){var dimNext=dim+1;for(i2=0;i2<len;i2++){var child=array[i2];if(!Array.isArray(child))throw new DimensionError(size2.length-1,size2.length,"<");_validate(array[i2],size2,dimNext)}}else for(i2=0;i2<len;i2++)if(Array.isArray(array[i2]))throw new DimensionError(size2.length+1,size2.length,">")}__name(_validate,"_validate");function validate(array,size2){var isScalar=size2.length===0;if(isScalar){if(Array.isArray(array))throw new DimensionError(array.length,0)}else _validate(array,size2,0)}__name(validate,"validate");function validateIndex(index,length){if(index!==void 0){if(!isNumber(index)||!isInteger(index))throw new TypeError("Index must be an integer (value: "+index+")");if(index<0||typeof length=="number"&&index>=length)throw new IndexError(index,length)}}__name(validateIndex,"validateIndex");function resize(array,size2,defaultValue){if(!Array.isArray(size2))throw new TypeError("Array expected");if(size2.length===0)throw new Error("Resizing to scalar is not supported");size2.forEach(function(value){if(!isNumber(value)||!isInteger(value)||value<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format(size2)+")")}),(isNumber(array)||isBigNumber(array))&&(array=[array]);var _defaultValue=defaultValue!==void 0?defaultValue:0;return _resize(array,size2,0,_defaultValue),array}__name(resize,"resize");function _resize(array,size2,dim,defaultValue){var i2,elem,oldLen=array.length,newLen=size2[dim],minLen=Math.min(oldLen,newLen);if(array.length=newLen,dim<size2.length-1){var dimNext=dim+1;for(i2=0;i2<minLen;i2++)elem=array[i2],Array.isArray(elem)||(elem=[elem],array[i2]=elem),_resize(elem,size2,dimNext,defaultValue);for(i2=minLen;i2<newLen;i2++)elem=[],array[i2]=elem,_resize(elem,size2,dimNext,defaultValue)}else{for(i2=0;i2<minLen;i2++)for(;Array.isArray(array[i2]);)array[i2]=array[i2][0];for(i2=minLen;i2<newLen;i2++)array[i2]=defaultValue}}__name(_resize,"_resize");function reshape(array,sizes){var flatArray=flatten(array,!0),currentLength=flatArray.length;if(!Array.isArray(array)||!Array.isArray(sizes))throw new TypeError("Array expected");if(sizes.length===0)throw new DimensionError(0,currentLength,"!=");sizes=processSizesWildcard(sizes,currentLength);var newLength=product(sizes);if(currentLength!==newLength)throw new DimensionError(newLength,currentLength,"!=");try{return _reshape(flatArray,sizes)}catch(e2){throw e2 instanceof DimensionError?new DimensionError(newLength,currentLength,"!="):e2}}__name(reshape,"reshape");function processSizesWildcard(sizes,currentLength){var newLength=product(sizes),processedSizes=sizes.slice(),WILDCARD=-1,wildCardIndex=sizes.indexOf(WILDCARD),isMoreThanOneWildcard=sizes.indexOf(WILDCARD,wildCardIndex+1)>=0;if(isMoreThanOneWildcard)throw new Error("More than one wildcard in sizes");var hasWildcard=wildCardIndex>=0,canReplaceWildcard=currentLength%newLength===0;if(hasWildcard)if(canReplaceWildcard)processedSizes[wildCardIndex]=-currentLength/newLength;else throw new Error("Could not replace wildcard, since "+currentLength+" is no multiple of "+-newLength);return processedSizes}__name(processSizesWildcard,"processSizesWildcard");function product(array){return array.reduce((prev,curr)=>prev*curr,1)}__name(product,"product");function _reshape(array,sizes){for(var tmpArray=array,tmpArray2,sizeIndex=sizes.length-1;sizeIndex>0;sizeIndex--){var size2=sizes[sizeIndex];tmpArray2=[];for(var length=tmpArray.length/size2,i2=0;i2<length;i2++)tmpArray2.push(tmpArray.slice(i2*size2,(i2+1)*size2));tmpArray=tmpArray2}return tmpArray}__name(_reshape,"_reshape");function unsqueeze(array,dims,outer,size2){var s2=size2||arraySize(array);if(outer)for(var i2=0;i2<outer;i2++)array=[array],s2.unshift(1);for(array=_unsqueeze(array,dims,0);s2.length<dims;)s2.push(1);return array}__name(unsqueeze,"unsqueeze");function _unsqueeze(array,dims,dim){var i2,ii;if(Array.isArray(array)){var next=dim+1;for(i2=0,ii=array.length;i2<ii;i2++)array[i2]=_unsqueeze(array[i2],dims,next)}else for(var d2=dim;d2<dims;d2++)array=[array];return array}__name(_unsqueeze,"_unsqueeze");function flatten(array){var isRectangular=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(array))return array;if(typeof isRectangular!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var flat=[];return isRectangular?_flattenRectangular(array):_flatten(array),flat;function _flatten(array2){for(var i2=0;i2<array2.length;i2++){var item=array2[i2];Array.isArray(item)?_flatten(item):flat.push(item)}}__name(_flatten,"_flatten");function _flattenRectangular(array2){if(Array.isArray(array2[0]))for(var i2=0;i2<array2.length;i2++)_flattenRectangular(array2[i2]);else for(var _i=0;_i<array2.length;_i++)flat.push(array2[_i])}__name(_flattenRectangular,"_flattenRectangular")}__name(flatten,"flatten");function getArrayDataType(array,typeOf2){for(var type,length=0,i2=0;i2<array.length;i2++){var item=array[i2],_isArray=Array.isArray(item);if(i2===0&&_isArray&&(length=item.length),_isArray&&item.length!==length)return;var itemType=_isArray?getArrayDataType(item,typeOf2):typeOf2(item);if(type===void 0)type=itemType;else if(type!==itemType)return"mixed"}return type}__name(getArrayDataType,"getArrayDataType");function concatRecursive(a2,b2,concatDim,dim){if(dim<concatDim){if(a2.length!==b2.length)throw new DimensionError(a2.length,b2.length);for(var c=[],i2=0;i2<a2.length;i2++)c[i2]=concatRecursive(a2[i2],b2[i2],concatDim,dim+1);return c}else return a2.concat(b2)}__name(concatRecursive,"concatRecursive");function concat(){var arrays=Array.prototype.slice.call(arguments,0,-1),concatDim=Array.prototype.slice.call(arguments,-1);if(arrays.length===1)return arrays[0];if(arrays.length>1)return arrays.slice(1).reduce(function(A2,B2){return concatRecursive(A2,B2,concatDim,0)},arrays[0]);throw new Error("Wrong number of arguments in function concat")}__name(concat,"concat");function broadcastSizes(){for(var _len=arguments.length,sizes=new Array(_len),_key=0;_key<_len;_key++)sizes[_key]=arguments[_key];for(var dimensions=sizes.map(s2=>s2.length),N2=Math.max(...dimensions),sizeMax=new Array(N2).fill(null),i2=0;i2<sizes.length;i2++)for(var size2=sizes[i2],dim=dimensions[i2],j2=0;j2<dim;j2++){var n3=N2-dim+j2;size2[j2]>sizeMax[n3]&&(sizeMax[n3]=size2[j2])}for(var _i2=0;_i2<sizes.length;_i2++)checkBroadcastingRules(sizes[_i2],sizeMax);return sizeMax}__name(broadcastSizes,"broadcastSizes");function checkBroadcastingRules(size2,toSize){for(var N2=toSize.length,dim=size2.length,j2=0;j2<dim;j2++){var n3=N2-dim+j2;if(size2[j2]<toSize[n3]&&size2[j2]>1||size2[j2]>toSize[n3])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(size2,") not possible to broadcast dimension ").concat(dim," with size ").concat(size2[j2]," to size ").concat(toSize[n3]))}}__name(checkBroadcastingRules,"checkBroadcastingRules");function broadcastTo(array,toSize){var Asize=arraySize(array);if(deepStrictEqual(Asize,toSize))return array;checkBroadcastingRules(Asize,toSize);var broadcastedSize=broadcastSizes(Asize,toSize),N2=broadcastedSize.length,paddedSize=[...Array(N2-Asize.length).fill(1),...Asize],A2=clone(array);Asize.length<N2&&(A2=reshape(A2,paddedSize),Asize=arraySize(A2));for(var dim=0;dim<N2;dim++)Asize[dim]<broadcastedSize[dim]&&(A2=stretch(A2,broadcastedSize[dim],dim),Asize=arraySize(A2));return A2}__name(broadcastTo,"broadcastTo");function stretch(arrayToStretch,sizeToStretch,dimToStretch){return concat(...Array(sizeToStretch).fill(arrayToStretch),dimToStretch)}__name(stretch,"stretch");function get(array,index){if(!Array.isArray(array))throw new Error("Array expected");var size2=arraySize(array);if(index.length!==size2.length)throw new DimensionError(index.length,size2.length);for(var x2=0;x2<index.length;x2++)validateIndex(index[x2],size2[x2]);return index.reduce((acc,curr)=>acc[curr],array)}__name(get,"get");function deepMap$1(array,callback){var skipIndex=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(array.length===0)return[];if(skipIndex)return recursiveMap(array);var index=[];return recursiveMapWithIndex(array,0);function recursiveMapWithIndex(value,depth){if(Array.isArray(value)){for(var N2=value.length,result=Array(N2),i2=0;i2<N2;i2++)index[depth]=i2,result[i2]=recursiveMapWithIndex(value[i2],depth+1);return result}else return callback(value,index.slice(0,depth),array)}function recursiveMap(value){if(Array.isArray(value)){for(var N2=value.length,result=Array(N2),i2=0;i2<N2;i2++)result[i2]=recursiveMap(value[i2]);return result}else return callback(value)}}__name(deepMap$1,"deepMap$1");function clone(array){return _extends([],array)}__name(clone,"clone");function optimizeCallback(callback,array,name2){var isUnary=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typedFunction.isTypedFunction(callback)){var numberOfArguments;if(isUnary)numberOfArguments=1;else{var firstIndex=(array.isMatrix?array.size():arraySize(array)).map(()=>0),firstValue=array.isMatrix?array.get(firstIndex):get(array,firstIndex);numberOfArguments=_findNumberOfArgumentsTyped(callback,firstValue,firstIndex,array)}var fastCallback;if(array.isMatrix&&array.dataType!=="mixed"&&array.dataType!==void 0){var singleSignature=_findSingleSignatureWithArity(callback,numberOfArguments);fastCallback=singleSignature!==void 0?singleSignature:callback}else fastCallback=callback;return numberOfArguments>=1&&numberOfArguments<=3?{isUnary:numberOfArguments===1,fn:__name(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _tryFunctionWithArgs(fastCallback,args.slice(0,numberOfArguments),name2,callback.name)},"fn")}:{isUnary:!1,fn:__name(function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return _tryFunctionWithArgs(fastCallback,args,name2,callback.name)},"fn")}}return isUnary===void 0?{isUnary:_findIfCallbackIsUnary(callback),fn:callback}:{isUnary,fn:callback}}__name(optimizeCallback,"optimizeCallback");function _findSingleSignatureWithArity(callback,arity){var matchingFunctions=[];if(Object.entries(callback.signatures).forEach(_ref=>{var[signature,func]=_ref;signature.split(",").length===arity&&matchingFunctions.push(func)}),matchingFunctions.length===1)return matchingFunctions[0]}__name(_findSingleSignatureWithArity,"_findSingleSignatureWithArity");function _findIfCallbackIsUnary(callback){if(callback.length!==1)return!1;var callbackStr=callback.toString();if(/arguments/.test(callbackStr))return!1;var paramsStr=callbackStr.match(/\(.*?\)/);return!/\.\.\./.test(paramsStr)}__name(_findIfCallbackIsUnary,"_findIfCallbackIsUnary");function _findNumberOfArgumentsTyped(callback,value,index,array){for(var testArgs=[value,index,array],i2=3;i2>0;i2--){var args=testArgs.slice(0,i2);if(typedFunction.resolve(callback,args)!==null)return i2}}__name(_findNumberOfArgumentsTyped,"_findNumberOfArgumentsTyped");function _tryFunctionWithArgs(func,args,mappingFnName,callbackName){try{return func(...args)}catch(err){_createCallbackError(err,args,mappingFnName,callbackName)}}__name(_tryFunctionWithArgs,"_tryFunctionWithArgs");function _createCallbackError(err,args,mappingFnName,callbackName){var _err$data;if(err instanceof TypeError&&((_err$data=err.data)===null||_err$data===void 0?void 0:_err$data.category)==="wrongType"){var argsDesc=[];throw argsDesc.push("value: ".concat(typeOf(args[0]))),args.length>=2&&argsDesc.push("index: ".concat(typeOf(args[1]))),args.length>=3&&argsDesc.push("array: ".concat(typeOf(args[2]))),new TypeError("Function ".concat(mappingFnName," cannot apply callback arguments ")+"".concat(callbackName,"(").concat(argsDesc.join(", "),") at index ").concat(JSON.stringify(args[1])))}else throw new TypeError("Function ".concat(mappingFnName," cannot apply callback arguments ")+"to function ".concat(callbackName,": ").concat(err.message))}__name(_createCallbackError,"_createCallbackError");var name$o="DenseMatrix",dependencies$o=["Matrix"],createDenseMatrixClass=factory(name$o,dependencies$o,_ref=>{var{Matrix:Matrix2}=_ref;function DenseMatrix2(data,datatype){if(!(this instanceof DenseMatrix2))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!isString(datatype))throw new Error("Invalid datatype: "+datatype);if(isMatrix(data))data.type==="DenseMatrix"?(this._data=clone$2(data._data),this._size=clone$2(data._size),this._datatype=datatype||data._datatype):(this._data=data.toArray(),this._size=data.size(),this._datatype=datatype||data._datatype);else if(data&&isArray(data.data)&&isArray(data.size))this._data=data.data,this._size=data.size,validate(this._data,this._size),this._datatype=datatype||data.datatype;else if(isArray(data))this._data=preprocess(data),this._size=arraySize(this._data),validate(this._data,this._size),this._datatype=datatype;else{if(data)throw new TypeError("Unsupported type of data ("+typeOf(data)+")");this._data=[],this._size=[0],this._datatype=datatype}}__name(DenseMatrix2,"DenseMatrix"),DenseMatrix2.prototype=new Matrix2,DenseMatrix2.prototype.createDenseMatrix=function(data,datatype){return new DenseMatrix2(data,datatype)},Object.defineProperty(DenseMatrix2,"name",{value:"DenseMatrix"}),DenseMatrix2.prototype.constructor=DenseMatrix2,DenseMatrix2.prototype.type="DenseMatrix",DenseMatrix2.prototype.isDenseMatrix=!0,DenseMatrix2.prototype.getDataType=function(){return getArrayDataType(this._data,typeOf)},DenseMatrix2.prototype.storage=function(){return"dense"},DenseMatrix2.prototype.datatype=function(){return this._datatype},DenseMatrix2.prototype.create=function(data,datatype){return new DenseMatrix2(data,datatype)},DenseMatrix2.prototype.subset=function(index,replacement,defaultValue){switch(arguments.length){case 1:return _get(this,index);case 2:case 3:return _set(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}},DenseMatrix2.prototype.get=function(index){return get(this._data,index)},DenseMatrix2.prototype.set=function(index,value,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length<this._size.length)throw new DimensionError(index.length,this._size.length,"<");var i2,ii,indexI,size2=index.map(function(i3){return i3+1});_fit(this,size2,defaultValue);var data=this._data;for(i2=0,ii=index.length-1;i2<ii;i2++)indexI=index[i2],validateIndex(indexI,data.length),data=data[indexI];return indexI=index[index.length-1],validateIndex(indexI,data.length),data[indexI]=value,this};function _get(matrix2,index){if(!isIndex(index))throw new TypeError("Invalid index");var isScalar=index.isScalar();if(isScalar)return matrix2.get(index.min());var size2=index.size();if(size2.length!==matrix2._size.length)throw new DimensionError(size2.length,matrix2._size.length);for(var min2=index.min(),max2=index.max(),i2=0,ii=matrix2._size.length;i2<ii;i2++)validateIndex(min2[i2],matrix2._size[i2]),validateIndex(max2[i2],matrix2._size[i2]);var returnMatrix=new DenseMatrix2([]),submatrix=_getSubmatrix(matrix2._data,index);return returnMatrix._size=submatrix.size,returnMatrix._datatype=matrix2._datatype,returnMatrix._data=submatrix.data,returnMatrix}__name(_get,"_get");function _getSubmatrix(data,index){var maxDepth=index.size().length-1,size2=Array(maxDepth);return{data:getSubmatrixRecursive(data),size:size2};function getSubmatrixRecursive(data2){var depth=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ranges=index.dimension(depth);return size2[depth]=ranges.size()[0],depth<maxDepth?ranges.map(rangeIndex=>(validateIndex(rangeIndex,data2.length),getSubmatrixRecursive(data2[rangeIndex],depth+1))).valueOf():ranges.map(rangeIndex=>(validateIndex(rangeIndex,data2.length),data2[rangeIndex])).valueOf()}}__name(_getSubmatrix,"_getSubmatrix");function _set(matrix2,index,submatrix,defaultValue){if(!index||index.isIndex!==!0)throw new TypeError("Invalid index");var iSize=index.size(),isScalar=index.isScalar(),sSize;if(isMatrix(submatrix)?(sSize=submatrix.size(),submatrix=submatrix.valueOf()):sSize=arraySize(submatrix),isScalar){if(sSize.length!==0)throw new TypeError("Scalar expected");matrix2.set(index.min(),submatrix,defaultValue)}else{if(!deepStrictEqual(sSize,iSize))try{sSize.length===0?submatrix=broadcastTo([submatrix],iSize):submatrix=broadcastTo(submatrix,iSize),sSize=arraySize(submatrix)}catch{}if(iSize.length<matrix2._size.length)throw new DimensionError(iSize.length,matrix2._size.length,"<");if(sSize.length<iSize.length){for(var i2=0,outer=0;iSize[i2]===1&&sSize[i2]===1;)i2++;for(;iSize[i2]===1;)outer++,i2++;submatrix=unsqueeze(submatrix,iSize.length,outer,sSize)}if(!deepStrictEqual(iSize,sSize))throw new DimensionError(iSize,sSize,">");var size2=index.max().map(function(i3){return i3+1});_fit(matrix2,size2,defaultValue),_setSubmatrix(matrix2._data,index,submatrix)}return matrix2}__name(_set,"_set");function _setSubmatrix(data,index,submatrix){var maxDepth=index.size().length-1;setSubmatrixRecursive(data,submatrix);function setSubmatrixRecursive(data2,submatrix2){var depth=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,range=index.dimension(depth);depth<maxDepth?range.forEach((rangeIndex,i2)=>{validateIndex(rangeIndex,data2.length),setSubmatrixRecursive(data2[rangeIndex],submatrix2[i2[0]],depth+1)}):range.forEach((rangeIndex,i2)=>{validateIndex(rangeIndex,data2.length),data2[rangeIndex]=submatrix2[i2[0]]})}__name(setSubmatrixRecursive,"setSubmatrixRecursive")}__name(_setSubmatrix,"_setSubmatrix"),DenseMatrix2.prototype.resize=function(size2,defaultValue,copy){if(!isCollection(size2))throw new TypeError("Array or Matrix expected");var sizeArray=size2.valueOf().map(value=>Array.isArray(value)&&value.length===1?value[0]:value),m2=copy?this.clone():this;return _resize2(m2,sizeArray,defaultValue)};function _resize2(matrix2,size2,defaultValue){if(size2.length===0){for(var v2=matrix2._data;isArray(v2);)v2=v2[0];return v2}return matrix2._size=size2.slice(0),matrix2._data=resize(matrix2._data,matrix2._size,defaultValue),matrix2}__name(_resize2,"_resize"),DenseMatrix2.prototype.reshape=function(size2,copy){var m2=copy?this.clone():this;m2._data=reshape(m2._data,size2);var currentLength=m2._size.reduce((length,size3)=>length*size3);return m2._size=processSizesWildcard(size2,currentLength),m2};function _fit(matrix2,size2,defaultValue){for(var newSize=matrix2._size.slice(0),changed=!1;newSize.length<size2.length;)newSize.push(0),changed=!0;for(var i2=0,ii=size2.length;i2<ii;i2++)size2[i2]>newSize[i2]&&(newSize[i2]=size2[i2],changed=!0);changed&&_resize2(matrix2,newSize,defaultValue)}__name(_fit,"_fit"),DenseMatrix2.prototype.clone=function(){var m2=new DenseMatrix2({data:clone$2(this._data),size:clone$2(this._size),datatype:this._datatype});return m2},DenseMatrix2.prototype.size=function(){return this._size.slice(0)},DenseMatrix2.prototype.map=function(callback){var isUnary=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,me2=this,maxDepth=me2._size.length-1;if(maxDepth<0)return me2.clone();var fastCallback=optimizeCallback(callback,me2,"map",isUnary),fastCallbackFn=fastCallback.fn,result=me2.create(void 0,me2._datatype);if(result._size=me2._size,isUnary||fastCallback.isUnary)return result._data=iterateUnary(me2._data),result;if(maxDepth===0){for(var inputData=me2.valueOf(),data=Array(inputData.length),i2=0;i2<inputData.length;i2++)data[i2]=fastCallbackFn(inputData[i2],[i2],me2);return result._data=data,result}var index=[];return result._data=iterate(me2._data),result;function iterate(data2){var depth=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,result2=Array(data2.length);if(depth<maxDepth)for(var _i=0;_i<data2.length;_i++)index[depth]=_i,result2[_i]=iterate(data2[_i],depth+1);else for(var _i2=0;_i2<data2.length;_i2++)index[depth]=_i2,result2[_i2]=fastCallbackFn(data2[_i2],index.slice(),me2);return result2}__name(iterate,"iterate");function iterateUnary(data2){var depth=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,result2=Array(data2.length);if(depth<maxDepth)for(var _i3=0;_i3<data2.length;_i3++)result2[_i3]=iterateUnary(data2[_i3],depth+1);else for(var _i4=0;_i4<data2.length;_i4++)result2[_i4]=fastCallbackFn(data2[_i4]);return result2}__name(iterateUnary,"iterateUnary")},DenseMatrix2.prototype.forEach=function(callback){var isUnary=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,me2=this,maxDepth=me2._size.length-1;if(maxDepth<0)return;var fastCallback=optimizeCallback(callback,me2,"map",isUnary),fastCallbackFn=fastCallback.fn;if(isUnary||fastCallback.isUnary){iterateUnary(me2._data);return}if(maxDepth===0){for(var i2=0;i2<me2._data.length;i2++)fastCallbackFn(me2._data[i2],[i2],me2);return}var index=[];iterate(me2._data);function iterate(data){var depth=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(depth<maxDepth)for(var _i5=0;_i5<data.length;_i5++)index[depth]=_i5,iterate(data[_i5],depth+1);else for(var _i6=0;_i6<data.length;_i6++)index[depth]=_i6,fastCallbackFn(data[_i6],index.slice(),me2)}__name(iterate,"iterate");function iterateUnary(data){var depth=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(depth<maxDepth)for(var _i7=0;_i7<data.length;_i7++)iterateUnary(data[_i7],depth+1);else for(var _i8=0;_i8<data.length;_i8++)fastCallbackFn(data[_i8])}__name(iterateUnary,"iterateUnary")},DenseMatrix2.prototype[Symbol.iterator]=function*(){var maxDepth=this._size.length-1;if(!(maxDepth<0)){if(maxDepth===0){for(var i2=0;i2<this._data.length;i2++)yield{value:this._data[i2],index:[i2]};return}var index=[],_recurse=__name(function*(value,depth){if(depth<maxDepth)for(var _i9=0;_i9<value.length;_i9++)index[depth]=_i9,yield*_recurse(value[_i9],depth+1);else for(var _i0=0;_i0<value.length;_i0++)index[depth]=_i0,yield{value:value[_i0],index:index.slice()}},"recurse");yield*_recurse(this._data,0)}},DenseMatrix2.prototype.rows=function(){var result=[],s2=this.size();if(s2.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var data=this._data;for(var row of data)result.push(new DenseMatrix2([row],this._datatype));return result},DenseMatrix2.prototype.columns=function(){var _this=this,result=[],s2=this.size();if(s2.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var data=this._data,_loop=__name(function(i3){var col=data.map(row=>[row[i3]]);result.push(new DenseMatrix2(col,_this._datatype))},"_loop"),i2=0;i2<s2[1];i2++)_loop(i2);return result},DenseMatrix2.prototype.toArray=function(){return clone$2(this._data)},DenseMatrix2.prototype.valueOf=function(){return this._data},DenseMatrix2.prototype.format=function(options){return format(this._data,options)},DenseMatrix2.prototype.toString=function(){return format(this._data)},DenseMatrix2.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},DenseMatrix2.prototype.diagonal=function(k2){if(k2){if(isBigNumber(k2)&&(k2=k2.toNumber()),!isNumber(k2)||!isInteger(k2))throw new TypeError("The parameter k must be an integer number")}else k2=0;for(var kSuper=k2>0?k2:0,kSub=k2<0?-k2:0,rows=this._size[0],columns=this._size[1],n3=Math.min(rows-kSub,columns-kSuper),data=[],i2=0;i2<n3;i2++)data[i2]=this._data[i2+kSub][i2+kSuper];return new DenseMatrix2({data,size:[n3],datatype:this._datatype})},DenseMatrix2.diagonal=function(size2,value,k2,defaultValue){if(!isArray(size2))throw new TypeError("Array expected, size parameter");if(size2.length!==2)throw new Error("Only two dimensions matrix are supported");if(size2=size2.map(function(s2){if(isBigNumber(s2)&&(s2=s2.toNumber()),!isNumber(s2)||!isInteger(s2)||s2<1)throw new Error("Size values must be positive integers");return s2}),k2){if(isBigNumber(k2)&&(k2=k2.toNumber()),!isNumber(k2)||!isInteger(k2))throw new TypeError("The parameter k must be an integer number")}else k2=0;var kSuper=k2>0?k2:0,kSub=k2<0?-k2:0,rows=size2[0],columns=size2[1],n3=Math.min(rows-kSub,columns-kSuper),_value;if(isArray(value)){if(value.length!==n3)throw new Error("Invalid value array length");_value=__name(function(i2){return value[i2]},"_value")}else if(isMatrix(value)){var ms=value.size();if(ms.length!==1||ms[0]!==n3)throw new Error("Invalid matrix length");_value=__name(function(i2){return value.get([i2])},"_value")}else _value=__name(function(){return value},"_value");defaultValue||(defaultValue=isBigNumber(_value(0))?_value(0).mul(0):0);var data=[];if(size2.length>0){data=resize(data,size2,defaultValue);for(var d2=0;d2<n3;d2++)data[d2+kSub][d2+kSuper]=_value(d2)}return new DenseMatrix2({data,size:[rows,columns]})},DenseMatrix2.fromJSON=function(json){return new DenseMatrix2(json)},DenseMatrix2.prototype.swapRows=function(i2,j2){if(!isNumber(i2)||!isInteger(i2)||!isNumber(j2)||!isInteger(j2))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(i2,this._size[0]),validateIndex(j2,this._size[0]),DenseMatrix2._swapRows(i2,j2,this._data),this},DenseMatrix2._swapRows=function(i2,j2,data){var vi=data[i2];data[i2]=data[j2],data[j2]=vi};function preprocess(data){return isMatrix(data)?preprocess(data.valueOf()):isArray(data)?data.map(preprocess):data}return __name(preprocess,"preprocess"),DenseMatrix2},{isClass:!0});function deepMap(array,callback,skipZeros){if(!skipZeros)return isMatrix(array)?array.map(x2=>callback(x2),!1,!0):deepMap$1(array,callback,!0);var skipZerosCallback=__name(x2=>x2===0?x2:callback(x2),"skipZerosCallback");return isMatrix(array)?array.map(x2=>skipZerosCallback(x2),!1,!0):deepMap$1(array,skipZerosCallback,!0)}__name(deepMap,"deepMap");var n1="number",n2="number, number";function absNumber(a2){return Math.abs(a2)}__name(absNumber,"absNumber");absNumber.signature=n1;function addNumber(a2,b2){return a2+b2}__name(addNumber,"addNumber");addNumber.signature=n2;function subtractNumber(a2,b2){return a2-b2}__name(subtractNumber,"subtractNumber");subtractNumber.signature=n2;function multiplyNumber(a2,b2){return a2*b2}__name(multiplyNumber,"multiplyNumber");multiplyNumber.signature=n2;function unaryMinusNumber(x2){return-x2}__name(unaryMinusNumber,"unaryMinusNumber");unaryMinusNumber.signature=n1;function nearlyEqual(a2,b2){var relTol=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,absTol=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(relTol<=0)throw new Error("Relative tolerance must be greater than 0");if(absTol<0)throw new Error("Absolute tolerance must be at least 0");return a2.isNaN()||b2.isNaN()?!1:!a2.isFinite()||!b2.isFinite()?a2.eq(b2):a2.eq(b2)?!0:a2.minus(b2).abs().lte(a2.constructor.max(a2.constructor.max(a2.abs(),b2.abs()).mul(relTol),absTol))}__name(nearlyEqual,"nearlyEqual");var name$n="isZero",dependencies$n=["typed","equalScalar"],createIsZero=factory(name$n,dependencies$n,_ref=>{var{typed:typed2,equalScalar:equalScalar2}=_ref;return typed2(name$n,{"number | BigNumber | Complex | Fraction":__name(x2=>equalScalar2(x2,0),"number | BigNumber | Complex | Fraction"),bigint:__name(x2=>x2===0n,"bigint"),Unit:typed2.referToSelf(self2=>x2=>typed2.find(self2,x2.valueType())(x2.value)),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2))})});function complexEquals(x2,y2,relTol,absTol){return nearlyEqual$1(x2.re,y2.re,relTol,absTol)&&nearlyEqual$1(x2.im,y2.im,relTol,absTol)}__name(complexEquals,"complexEquals");var createCompareUnits=factory("compareUnits",["typed"],_ref=>{var{typed:typed2}=_ref;return{"Unit, Unit":typed2.referToSelf(self2=>(x2,y2)=>{if(!x2.equalBase(y2))throw new Error("Cannot compare units with different base");return typed2.find(self2,[x2.valueType(),y2.valueType()])(x2.value,y2.value)})}}),name$m="equalScalar",dependencies$m=["typed","config"],createEqualScalar=factory(name$m,dependencies$m,_ref=>{var{typed:typed2,config:config3}=_ref,compareUnits=createCompareUnits({typed:typed2});return typed2(name$m,{"boolean, boolean":__name(function(x2,y2){return x2===y2},"boolean_boolean"),"number, number":__name(function(x2,y2){return nearlyEqual$1(x2,y2,config3.relTol,config3.absTol)},"number_number"),"BigNumber, BigNumber":__name(function(x2,y2){return x2.eq(y2)||nearlyEqual(x2,y2,config3.relTol,config3.absTol)},"BigNumber_BigNumber"),"bigint, bigint":__name(function(x2,y2){return x2===y2},"bigint_bigint"),"Fraction, Fraction":__name(function(x2,y2){return x2.equals(y2)},"Fraction_Fraction"),"Complex, Complex":__name(function(x2,y2){return complexEquals(x2,y2,config3.relTol,config3.absTol)},"Complex_Complex")},compareUnits)});factory(name$m,["typed","config"],_ref2=>{var{typed:typed2,config:config3}=_ref2;return typed2(name$m,{"number, number":__name(function(x2,y2){return nearlyEqual$1(x2,y2,config3.relTol,config3.absTol)},"number_number")})});var name$l="SparseMatrix",dependencies$l=["typed","equalScalar","Matrix"],createSparseMatrixClass=factory(name$l,dependencies$l,_ref=>{var{typed:typed2,equalScalar:equalScalar2,Matrix:Matrix2}=_ref;function SparseMatrix2(data,datatype){if(!(this instanceof SparseMatrix2))throw new SyntaxError("Constructor must be called with the new operator");if(datatype&&!isString(datatype))throw new Error("Invalid datatype: "+datatype);if(isMatrix(data))_createFromMatrix(this,data,datatype);else if(data&&isArray(data.index)&&isArray(data.ptr)&&isArray(data.size))this._values=data.values,this._index=data.index,this._ptr=data.ptr,this._size=data.size,this._datatype=datatype||data.datatype;else if(isArray(data))_createFromArray(this,data,datatype);else{if(data)throw new TypeError("Unsupported type of data ("+typeOf(data)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=datatype}}__name(SparseMatrix2,"SparseMatrix");function _createFromMatrix(matrix2,source,datatype){source.type==="SparseMatrix"?(matrix2._values=source._values?clone$2(source._values):void 0,matrix2._index=clone$2(source._index),matrix2._ptr=clone$2(source._ptr),matrix2._size=clone$2(source._size),matrix2._datatype=datatype||source._datatype):_createFromArray(matrix2,source.valueOf(),datatype||source._datatype)}__name(_createFromMatrix,"_createFromMatrix");function _createFromArray(matrix2,data,datatype){matrix2._values=[],matrix2._index=[],matrix2._ptr=[],matrix2._datatype=datatype;var rows=data.length,columns=0,eq=equalScalar2,zero=0;if(isString(datatype)&&(eq=typed2.find(equalScalar2,[datatype,datatype])||equalScalar2,zero=typed2.convert(0,datatype)),rows>0){var j2=0;do{matrix2._ptr.push(matrix2._index.length);for(var i2=0;i2<rows;i2++){var row=data[i2];if(isArray(row)){if(j2===0&&columns<row.length&&(columns=row.length),j2<row.length){var v2=row[j2];eq(v2,zero)||(matrix2._values.push(v2),matrix2._index.push(i2))}}else j2===0&&columns<1&&(columns=1),eq(row,zero)||(matrix2._values.push(row),matrix2._index.push(i2))}j2++}while(j2<columns)}matrix2._ptr.push(matrix2._index.length),matrix2._size=[rows,columns]}__name(_createFromArray,"_createFromArray"),SparseMatrix2.prototype=new Matrix2,SparseMatrix2.prototype.createSparseMatrix=function(data,datatype){return new SparseMatrix2(data,datatype)},Object.defineProperty(SparseMatrix2,"name",{value:"SparseMatrix"}),SparseMatrix2.prototype.constructor=SparseMatrix2,SparseMatrix2.prototype.type="SparseMatrix",SparseMatrix2.prototype.isSparseMatrix=!0,SparseMatrix2.prototype.getDataType=function(){return getArrayDataType(this._values,typeOf)},SparseMatrix2.prototype.storage=function(){return"sparse"},SparseMatrix2.prototype.datatype=function(){return this._datatype},SparseMatrix2.prototype.create=function(data,datatype){return new SparseMatrix2(data,datatype)},SparseMatrix2.prototype.density=function(){var rows=this._size[0],columns=this._size[1];return rows!==0&&columns!==0?this._index.length/(rows*columns):0},SparseMatrix2.prototype.subset=function(index,replacement,defaultValue){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return _getsubset(this,index);case 2:case 3:return _setsubset(this,index,replacement,defaultValue);default:throw new SyntaxError("Wrong number of arguments")}};function _getsubset(matrix2,idx){if(!isIndex(idx))throw new TypeError("Invalid index");var isScalar=idx.isScalar();if(isScalar)return matrix2.get(idx.min());var size2=idx.size();if(size2.length!==matrix2._size.length)throw new DimensionError(size2.length,matrix2._size.length);var i2,ii,k2,kk,min2=idx.min(),max2=idx.max();for(i2=0,ii=matrix2._size.length;i2<ii;i2++)validateIndex(min2[i2],matrix2._size[i2]),validateIndex(max2[i2],matrix2._size[i2]);var mvalues=matrix2._values,mindex=matrix2._index,mptr=matrix2._ptr,rows=idx.dimension(0),columns=idx.dimension(1),w2=[],pv=[];rows.forEach(function(i3,r2){pv[i3]=r2[0],w2[i3]=!0});var values=mvalues?[]:void 0,index=[],ptr=[];return columns.forEach(function(j2){for(ptr.push(index.length),k2=mptr[j2],kk=mptr[j2+1];k2<kk;k2++)i2=mindex[k2],w2[i2]===!0&&(index.push(pv[i2]),values&&values.push(mvalues[k2]))}),ptr.push(index.length),new SparseMatrix2({values,index,ptr,size:size2,datatype:matrix2._datatype})}__name(_getsubset,"_getsubset");function _setsubset(matrix2,index,submatrix,defaultValue){if(!index||index.isIndex!==!0)throw new TypeError("Invalid index");var iSize=index.size(),isScalar=index.isScalar(),sSize;if(isMatrix(submatrix)?(sSize=submatrix.size(),submatrix=submatrix.toArray()):sSize=arraySize(submatrix),isScalar){if(sSize.length!==0)throw new TypeError("Scalar expected");matrix2.set(index.min(),submatrix,defaultValue)}else{if(iSize.length!==1&&iSize.length!==2)throw new DimensionError(iSize.length,matrix2._size.length,"<");if(sSize.length<iSize.length){for(var i2=0,outer=0;iSize[i2]===1&&sSize[i2]===1;)i2++;for(;iSize[i2]===1;)outer++,i2++;submatrix=unsqueeze(submatrix,iSize.length,outer,sSize)}if(!deepStrictEqual(iSize,sSize))throw new DimensionError(iSize,sSize,">");if(iSize.length===1){var range=index.dimension(0);range.forEach(function(dataIndex,subIndex){validateIndex(dataIndex),matrix2.set([dataIndex,0],submatrix[subIndex[0]],defaultValue)})}else{var firstDimensionRange=index.dimension(0),secondDimensionRange=index.dimension(1);firstDimensionRange.forEach(function(firstDataIndex,firstSubIndex){validateIndex(firstDataIndex),secondDimensionRange.forEach(function(secondDataIndex,secondSubIndex){validateIndex(secondDataIndex),matrix2.set([firstDataIndex,secondDataIndex],submatrix[firstSubIndex[0]][secondSubIndex[0]],defaultValue)})})}}return matrix2}__name(_setsubset,"_setsubset"),SparseMatrix2.prototype.get=function(index){if(!isArray(index))throw new TypeError("Array expected");if(index.length!==this._size.length)throw new DimensionError(index.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var i2=index[0],j2=index[1];validateIndex(i2,this._size[0]),validateIndex(j2,this._size[1]);var k2=_getValueIndex(i2,this._ptr[j2],this._ptr[j2+1],this._index);return k2<this._ptr[j2+1]&&this._index[k2]===i2?this._values[k2]:0},SparseMatrix2.prototype.set=function(index,v2,defaultValue){if(!isArray(index))throw new TypeError("Array expected");if(index.length!==this._size.length)throw new DimensionError(index.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var i2=index[0],j2=index[1],rows=this._size[0],columns=this._size[1],eq=equalScalar2,zero=0;isString(this._datatype)&&(eq=typed2.find(equalScalar2,[this._datatype,this._datatype])||equalScalar2,zero=typed2.convert(0,this._datatype)),(i2>rows-1||j2>columns-1)&&(_resize2(this,Math.max(i2+1,rows),Math.max(j2+1,columns),defaultValue),rows=this._size[0],columns=this._size[1]),validateIndex(i2,rows),validateIndex(j2,columns);var k2=_getValueIndex(i2,this._ptr[j2],this._ptr[j2+1],this._index);return k2<this._ptr[j2+1]&&this._index[k2]===i2?eq(v2,zero)?_remove(k2,j2,this._values,this._index,this._ptr):this._values[k2]=v2:eq(v2,zero)||_insert(k2,i2,j2,v2,this._values,this._index,this._ptr),this};function _getValueIndex(i2,top,bottom,index){if(bottom-top===0)return bottom;for(var r2=top;r2<bottom;r2++)if(index[r2]===i2)return r2;return top}__name(_getValueIndex,"_getValueIndex");function _remove(k2,j2,values,index,ptr){values.splice(k2,1),index.splice(k2,1);for(var x2=j2+1;x2<ptr.length;x2++)ptr[x2]--}__name(_remove,"_remove");function _insert(k2,i2,j2,v2,values,index,ptr){values.splice(k2,0,v2),index.splice(k2,0,i2);for(var x2=j2+1;x2<ptr.length;x2++)ptr[x2]++}__name(_insert,"_insert"),SparseMatrix2.prototype.resize=function(size2,defaultValue,copy){if(!isCollection(size2))throw new TypeError("Array or Matrix expected");var sizeArray=size2.valueOf().map(value=>Array.isArray(value)&&value.length===1?value[0]:value);if(sizeArray.length!==2)throw new Error("Only two dimensions matrix are supported");sizeArray.forEach(function(value){if(!isNumber(value)||!isInteger(value)||value<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format(sizeArray)+")")});var m2=copy?this.clone():this;return _resize2(m2,sizeArray[0],sizeArray[1],defaultValue)};function _resize2(matrix2,rows,columns,defaultValue){var value=defaultValue||0,eq=equalScalar2,zero=0;isString(matrix2._datatype)&&(eq=typed2.find(equalScalar2,[matrix2._datatype,matrix2._datatype])||equalScalar2,zero=typed2.convert(0,matrix2._datatype),value=typed2.convert(value,matrix2._datatype));var ins=!eq(value,zero),r2=matrix2._size[0],c=matrix2._size[1],i2,j2,k2;if(columns>c){for(j2=c;j2<columns;j2++)if(matrix2._ptr[j2]=matrix2._values.length,ins)for(i2=0;i2<r2;i2++)matrix2._values.push(value),matrix2._index.push(i2);matrix2._ptr[columns]=matrix2._values.length}else columns<c&&(matrix2._ptr.splice(columns+1,c-columns),matrix2._values.splice(matrix2._ptr[columns],matrix2._values.length),matrix2._index.splice(matrix2._ptr[columns],matrix2._index.length));if(c=columns,rows>r2){if(ins){var n3=0;for(j2=0;j2<c;j2++){matrix2._ptr[j2]=matrix2._ptr[j2]+n3,k2=matrix2._ptr[j2+1]+n3;var p2=0;for(i2=r2;i2<rows;i2++,p2++)matrix2._values.splice(k2+p2,0,value),matrix2._index.splice(k2+p2,0,i2),n3++}matrix2._ptr[c]=matrix2._values.length}}else if(rows<r2){var d2=0;for(j2=0;j2<c;j2++){matrix2._ptr[j2]=matrix2._ptr[j2]-d2;var k0=matrix2._ptr[j2],k1=matrix2._ptr[j2+1]-d2;for(k2=k0;k2<k1;k2++)i2=matrix2._index[k2],i2>rows-1&&(matrix2._values.splice(k2,1),matrix2._index.splice(k2,1),d2++)}matrix2._ptr[j2]=matrix2._values.length}return matrix2._size[0]=rows,matrix2._size[1]=columns,matrix2}__name(_resize2,"_resize"),SparseMatrix2.prototype.reshape=function(sizes,copy){if(!isArray(sizes))throw new TypeError("Array expected");if(sizes.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");sizes.forEach(function(value){if(!isNumber(value)||!isInteger(value)||value<=-2||value===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+format(sizes)+")")});var currentLength=this._size[0]*this._size[1];sizes=processSizesWildcard(sizes,currentLength);var newLength=sizes[0]*sizes[1];if(currentLength!==newLength)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var m2=copy?this.clone():this;if(this._size[0]===sizes[0]&&this._size[1]===sizes[1])return m2;for(var colIndex=[],i2=0;i2<m2._ptr.length;i2++)for(var j2=0;j2<m2._ptr[i2+1]-m2._ptr[i2];j2++)colIndex.push(i2);for(var values=m2._values.slice(),rowIndex=m2._index.slice(),_i=0;_i<m2._index.length;_i++){var r1=rowIndex[_i],c1=colIndex[_i],flat=r1*m2._size[1]+c1;colIndex[_i]=flat%sizes[1],rowIndex[_i]=Math.floor(flat/sizes[1])}m2._values.length=0,m2._index.length=0,m2._ptr.length=sizes[1]+1,m2._size=sizes.slice();for(var _i2=0;_i2<m2._ptr.length;_i2++)m2._ptr[_i2]=0;for(var h2=0;h2<values.length;h2++){var _i3=rowIndex[h2],_j=colIndex[h2],v2=values[h2],k2=_getValueIndex(_i3,m2._ptr[_j],m2._ptr[_j+1],m2._index);_insert(k2,_i3,_j,v2,m2._values,m2._index,m2._ptr)}return m2},SparseMatrix2.prototype.clone=function(){var m2=new SparseMatrix2({values:this._values?clone$2(this._values):void 0,index:clone$2(this._index),ptr:clone$2(this._ptr),size:clone$2(this._size),datatype:this._datatype});return m2},SparseMatrix2.prototype.size=function(){return this._size.slice(0)},SparseMatrix2.prototype.map=function(callback,skipZeros){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var me2=this,rows=this._size[0],columns=this._size[1],fastCallback=optimizeCallback(callback,me2,"map"),invoke=__name(function(v2,i2,j2){return fastCallback.fn(v2,[i2,j2],me2)},"invoke");return _map(this,0,rows-1,0,columns-1,invoke,skipZeros)};function _map(matrix2,minRow,maxRow,minColumn,maxColumn,callback,skipZeros){var values=[],index=[],ptr=[],eq=equalScalar2,zero=0;isString(matrix2._datatype)&&(eq=typed2.find(equalScalar2,[matrix2._datatype,matrix2._datatype])||equalScalar2,zero=typed2.convert(0,matrix2._datatype));for(var invoke=__name(function(v2,x2,y2){var value2=callback(v2,x2,y2);eq(value2,zero)||(values.push(value2),index.push(x2))},"invoke"),j2=minColumn;j2<=maxColumn;j2++){ptr.push(values.length);var k0=matrix2._ptr[j2],k1=matrix2._ptr[j2+1];if(skipZeros)for(var k2=k0;k2<k1;k2++){var i2=matrix2._index[k2];i2>=minRow&&i2<=maxRow&&invoke(matrix2._values[k2],i2-minRow,j2-minColumn)}else{for(var _values={},_k=k0;_k<k1;_k++){var _i4=matrix2._index[_k];_values[_i4]=matrix2._values[_k]}for(var _i5=minRow;_i5<=maxRow;_i5++){var value=_i5 in _values?_values[_i5]:0;invoke(value,_i5-minRow,j2-minColumn)}}}return ptr.push(values.length),new SparseMatrix2({values,index,ptr,size:[maxRow-minRow+1,maxColumn-minColumn+1]})}__name(_map,"_map"),SparseMatrix2.prototype.forEach=function(callback,skipZeros){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var me2=this,rows=this._size[0],columns=this._size[1],fastCallback=optimizeCallback(callback,me2,"forEach"),j2=0;j2<columns;j2++){var k0=this._ptr[j2],k1=this._ptr[j2+1];if(skipZeros)for(var k2=k0;k2<k1;k2++){var i2=this._index[k2];fastCallback.fn(this._values[k2],[i2,j2],me2)}else{for(var values={},_k2=k0;_k2<k1;_k2++){var _i6=this._index[_k2];values[_i6]=this._values[_k2]}for(var _i7=0;_i7<rows;_i7++){var value=_i7 in values?values[_i7]:0;fastCallback.fn(value,[_i7,j2],me2)}}}},SparseMatrix2.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var columns=this._size[1],j2=0;j2<columns;j2++)for(var k0=this._ptr[j2],k1=this._ptr[j2+1],k2=k0;k2<k1;k2++){var i2=this._index[k2];yield{value:this._values[k2],index:[i2,j2]}}},SparseMatrix2.prototype.toArray=function(){return _toArray(this._values,this._index,this._ptr,this._size,!0)},SparseMatrix2.prototype.valueOf=function(){return _toArray(this._values,this._index,this._ptr,this._size,!1)};function _toArray(values,index,ptr,size2,copy){var rows=size2[0],columns=size2[1],a2=[],i2,j2;for(i2=0;i2<rows;i2++)for(a2[i2]=[],j2=0;j2<columns;j2++)a2[i2][j2]=0;for(j2=0;j2<columns;j2++)for(var k0=ptr[j2],k1=ptr[j2+1],k2=k0;k2<k1;k2++)i2=index[k2],a2[i2][j2]=values?copy?clone$2(values[k2]):values[k2]:1;return a2}return __name(_toArray,"_toArray"),SparseMatrix2.prototype.format=function(options){for(var rows=this._size[0],columns=this._size[1],density=this.density(),str="Sparse Matrix ["+format(rows,options)+" x "+format(columns,options)+"] density: "+format(density,options)+`
`,j2=0;j2<columns;j2++)for(var k0=this._ptr[j2],k1=this._ptr[j2+1],k2=k0;k2<k1;k2++){var i2=this._index[k2];str+=`
    (`+format(i2,options)+", "+format(j2,options)+") ==> "+(this._values?format(this._values[k2],options):"X")}return str},SparseMatrix2.prototype.toString=function(){return format(this.toArray())},SparseMatrix2.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},SparseMatrix2.prototype.diagonal=function(k2){if(k2){if(isBigNumber(k2)&&(k2=k2.toNumber()),!isNumber(k2)||!isInteger(k2))throw new TypeError("The parameter k must be an integer number")}else k2=0;var kSuper=k2>0?k2:0,kSub=k2<0?-k2:0,rows=this._size[0],columns=this._size[1],n3=Math.min(rows-kSub,columns-kSuper),values=[],index=[],ptr=[];ptr[0]=0;for(var j2=kSuper;j2<columns&&values.length<n3;j2++)for(var k0=this._ptr[j2],k1=this._ptr[j2+1],x2=k0;x2<k1;x2++){var i2=this._index[x2];if(i2===j2-kSuper+kSub){values.push(this._values[x2]),index[values.length-1]=i2-kSub;break}}return ptr.push(values.length),new SparseMatrix2({values,index,ptr,size:[n3,1]})},SparseMatrix2.fromJSON=function(json){return new SparseMatrix2(json)},SparseMatrix2.diagonal=function(size2,value,k2,defaultValue,datatype){if(!isArray(size2))throw new TypeError("Array expected, size parameter");if(size2.length!==2)throw new Error("Only two dimensions matrix are supported");if(size2=size2.map(function(s2){if(isBigNumber(s2)&&(s2=s2.toNumber()),!isNumber(s2)||!isInteger(s2)||s2<1)throw new Error("Size values must be positive integers");return s2}),k2){if(isBigNumber(k2)&&(k2=k2.toNumber()),!isNumber(k2)||!isInteger(k2))throw new TypeError("The parameter k must be an integer number")}else k2=0;var eq=equalScalar2,zero=0;isString(datatype)&&(eq=typed2.find(equalScalar2,[datatype,datatype])||equalScalar2,zero=typed2.convert(0,datatype));var kSuper=k2>0?k2:0,kSub=k2<0?-k2:0,rows=size2[0],columns=size2[1],n3=Math.min(rows-kSub,columns-kSuper),_value;if(isArray(value)){if(value.length!==n3)throw new Error("Invalid value array length");_value=__name(function(i3){return value[i3]},"_value")}else if(isMatrix(value)){var ms=value.size();if(ms.length!==1||ms[0]!==n3)throw new Error("Invalid matrix length");_value=__name(function(i3){return value.get([i3])},"_value")}else _value=__name(function(){return value},"_value");for(var values=[],index=[],ptr=[],j2=0;j2<columns;j2++){ptr.push(values.length);var i2=j2-kSuper;if(i2>=0&&i2<n3){var v2=_value(i2);eq(v2,zero)||(index.push(i2+kSub),values.push(v2))}}return ptr.push(values.length),new SparseMatrix2({values,index,ptr,size:[rows,columns]})},SparseMatrix2.prototype.swapRows=function(i2,j2){if(!isNumber(i2)||!isInteger(i2)||!isNumber(j2)||!isInteger(j2))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(i2,this._size[0]),validateIndex(j2,this._size[0]),SparseMatrix2._swapRows(i2,j2,this._size[1],this._values,this._index,this._ptr),this},SparseMatrix2._forEachRow=function(j2,values,index,ptr,callback){for(var k0=ptr[j2],k1=ptr[j2+1],k2=k0;k2<k1;k2++)callback(index[k2],values[k2])},SparseMatrix2._swapRows=function(x2,y2,columns,values,index,ptr){for(var j2=0;j2<columns;j2++){var k0=ptr[j2],k1=ptr[j2+1],kx=_getValueIndex(x2,k0,k1,index),ky=_getValueIndex(y2,k0,k1,index);if(kx<k1&&ky<k1&&index[kx]===x2&&index[ky]===y2){if(values){var v2=values[kx];values[kx]=values[ky],values[ky]=v2}continue}if(kx<k1&&index[kx]===x2&&(ky>=k1||index[ky]!==y2)){var vx=values?values[kx]:void 0;index.splice(ky,0,y2),values&&values.splice(ky,0,vx),index.splice(ky<=kx?kx+1:kx,1),values&&values.splice(ky<=kx?kx+1:kx,1);continue}if(ky<k1&&index[ky]===y2&&(kx>=k1||index[kx]!==x2)){var vy=values?values[ky]:void 0;index.splice(kx,0,x2),values&&values.splice(kx,0,vy),index.splice(kx<=ky?ky+1:ky,1),values&&values.splice(kx<=ky?ky+1:ky,1)}}},SparseMatrix2},{isClass:!0}),name$k="number",dependencies$k=["typed"];function getNonDecimalNumberParts(input){var nonDecimalWithRadixMatch=input.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(nonDecimalWithRadixMatch){var radix={"0b":2,"0o":8,"0x":16}[nonDecimalWithRadixMatch[1]],integerPart=nonDecimalWithRadixMatch[2],fractionalPart=nonDecimalWithRadixMatch[3];return{input,radix,integerPart,fractionalPart}}else return null}__name(getNonDecimalNumberParts,"getNonDecimalNumberParts");function makeNumberFromNonDecimalParts(parts){for(var n3=parseInt(parts.integerPart,parts.radix),f2=0,i2=0;i2<parts.fractionalPart.length;i2++){var digitValue=parseInt(parts.fractionalPart[i2],parts.radix);f2+=digitValue/Math.pow(parts.radix,i2+1)}var result=n3+f2;if(isNaN(result))throw new SyntaxError('String "'+parts.input+'" is not a valid number');return result}__name(makeNumberFromNonDecimalParts,"makeNumberFromNonDecimalParts");var createNumber=factory(name$k,dependencies$k,_ref=>{var{typed:typed2}=_ref,number2=typed2("number",{"":__name(function(){return 0},"_"),number:__name(function(x2){return x2},"number"),string:__name(function(x2){if(x2==="NaN")return NaN;var nonDecimalNumberParts=getNonDecimalNumberParts(x2);if(nonDecimalNumberParts)return makeNumberFromNonDecimalParts(nonDecimalNumberParts);var size2=0,wordSizeSuffixMatch=x2.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);wordSizeSuffixMatch&&(size2=Number(wordSizeSuffixMatch[2]),x2=wordSizeSuffixMatch[1]);var num=Number(x2);if(isNaN(num))throw new SyntaxError('String "'+x2+'" is not a valid number');if(wordSizeSuffixMatch){if(num>2**size2-1)throw new SyntaxError('String "'.concat(x2,'" is out of range'));num>=2**(size2-1)&&(num=num-2**size2)}return num},"string"),BigNumber:__name(function(x2){return x2.toNumber()},"BigNumber"),bigint:__name(function(x2){return Number(x2)},"bigint"),Fraction:__name(function(x2){return x2.valueOf()},"Fraction"),Unit:typed2.referToSelf(self2=>x2=>{var clone2=x2.clone();return clone2.value=self2(x2.value),clone2}),null:__name(function(x2){return 0},"_null"),"Unit, string | Unit":__name(function(unit,valuelessUnit){return unit.toNumber(valuelessUnit)},"Unit_string__Unit"),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2))});return number2.fromJSON=function(json){return parseFloat(json.value)},number2}),name$j="bignumber",dependencies$j=["typed","BigNumber"],createBignumber=factory(name$j,dependencies$j,_ref=>{var{typed:typed2,BigNumber:BigNumber2}=_ref;return typed2("bignumber",{"":__name(function(){return new BigNumber2(0)},"_"),number:__name(function(x2){return new BigNumber2(x2+"")},"number"),string:__name(function(x2){var wordSizeSuffixMatch=x2.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(wordSizeSuffixMatch){var size2=wordSizeSuffixMatch[2],n3=BigNumber2(wordSizeSuffixMatch[1]),twoPowSize=new BigNumber2(2).pow(Number(size2));if(n3.gt(twoPowSize.sub(1)))throw new SyntaxError('String "'.concat(x2,'" is out of range'));var twoPowSizeSubOne=new BigNumber2(2).pow(Number(size2)-1);return n3.gte(twoPowSizeSubOne)?n3.sub(twoPowSize):n3}return new BigNumber2(x2)},"string"),BigNumber:__name(function(x2){return x2},"BigNumber"),bigint:__name(function(x2){return new BigNumber2(x2.toString())},"bigint"),Unit:typed2.referToSelf(self2=>x2=>{var clone2=x2.clone();return clone2.value=self2(x2.value),clone2}),Fraction:__name(function(x2){return new BigNumber2(String(x2.n)).div(String(x2.d)).times(String(x2.s))},"Fraction"),null:__name(function(_x){return new BigNumber2(0)},"_null"),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2))})}),name$i="fraction",dependencies$i=["typed","Fraction"],createFraction=factory(name$i,dependencies$i,_ref=>{var{typed:typed2,Fraction:Fraction2}=_ref;return typed2("fraction",{number:__name(function(x2){if(!isFinite(x2)||isNaN(x2))throw new Error(x2+" cannot be represented as a fraction");return new Fraction2(x2)},"number"),string:__name(function(x2){return new Fraction2(x2)},"string"),"number, number":__name(function(numerator,denominator){return new Fraction2(numerator,denominator)},"number_number"),"bigint, bigint":__name(function(numerator,denominator){return new Fraction2(numerator,denominator)},"bigint_bigint"),null:__name(function(x2){return new Fraction2(0)},"_null"),BigNumber:__name(function(x2){return new Fraction2(x2.toString())},"BigNumber"),bigint:__name(function(x2){return new Fraction2(x2.toString())},"bigint"),Fraction:__name(function(x2){return x2},"Fraction"),Unit:typed2.referToSelf(self2=>x2=>{var clone2=x2.clone();return clone2.value=self2(x2.value),clone2}),Object:__name(function(x2){return new Fraction2(x2)},"Object"),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2))})}),name$h="matrix",dependencies$h=["typed","Matrix","DenseMatrix","SparseMatrix"],createMatrix=factory(name$h,dependencies$h,_ref=>{var{typed:typed2,Matrix:Matrix2,DenseMatrix:DenseMatrix2,SparseMatrix:SparseMatrix2}=_ref;return typed2(name$h,{"":__name(function(){return _create([])},"_"),string:__name(function(format2){return _create([],format2)},"string"),"string, string":__name(function(format2,datatype){return _create([],format2,datatype)},"string_string"),Array:__name(function(data){return _create(data)},"Array"),Matrix:__name(function(data){return _create(data,data.storage())},"Matrix"),"Array | Matrix, string":_create,"Array | Matrix, string, string":_create});function _create(data,format2,datatype){if(format2==="dense"||format2==="default"||format2===void 0)return new DenseMatrix2(data,datatype);if(format2==="sparse")return new SparseMatrix2(data,datatype);throw new TypeError("Unknown matrix type "+JSON.stringify(format2)+".")}}),name$g="unaryMinus",dependencies$g=["typed"],createUnaryMinus=factory(name$g,dependencies$g,_ref=>{var{typed:typed2}=_ref;return typed2(name$g,{number:unaryMinusNumber,"Complex | BigNumber | Fraction":__name(x2=>x2.neg(),"Complex | BigNumber | Fraction"),bigint:__name(x2=>-x2,"bigint"),Unit:typed2.referToSelf(self2=>x2=>{var res=x2.clone();return res.value=typed2.find(self2,res.valueType())(x2.value),res}),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2,!0))})}),name$f="abs",dependencies$f=["typed"],createAbs=factory(name$f,dependencies$f,_ref=>{var{typed:typed2}=_ref;return typed2(name$f,{number:absNumber,"Complex | BigNumber | Fraction | Unit":__name(x2=>x2.abs(),"Complex | BigNumber | Fraction | Unit"),bigint:__name(x2=>x2<0n?-x2:x2,"bigint"),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2,!0))})}),name$e="addScalar",dependencies$e=["typed"],createAddScalar=factory(name$e,dependencies$e,_ref=>{var{typed:typed2}=_ref;return typed2(name$e,{"number, number":addNumber,"Complex, Complex":__name(function(x2,y2){return x2.add(y2)},"Complex_Complex"),"BigNumber, BigNumber":__name(function(x2,y2){return x2.plus(y2)},"BigNumber_BigNumber"),"bigint, bigint":__name(function(x2,y2){return x2+y2},"bigint_bigint"),"Fraction, Fraction":__name(function(x2,y2){return x2.add(y2)},"Fraction_Fraction"),"Unit, Unit":typed2.referToSelf(self2=>(x2,y2)=>{if(x2.value===null||x2.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(y2.value===null||y2.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!x2.equalBase(y2))throw new Error("Units do not match");var res=x2.clone();return res.value=typed2.find(self2,[res.valueType(),y2.valueType()])(res.value,y2.value),res.fixPrefix=!1,res})})}),name$d="subtractScalar",dependencies$d=["typed"],createSubtractScalar=factory(name$d,dependencies$d,_ref=>{var{typed:typed2}=_ref;return typed2(name$d,{"number, number":subtractNumber,"Complex, Complex":__name(function(x2,y2){return x2.sub(y2)},"Complex_Complex"),"BigNumber, BigNumber":__name(function(x2,y2){return x2.minus(y2)},"BigNumber_BigNumber"),"bigint, bigint":__name(function(x2,y2){return x2-y2},"bigint_bigint"),"Fraction, Fraction":__name(function(x2,y2){return x2.sub(y2)},"Fraction_Fraction"),"Unit, Unit":typed2.referToSelf(self2=>(x2,y2)=>{if(x2.value===null||x2.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(y2.value===null||y2.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!x2.equalBase(y2))throw new Error("Units do not match");var res=x2.clone();return res.value=typed2.find(self2,[res.valueType(),y2.valueType()])(res.value,y2.value),res.fixPrefix=!1,res})})}),name$c="matAlgo11xS0s",dependencies$c=["typed","equalScalar"],createMatAlgo11xS0s=factory(name$c,dependencies$c,_ref=>{var{typed:typed2,equalScalar:equalScalar2}=_ref;return __name(function(s2,b2,callback,inverse){var avalues=s2._values,aindex=s2._index,aptr=s2._ptr,asize=s2._size,adt=s2._datatype;if(!avalues)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var rows=asize[0],columns=asize[1],dt2,eq=equalScalar2,zero=0,cf=callback;typeof adt=="string"&&(dt2=adt,eq=typed2.find(equalScalar2,[dt2,dt2]),zero=typed2.convert(0,dt2),b2=typed2.convert(b2,dt2),cf=typed2.find(callback,[dt2,dt2]));for(var cvalues=[],cindex=[],cptr=[],j2=0;j2<columns;j2++){cptr[j2]=cindex.length;for(var k0=aptr[j2],k1=aptr[j2+1],k2=k0;k2<k1;k2++){var i2=aindex[k2],v2=inverse?cf(b2,avalues[k2]):cf(avalues[k2],b2);eq(v2,zero)||(cindex.push(i2),cvalues.push(v2))}}return cptr[columns]=cindex.length,s2.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[rows,columns],datatype:dt2})},"matAlgo11xS0s")}),name$b="matAlgo14xDs",dependencies$b=["typed"],createMatAlgo14xDs=factory(name$b,dependencies$b,_ref=>{var{typed:typed2}=_ref;return __name(function(a2,b2,callback,inverse){var adata=a2._data,asize=a2._size,adt=a2._datatype,dt2,cf=callback;typeof adt=="string"&&(dt2=adt,b2=typed2.convert(b2,dt2),cf=typed2.find(callback,[dt2,dt2]));var cdata=asize.length>0?_iterate(cf,0,asize,asize[0],adata,b2,inverse):[];return a2.createDenseMatrix({data:cdata,size:clone$2(asize),datatype:dt2})},"matAlgo14xDs");function _iterate(f2,level,s2,n3,av,bv,inverse){var cv=[];if(level===s2.length-1)for(var i2=0;i2<n3;i2++)cv[i2]=inverse?f2(bv,av[i2]):f2(av[i2],bv);else for(var j2=0;j2<n3;j2++)cv[j2]=_iterate(f2,level+1,s2,s2[level+1],av[j2],bv,inverse);return cv}}),name$a="multiplyScalar",dependencies$a=["typed"],createMultiplyScalar=factory(name$a,dependencies$a,_ref=>{var{typed:typed2}=_ref;return typed2("multiplyScalar",{"number, number":multiplyNumber,"Complex, Complex":__name(function(x2,y2){return x2.mul(y2)},"Complex_Complex"),"BigNumber, BigNumber":__name(function(x2,y2){return x2.times(y2)},"BigNumber_BigNumber"),"bigint, bigint":__name(function(x2,y2){return x2*y2},"bigint_bigint"),"Fraction, Fraction":__name(function(x2,y2){return x2.mul(y2)},"Fraction_Fraction"),"number | Fraction | BigNumber | Complex, Unit":__name((x2,y2)=>y2.multiply(x2),"number | Fraction | BigNumber | Complex, Unit"),"Unit, number | Fraction | BigNumber | Complex | Unit":__name((x2,y2)=>x2.multiply(y2),"Unit, number | Fraction | BigNumber | Complex | Unit")})}),name$9="multiply",dependencies$9=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],createMultiply=factory(name$9,dependencies$9,_ref=>{var{typed:typed2,matrix:matrix2,addScalar:addScalar2,multiplyScalar:multiplyScalar2,equalScalar:equalScalar2,dot:dot2}=_ref,matAlgo11xS0s=createMatAlgo11xS0s({typed:typed2,equalScalar:equalScalar2}),matAlgo14xDs=createMatAlgo14xDs({typed:typed2});function _validateMatrixDimensions(size1,size2){switch(size1.length){case 1:switch(size2.length){case 1:if(size1[0]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(size1[0]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+size1[0]+") must match Matrix rows ("+size2[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+size2.length+" dimensions)")}break;case 2:switch(size2.length){case 1:if(size1[1]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+size1[1]+") must match Vector length ("+size2[0]+")");break;case 2:if(size1[1]!==size2[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+size1[1]+") must match Matrix B rows ("+size2[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+size2.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+size1.length+" dimensions)")}}__name(_validateMatrixDimensions,"_validateMatrixDimensions");function _multiplyVectorVector(a2,b2,n3){if(n3===0)throw new Error("Cannot multiply two empty vectors");return dot2(a2,b2)}__name(_multiplyVectorVector,"_multiplyVectorVector");function _multiplyVectorMatrix(a2,b2){if(b2.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return _multiplyVectorDenseMatrix(a2,b2)}__name(_multiplyVectorMatrix,"_multiplyVectorMatrix");function _multiplyVectorDenseMatrix(a2,b2){var adata=a2._data,asize=a2._size,adt=a2._datatype||a2.getDataType(),bdata=b2._data,bsize=b2._size,bdt=b2._datatype||b2.getDataType(),alength=asize[0],bcolumns=bsize[1],dt2,af=addScalar2,mf=multiplyScalar2;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]));for(var c=[],j2=0;j2<bcolumns;j2++){for(var sum2=mf(adata[0],bdata[0][j2]),i2=1;i2<alength;i2++)sum2=af(sum2,mf(adata[i2],bdata[i2][j2]));c[j2]=sum2}return a2.createDenseMatrix({data:c,size:[bcolumns],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0})}__name(_multiplyVectorDenseMatrix,"_multiplyVectorDenseMatrix");var _multiplyMatrixVector=typed2("_multiplyMatrixVector",{"DenseMatrix, any":_multiplyDenseMatrixVector,"SparseMatrix, any":_multiplySparseMatrixVector}),_multiplyMatrixMatrix=typed2("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_multiplyDenseMatrixDenseMatrix,"DenseMatrix, SparseMatrix":_multiplyDenseMatrixSparseMatrix,"SparseMatrix, DenseMatrix":_multiplySparseMatrixDenseMatrix,"SparseMatrix, SparseMatrix":_multiplySparseMatrixSparseMatrix});function _multiplyDenseMatrixVector(a2,b2){var adata=a2._data,asize=a2._size,adt=a2._datatype||a2.getDataType(),bdata=b2._data,bdt=b2._datatype||b2.getDataType(),arows=asize[0],acolumns=asize[1],dt2,af=addScalar2,mf=multiplyScalar2;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]));for(var c=[],i2=0;i2<arows;i2++){for(var row=adata[i2],sum2=mf(row[0],bdata[0]),j2=1;j2<acolumns;j2++)sum2=af(sum2,mf(row[j2],bdata[j2]));c[i2]=sum2}return a2.createDenseMatrix({data:c,size:[arows],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0})}__name(_multiplyDenseMatrixVector,"_multiplyDenseMatrixVector");function _multiplyDenseMatrixDenseMatrix(a2,b2){var adata=a2._data,asize=a2._size,adt=a2._datatype||a2.getDataType(),bdata=b2._data,bsize=b2._size,bdt=b2._datatype||b2.getDataType(),arows=asize[0],acolumns=asize[1],bcolumns=bsize[1],dt2,af=addScalar2,mf=multiplyScalar2;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]));for(var c=[],i2=0;i2<arows;i2++){var row=adata[i2];c[i2]=[];for(var j2=0;j2<bcolumns;j2++){for(var sum2=mf(row[0],bdata[0][j2]),x2=1;x2<acolumns;x2++)sum2=af(sum2,mf(row[x2],bdata[x2][j2]));c[i2][j2]=sum2}}return a2.createDenseMatrix({data:c,size:[arows,bcolumns],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0})}__name(_multiplyDenseMatrixDenseMatrix,"_multiplyDenseMatrixDenseMatrix");function _multiplyDenseMatrixSparseMatrix(a2,b2){var adata=a2._data,asize=a2._size,adt=a2._datatype||a2.getDataType(),bvalues=b2._values,bindex=b2._index,bptr=b2._ptr,bsize=b2._size,bdt=b2._datatype||b2._data===void 0?b2._datatype:b2.getDataType();if(!bvalues)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var arows=asize[0],bcolumns=bsize[1],dt2,af=addScalar2,mf=multiplyScalar2,eq=equalScalar2,zero=0;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]),eq=typed2.find(equalScalar2,[dt2,dt2]),zero=typed2.convert(0,dt2));for(var cvalues=[],cindex=[],cptr=[],c=b2.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0}),jb=0;jb<bcolumns;jb++){cptr[jb]=cindex.length;var kb0=bptr[jb],kb1=bptr[jb+1];if(kb1>kb0)for(var last2=0,i2=0;i2<arows;i2++){for(var mark=i2+1,cij=void 0,kb=kb0;kb<kb1;kb++){var ib=bindex[kb];last2!==mark?(cij=mf(adata[i2][ib],bvalues[kb]),last2=mark):cij=af(cij,mf(adata[i2][ib],bvalues[kb]))}last2===mark&&!eq(cij,zero)&&(cindex.push(i2),cvalues.push(cij))}}return cptr[bcolumns]=cindex.length,c}__name(_multiplyDenseMatrixSparseMatrix,"_multiplyDenseMatrixSparseMatrix");function _multiplySparseMatrixVector(a2,b2){var avalues=a2._values,aindex=a2._index,aptr=a2._ptr,adt=a2._datatype||a2._data===void 0?a2._datatype:a2.getDataType();if(!avalues)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var bdata=b2._data,bdt=b2._datatype||b2.getDataType(),arows=a2._size[0],brows=b2._size[0],cvalues=[],cindex=[],cptr=[],dt2,af=addScalar2,mf=multiplyScalar2,eq=equalScalar2,zero=0;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]),eq=typed2.find(equalScalar2,[dt2,dt2]),zero=typed2.convert(0,dt2));var x2=[],w2=[];cptr[0]=0;for(var ib=0;ib<brows;ib++){var vbi=bdata[ib];if(!eq(vbi,zero))for(var ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++){var ia=aindex[ka];w2[ia]?x2[ia]=af(x2[ia],mf(vbi,avalues[ka])):(w2[ia]=!0,cindex.push(ia),x2[ia]=mf(vbi,avalues[ka]))}}for(var p1=cindex.length,p2=0;p2<p1;p2++){var ic=cindex[p2];cvalues[p2]=x2[ic]}return cptr[1]=cindex.length,a2.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,1],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0})}__name(_multiplySparseMatrixVector,"_multiplySparseMatrixVector");function _multiplySparseMatrixDenseMatrix(a2,b2){var avalues=a2._values,aindex=a2._index,aptr=a2._ptr,adt=a2._datatype||a2._data===void 0?a2._datatype:a2.getDataType();if(!avalues)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var bdata=b2._data,bdt=b2._datatype||b2.getDataType(),arows=a2._size[0],brows=b2._size[0],bcolumns=b2._size[1],dt2,af=addScalar2,mf=multiplyScalar2,eq=equalScalar2,zero=0;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]),eq=typed2.find(equalScalar2,[dt2,dt2]),zero=typed2.convert(0,dt2));for(var cvalues=[],cindex=[],cptr=[],c=a2.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0}),x2=[],w2=[],jb=0;jb<bcolumns;jb++){cptr[jb]=cindex.length;for(var mark=jb+1,ib=0;ib<brows;ib++){var vbij=bdata[ib][jb];if(!eq(vbij,zero))for(var ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++){var ia=aindex[ka];w2[ia]!==mark?(w2[ia]=mark,cindex.push(ia),x2[ia]=mf(vbij,avalues[ka])):x2[ia]=af(x2[ia],mf(vbij,avalues[ka]))}}for(var p0=cptr[jb],p1=cindex.length,p2=p0;p2<p1;p2++){var ic=cindex[p2];cvalues[p2]=x2[ic]}}return cptr[bcolumns]=cindex.length,c}__name(_multiplySparseMatrixDenseMatrix,"_multiplySparseMatrixDenseMatrix");function _multiplySparseMatrixSparseMatrix(a2,b2){var avalues=a2._values,aindex=a2._index,aptr=a2._ptr,adt=a2._datatype||a2._data===void 0?a2._datatype:a2.getDataType(),bvalues=b2._values,bindex=b2._index,bptr=b2._ptr,bdt=b2._datatype||b2._data===void 0?b2._datatype:b2.getDataType(),arows=a2._size[0],bcolumns=b2._size[1],values=avalues&&bvalues,dt2,af=addScalar2,mf=multiplyScalar2;adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"&&(dt2=adt,af=typed2.find(addScalar2,[dt2,dt2]),mf=typed2.find(multiplyScalar2,[dt2,dt2]));for(var cvalues=values?[]:void 0,cindex=[],cptr=[],c=a2.createSparseMatrix({values:cvalues,index:cindex,ptr:cptr,size:[arows,bcolumns],datatype:adt===a2._datatype&&bdt===b2._datatype?dt2:void 0}),x2=values?[]:void 0,w2=[],ka,ka0,ka1,kb,kb0,kb1,ia,ib,jb=0;jb<bcolumns;jb++){cptr[jb]=cindex.length;var mark=jb+1;for(kb0=bptr[jb],kb1=bptr[jb+1],kb=kb0;kb<kb1;kb++)if(ib=bindex[kb],values)for(ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++)ia=aindex[ka],w2[ia]!==mark?(w2[ia]=mark,cindex.push(ia),x2[ia]=mf(bvalues[kb],avalues[ka])):x2[ia]=af(x2[ia],mf(bvalues[kb],avalues[ka]));else for(ka0=aptr[ib],ka1=aptr[ib+1],ka=ka0;ka<ka1;ka++)ia=aindex[ka],w2[ia]!==mark&&(w2[ia]=mark,cindex.push(ia));if(values)for(var p0=cptr[jb],p1=cindex.length,p2=p0;p2<p1;p2++){var ic=cindex[p2];cvalues[p2]=x2[ic]}}return cptr[bcolumns]=cindex.length,c}return __name(_multiplySparseMatrixSparseMatrix,"_multiplySparseMatrixSparseMatrix"),typed2(name$9,multiplyScalar2,{"Array, Array":typed2.referTo("Matrix, Matrix",selfMM=>(x2,y2)=>{_validateMatrixDimensions(arraySize(x2),arraySize(y2));var m2=selfMM(matrix2(x2),matrix2(y2));return isMatrix(m2)?m2.valueOf():m2}),"Matrix, Matrix":__name(function(x2,y2){var xsize=x2.size(),ysize=y2.size();return _validateMatrixDimensions(xsize,ysize),xsize.length===1?ysize.length===1?_multiplyVectorVector(x2,y2,xsize[0]):_multiplyVectorMatrix(x2,y2):ysize.length===1?_multiplyMatrixVector(x2,y2):_multiplyMatrixMatrix(x2,y2)},"Matrix_Matrix"),"Matrix, Array":typed2.referTo("Matrix,Matrix",selfMM=>(x2,y2)=>selfMM(x2,matrix2(y2))),"Array, Matrix":typed2.referToSelf(self2=>(x2,y2)=>self2(matrix2(x2,y2.storage()),y2)),"SparseMatrix, any":__name(function(x2,y2){return matAlgo11xS0s(x2,y2,multiplyScalar2,!1)},"SparseMatrix_any"),"DenseMatrix, any":__name(function(x2,y2){return matAlgo14xDs(x2,y2,multiplyScalar2,!1)},"DenseMatrix_any"),"any, SparseMatrix":__name(function(x2,y2){return matAlgo11xS0s(y2,x2,multiplyScalar2,!0)},"any_SparseMatrix"),"any, DenseMatrix":__name(function(x2,y2){return matAlgo14xDs(y2,x2,multiplyScalar2,!0)},"any_DenseMatrix"),"Array, any":__name(function(x2,y2){return matAlgo14xDs(matrix2(x2),y2,multiplyScalar2,!1).valueOf()},"Array_any"),"any, Array":__name(function(x2,y2){return matAlgo14xDs(matrix2(y2),x2,multiplyScalar2,!0).valueOf()},"any_Array"),"any, any":multiplyScalar2,"any, any, ...any":typed2.referToSelf(self2=>(x2,y2,rest)=>{for(var result=self2(x2,y2),i2=0;i2<rest.length;i2++)result=self2(result,rest[i2]);return result})})}),name$8="conj",dependencies$8=["typed"],createConj=factory(name$8,dependencies$8,_ref=>{var{typed:typed2}=_ref;return typed2(name$8,{"number | BigNumber | Fraction":__name(x2=>x2,"number | BigNumber | Fraction"),Complex:__name(x2=>x2.conjugate(),"Complex"),Unit:typed2.referToSelf(self2=>x2=>new x2.constructor(self2(x2.toNumeric()),x2.formatUnits())),"Array | Matrix":typed2.referToSelf(self2=>x2=>deepMap(x2,self2))})}),name$7="identity",dependencies$7=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],createIdentity=factory(name$7,dependencies$7,_ref=>{var{typed:typed2,config:config3,matrix:matrix2,BigNumber:BigNumber2,DenseMatrix:DenseMatrix2,SparseMatrix:SparseMatrix2}=_ref;return typed2(name$7,{"":__name(function(){return config3.matrix==="Matrix"?matrix2([]):[]},"_"),string:__name(function(format2){return matrix2(format2)},"string"),"number | BigNumber":__name(function(rows){return _identity(rows,rows,config3.matrix==="Matrix"?"dense":void 0)},"number__BigNumber"),"number | BigNumber, string":__name(function(rows,format2){return _identity(rows,rows,format2)},"number__BigNumber_string"),"number | BigNumber, number | BigNumber":__name(function(rows,cols){return _identity(rows,cols,config3.matrix==="Matrix"?"dense":void 0)},"number__BigNumber_number__BigNumber"),"number | BigNumber, number | BigNumber, string":__name(function(rows,cols,format2){return _identity(rows,cols,format2)},"number__BigNumber_number__BigNumber_string"),Array:__name(function(size2){return _identityVector(size2)},"Array"),"Array, string":__name(function(size2,format2){return _identityVector(size2,format2)},"Array_string"),Matrix:__name(function(size2){return _identityVector(size2.valueOf(),size2.storage())},"Matrix"),"Matrix, string":__name(function(size2,format2){return _identityVector(size2.valueOf(),format2)},"Matrix_string")});function _identityVector(size2,format2){switch(size2.length){case 0:return format2?matrix2(format2):[];case 1:return _identity(size2[0],size2[0],format2);case 2:return _identity(size2[0],size2[1],format2);default:throw new Error("Vector containing two values expected")}}function _identity(rows,cols,format2){var Big=isBigNumber(rows)||isBigNumber(cols)?BigNumber2:null;if(isBigNumber(rows)&&(rows=rows.toNumber()),isBigNumber(cols)&&(cols=cols.toNumber()),!isInteger(rows)||rows<1)throw new Error("Parameters in function identity must be positive integers");if(!isInteger(cols)||cols<1)throw new Error("Parameters in function identity must be positive integers");var one=Big?new BigNumber2(1):1,defaultValue=Big?new Big(0):0,size2=[rows,cols];if(format2){if(format2==="sparse")return SparseMatrix2.diagonal(size2,one,0,defaultValue);if(format2==="dense")return DenseMatrix2.diagonal(size2,one,0,defaultValue);throw new TypeError('Unknown matrix type "'.concat(format2,'"'))}for(var res=resize([],size2,defaultValue),minimum=rows<cols?rows:cols,d2=0;d2<minimum;d2++)res[d2][d2]=one;return res}}),name$6="ones",dependencies$6=["typed","config","matrix","BigNumber"],createOnes=factory(name$6,dependencies$6,_ref=>{var{typed:typed2,config:config3,matrix:matrix2,BigNumber:BigNumber2}=_ref;return typed2("ones",{"":__name(function(){return config3.matrix==="Array"?_ones([]):_ones([],"default")},"_"),"...number | BigNumber | string":__name(function(size2){var last2=size2[size2.length-1];if(typeof last2=="string"){var format2=size2.pop();return _ones(size2,format2)}else return config3.matrix==="Array"?_ones(size2):_ones(size2,"default")},"number__BigNumber__string"),Array:_ones,Matrix:__name(function(size2){var format2=size2.storage();return _ones(size2.valueOf(),format2)},"Matrix"),"Array | Matrix, string":__name(function(size2,format2){return _ones(size2.valueOf(),format2)},"Array__Matrix_string")});function _ones(size2,format2){var hasBigNumbers=_normalize(size2),defaultValue=hasBigNumbers?new BigNumber2(1):1;if(_validate2(size2),format2){var m2=matrix2(format2);return size2.length>0?m2.resize(size2,defaultValue):m2}else{var arr=[];return size2.length>0?resize(arr,size2,defaultValue):arr}}function _normalize(size2){var hasBigNumbers=!1;return size2.forEach(function(value,index,arr){isBigNumber(value)&&(hasBigNumbers=!0,arr[index]=value.toNumber())}),hasBigNumbers}function _validate2(size2){size2.forEach(function(value){if(typeof value!="number"||!isInteger(value)||value<0)throw new Error("Parameters in function ones must be positive integers")})}});function noBignumber(){throw new Error('No "bignumber" implementation available')}__name(noBignumber,"noBignumber");function noFraction(){throw new Error('No "fraction" implementation available')}__name(noFraction,"noFraction");function noMatrix(){throw new Error('No "matrix" implementation available')}__name(noMatrix,"noMatrix");var name$5="size",dependencies$5=["typed","config","?matrix"],createSize=factory(name$5,dependencies$5,_ref=>{var{typed:typed2,config:config3,matrix:matrix2}=_ref;return typed2(name$5,{Matrix:__name(function(x2){return x2.create(x2.size(),"number")},"Matrix"),Array:arraySize,string:__name(function(x2){return config3.matrix==="Array"?[x2.length]:matrix2([x2.length],"dense","number")},"string"),"number | Complex | BigNumber | Unit | boolean | null":__name(function(x2){return config3.matrix==="Array"?[]:matrix2?matrix2([],"dense","number"):noMatrix()},"number__Complex__BigNumber__Unit__boolean__null")})}),name$4="numeric",dependencies$4=["number","?bignumber","?fraction"],createNumeric=factory(name$4,dependencies$4,_ref=>{var{number:_number,bignumber:bignumber2,fraction:fraction2}=_ref,validInputTypes={string:!0,number:!0,BigNumber:!0,Fraction:!0},validOutputTypes={number:__name(x2=>_number(x2),"number"),BigNumber:bignumber2?x2=>bignumber2(x2):noBignumber,bigint:__name(x2=>BigInt(x2),"bigint"),Fraction:fraction2?x2=>fraction2(x2):noFraction};return __name(function(value){var outputType=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",check=arguments.length>2?arguments[2]:void 0;if(check!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var inputType=typeOf(value);if(!(inputType in validInputTypes))throw new TypeError("Cannot convert "+value+' of type "'+inputType+'"; valid input types are '+Object.keys(validInputTypes).join(", "));if(!(outputType in validOutputTypes))throw new TypeError("Cannot convert "+value+' to type "'+outputType+'"; valid output types are '+Object.keys(validOutputTypes).join(", "));return outputType===inputType?value:validOutputTypes[outputType](value)},"numeric")}),name$3="divideScalar",dependencies$3=["typed","numeric"],createDivideScalar=factory(name$3,dependencies$3,_ref=>{var{typed:typed2,numeric:numeric2}=_ref;return typed2(name$3,{"number, number":__name(function(x2,y2){return x2/y2},"number_number"),"Complex, Complex":__name(function(x2,y2){return x2.div(y2)},"Complex_Complex"),"BigNumber, BigNumber":__name(function(x2,y2){return x2.div(y2)},"BigNumber_BigNumber"),"bigint, bigint":__name(function(x2,y2){return x2/y2},"bigint_bigint"),"Fraction, Fraction":__name(function(x2,y2){return x2.div(y2)},"Fraction_Fraction"),"Unit, number | Complex | Fraction | BigNumber | Unit":__name((x2,y2)=>x2.divide(y2),"Unit, number | Complex | Fraction | BigNumber | Unit"),"number | Fraction | Complex | BigNumber, Unit":__name((x2,y2)=>y2.divideInto(x2),"number | Fraction | Complex | BigNumber, Unit")})}),name$2="dot",dependencies$2=["typed","addScalar","multiplyScalar","conj","size"],createDot=factory(name$2,dependencies$2,_ref=>{var{typed:typed2,addScalar:addScalar2,multiplyScalar:multiplyScalar2,conj:conj2,size:size2}=_ref;return typed2(name$2,{"Array | DenseMatrix, Array | DenseMatrix":_denseDot,"SparseMatrix, SparseMatrix":_sparseDot});function _validateDim(x2,y2){var xSize=_size(x2),ySize=_size(y2),xLen,yLen;if(xSize.length===1)xLen=xSize[0];else if(xSize.length===2&&xSize[1]===1)xLen=xSize[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+xSize.join(", ")+")");if(ySize.length===1)yLen=ySize[0];else if(ySize.length===2&&ySize[1]===1)yLen=ySize[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+ySize.join(", ")+")");if(xLen!==yLen)throw new RangeError("Vectors must have equal length ("+xLen+" != "+yLen+")");if(xLen===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return xLen}function _denseDot(a2,b2){var N2=_validateDim(a2,b2),adata=isMatrix(a2)?a2._data:a2,adt=isMatrix(a2)?a2._datatype||a2.getDataType():void 0,bdata=isMatrix(b2)?b2._data:b2,bdt=isMatrix(b2)?b2._datatype||b2.getDataType():void 0,aIsColumn=_size(a2).length===2,bIsColumn=_size(b2).length===2,add2=addScalar2,mul2=multiplyScalar2;if(adt&&bdt&&adt===bdt&&typeof adt=="string"&&adt!=="mixed"){var dt2=adt;add2=typed2.find(addScalar2,[dt2,dt2]),mul2=typed2.find(multiplyScalar2,[dt2,dt2])}if(!aIsColumn&&!bIsColumn){for(var c=mul2(conj2(adata[0]),bdata[0]),i2=1;i2<N2;i2++)c=add2(c,mul2(conj2(adata[i2]),bdata[i2]));return c}if(!aIsColumn&&bIsColumn){for(var _c=mul2(conj2(adata[0]),bdata[0][0]),_i=1;_i<N2;_i++)_c=add2(_c,mul2(conj2(adata[_i]),bdata[_i][0]));return _c}if(aIsColumn&&!bIsColumn){for(var _c2=mul2(conj2(adata[0][0]),bdata[0]),_i2=1;_i2<N2;_i2++)_c2=add2(_c2,mul2(conj2(adata[_i2][0]),bdata[_i2]));return _c2}if(aIsColumn&&bIsColumn){for(var _c3=mul2(conj2(adata[0][0]),bdata[0][0]),_i3=1;_i3<N2;_i3++)_c3=add2(_c3,mul2(conj2(adata[_i3][0]),bdata[_i3][0]));return _c3}}function _sparseDot(x2,y2){_validateDim(x2,y2);for(var xindex=x2._index,xvalues=x2._values,yindex=y2._index,yvalues=y2._values,c=0,add2=addScalar2,mul2=multiplyScalar2,i2=0,j2=0;i2<xindex.length&&j2<yindex.length;){var I2=xindex[i2],J2=yindex[j2];if(I2<J2){i2++;continue}if(I2>J2){j2++;continue}I2===J2&&(c=add2(c,mul2(xvalues[i2],yvalues[j2])),i2++,j2++)}return c}function _size(x2){return isMatrix(x2)?x2.size():size2(x2)}}),name$1="det",dependencies$1=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],createDet=factory(name$1,dependencies$1,_ref=>{var{typed:typed2,matrix:matrix2,subtractScalar:subtractScalar2,multiply:multiply2,divideScalar:divideScalar2,isZero:isZero2,unaryMinus:unaryMinus2}=_ref;return typed2(name$1,{any:__name(function(x2){return clone$2(x2)},"any"),"Array | Matrix":__name(function(x2){var size2;switch(isMatrix(x2)?size2=x2.size():Array.isArray(x2)?(x2=matrix2(x2),size2=x2.size()):size2=[],size2.length){case 0:return clone$2(x2);case 1:if(size2[0]===1)return clone$2(x2.valueOf()[0]);if(size2[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+format(size2)+")");case 2:{var rows=size2[0],cols=size2[1];if(rows===cols)return _det(x2.clone().valueOf(),rows);if(cols===0)return 1;throw new RangeError("Matrix must be square (size: "+format(size2)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format(size2)+")")}},"det")});function _det(matrix3,rows,cols){if(rows===1)return clone$2(matrix3[0][0]);if(rows===2)return subtractScalar2(multiply2(matrix3[0][0],matrix3[1][1]),multiply2(matrix3[1][0],matrix3[0][1]));for(var negated=!1,rowIndices=new Array(rows).fill(0).map((_2,i3)=>i3),k2=0;k2<rows;k2++){var k_=rowIndices[k2];if(isZero2(matrix3[k_][k2])){var _k=void 0;for(_k=k2+1;_k<rows;_k++)if(!isZero2(matrix3[rowIndices[_k]][k2])){k_=rowIndices[_k],rowIndices[_k]=rowIndices[k2],rowIndices[k2]=k_,negated=!negated;break}if(_k===rows)return matrix3[k_][k2]}for(var piv=matrix3[k_][k2],piv_=k2===0?1:matrix3[rowIndices[k2-1]][k2-1],i2=k2+1;i2<rows;i2++)for(var i_=rowIndices[i2],j2=k2+1;j2<rows;j2++)matrix3[i_][j2]=divideScalar2(subtractScalar2(multiply2(matrix3[i_][j2],piv),multiply2(matrix3[i_][k2],matrix3[k_][j2])),piv_)}var det2=matrix3[rowIndices[rows-1]][rows-1];return negated?unaryMinus2(det2):det2}}),name="inv",dependencies=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],createInv=factory(name,dependencies,_ref=>{var{typed:typed2,matrix:matrix2,divideScalar:divideScalar2,addScalar:addScalar2,multiply:multiply2,unaryMinus:unaryMinus2,det:det2,identity:identity2,abs:abs2}=_ref;return typed2(name,{"Array | Matrix":__name(function(x2){var size2=isMatrix(x2)?x2.size():arraySize(x2);switch(size2.length){case 1:if(size2[0]===1)return isMatrix(x2)?matrix2([divideScalar2(1,x2.valueOf()[0])]):[divideScalar2(1,x2[0])];throw new RangeError("Matrix must be square (size: "+format(size2)+")");case 2:{var rows=size2[0],cols=size2[1];if(rows===cols)return isMatrix(x2)?matrix2(_inv(x2.valueOf(),rows,cols),x2.storage()):_inv(x2,rows,cols);throw new RangeError("Matrix must be square (size: "+format(size2)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format(size2)+")")}},"Array__Matrix"),any:__name(function(x2){return divideScalar2(1,x2)},"any")});function _inv(mat,rows,cols){var r2,s2,f2,value,temp;if(rows===1){if(value=mat[0][0],value===0)throw Error("Cannot calculate inverse, determinant is zero");return[[divideScalar2(1,value)]]}else if(rows===2){var d2=det2(mat);if(d2===0)throw Error("Cannot calculate inverse, determinant is zero");return[[divideScalar2(mat[1][1],d2),divideScalar2(unaryMinus2(mat[0][1]),d2)],[divideScalar2(unaryMinus2(mat[1][0]),d2),divideScalar2(mat[0][0],d2)]]}else{var A2=mat.concat();for(r2=0;r2<rows;r2++)A2[r2]=A2[r2].concat();for(var B2=identity2(rows).valueOf(),c=0;c<cols;c++){var ABig=abs2(A2[c][c]),rBig=c;for(r2=c+1;r2<rows;)abs2(A2[r2][c])>ABig&&(ABig=abs2(A2[r2][c]),rBig=r2),r2++;if(ABig===0)throw Error("Cannot calculate inverse, determinant is zero");r2=rBig,r2!==c&&(temp=A2[c],A2[c]=A2[r2],A2[r2]=temp,temp=B2[c],B2[c]=B2[r2],B2[r2]=temp);var Ac=A2[c],Bc=B2[c];for(r2=0;r2<rows;r2++){var Ar=A2[r2],Br=B2[r2];if(r2!==c){if(Ar[c]!==0){for(f2=divideScalar2(unaryMinus2(Ar[c]),Ac[c]),s2=c;s2<cols;s2++)Ar[s2]=addScalar2(Ar[s2],multiply2(f2,Ac[s2]));for(s2=0;s2<cols;s2++)Br[s2]=addScalar2(Br[s2],multiply2(f2,Bc[s2]))}}else{for(f2=Ac[c],s2=c;s2<cols;s2++)Ar[s2]=divideScalar2(Ar[s2],f2);for(s2=0;s2<cols;s2++)Br[s2]=divideScalar2(Br[s2],f2)}}}return B2}}}),BigNumber=createBigNumberClass({config:config$1}),Complex=createComplexClass({}),Fraction=createFractionClass({}),Matrix=createMatrixClass({}),DenseMatrix=createDenseMatrixClass({Matrix}),typed=createTyped({BigNumber,Complex,DenseMatrix,Fraction}),abs=createAbs({typed}),addScalar=createAddScalar({typed}),conj=createConj({typed}),equalScalar=createEqualScalar({config:config$1,typed}),isZero=createIsZero({equalScalar,typed}),multiplyScalar=createMultiplyScalar({typed}),number=createNumber({typed}),SparseMatrix=createSparseMatrixClass({Matrix,equalScalar,typed}),subtractScalar=createSubtractScalar({typed}),bignumber=createBignumber({BigNumber,typed}),matrix=createMatrix({DenseMatrix,Matrix,SparseMatrix,typed}),ones=createOnes({BigNumber,config:config$1,matrix,typed}),fraction=createFraction({Fraction,typed}),identity=createIdentity({BigNumber,DenseMatrix,SparseMatrix,config:config$1,matrix,typed}),numeric=createNumeric({bignumber,fraction,number}),size=createSize({matrix,config:config$1,typed}),unaryMinus=createUnaryMinus({typed}),divideScalar=createDivideScalar({numeric,typed}),dot=createDot({addScalar,conj,multiplyScalar,size,typed}),multiply=createMultiply({addScalar,dot,equalScalar,matrix,multiplyScalar,typed}),det=createDet({divideScalar,isZero,matrix,multiply,subtractScalar,typed,unaryMinus}),inv=createInv({abs,addScalar,det,divideScalar,identity,matrix,multiply,typed,unaryMinus});function rbf(v1,v2,e2){const r2=Math.sqrt(v1.reduce((sum2,val,i2)=>sum2+(val-v2[i2])**2,0));return 1/Math.sqrt(1+(r2*e2)**2)}__name(rbf,"rbf");function rbfSharp(v1,v2){const r2=Math.sqrt(v1.reduce((sum2,val,i2)=>sum2+(val-v2[i2])**2,0));return Math.exp(-((r2*.5)**2))}__name(rbfSharp,"rbfSharp");const _ParticleSystem=class _ParticleSystem{constructor(){__publicField(this,"time");__publicField(this,"CENTER_X",.5);__publicField(this,"CENTER_Y",.5);__publicField(this,"BACKGROUND_COLOR",[0,0,0]);__publicField(this,"PARTICLE_RADIUS",300);__publicField(this,"PARTICLE_SPEED",.01);__publicField(this,"PARTICLE_COLORS",[[1,0,0],[0,1,0],[0,0,1]]);__publicField(this,"PARTICLE_COUNT",3);__publicField(this,"LOOP_LIFECYCLE",60);__publicField(this,"SHOW_LISSAJOUS_FIGURE",!1);__publicField(this,"RATIO_A",1);__publicField(this,"RATIO_B",1);__publicField(this,"OFFSET",Math.PI/2);__publicField(this,"lissajousLineBuffer",new Float32Array(1024*2));__publicField(this,"lissajousLineCount",0);__publicField(this,"WIDTH",1920);__publicField(this,"HEIGHT",1080);__publicField(this,"FIGURE_SCALE_X",.5);__publicField(this,"FIGURE_SCALE_Y",.5);__publicField(this,"PARTICLES",[]);__publicField(this,"LISSAJOUS_PATH",[]);__publicField(this,"REL_TIME",0);__publicField(this,"CONFIG",Controls$1.defaultControls);this.buffer=new Float32Array(_ParticleSystem.HARD_MAX*5),this.time=0}lissajousXY(t2,params){const x2=params.centerX+params.scaleX*Math.sin(params.ax*t2+params.deltaX),y2=params.centerY+params.scaleY*Math.sin(params.ay*t2+params.deltaY);return[x2,y2]}constructColorWeights(){const particleLength=this.PARTICLES.length,m2=matrix(ones(particleLength,particleLength)),mSharp=matrix(ones(particleLength,particleLength));for(let i2=0;i2<particleLength;++i2)for(let j2=0;j2<particleLength;++j2){const v1=this.PARTICLES[i2],v2=this.PARTICLES[j2];m2.set([i2,j2],rbf([v1.x,v1.y,v1.z],[v2.x,v2.y,v2.z],1)),mSharp.set([i2,j2],rbfSharp([v1.x,v1.y,v1.z],[v2.x,v2.y,v2.z]))}const inverse=inv(m2),inverseSharp=inv(mSharp),rVector=matrix(ones(particleLength,1)),gVector=matrix(ones(particleLength,1)),bVector=matrix(ones(particleLength,1)),aVector=matrix(ones(particleLength,1));for(let i2=0;i2<particleLength;++i2){const v2=this.PARTICLES[i2],{L:L2,a:a2,b:b2}=rgb_to_oklab({r:v2.r*255,g:v2.g*255,b:v2.b*255}),[Lbg,abg,bbg]=this.BACKGROUND_COLOR;rVector.set([i2,0],L2-Lbg),gVector.set([i2,0],a2-abg),bVector.set([i2,0],b2-bbg),aVector.set([i2,0],1)}const rWeights=multiply(inverse,rVector),gWeights=multiply(inverse,gVector),bWeights=multiply(inverse,bVector),aWeights=multiply(inverseSharp,aVector),colorMatrix=matrix(ones(particleLength,4));for(let i2=0;i2<particleLength;++i2)colorMatrix.set([i2,0],rWeights.get([i2,0])),colorMatrix.set([i2,1],gWeights.get([i2,0])),colorMatrix.set([i2,2],bWeights.get([i2,0])),colorMatrix.set([i2,3],aWeights.get([i2,0]));return colorMatrix}perform3DRotation([x2,y2,z2],angleX,angleY){angleX=angleX*Math.PI/180,angleY=angleY*Math.PI/180;let newY=y2*Math.cos(angleX)-z2*Math.sin(angleX),newZ=y2*Math.sin(angleX)+z2*Math.cos(angleX);y2=newY,z2=newZ;let newX=x2*Math.cos(angleY)+z2*Math.sin(angleY);return newZ=-x2*Math.sin(angleY)+z2*Math.cos(angleY),x2=newX,z2=newZ,[x2,y2,z2]}update(config3,timeline){this.time=timeline.getProject().timelineData.playheadPosition;const baseColors=config3.particleColors.map(colorConvert),subdivisions=0;let colorLoopCount=0;baseColors.length>1?(colorLoopCount=baseColors.length*(subdivisions+1),this.PARTICLE_COUNT=colorLoopCount):this.PARTICLE_COUNT=baseColors.length,this.LOOP_LIFECYCLE=config3.loopLifecycle,this.WIDTH=config3.width,this.HEIGHT=config3.height,this.RATIO_A=config3.ratioA,this.RATIO_B=config3.ratioB,this.OFFSET=config3.offset,this.SHOW_LISSAJOUS_FIGURE=config3.showLissajousFigure,this.FIGURE_SCALE_X=config3.figureScaleX,this.FIGURE_SCALE_Y=config3.figureScaleY,this.REL_TIME=this.time%this.LOOP_LIFECYCLE/this.LOOP_LIFECYCLE,this.CONFIG=config3;const colorStops=[];if(baseColors.length>1)for(let i2=0;i2<baseColors.length;++i2){const c0=rgbToHsl(baseColors[i2]),c1=rgbToHsl(baseColors[(i2+1)%baseColors.length]);for(let s2=0;s2<subdivisions+1;++s2){const frac=s2/(subdivisions+1);let dh=c1[0]-c0[0];Math.abs(dh)>.5&&(dh-=Math.sign(dh));const h2=(c0[0]+dh*frac+1)%1,s_=c0[1]+(c1[1]-c0[1])*frac,l2=c0[2]+(c1[2]-c0[2])*frac;colorStops.push(hslToRgb([h2,s_,l2]))}}else baseColors.length===1&&colorStops.push(baseColors[0]);this.PARTICLE_COLORS=colorStops,this.PARTICLES=[];for(let i2=0;i2<this.PARTICLE_COUNT;++i2){let t2=this.time%this.LOOP_LIFECYCLE*2*Math.PI/this.LOOP_LIFECYCLE;t2+=i2/this.PARTICLE_COUNT*2*Math.PI;let[x2,y2,z2]=lissajousKnot(t2,this.CONFIG.lissajousParams);[x2,y2,z2]=this.perform3DRotation([x2,y2,z2],config3.rotateVertical,config3.rotateHorizontal),x2/=Math.sqrt(3),y2/=Math.sqrt(3),z2/=Math.sqrt(3),x2*=this.FIGURE_SCALE_X*3,y2*=this.FIGURE_SCALE_Y*3,z2*=1;const color=this.PARTICLE_COLORS[i2],{L:L2,a:a2,b:b2}=rgb_to_oklab({r:gamma(color[0])*255,g:gamma(color[1])*255,b:gamma(color[2])*255});this.PARTICLES[i2]={x:x2,y:y2,z:z2,r:L2,g:a2,b:b2}}const bgcolor=rgb_to_oklab({r:config3.backgroundColor[0],g:config3.backgroundColor[1],b:config3.backgroundColor[2]});this.BACKGROUND_COLOR=[bgcolor.L,bgcolor.a,bgcolor.b];const colorWeights=this.constructColorWeights();for(let i2=0;i2<this.PARTICLE_COUNT;++i2)this.PARTICLES[i2].rWeight=colorWeights.get([i2,0]),this.PARTICLES[i2].gWeight=colorWeights.get([i2,1]),this.PARTICLES[i2].bWeight=colorWeights.get([i2,2]),this.PARTICLES[i2].aWeight=colorWeights.get([i2,3]);const N2=256;this.lissajousLineCount=N2,this.LISSAJOUS_PATH=[];for(let i2=0;i2<N2;++i2){const t2=i2/(N2-1)*2*Math.PI;let[x2,y2,z2]=lissajousKnot(t2,this.CONFIG.lissajousParams);[x2,y2,z2]=this.perform3DRotation([x2,y2,z2],config3.rotateVertical,config3.rotateHorizontal),x2/=Math.sqrt(3),y2/=Math.sqrt(3),z2/=Math.sqrt(3),x2*=this.FIGURE_SCALE_X*3,y2*=this.FIGURE_SCALE_Y*3,this.lissajousLineBuffer[i2*3+0]=x2,this.lissajousLineBuffer[i2*3+1]=y2,this.LISSAJOUS_PATH[i2]=[x2,y2,z2]}}};__name(_ParticleSystem,"ParticleSystem"),__publicField(_ParticleSystem,"HARD_MAX",200);let ParticleSystem=_ParticleSystem;async function imagesToMp4$2(frames,{width,height,fps,bitrate=2e7,filename="video.mp4"}){if(!("VideoEncoder"in globalThis))throw new Error("WebCodecs VideoEncoder is not available in this environment.");const target=new ArrayBufferTarget,muxer=new Muxer({target,video:{codec:"avc",width,height,frameRate:fps},fastStart:"in-memory"}),encoder=new VideoEncoder({output:__name((chunk,meta)=>muxer.addVideoChunk(chunk,meta),"output"),error:__name(e2=>console.error("VideoEncoder error:",e2),"error")});encoder.configure({codec:"avc1.42003D",width,height,bitrate,framerate:fps});const frameDurationUs=1e6/fps;let pts=0;for(const dataUrl of frames){const blob=await(await fetch(dataUrl)).blob(),bitmap=await createImageBitmap(blob),videoFrame=new VideoFrame(bitmap,{timestamp:pts});encoder.encode(videoFrame),videoFrame.close(),bitmap.close(),pts+=frameDurationUs}await encoder.flush(),encoder.close(),muxer.finalize();const{buffer}=target;return new Blob([buffer],{type:"video/mp4"})}__name(imagesToMp4$2,"imagesToMp4$2");var _timeline2,_width2,_height2,_canvas2,_anticipatedFrame2,_controls,_frames2,_subscribers2,_status2,_renderMode2,_rendering2,_a18;let FrameSaver$2=(_a18=class{constructor({timeline,width,height}){__privateAdd(this,_timeline2);__privateAdd(this,_width2);__privateAdd(this,_height2);__privateAdd(this,_canvas2);__privateAdd(this,_anticipatedFrame2);__privateAdd(this,_controls);__privateAdd(this,_frames2,[]);__privateAdd(this,_subscribers2,[]);__privateAdd(this,_status2,{rendering:!1,totalFrames:0,renderedFrames:0});__privateAdd(this,_renderMode2,"imseq");__privateAdd(this,_rendering2,!1);__privateSet(this,_timeline2,timeline),__privateSet(this,_width2,width),__privateSet(this,_height2,height)}setControls(controls){__privateSet(this,_controls,controls)}setSize(width,height){__privateSet(this,_width2,width),__privateSet(this,_height2,height)}addCanvas(canvas){__privateSet(this,_canvas2,canvas)}subscribe(cb){return __privateGet(this,_subscribers2).push(cb),()=>{__privateSet(this,_subscribers2,__privateGet(this,_subscribers2).filter(s2=>s2!==cb))}}getStatus(){return __privateGet(this,_status2)}frame(){if(!__privateGet(this,_rendering2)||!__privateGet(this,_canvas2))return;const project=__privateGet(this,_timeline2).getProject(),currentFrame=project.timelineData.playheadPosition;if(currentFrame!==__privateGet(this,_anticipatedFrame2))return;const focusRange=project.timelineData.focusRange;if(__privateGet(this,_status2).renderedFrames+1<__privateGet(this,_status2).totalFrames){const canvas=document.querySelector("canvas");__privateGet(this,_frames2).push(canvas.toDataURL()),__privateSet(this,_anticipatedFrame2,(currentFrame+1)%focusRange[1]),__privateGet(this,_timeline2).projectTools.updatePlayheadPosition(__privateGet(this,_anticipatedFrame2),!0),__privateSet(this,_status2,{...__privateGet(this,_status2),renderedFrames:__privateGet(this,_status2).renderedFrames+1})}else{const jszip=new JSZip,folder=jszip.folder("frames");__privateGet(this,_frames2).forEach((frame,index)=>{const base64Data=frame.split(",")[1],binaryString=window.atob(base64Data),binaryLen=binaryString.length,bytes2=new Uint8Array(binaryLen);for(let i2=0;i2<binaryLen;i2++)bytes2[i2]=binaryString.charCodeAt(i2);const fileName="frame"+String(index).padStart(5,"0")+".png";folder.file(fileName,bytes2,{base64:!0})}),__privateGet(this,_renderMode2)==="imseq"&&jszip.generateAsync({type:"blob"}).then(content=>{const blobUrl=URL.createObjectURL(content),a2=document.createElement("a");a2.href=blobUrl,a2.download="frames.zip",a2.click(),URL.revokeObjectURL(blobUrl),__privateSet(this,_status2,{...__privateGet(this,_status2),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline2).projectTools.updatePlayheadPosition(0,!0)}),__privateGet(this,_renderMode2)==="mp4"&&imagesToMp4$2(__privateGet(this,_frames2),{width:__privateGet(this,_width2),height:__privateGet(this,_height2),fps:30}).then(mp4Blob=>{const mp4BlobUrl=URL.createObjectURL(mp4Blob),a2=document.createElement("a");a2.href=mp4BlobUrl,a2.download="animation.mp4",a2.click(),URL.revokeObjectURL(mp4BlobUrl),__privateSet(this,_status2,{...__privateGet(this,_status2),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline2).projectTools.updatePlayheadPosition(0,!0)}),__privateSet(this,_frames2,[]),__privateSet(this,_anticipatedFrame2,0),__privateSet(this,_rendering2,!1)}}beginImSeq(){__privateGet(this,_rendering2)||(__privateSet(this,_renderMode2,"imseq"),this.begin())}beginMp4(){__privateGet(this,_rendering2)||(__privateSet(this,_renderMode2,"mp4"),this.begin())}begin(){__privateSet(this,_rendering2,!0);const focusRange=__privateGet(this,_timeline2).getProject().timelineData.focusRange,totalFrames=__privateGet(this,_controls).exportPerfectLoop?focusRange[1]-focusRange[0]:Math.floor(__privateGet(this,_controls).exportDuration*30);__privateSet(this,_anticipatedFrame2,focusRange[0]),__privateSet(this,_status2,{rendering:!0,totalFrames,renderedFrames:0}),__privateGet(this,_timeline2).projectTools.updatePlayheadPosition(focusRange[0],!0)}saveFrame(){const canvas=document.querySelector("canvas");console.log("Saving frame",canvas);const dataUrl=canvas.toDataURL(),a2=document.createElement("a");a2.href=dataUrl,a2.style.display="none",a2.download="frame.png",document.body.appendChild(a2),a2.click(),document.body.removeChild(a2)}},_timeline2=new WeakMap,_width2=new WeakMap,_height2=new WeakMap,_canvas2=new WeakMap,_anticipatedFrame2=new WeakMap,_controls=new WeakMap,_frames2=new WeakMap,_subscribers2=new WeakMap,_status2=new WeakMap,_renderMode2=new WeakMap,_rendering2=new WeakMap,__name(_a18,"FrameSaver"),_a18);function isBrowserKnownToWork$2(){const ua=navigator.userAgent;return/Chrome\/\d+/.test(ua)&&!/Edg/.test(ua)&&!/OPR/.test(ua)?!0:(/Firefox/.test(ua)||/Safari/.test(ua)&&!/Chrome/.test(ua),!1)}__name(isBrowserKnownToWork$2,"isBrowserKnownToWork$2");function FrameSaverScreen$2({frameSaver,recordEvent,controls}){const{rendering,totalFrames,renderedFrames}=React.useSyncExternalStore(frameSaver.subscribe.bind(frameSaver),frameSaver.getStatus.bind(frameSaver));frameSaver.setControls(controls);const videoEncoderAvailable=isBrowserKnownToWork$2(),{FreeWorkload}=useCK();useUnit(unit=>"beginRender"in unit.payload,(unit,workload)=>{workload.thread("default").worker(globalThis.CK_INSTANCE,{beginRender_response:!0}),workload.dispatch()});const[displayOverlay,setDisplayOverlay]=React.useState(!1),registerUnitProcessor=useRegisterUnitProcessor();return jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:10},children:[jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginImSeq(),recordEvent({path:"liquidlissajous-renderframes",event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export image sequence",iconName:"animated_images"}),videoEncoderAvailable&&jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginMp4(),recordEvent({path:"liquidlissajous-renderframes",event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export as .mp4",iconName:"movie"}),jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{recordEvent({path:"liquidlissajous-saveframe",event:!0}),frameSaver.saveFrame()},"onClick"),text:"export frame",iconName:"camera"}),displayOverlay&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:30,color:"var(--gray6)",backgroundColor:"var(--gray1)",borderRadius:"var(--borderRadiusSmall)",marginLeft:20,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:40},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:10,right:10},children:!rendering&&jsxRuntimeExports.jsx(Icon,{iconName:"close",onClick:__name(()=>{setDisplayOverlay(!1)},"onClick")})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",fontSize:20,fontWeight:600},children:rendering?`Rendering: ${renderedFrames} / ${totalFrames}`:"Done!"}),jsxRuntimeExports.jsx("div",{children:rendering?"Your download will begin shortly...":null})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{children:"If you enjoy using this tool, subscribe to our email newsletter to get updates on new features and releases!"}),jsxRuntimeExports.jsx(Button,{bgColor:"var(--yellow3)",color:"var(--gray1)",hoverBgColor:"var(--yellow2)",hoverColor:"var(--gray1)",onClick:__name(()=>{window.open("http://eepurl.com/i6WBsQ","_blank")},"onClick"),text:"Subscribe to newsletter",iconName:"email"})]})]})]})}__name(FrameSaverScreen$2,"FrameSaverScreen$2");var gradientVS_default=`#version 300 es
in  vec2 a_pos;
in float particleCount;  
in float width;         
in float height;        
in float time;
in vec3 backgroundColor;

in float slice;
in float e_factor;

in vec3 noise;
in vec3 fluidWarp;
out vec3 v_noise;
out vec3 v_fluidWarp;
out vec2 v_uv;
out float v_particleCount;
out vec3 v_backgroundColor; 
out float v_width;       
out float v_height;      
out float v_time;

out float v_slice;
out float v_e_factor;

void main() {
  v_uv = a_pos;          
v_particleCount = particleCount;   
  gl_Position = vec4(a_pos, 0.0, 1.0);
    v_width = width;      
    v_height = height;    
    v_noise = noise;
    v_fluidWarp = fluidWarp;

    v_time = time;
    v_backgroundColor = backgroundColor; 

    v_slice = slice;      
    v_e_factor = e_factor; 
}`,gradientFS_default=`#version 300 es
precision highp float;
uniform sampler2D u_dyn;
uniform sampler2D u_depth_field;
in  float v_width;        
in float v_height;       
in  float v_time;         
in  vec2 v_uv;
in vec3 v_backgroundColor; 
in vec3 v_noise;
in vec3 v_fluidWarp;
in  float v_particleCount; 
out vec4 outColor;

in float v_slice;        
in float v_e_factor;     

#ifndef MAT_OKLAB2RGB
#define MAT_OKLAB2RGB
const mat3 OKLAB2RGB_A = mat3(
    1.0,           1.0,           1.0,
    0.3963377774, -0.1055613458, -0.0894841775,
    0.2158037573, -0.0638541728, -1.2914855480);

const mat3 OKLAB2RGB_B = mat3(
    4.0767416621, -1.2684380046, -0.0041960863,
    -3.3077115913, 2.6097574011, -0.7034186147,
    0.2309699292, -0.3413193965, 1.7076147010);
#endif

#ifndef FNC_OKLAB2RGB
#define FNC_OKLAB2RGB
vec3 oklab2rgb(const in vec3 oklab) {
    vec3 lms = OKLAB2RGB_A * oklab;
    return OKLAB2RGB_B * (lms * lms * lms);
}
vec4 oklab2rgb(const in vec4 oklab) { return vec4(oklab2rgb(oklab.xyz), oklab.a); }
#endif
#ifndef FNC_GAUSSIAN
#define FNC_GAUSSIAN
float gaussian(float d, float s) { return exp(-(d*d) / (2.0 * s*s)); }
float gaussian( vec2 d, float s) { return exp(-( d.x*d.x + d.y*d.y) / (2.0 * s*s)); }
float gaussian( vec3 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z ) / (2.0 * s*s)); }
float gaussian( vec4 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z + d.w*d.w ) / (2.0 * s*s)); }
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef FNC_SAMPLECLAMP2EDGE
#define FNC_SAMPLECLAMP2EDGE
vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, vec2 texResolution) {
    vec2 pixel = 1.0/texResolution;
    return SAMPLER_FNC( tex, clamp(st, pixel, 1.0-pixel) );
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(0.01), vec2(0.99) ) ); 
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, float edge) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(edge), vec2(1.0 - edge) ) ); 
}
#endif

#ifndef GAUSSIANBLUR2D_TYPE
#ifdef GAUSSIANBLUR_TYPE
#define GAUSSIANBLUR2D_TYPE GAUSSIANBLUR_TYPE
#else
#define GAUSSIANBLUR2D_TYPE vec4
#endif
#endif

#ifndef GAUSSIANBLUR2D_SAMPLER_FNC
#ifdef GAUSSIANBLUR_SAMPLER_FNC
#define GAUSSIANBLUR2D_SAMPLER_FNC(TEX, UV) GAUSSIANBLUR_SAMPLER_FNC(TEX, UV)
#else
#define GAUSSIANBLUR2D_SAMPLER_FNC(TEX, UV) sampleClamp2edge(TEX, UV)
#endif
#endif

#ifndef FNC_GAUSSIANBLUR2D
#define FNC_GAUSSIANBLUR2D
GAUSSIANBLUR2D_TYPE gaussianBlur2D(in SAMPLER_TYPE tex, in vec2 st, in vec2 offset, const int kernelSize) {
    GAUSSIANBLUR2D_TYPE accumColor = GAUSSIANBLUR2D_TYPE(0.);
    
    #ifndef GAUSSIANBLUR2D_KERNELSIZE
    
        #if defined(PLATFORM_WEBGL)
            #define GAUSSIANBLUR2D_KERNELSIZE 20
            float kernelSizef = float(kernelSize);
        #else
            #define GAUSSIANBLUR2D_KERNELSIZE kernelSize
            float kernelSizef = float(GAUSSIANBLUR2D_KERNELSIZE);
        #endif

    #else
        float kernelSizef = float(GAUSSIANBLUR2D_KERNELSIZE);
    #endif

    float accumWeight = 0.;
    const float k = 0.15915494; 
    vec2 xy = vec2(0.0);
    for (int j = 0; j < GAUSSIANBLUR2D_KERNELSIZE; j++) {
        #if defined(PLATFORM_WEBGL)
        if (j >= kernelSize)
            break;
        #endif
        xy.y = -.5 * (kernelSizef - 1.) + float(j);
        for (int i = 0; i < GAUSSIANBLUR2D_KERNELSIZE; i++) {
            #if defined(PLATFORM_WEBGL)
            if (i >= kernelSize)
                break;
            #endif
            xy.x = -0.5 * (kernelSizef - 1.) + float(i);
            float weight = (k / kernelSizef) * gaussian(xy, kernelSizef);
            accumColor += weight * GAUSSIANBLUR2D_SAMPLER_FNC(tex, st + xy * offset);
            accumWeight += weight;
        }
    }
    return accumColor / accumWeight;
}
#endif
#ifndef HCV_EPSILON
#define HCV_EPSILON 1e-10
#endif

#ifndef FNC_RGB2HCV
#define FNC_RGB2HCV
vec3 rgb2hcv(const in vec3 rgb) {
    vec4 P = (rgb.g < rgb.b) ? vec4(rgb.bg, -1.0, 2.0/3.0) : vec4(rgb.gb, 0.0, -1.0/3.0);
    vec4 Q = (rgb.r < P.x) ? vec4(P.xyw, rgb.r) : vec4(rgb.r, P.yzx);
    float C = Q.x - min(Q.w, Q.y);
    float H = abs((Q.w - Q.y) / (6.0 * C + HCV_EPSILON) + Q.z);
    return vec3(H, C, Q.x);
}
vec4 rgb2hcv(vec4 rgb) {return vec4(rgb2hcv(rgb.rgb), rgb.a);}
#endif

#ifndef HSL_EPSILON
#define HSL_EPSILON 1e-10
#endif

#ifndef FNC_RGB2HSL
#define FNC_RGB2HSL
vec3 rgb2hsl(const in vec3 rgb) {
    vec3 HCV = rgb2hcv(rgb);
    float L = HCV.z - HCV.y * 0.5;
    float S = HCV.y / (1.0 - abs(L * 2.0 - 1.0) + HSL_EPSILON);
    return vec3(HCV.x, S, L);
}
vec4 rgb2hsl(const in vec4 rgb) { return vec4(rgb2hsl(rgb.xyz),rgb.a);}
#endif

const int STRIDE  = 7;

float fetch(int index) {             
  return texelFetch(u_dyn, ivec2(index, 0), 0).r;
}

vec4 getColor(vec3 p) {
    int PCOUNT = int(v_particleCount); 
    float wTotal = 0.0;
    float u_r = 0.0;
    float u_g = 0.0;
    float u_b = 0.0;
    bool needsNormalization = true;
    for (int i = 0; i < PCOUNT; ++i) {
        int base = i * STRIDE;
        vec3 center = vec3(fetch(base), fetch(base + 1), fetch(base+2));
        vec3 p_adj = p * vec3(1.,1.,2.5);
        vec3 center_adj = center * vec3(1.,1.,2.5);
        float distance = sqrt(dot(p_adj - center_adj, p_adj - center_adj));
        float r = fetch(base + 3);
        float g = fetch(base + 4);
        float b = fetch(base + 5);
        if (distance < 0.01) {
            u_r = r;
            u_g = g;
            u_b = b;
            needsNormalization = false; 
            break;
        } else {
            float w = 1. / pow((distance), 1.5 + v_slice * 3.);
            wTotal += w;
            u_r += r * w;
            u_g += g * w;
            u_b += b * w;
        }
    }
    
    if (needsNormalization && wTotal > 0.0) {
        u_r /= wTotal;
        u_g /= wTotal;
        u_b /= wTotal;
    }

    return vec4(u_r, u_g, u_b, 1.0); 
}

void main() {

    vec2 uv = v_uv;
    int PCOUNT = int(v_particleCount); 
    vec2 pixelDirection = vec2(0.05);
    const int kernelSize = 9;
    vec4 blurred = gaussianBlur2D(u_depth_field, (uv + 1.0) / 2.0, pixelDirection, kernelSize);
    float depthField = blurred.r; 
    vec3 bgColor = v_backgroundColor; 
    float d = depthField * 2. - 1.;
    outColor = getColor(vec3(v_uv, d)); 

    
    
    outColor = oklab2rgb(outColor);
}`;const FLOATS_PER_PARTICLE$2=7,MAX_PARTICLES$2=ParticleSystem.HARD_MAX,texWidth$2=MAX_PARTICLES$2*FLOATS_PER_PARTICLE$2,gradientObject={name:"voronoiBG",instanceAttributes:[{name:"particleCount",size:1},{name:"width",size:1},{name:"height",size:1},{name:"time",size:1},{name:"noise",size:3},{name:"fluidWarp",size:3},{name:"slice",size:1},{name:"e_factor",size:1},{name:"backgroundColor",size:3}],vertexShader:gradientVS_default,fragmentShader:gradientFS_default,dynamicData:{width:texWidth$2,height:1}};function gradientDraw(particleSystem){const particles=particleSystem.PARTICLES,P2=particles.length,dynData=new Float32Array(texWidth$2);particles.forEach((p2,i2)=>{const off=i2*FLOATS_PER_PARTICLE$2;dynData[off+0]=p2.x,dynData[off+1]=p2.y,dynData[off+2]=p2.z,dynData[off+3]=p2.r,dynData[off+4]=p2.g,dynData[off+5]=p2.b,dynData[off+6]=p2.aWeight});const backgroundColorArr=new Float32Array([particleSystem.BACKGROUND_COLOR[0],particleSystem.BACKGROUND_COLOR[1],particleSystem.BACKGROUND_COLOR[2]]),widthArr=new Float32Array([particleSystem.WIDTH]),heightArr=new Float32Array([particleSystem.HEIGHT]),timeArr=new Float32Array([particleSystem.REL_TIME]),noiseIntensityArr=new Float32Array([particleSystem.CONFIG.noiseIntensity,particleSystem.CONFIG.noiseScale,particleSystem.CONFIG.noiseSpeed]),warpIntensityArr=new Float32Array([particleSystem.CONFIG.fluidWarpIntensity,particleSystem.CONFIG.fluidWarpScale,particleSystem.CONFIG.fluidWarpSpeed]);return{count:1,attributes:{particleCount:new Float32Array([P2]),width:widthArr,height:heightArr,time:timeArr,noise:noiseIntensityArr,fluidWarp:warpIntensityArr,slice:new Float32Array([particleSystem.CONFIG.mixingIntensity]),e_factor:new Float32Array([1]),backgroundColor:backgroundColorArr},dynamicData:dynData,textures:{u_depth_field:"exampleTexture"}}}__name(gradientDraw,"gradientDraw");var circleVS_default=`#version 300 es
in  vec2 a_pos;          
in  vec3 offset;         
in  float radius;        
in  vec3 fillColor;      
in  vec2 resolution;     
out vec2 v_local;        
out vec3 v_color;
out float v_z;
void main() {
  v_local = a_pos;
  v_color = fillColor;
  float aspect = resolution.x / resolution.y; 
  v_z = offset.z * 0.5 + 0.5;
  gl_Position = vec4(a_pos * vec2(radius, radius * aspect) + offset.xy, -offset.z * 0.9 - 0.03, 1.0);
}`,circleFS_default=`#version 300 es
precision highp float;
#ifndef MAT_OKLAB2RGB
#define MAT_OKLAB2RGB
const mat3 OKLAB2RGB_A = mat3(
    1.0,           1.0,           1.0,
    0.3963377774, -0.1055613458, -0.0894841775,
    0.2158037573, -0.0638541728, -1.2914855480);

const mat3 OKLAB2RGB_B = mat3(
    4.0767416621, -1.2684380046, -0.0041960863,
    -3.3077115913, 2.6097574011, -0.7034186147,
    0.2309699292, -0.3413193965, 1.7076147010);
#endif

#ifndef FNC_OKLAB2RGB
#define FNC_OKLAB2RGB
vec3 oklab2rgb(const in vec3 oklab) {
    vec3 lms = OKLAB2RGB_A * oklab;
    return OKLAB2RGB_B * (lms * lms * lms);
}
vec4 oklab2rgb(const in vec4 oklab) { return vec4(oklab2rgb(oklab.xyz), oklab.a); }
#endif
in  vec2 v_local;
in  vec3 v_color;
in  float v_z; 
out vec4 outColor;
void main() {
  float alpha = 1.;

  if (length(v_local) > 1.0) discard;  
  if (length(v_local) > 0.8) {
  outColor = vec4(vec3(1.0),alpha); return;
  }  
  else outColor = vec4(v_color, alpha);

  outColor = oklab2rgb(outColor); 
}`;const circleObject={name:"circle",instanceAttributes:[{name:"offset",size:3},{name:"radius",size:1},{name:"resolution",size:2},{name:"fillColor",size:3}],vertexShader:circleVS_default,fragmentShader:circleFS_default};function circleDraw(particleSystem){const offsetArr=[],radiusArr=[],colorArr=[],resArr=[];return particleSystem.PARTICLES.forEach(particle=>{const{x:x2,y:y2,z:z2,r:r2,g:g2,b:b2}=particle;offsetArr.push(x2),offsetArr.push(y2),offsetArr.push(z2);const radius=12*2/particleSystem.WIDTH;radiusArr.push(radius),colorArr.push(r2,g2,b2),resArr.push(particleSystem.WIDTH,particleSystem.HEIGHT)}),{count:particleSystem.PARTICLES.length,attributes:{offset:new Float32Array(offsetArr),radius:new Float32Array(radiusArr),fillColor:new Float32Array(colorArr),resolution:new Float32Array(resArr)}}}__name(circleDraw,"circleDraw");function computeDepthFieldTexture(ps,size2=256,iterations=80){const N2=size2,len=N2*N2,h2=new Float32Array(len),obs=new Float32Array(len);for(const p2 of ps.PARTICLES){const ix=Math.min(N2-1,Math.max(0,Math.floor((p2.x+1)*.5*(N2-1)))),idx=Math.min(N2-1,Math.max(0,Math.floor((p2.y+1)*.5*(N2-1))))*N2+ix,zNorm=(p2.z+1)*.5;zNorm>obs[idx]&&(obs[idx]=zNorm)}h2.set(obs);for(let it2=0;it2<iterations;++it2){let maxDelta=0;for(let y2=1;y2<N2-1;++y2)for(let x2=1;x2<N2-1;++x2){const i2=y2*N2+x2,avg=(h2[i2-1]+h2[i2+1]+h2[i2-N2]+h2[i2+N2])*.25,newH=Math.max(avg,obs[i2]),delta=Math.abs(newH-h2[i2]);maxDelta=delta>maxDelta?delta:maxDelta,h2[i2]=newH}if(maxDelta<1e-4)break}const hInt=new Uint8Array(len);for(let i2=0;i2<len;++i2)hInt[i2]=Math.floor(h2[i2]*255);return hInt}__name(computeDepthFieldTexture,"computeDepthFieldTexture");var pathVS_default=`#version 300 es
in vec2 a_pos;           
in vec3 a_start;         
in vec3 a_end;           
in vec3 strokeColor;     
in float thickness;      
out vec2 v_local;        
out vec2 v_dir;          
out vec3 v_color;
out float v_z;
void main() {
  v_color = strokeColor;
  v_local = a_pos;
  vec2 dir = a_end.xy - a_start.xy;
  float len = length(dir);
  vec2 dirNorm = dir / len;
  vec2 normal = vec2(-dirNorm.y, dirNorm.x);

  
  float t = a_pos.x * 0.5 + 0.5; 

  float startZ = a_start.z;
  float endZ = a_end.z;
  float z = mix(startZ, endZ, t);

  
  vec2 pos2d = mix(a_start.xy, a_end.xy, 0.5) + dirNorm * (a_pos.x * len * 0.5) + normal * (a_pos.y * thickness * 0.5);
  v_z = z * 0.5 + 0.5; 

  v_dir = dirNorm;
  gl_Position = vec4(pos2d, -z * 0.9, 1.0);
}`,pathFS_default=`#version 300 es
precision highp float;
in vec2 v_local;
in vec2 v_dir;
in vec3 v_color;
in float v_z; 
out vec4 outColor;
void main() {
  
  float dist = abs(v_local.y);
  float alpha = smoothstep(1.0, 0.7, dist); 
  float adjZ = v_z; 
  alpha *= (0.3 + 0.7 * adjZ);
  vec3 tcol = mix(vec3(0.2,0.2,1.), vec3(1.0,0.2,0.2),adjZ);
  vec3 col = mix(vec3(1.0), tcol, dist);
  outColor = vec4(col, alpha);
}`;const pathObject={name:"path",instanceAttributes:[{name:"a_start",size:3},{name:"a_end",size:3},{name:"strokeColor",size:3},{name:"thickness",size:1}],vertexShader:pathVS_default,fragmentShader:pathFS_default};function pathDraw(particleSystem){const path=particleSystem.LISSAJOUS_PATH;if(!path||path.length<2)return{count:0,attributes:{}};const startArr=[],endArr=[],colorArr=[],thicknessArr=[],thickness=.015;for(let i2=0;i2<path.length-1;i2++){const[x0,y0,z0]=path[i2],[x1,y1,z1]=path[i2+1];startArr.push(x0,y0,z0),endArr.push(x1,y1,z1),colorArr.push(1,1,1),thicknessArr.push(thickness)}return{count:path.length-1,attributes:{a_start:new Float32Array(startArr),a_end:new Float32Array(endArr),strokeColor:new Float32Array(colorArr),thickness:new Float32Array(thicknessArr)}}}__name(pathDraw,"pathDraw");const epsilon=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon)*epsilon;function sum(elen,e2,flen,f2,h2){let Q2,Qnew,hh,bvirt,enow=e2[0],fnow=f2[0],eindex=0,findex=0;fnow>enow==fnow>-enow?(Q2=enow,enow=e2[++eindex]):(Q2=fnow,fnow=f2[++findex]);let hindex=0;if(eindex<elen&&findex<flen)for(fnow>enow==fnow>-enow?(Qnew=enow+Q2,hh=Q2-(Qnew-enow),enow=e2[++eindex]):(Qnew=fnow+Q2,hh=Q2-(Qnew-fnow),fnow=f2[++findex]),Q2=Qnew,hh!==0&&(h2[hindex++]=hh);eindex<elen&&findex<flen;)fnow>enow==fnow>-enow?(Qnew=Q2+enow,bvirt=Qnew-Q2,hh=Q2-(Qnew-bvirt)+(enow-bvirt),enow=e2[++eindex]):(Qnew=Q2+fnow,bvirt=Qnew-Q2,hh=Q2-(Qnew-bvirt)+(fnow-bvirt),fnow=f2[++findex]),Q2=Qnew,hh!==0&&(h2[hindex++]=hh);for(;eindex<elen;)Qnew=Q2+enow,bvirt=Qnew-Q2,hh=Q2-(Qnew-bvirt)+(enow-bvirt),enow=e2[++eindex],Q2=Qnew,hh!==0&&(h2[hindex++]=hh);for(;findex<flen;)Qnew=Q2+fnow,bvirt=Qnew-Q2,hh=Q2-(Qnew-bvirt)+(fnow-bvirt),fnow=f2[++findex],Q2=Qnew,hh!==0&&(h2[hindex++]=hh);return(Q2!==0||hindex===0)&&(h2[hindex++]=Q2),hindex}__name(sum,"sum");function estimate(elen,e2){let Q2=e2[0];for(let i2=1;i2<elen;i2++)Q2+=e2[i2];return Q2}__name(estimate,"estimate");function vec(n3){return new Float64Array(n3)}__name(vec,"vec");const ccwerrboundA=(3+16*epsilon)*epsilon,ccwerrboundB=(2+12*epsilon)*epsilon,ccwerrboundC=(9+64*epsilon)*epsilon*epsilon,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(ax,ay,bx,by,cx,cy,detsum){let acxtail,acytail,bcxtail,bcytail,bvirt,c,ahi,alo,bhi,blo,_i,_j,_0,s1,s0,t1,t0,u3;const acx=ax-cx,bcx=bx-cx,acy=ay-cy,bcy=by-cy;s1=acx*bcy,c=splitter*acx,ahi=c-(c-acx),alo=acx-ahi,c=splitter*bcy,bhi=c-(c-bcy),blo=bcy-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acy*bcx,c=splitter*acy,ahi=c-(c-acy),alo=acy-ahi,c=splitter*bcx,bhi=c-(c-bcx),blo=bcx-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,B[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,B[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,B[2]=_j-(u3-bvirt)+(_i-bvirt),B[3]=u3;let det2=estimate(4,B),errbound=ccwerrboundB*detsum;if(det2>=errbound||-det2>=errbound||(bvirt=ax-acx,acxtail=ax-(acx+bvirt)+(bvirt-cx),bvirt=bx-bcx,bcxtail=bx-(bcx+bvirt)+(bvirt-cx),bvirt=ay-acy,acytail=ay-(acy+bvirt)+(bvirt-cy),bvirt=by-bcy,bcytail=by-(bcy+bvirt)+(bvirt-cy),acxtail===0&&acytail===0&&bcxtail===0&&bcytail===0)||(errbound=ccwerrboundC*detsum+resulterrbound*Math.abs(det2),det2+=acx*bcytail+bcy*acxtail-(acy*bcxtail+bcx*acytail),det2>=errbound||-det2>=errbound))return det2;s1=acxtail*bcy,c=splitter*acxtail,ahi=c-(c-acxtail),alo=acxtail-ahi,c=splitter*bcy,bhi=c-(c-bcy),blo=bcy-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acytail*bcx,c=splitter*acytail,ahi=c-(c-acytail),alo=acytail-ahi,c=splitter*bcx,bhi=c-(c-bcx),blo=bcx-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,u[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,u[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,u[2]=_j-(u3-bvirt)+(_i-bvirt),u[3]=u3;const C1len=sum(4,B,4,u,C1);s1=acx*bcytail,c=splitter*acx,ahi=c-(c-acx),alo=acx-ahi,c=splitter*bcytail,bhi=c-(c-bcytail),blo=bcytail-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acy*bcxtail,c=splitter*acy,ahi=c-(c-acy),alo=acy-ahi,c=splitter*bcxtail,bhi=c-(c-bcxtail),blo=bcxtail-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,u[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,u[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,u[2]=_j-(u3-bvirt)+(_i-bvirt),u[3]=u3;const C2len=sum(C1len,C1,4,u,C2);s1=acxtail*bcytail,c=splitter*acxtail,ahi=c-(c-acxtail),alo=acxtail-ahi,c=splitter*bcytail,bhi=c-(c-bcytail),blo=bcytail-bhi,s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo),t1=acytail*bcxtail,c=splitter*acytail,ahi=c-(c-acytail),alo=acytail-ahi,c=splitter*bcxtail,bhi=c-(c-bcxtail),blo=bcxtail-bhi,t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo),_i=s0-t0,bvirt=s0-_i,u[0]=s0-(_i+bvirt)+(bvirt-t0),_j=s1+_i,bvirt=_j-s1,_0=s1-(_j-bvirt)+(_i-bvirt),_i=_0-t1,bvirt=_0-_i,u[1]=_0-(_i+bvirt)+(bvirt-t1),u3=_j+_i,bvirt=u3-_j,u[2]=_j-(u3-bvirt)+(_i-bvirt),u[3]=u3;const Dlen=sum(C2len,C2,4,u,D);return D[Dlen-1]}__name(orient2dadapt,"orient2dadapt");function orient2d(ax,ay,bx,by,cx,cy){const detleft=(ay-cy)*(bx-cx),detright=(ax-cx)*(by-cy),det2=detleft-detright,detsum=Math.abs(detleft+detright);return Math.abs(det2)>=ccwerrboundA*detsum?det2:-orient2dadapt(ax,ay,bx,by,cx,cy,detsum)}__name(orient2d,"orient2d");const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512),_Delaunator=class _Delaunator{static from(points,getX=defaultGetX,getY=defaultGetY){const n3=points.length,coords=new Float64Array(n3*2);for(let i2=0;i2<n3;i2++){const p2=points[i2];coords[2*i2]=getX(p2),coords[2*i2+1]=getY(p2)}return new _Delaunator(coords)}constructor(coords){const n3=coords.length>>1;if(n3>0&&typeof coords[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=coords;const maxTriangles=Math.max(2*n3-5,0);this._triangles=new Uint32Array(maxTriangles*3),this._halfedges=new Int32Array(maxTriangles*3),this._hashSize=Math.ceil(Math.sqrt(n3)),this._hullPrev=new Uint32Array(n3),this._hullNext=new Uint32Array(n3),this._hullTri=new Uint32Array(n3),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n3),this._dists=new Float64Array(n3),this.update()}update(){const{coords,_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}=this,n3=coords.length>>1;let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i3=0;i3<n3;i3++){const x2=coords[2*i3],y2=coords[2*i3+1];x2<minX&&(minX=x2),y2<minY&&(minY=y2),x2>maxX&&(maxX=x2),y2>maxY&&(maxY=y2),this._ids[i3]=i3}const cx=(minX+maxX)/2,cy=(minY+maxY)/2;let i0,i1,i2;for(let i3=0,minDist=1/0;i3<n3;i3++){const d2=dist(cx,cy,coords[2*i3],coords[2*i3+1]);d2<minDist&&(i0=i3,minDist=d2)}const i0x=coords[2*i0],i0y=coords[2*i0+1];for(let i3=0,minDist=1/0;i3<n3;i3++){if(i3===i0)continue;const d2=dist(i0x,i0y,coords[2*i3],coords[2*i3+1]);d2<minDist&&d2>0&&(i1=i3,minDist=d2)}let i1x=coords[2*i1],i1y=coords[2*i1+1],minRadius=1/0;for(let i3=0;i3<n3;i3++){if(i3===i0||i3===i1)continue;const r2=circumradius(i0x,i0y,i1x,i1y,coords[2*i3],coords[2*i3+1]);r2<minRadius&&(i2=i3,minRadius=r2)}let i2x=coords[2*i2],i2y=coords[2*i2+1];if(minRadius===1/0){for(let i3=0;i3<n3;i3++)this._dists[i3]=coords[2*i3]-coords[0]||coords[2*i3+1]-coords[1];quicksort(this._ids,this._dists,0,n3-1);const hull=new Uint32Array(n3);let j2=0;for(let i3=0,d0=-1/0;i3<n3;i3++){const id=this._ids[i3],d2=this._dists[id];d2>d0&&(hull[j2++]=id,d0=d2)}this.hull=hull.subarray(0,j2),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(orient2d(i0x,i0y,i1x,i1y,i2x,i2y)<0){const i3=i1,x2=i1x,y2=i1y;i1=i2,i1x=i2x,i1y=i2y,i2=i3,i2x=x2,i2y=y2}const center=circumcenter(i0x,i0y,i1x,i1y,i2x,i2y);this._cx=center.x,this._cy=center.y;for(let i3=0;i3<n3;i3++)this._dists[i3]=dist(coords[2*i3],coords[2*i3+1],center.x,center.y);quicksort(this._ids,this._dists,0,n3-1),this._hullStart=i0;let hullSize=3;hullNext[i0]=hullPrev[i2]=i1,hullNext[i1]=hullPrev[i0]=i2,hullNext[i2]=hullPrev[i1]=i0,hullTri[i0]=0,hullTri[i1]=1,hullTri[i2]=2,hullHash.fill(-1),hullHash[this._hashKey(i0x,i0y)]=i0,hullHash[this._hashKey(i1x,i1y)]=i1,hullHash[this._hashKey(i2x,i2y)]=i2,this.trianglesLen=0,this._addTriangle(i0,i1,i2,-1,-1,-1);for(let k2=0,xp,yp;k2<this._ids.length;k2++){const i3=this._ids[k2],x2=coords[2*i3],y2=coords[2*i3+1];if(k2>0&&Math.abs(x2-xp)<=EPSILON&&Math.abs(y2-yp)<=EPSILON||(xp=x2,yp=y2,i3===i0||i3===i1||i3===i2))continue;let start=0;for(let j2=0,key=this._hashKey(x2,y2);j2<this._hashSize&&(start=hullHash[(key+j2)%this._hashSize],!(start!==-1&&start!==hullNext[start]));j2++);start=hullPrev[start];let e2=start,q2;for(;q2=hullNext[e2],orient2d(x2,y2,coords[2*e2],coords[2*e2+1],coords[2*q2],coords[2*q2+1])>=0;)if(e2=q2,e2===start){e2=-1;break}if(e2===-1)continue;let t2=this._addTriangle(e2,i3,hullNext[e2],-1,-1,hullTri[e2]);hullTri[i3]=this._legalize(t2+2),hullTri[e2]=t2,hullSize++;let n4=hullNext[e2];for(;q2=hullNext[n4],orient2d(x2,y2,coords[2*n4],coords[2*n4+1],coords[2*q2],coords[2*q2+1])<0;)t2=this._addTriangle(n4,i3,q2,hullTri[i3],-1,hullTri[n4]),hullTri[i3]=this._legalize(t2+2),hullNext[n4]=n4,hullSize--,n4=q2;if(e2===start)for(;q2=hullPrev[e2],orient2d(x2,y2,coords[2*q2],coords[2*q2+1],coords[2*e2],coords[2*e2+1])<0;)t2=this._addTriangle(q2,i3,e2,-1,hullTri[e2],hullTri[q2]),this._legalize(t2+2),hullTri[q2]=t2,hullNext[e2]=e2,hullSize--,e2=q2;this._hullStart=hullPrev[i3]=e2,hullNext[e2]=hullPrev[n4]=i3,hullNext[i3]=n4,hullHash[this._hashKey(x2,y2)]=i3,hullHash[this._hashKey(coords[2*e2],coords[2*e2+1])]=e2}this.hull=new Uint32Array(hullSize);for(let i3=0,e2=this._hullStart;i3<hullSize;i3++)this.hull[i3]=e2,e2=hullNext[e2];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(x2,y2){return Math.floor(pseudoAngle(x2-this._cx,y2-this._cy)*this._hashSize)%this._hashSize}_legalize(a2){const{_triangles:triangles,_halfedges:halfedges,coords}=this;let i2=0,ar=0;for(;;){const b2=halfedges[a2],a0=a2-a2%3;if(ar=a0+(a2+2)%3,b2===-1){if(i2===0)break;a2=EDGE_STACK[--i2];continue}const b0=b2-b2%3,al=a0+(a2+1)%3,bl=b0+(b2+2)%3,p0=triangles[ar],pr=triangles[a2],pl=triangles[al],p1=triangles[bl];if(inCircle(coords[2*p0],coords[2*p0+1],coords[2*pr],coords[2*pr+1],coords[2*pl],coords[2*pl+1],coords[2*p1],coords[2*p1+1])){triangles[a2]=p1,triangles[b2]=p0;const hbl=halfedges[bl];if(hbl===-1){let e2=this._hullStart;do{if(this._hullTri[e2]===bl){this._hullTri[e2]=a2;break}e2=this._hullPrev[e2]}while(e2!==this._hullStart)}this._link(a2,hbl),this._link(b2,halfedges[ar]),this._link(ar,bl);const br=b0+(b2+1)%3;i2<EDGE_STACK.length&&(EDGE_STACK[i2++]=br)}else{if(i2===0)break;a2=EDGE_STACK[--i2]}}return ar}_link(a2,b2){this._halfedges[a2]=b2,b2!==-1&&(this._halfedges[b2]=a2)}_addTriangle(i0,i1,i2,a2,b2,c){const t2=this.trianglesLen;return this._triangles[t2]=i0,this._triangles[t2+1]=i1,this._triangles[t2+2]=i2,this._link(t2,a2),this._link(t2+1,b2),this._link(t2+2,c),this.trianglesLen+=3,t2}};__name(_Delaunator,"Delaunator");let Delaunator=_Delaunator;function pseudoAngle(dx,dy){const p2=dx/(Math.abs(dx)+Math.abs(dy));return(dy>0?3-p2:1+p2)/4}__name(pseudoAngle,"pseudoAngle");function dist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}__name(dist,"dist");function inCircle(ax,ay,bx,by,cx,cy,px,py){const dx=ax-px,dy=ay-py,ex=bx-px,ey=by-py,fx=cx-px,fy=cy-py,ap=dx*dx+dy*dy,bp=ex*ex+ey*ey,cp=fx*fx+fy*fy;return dx*(ey*cp-bp*fy)-dy*(ex*cp-bp*fx)+ap*(ex*fy-ey*fx)<0}__name(inCircle,"inCircle");function circumradius(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d2=.5/(dx*ey-dy*ex),x2=(ey*bl-dy*cl)*d2,y2=(dx*cl-ex*bl)*d2;return x2*x2+y2*y2}__name(circumradius,"circumradius");function circumcenter(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d2=.5/(dx*ey-dy*ex),x2=ax+(ey*bl-dy*cl)*d2,y2=ay+(dx*cl-ex*bl)*d2;return{x:x2,y:y2}}__name(circumcenter,"circumcenter");function quicksort(ids,dists,left,right){if(right-left<=20)for(let i2=left+1;i2<=right;i2++){const temp=ids[i2],tempDist=dists[temp];let j2=i2-1;for(;j2>=left&&dists[ids[j2]]>tempDist;)ids[j2+1]=ids[j2--];ids[j2+1]=temp}else{const median=left+right>>1;let i2=left+1,j2=right;swap(ids,median,i2),dists[ids[left]]>dists[ids[right]]&&swap(ids,left,right),dists[ids[i2]]>dists[ids[right]]&&swap(ids,i2,right),dists[ids[left]]>dists[ids[i2]]&&swap(ids,left,i2);const temp=ids[i2],tempDist=dists[temp];for(;;){do i2++;while(dists[ids[i2]]<tempDist);do j2--;while(dists[ids[j2]]>tempDist);if(j2<i2)break;swap(ids,i2,j2)}ids[left+1]=ids[j2],ids[j2]=temp,right-i2+1>=j2-left?(quicksort(ids,dists,i2,right),quicksort(ids,dists,left,j2-1)):(quicksort(ids,dists,left,j2-1),quicksort(ids,dists,i2,right))}}__name(quicksort,"quicksort");function swap(arr,i2,j2){const tmp=arr[i2];arr[i2]=arr[j2],arr[j2]=tmp}__name(swap,"swap");function defaultGetX(p2){return p2[0]}__name(defaultGetX,"defaultGetX");function defaultGetY(p2){return p2[1]}__name(defaultGetY,"defaultGetY");function initTriMesh(){const gl2=SimpleWebGL2.__getgl__(),vsSrc=`#version 300 es
  in vec2  a_pos;
  in float a_z;
  out float v_z;
  void main() {
    v_z = a_z;
    gl_Position = vec4(a_pos, 0.0, 1.0);
  }`,fsSrc=`#version 300 es
  precision mediump float;
  in  float v_z;
  out vec4  outColor;
  void main() {
    float g = (v_z + 1.0) * 0.5;
    outColor = vec4(vec3(g), 1.0);
  }`;function compile(src2,type){const sh=gl2.createShader(type);if(gl2.shaderSource(sh,src2),gl2.compileShader(sh),!gl2.getShaderParameter(sh,gl2.COMPILE_STATUS))throw new Error(gl2.getShaderInfoLog(sh)||"Shader error");return sh}__name(compile,"compile");const prog=gl2.createProgram();if(gl2.attachShader(prog,compile(vsSrc,gl2.VERTEX_SHADER)),gl2.attachShader(prog,compile(fsSrc,gl2.FRAGMENT_SHADER)),gl2.linkProgram(prog),!gl2.getProgramParameter(prog,gl2.LINK_STATUS))throw new Error(gl2.getProgramInfoLog(prog)||"Link error");const vao=gl2.createVertexArray(),vbo=gl2.createBuffer(),ibo=gl2.createBuffer(),locPos=gl2.getAttribLocation(prog,"a_pos"),locZ=gl2.getAttribLocation(prog,"a_z");gl2.bindVertexArray(vao),gl2.bindBuffer(gl2.ARRAY_BUFFER,vbo),gl2.enableVertexAttribArray(locPos),gl2.vertexAttribPointer(locPos,2,gl2.FLOAT,!1,12,0),gl2.enableVertexAttribArray(locZ),gl2.vertexAttribPointer(locZ,1,gl2.FLOAT,!1,12,8),gl2.bindBuffer(gl2.ELEMENT_ARRAY_BUFFER,ibo),gl2.bindVertexArray(null);let indexCount=0;function upload(points){if(points.length<3){indexCount=0;return}const flat=new Float64Array(points.length*2);points.forEach((p2,i2)=>{flat[i2*2]=p2.x,flat[i2*2+1]=p2.y});const dela=new Delaunator(flat),idx=new Uint32Array(dela.triangles);indexCount=idx.length;const verts=new Float32Array(points.length*3);points.forEach((p2,i2)=>{verts[i2*3+0]=p2.x,verts[i2*3+1]=p2.y,verts[i2*3+2]=p2.z}),gl2.bindBuffer(gl2.ARRAY_BUFFER,vbo),gl2.bufferData(gl2.ARRAY_BUFFER,verts,gl2.DYNAMIC_DRAW),gl2.bindBuffer(gl2.ELEMENT_ARRAY_BUFFER,ibo),gl2.bufferData(gl2.ELEMENT_ARRAY_BUFFER,idx,gl2.DYNAMIC_DRAW)}__name(upload,"upload");function draw(){indexCount!==0&&(gl2.useProgram(prog),gl2.bindVertexArray(vao),gl2.drawElements(gl2.TRIANGLES,indexCount,gl2.UNSIGNED_INT,0),gl2.bindVertexArray(null))}return __name(draw,"draw"),{upload,draw}}__name(initTriMesh,"initTriMesh");var depthVS_default=`#version 300 es
in  vec2 a_pos;
in float particleCount;  
in float width;         
in float height;        

in float slice;
out vec2 v_uv;
out float v_particleCount;

out float v_width;      
out float v_height;      

out float v_slice;

void main() {
    v_uv = a_pos;          
    v_particleCount = particleCount;   
    gl_Position = vec4(a_pos, 0.0, 1.0);
    v_width = width;      
    v_height = height;   
    v_slice = slice;      
}`,depthFS_default=`#version 300 es
precision highp float;
uniform sampler2D u_dyn;
uniform sampler2D u_depth_field;
in  float v_width;        
in float v_height;       
in  vec2 v_uv;
in  float v_particleCount; 
out vec4 outColor;

in float v_slice;        
in float v_e_factor;     

const int STRIDE  = 7;

float fetch(int index) {             
  return texelFetch(u_dyn, ivec2(index, 0), 0).r;
}
void main() {

    vec2 uv = v_uv;
    int PCOUNT = int(v_particleCount); 

    float sum = 0.0;
    float weightSum = 0.0;
    float sigma2 = 0.1; 
    float heightPower = 1. + 10.0; 

    for (int i = 0; i < PCOUNT; ++i) {
        int base = i * STRIDE;
        vec3 point = vec3(fetch(base), fetch(base + 1), fetch(base + 2)); 
        vec2 delta = uv - point.xy;
        float r2 = dot(delta, delta);
        float w = exp(-r2 / sigma2);
        float z = (point.z  + 1.) / 2.;
        float h = pow(z, heightPower); 
        sum += w * h;
        weightSum += w;
    }
    float result = pow(sum / weightSum, 1.0 / heightPower);
    outColor = vec4(vec3(result),1.0);
}`;const FLOATS_PER_PARTICLE$1=7,MAX_PARTICLES$1=ParticleSystem.HARD_MAX,texWidth$1=MAX_PARTICLES$1*FLOATS_PER_PARTICLE$1,depthObject={name:"depthObj",instanceAttributes:[{name:"particleCount",size:1},{name:"width",size:1},{name:"height",size:1},{name:"slice",size:1}],vertexShader:depthVS_default,fragmentShader:depthFS_default,dynamicData:{width:texWidth$1,height:1}};function depthDraw(particleSystem){const particles=particleSystem.PARTICLES,P2=particles.length,dynData=new Float32Array(texWidth$1);particles.forEach((p2,i2)=>{const off=i2*FLOATS_PER_PARTICLE$1;dynData[off+0]=p2.x,dynData[off+1]=p2.y,dynData[off+2]=p2.z,dynData[off+3]=p2.r,dynData[off+4]=p2.g,dynData[off+5]=p2.b,dynData[off+6]=p2.aWeight});const backgroundColorArr=new Float32Array([particleSystem.BACKGROUND_COLOR[0],particleSystem.BACKGROUND_COLOR[1],particleSystem.BACKGROUND_COLOR[2]]),widthArr=new Float32Array([particleSystem.WIDTH]),heightArr=new Float32Array([particleSystem.HEIGHT]),timeArr=new Float32Array([particleSystem.REL_TIME]),noiseIntensityArr=new Float32Array([particleSystem.CONFIG.noiseIntensity,particleSystem.CONFIG.noiseScale,particleSystem.CONFIG.noiseSpeed]),warpIntensityArr=new Float32Array([particleSystem.CONFIG.fluidWarpIntensity,particleSystem.CONFIG.fluidWarpScale,particleSystem.CONFIG.fluidWarpSpeed]);return{count:1,attributes:{particleCount:new Float32Array([P2]),width:widthArr,height:heightArr,time:timeArr,noise:noiseIntensityArr,fluidWarp:warpIntensityArr,slice:new Float32Array([particleSystem.CONFIG.mixingIntensity]),e_factor:new Float32Array([1]),backgroundColor:backgroundColorArr},dynamicData:dynData}}__name(depthDraw,"depthDraw");var effectVS_default=`#version 300 es
in  vec2 a_pos;
in float particleCount;  
in float width;         
in float height;        
in float time;
in vec3 backgroundColor;

in float slice;
in float e_factor;

in vec3 noise;
in vec3 fluidWarp;
out vec3 v_noise;
out vec3 v_fluidWarp;
out vec2 v_uv;
out float v_particleCount;
out vec3 v_backgroundColor; 
out float v_width;       
out float v_height;      
out float v_time;

out float v_slice;
out float v_e_factor;

void main() {
  v_uv = a_pos;          
v_particleCount = particleCount;   
  gl_Position = vec4(a_pos, .999, 1.0);
    v_width = width;      
    v_height = height;    
    v_noise = noise;
    v_fluidWarp = fluidWarp;

    v_time = time;
    v_backgroundColor = backgroundColor; 

    v_slice = slice;      
    v_e_factor = e_factor; 
}`,effectFS_default=`#version 300 es
precision highp float;
uniform sampler2D u_dyn;
uniform sampler2D u_depth_field;
in  float v_width;        
in float v_height;       
in  float v_time;         
in  vec2 v_uv;
in vec3 v_backgroundColor; 
in vec3 v_noise;
in vec3 v_fluidWarp;
in  float v_particleCount; 
out vec4 outColor;

in float v_slice;        
in float v_e_factor;     

#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_PNOISE
#define FNC_PNOISE

float pnoise(in vec2 P, in vec2 rep) {
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod(Pi, rep.xyxy); 
    Pi = mod289(Pi);        
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;

    vec4 i = permute(permute(ix) + iy);

    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
    vec4 gy = abs(gx) - 0.5 ;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;

    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);

    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;

    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));

    vec2 fade_xy = quintic(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}

float pnoise(in vec3 P, in vec3 rep) {
    vec3 Pi0 = mod(floor(P), rep); 
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = quintic(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}

float pnoise(in vec4 P, in vec4 rep) {
    vec4 Pi0 = mod(floor(P), rep); 
    vec4 Pi1 = mod(Pi0 + 1.0, rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec4 Pf0 = fract(P); 
    vec4 Pf1 = Pf0 - 1.0; 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = vec4(Pi0.zzzz);
    vec4 iz1 = vec4(Pi1.zzzz);
    vec4 iw0 = vec4(Pi0.wwww);
    vec4 iw1 = vec4(Pi1.wwww);

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 ixy00 = permute(ixy0 + iw0);
    vec4 ixy01 = permute(ixy0 + iw1);
    vec4 ixy10 = permute(ixy1 + iw0);
    vec4 ixy11 = permute(ixy1 + iw1);

    vec4 gx00 = ixy00 * (1.0 / 7.0);
    vec4 gy00 = floor(gx00) * (1.0 / 7.0);
    vec4 gz00 = floor(gy00) * (1.0 / 6.0);
    gx00 = fract(gx00) - 0.5;
    gy00 = fract(gy00) - 0.5;
    gz00 = fract(gz00) - 0.5;
    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
    vec4 sw00 = step(gw00, vec4(0.0));
    gx00 -= sw00 * (step(0.0, gx00) - 0.5);
    gy00 -= sw00 * (step(0.0, gy00) - 0.5);

    vec4 gx01 = ixy01 * (1.0 / 7.0);
    vec4 gy01 = floor(gx01) * (1.0 / 7.0);
    vec4 gz01 = floor(gy01) * (1.0 / 6.0);
    gx01 = fract(gx01) - 0.5;
    gy01 = fract(gy01) - 0.5;
    gz01 = fract(gz01) - 0.5;
    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
    vec4 sw01 = step(gw01, vec4(0.0));
    gx01 -= sw01 * (step(0.0, gx01) - 0.5);
    gy01 -= sw01 * (step(0.0, gy01) - 0.5);

    vec4 gx10 = ixy10 * (1.0 / 7.0);
    vec4 gy10 = floor(gx10) * (1.0 / 7.0);
    vec4 gz10 = floor(gy10) * (1.0 / 6.0);
    gx10 = fract(gx10) - 0.5;
    gy10 = fract(gy10) - 0.5;
    gz10 = fract(gz10) - 0.5;
    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
    vec4 sw10 = step(gw10, vec4(0.0));
    gx10 -= sw10 * (step(0.0, gx10) - 0.5);
    gy10 -= sw10 * (step(0.0, gy10) - 0.5);

    vec4 gx11 = ixy11 * (1.0 / 7.0);
    vec4 gy11 = floor(gx11) * (1.0 / 7.0);
    vec4 gz11 = floor(gy11) * (1.0 / 6.0);
    gx11 = fract(gx11) - 0.5;
    gy11 = fract(gy11) - 0.5;
    gz11 = fract(gz11) - 0.5;
    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
    vec4 sw11 = step(gw11, vec4(0.0));
    gx11 -= sw11 * (step(0.0, gx11) - 0.5);
    gy11 -= sw11 * (step(0.0, gy11) - 0.5);

    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
    g0000 *= norm00.x;
    g0100 *= norm00.y;
    g1000 *= norm00.z;
    g1100 *= norm00.w;

    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
    g0001 *= norm01.x;
    g0101 *= norm01.y;
    g1001 *= norm01.z;
    g1101 *= norm01.w;

    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
    g0010 *= norm10.x;
    g0110 *= norm10.y;
    g1010 *= norm10.z;
    g1110 *= norm10.w;

    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
    g0011 *= norm11.x;
    g0111 *= norm11.y;
    g1011 *= norm11.z;
    g1111 *= norm11.w;

    float n0000 = dot(g0000, Pf0);
    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
    float n1111 = dot(g1111, Pf1);

    vec4 fade_xyzw = quintic(Pf0);
    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
    return 2.2 * n_xyzw;
}
#endif
#ifndef FNC_RGB2LUMA
#define FNC_RGB2LUMA
float rgb2luma(const in vec3 rgb) { return dot(rgb, vec3(0.2126, 0.7152, 0.0722)); }
float rgb2luma(const in vec4 rgb) { return rgb2luma(rgb.rgb); }
#endif

#ifndef FNC_LUMA
#define FNC_LUMA
float luma(float v) { return v; }
float luma(in vec3 v) { return rgb2luma(v); }
float luma(in vec4 v) { return rgb2luma(v.rgb); }
#endif
#ifndef FNC_BLENDSOFTLIGHT
#define FNC_BLENDSOFTLIGHT
float blendSoftLight(in float base, in float blend) {
    return (blend < .5)? (2. * base * blend + base * base * (1. - 2.*blend)): (sqrt(base) * (2. * blend - 1.) + 2. * base * (1. - blend));
}

vec3 blendSoftLight(in vec3 base, in vec3 blend) {
    return vec3(blendSoftLight(base.r, blend.r),
                blendSoftLight(base.g, blend.g),
                blendSoftLight(base.b, blend.b));
}

vec4 blendSoftLight(in vec4 base, in vec4 blend) {
    return vec4(blendSoftLight( base.r, blend.r ),
                blendSoftLight( base.g, blend.g ),
                blendSoftLight( base.b, blend.b ),
                blendSoftLight( base.a, blend.a )
    );
}

vec3 blendSoftLight(in vec3 base, in vec3 blend, in float opacity) {
    return (blendSoftLight(base, blend) * opacity + base * (1. - opacity));
}
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef GRAIN_TYPE
#define GRAIN_TYPE vec3
#endif

#ifndef GRAIN_SAMPLER_FNC
#define GRAIN_SAMPLER_FNC(TEX, UV) SAMPLER_FNC(TEX, UV).rgb
#endif

#ifndef FNC_GRAIN
#define FNC_GRAIN
float grain(vec2 texCoord, vec2 resolution, float t, float multiplier) {
    vec2 mult = texCoord * resolution;
    float offset = snoise(vec3(mult / multiplier, t));
    float n1 = pnoise(vec3(mult, offset), vec3(1. / texCoord * resolution, 1.));
    return n1 / 2. + .5;
}

float grain(vec2 texCoord, vec2 resolution, float t) {
    return grain(texCoord, resolution, t, 2.5);
}

float grain(vec2 texCoord, vec2 resolution) {
    return grain(texCoord, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t, float multiplier ) {
    GRAIN_TYPE org = GRAIN_SAMPLER_FNC(tex, st);

    float g = grain(st, resolution, t, multiplier);

    
    float luminance = luma(org);
    
    
    
    float response = smoothstep(0.05, 0.5, luminance);
    return mix( blendSoftLight(org, GRAIN_TYPE(g)), 
                org, 
                response * response);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution) {
    return grain(tex, st, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t, float multiplier  ) {
    return grain(tex, st, vec2(resolution), t, multiplier );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution) {
    return grain(tex, st, resolution, 0.);
}

#endif

const int STRIDE  = 7;

float fetch(int index) {             
  return texelFetch(u_dyn, ivec2(index, 0), 0).r;
}

void main() {
    vec2 uv = v_uv;
    vec4 col = texture(u_depth_field, (v_uv + 1.) / 2.);
    outColor = col;
    float noise = grain(v_uv,vec2(v_width,v_height), v_time * 50.);
    
    outColor.xyz += (noise - 0.5) * v_noise.x * 0.8;
}`;const FLOATS_PER_PARTICLE=7,MAX_PARTICLES=ParticleSystem.HARD_MAX,texWidth=MAX_PARTICLES*FLOATS_PER_PARTICLE,effectObject={name:"effectObj",instanceAttributes:[{name:"particleCount",size:1},{name:"width",size:1},{name:"height",size:1},{name:"time",size:1},{name:"noise",size:3},{name:"fluidWarp",size:3},{name:"slice",size:1},{name:"e_factor",size:1},{name:"backgroundColor",size:3}],vertexShader:effectVS_default,fragmentShader:effectFS_default,dynamicData:{width:texWidth,height:1}};function effectDraw(particleSystem){const particles=particleSystem.PARTICLES,P2=particles.length,dynData=new Float32Array(texWidth);particles.forEach((p2,i2)=>{const off=i2*FLOATS_PER_PARTICLE;dynData[off+0]=p2.x,dynData[off+1]=p2.y,dynData[off+2]=p2.z,dynData[off+3]=p2.r,dynData[off+4]=p2.g,dynData[off+5]=p2.b,dynData[off+6]=p2.aWeight});const backgroundColorArr=new Float32Array([particleSystem.BACKGROUND_COLOR[0],particleSystem.BACKGROUND_COLOR[1],particleSystem.BACKGROUND_COLOR[2]]),widthArr=new Float32Array([particleSystem.WIDTH]),heightArr=new Float32Array([particleSystem.HEIGHT]),timeArr=new Float32Array([particleSystem.REL_TIME]),noiseIntensityArr=new Float32Array([particleSystem.CONFIG.noiseIntensity,particleSystem.CONFIG.noiseScale,particleSystem.CONFIG.noiseSpeed]),warpIntensityArr=new Float32Array([particleSystem.CONFIG.fluidWarpIntensity,particleSystem.CONFIG.fluidWarpScale,particleSystem.CONFIG.fluidWarpSpeed]);return{count:1,attributes:{particleCount:new Float32Array([P2]),width:widthArr,height:heightArr,time:timeArr,noise:noiseIntensityArr,fluidWarp:warpIntensityArr,slice:new Float32Array([particleSystem.CONFIG.mixingIntensity]),e_factor:new Float32Array([1]),backgroundColor:backgroundColorArr},dynamicData:dynData,textures:{u_depth_field:"example2Texture"}}}__name(effectDraw,"effectDraw");const _WebGL2Renderer=class _WebGL2Renderer{constructor(canvas,particleSystem){this.canvas=canvas,this.particleSys=particleSystem,SimpleWebGL2.__init__(canvas),SimpleWebGL2.__defineobject__(circleObject),SimpleWebGL2.__defineobject__(pathObject),SimpleWebGL2.__defineobject__(gradientObject),SimpleWebGL2.__defineobject__(depthObject),SimpleWebGL2.__defineobject__(effectObject),SimpleWebGL2.__createtexture__({name:"depth_field",width:8,height:8,initial:computeDepthFieldTexture(this.particleSys,8,5),wrap:"repeat",filter:"linear"}),computeDepthFieldTexture(this.particleSys,16,5),this.triMesh=initTriMesh();const gl2=SimpleWebGL2.__getgl__(),RTV_W=512,RTV_H=512;this.RTV_W=RTV_W,this.RTV_H=RTV_H;let rtTex=gl2.createTexture();gl2.bindTexture(gl2.TEXTURE_2D,rtTex),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_MIN_FILTER,gl2.LINEAR),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_MAG_FILTER,gl2.LINEAR),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_WRAP_S,gl2.CLAMP_TO_EDGE),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_WRAP_T,gl2.CLAMP_TO_EDGE),gl2.texImage2D(gl2.TEXTURE_2D,0,gl2.RGBA8,RTV_W,RTV_H,0,gl2.RGBA,gl2.UNSIGNED_BYTE,null),SimpleWebGL2.__adopttexture__("exampleTexture",rtTex,RTV_W,RTV_H);let rtFBO=gl2.createFramebuffer();gl2.bindFramebuffer(gl2.FRAMEBUFFER,rtFBO),gl2.framebufferTexture2D(gl2.FRAMEBUFFER,gl2.COLOR_ATTACHMENT0,gl2.TEXTURE_2D,rtTex,0),gl2.checkFramebufferStatus(gl2.FRAMEBUFFER)!==gl2.FRAMEBUFFER_COMPLETE&&console.error("RT FBO incomplete"),gl2.bindFramebuffer(gl2.FRAMEBUFFER,null),this.rtFBO=rtFBO,rtTex=gl2.createTexture(),gl2.bindTexture(gl2.TEXTURE_2D,rtTex),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_MIN_FILTER,gl2.LINEAR),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_MAG_FILTER,gl2.LINEAR),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_WRAP_S,gl2.CLAMP_TO_EDGE),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_WRAP_T,gl2.CLAMP_TO_EDGE),gl2.texImage2D(gl2.TEXTURE_2D,0,gl2.RGBA8,RTV_W,RTV_H,0,gl2.RGBA,gl2.UNSIGNED_BYTE,null),SimpleWebGL2.__adopttexture__("example2Texture",rtTex,RTV_W,RTV_H),rtFBO=gl2.createFramebuffer(),gl2.bindFramebuffer(gl2.FRAMEBUFFER,rtFBO),gl2.framebufferTexture2D(gl2.FRAMEBUFFER,gl2.COLOR_ATTACHMENT0,gl2.TEXTURE_2D,rtTex,0),gl2.checkFramebufferStatus(gl2.FRAMEBUFFER)!==gl2.FRAMEBUFFER_COMPLETE&&console.error("RT FBO incomplete"),gl2.bindFramebuffer(gl2.FRAMEBUFFER,null),this.rt2FBO=rtFBO}async init(){}async onFrameReady(cb){return cb()}draw(){const gl2=SimpleWebGL2.__getgl__();gl2.bindFramebuffer(gl2.FRAMEBUFFER,this.rtFBO),gl2.viewport(0,0,this.RTV_W,this.RTV_H),SimpleWebGL2.__drawobjectinstances__("depthObj",depthDraw(this.particleSys)),SimpleWebGL2.__end__(),gl2.bindFramebuffer(gl2.FRAMEBUFFER,this.rt2FBO),gl2.viewport(0,0,this.RTV_W,this.RTV_H),SimpleWebGL2.__drawobjectinstances__("voronoiBG",gradientDraw(this.particleSys)),SimpleWebGL2.__end__(),gl2.bindFramebuffer(gl2.FRAMEBUFFER,null),gl2.viewport(0,0,this.canvas.width,this.canvas.height),SimpleWebGL2.__begin__(),gl2.enable(gl2.DEPTH_TEST),gl2.depthFunc(gl2.LESS),gl2.clear(gl2.COLOR_BUFFER_BIT|gl2.DEPTH_BUFFER_BIT),SimpleWebGL2.__drawobjectinstances__("effectObj",effectDraw(this.particleSys)),this.particleSys.SHOW_LISSAJOUS_FIGURE&&(SimpleWebGL2.__drawobjectinstances__("path",pathDraw(this.particleSys)),SimpleWebGL2.__drawobjectinstances__("circle",circleDraw(this.particleSys))),gl2.disable(gl2.DEPTH_TEST),SimpleWebGL2.__end__()}};__name(_WebGL2Renderer,"WebGL2Renderer");let WebGL2Renderer=_WebGL2Renderer;function PlayButton$2({togglePlaying,playing}){return jsxRuntimeExports.jsx(Button,{iconName:playing?"pause":"play_arrow",bgColor:"var(--green2)",hoverBgColor:"var(--green1)",color:"var(--gray8)",onClick:togglePlaying})}__name(PlayButton$2,"PlayButton$2");function TimelineBar$2({timeline}){const project=reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline)),togglePlaying=__name(()=>{const project2=timeline.getProject(),isPlaying=project2.timelineData.playing,currentFrame=project2.timelineData.playheadPosition;isPlaying?timeline.projectTools.updatePlayheadPosition(currentFrame,!0):timeline.projectTools.startPlayback()},"togglePlaying");return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:"20px"},children:[jsxRuntimeExports.jsx(PlayButton$2,{togglePlaying,playing:timeline.getProject().timelineData.playing}),jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",width:"100px"},children:`${project.timelineData.playheadPosition} / ${project.timelineData.focusRange[1]}`})]})}__name(TimelineBar$2,"TimelineBar$2");const defaultEvent$2={path:"liquidlissajousviewer-loaded",event:!0};function LiquidLissajousInterior({timeline,controls}){const canvasRef=reactExports.useRef(null),containerRef=reactExports.useRef(null),particleSystem=reactExports.useRef(new ParticleSystem).current,rendererRef=reactExports.useRef(null),controlsSnapshot=reactExports.useSyncExternalStore(controls.subscribeInternal.bind(controls),controls.getSnapshot.bind(controls));reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline));const{width,height}=controlsSnapshot;particleSystem.update(controlsSnapshot,timeline);const{recordEvent}=useTracker(defaultEvent$2);reactExports.useEffect(()=>{if(!canvasRef.current)return;const canvas=canvasRef.current;canvas.width=width,canvas.height=height},[width,height,canvasRef]),reactExports.useEffect(()=>{function resizeCanvasToFit(container,canvas,aspectRatio){const containerWidth=container.clientWidth,containerHeight=container.clientHeight,containerAspect=containerWidth/containerHeight;let dwidth,dheight;containerAspect>aspectRatio?(dheight=containerHeight,dwidth=dheight*aspectRatio):(dwidth=containerWidth,dheight=dwidth/aspectRatio),canvas.style.width=`${dwidth}px`,canvas.style.height=`${dheight}px`}__name(resizeCanvasToFit,"resizeCanvasToFit");const handleResize=__name(()=>{if(canvasRef.current&&containerRef.current){const container=containerRef.current,canvas=canvasRef.current,aspectRatio=width/height;resizeCanvasToFit(container,canvas,aspectRatio)}},"handleResize");return window.addEventListener("resize",handleResize),handleResize(),()=>{window.removeEventListener("resize",handleResize)}},[width,height]);const frameSaver=reactExports.useRef(new FrameSaver$2({timeline,width,height})).current;return frameSaver.setSize(width,height),reactExports.useEffect(()=>{const canvas=canvasRef.current;if(canvas){if(frameSaver.addCanvas(canvas),canvas.width=width,canvas.height=height,!rendererRef.current){rendererRef.current=new WebGL2Renderer(canvas,particleSystem);const renderer=rendererRef.current;rendererRef.current.init().then(()=>{const loop=__name(()=>{rendererRef.current.draw();const{rendering}=frameSaver.getStatus();rendering&&renderer.onFrameReady&&renderer.onFrameReady(frameSaver.frame.bind(frameSaver)),requestAnimationFrame(loop)},"loop");requestAnimationFrame(loop)})}return()=>{}}},[width,height,timeline,controls,particleSystem]),timeline?jsxRuntimeExports.jsxs("div",{style:{width:"100vw",height:"100vh",backgroundColor:"var(--gray1)",position:"relative"},children:[jsxRuntimeExports.jsx("div",{ref:containerRef,style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)"},children:jsxRuntimeExports.jsx("canvas",{ref:canvasRef,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"60px",backgroundColor:"var(--gray2)"},children:jsxRuntimeExports.jsx(TimelineBar$2,{timeline})}),jsxRuntimeExports.jsx(FrameSaverScreen$2,{frameSaver,recordEvent,controls:controlsSnapshot})]}):jsxRuntimeExports.jsx("div",{children:"No timeline found"})}__name(LiquidLissajousInterior,"LiquidLissajousInterior");function LiquidLissajousSetup({timeline,controls}){return timeline&&controls?jsxRuntimeExports.jsx(LiquidLissajousInterior,{controls,timeline}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(LiquidLissajousSetup,"LiquidLissajousSetup");const pb$2=new u$1.ProjectBuilder;pb$2.setTimelineData(5e3,30,45);pb$2.addContinuousSignal("s1","Unused Signal",[0,1]);pb$2.addContinuousSignal("cx","Center X",[0,1]);pb$2.addPin("cx",0,0,"return easyLinear()");pb$2.addPin("cx",50,1,"return easyLinear()");pb$2.addPin("cx",900,1,"return easyLinear()");pb$2.addContinuousSignal("cy","Center Y",[0,1]);pb$2.addPin("cy",0,0,"return easyLinear()");pb$2.addPin("cy",50,1,"return easyLinear()");pb$2.addPin("cy",900,1,"return easyLinear()");pb$2.setSignalActiveStatus("s1",!0);pb$2.setSignalActiveStatus("cx",!1);pb$2.setSignalActiveStatus("cy",!1);const defaultProject$2=__name(()=>{const project=pb$2.getProject();return _e.TimelineController.fromProject(project).serialize()},"defaultProject$2"),defaultName$1="liquidlissajous.timeline";function LiquidLissajousExterior$1(){const timeline=useTimeline(),controls=useControls$1();return jsxRuntimeExports.jsx(LiquidLissajousSetup,{timeline,controls})}__name(LiquidLissajousExterior$1,"LiquidLissajousExterior$1");function LiquidLissajous$1(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(TimelineProvider,{defaultProject:defaultProject$2,defaultName:defaultName$1,shouldCreate:!0,children:jsxRuntimeExports.jsx(ControlsProvider$1,{children:jsxRuntimeExports.jsx(LiquidLissajousExterior$1,{})})})})}__name(LiquidLissajous$1,"LiquidLissajous$1");function hexToRgb(hex){if(hex=hex.replace(/^#/,""),hex.length===3&&(hex=hex.split("").map(c=>c+c).join("")),hex.length!==6||/[^0-9a-f]/i.test(hex))throw new Error("Invalid hex color");const num=parseInt(hex,16);return[num>>16&255,num>>8&255,num&255]}__name(hexToRgb,"hexToRgb");function rgbToHex([r2,g2,b2]){return"#"+((1<<24)+(r2<<16)+(g2<<8)+b2).toString(16).slice(1)}__name(rgbToHex,"rgbToHex");function LissajousPreview({params,stroke="black"}){const d2=Array.from({length:100},(_2,i2)=>{const t2=i2/99*2*Math.PI,[x2,y2]=lissajousKnot(t2,params);return[x2,y2]}).map(([x2,y2])=>[(x2+1)*50,(-y2+1)*50]).map(([x2,y2],i2)=>`${i2===0?"M":"L"} ${x2},${y2}`).join(" ");return jsxRuntimeExports.jsx("svg",{style:{width:"100px",height:"100px"},viewBox:"-20 -20 140 140",children:jsxRuntimeExports.jsx("path",{d:d2,fill:"none",stroke,strokeWidth:3})})}__name(LissajousPreview,"LissajousPreview");function LissajousSelectButtonGroup({options,value,onChange,style={}}){return jsxRuntimeExports.jsx("div",{style:{gap:12,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",alignItems:"center",justifyContent:"center",...style},children:options.map(opt=>{const selected=opt.value.a===value.a&&opt.value.b===value.b&&opt.value.c===value.c&&opt.value.a_delta===value.a_delta&&opt.value.b_delta===value.b_delta&&opt.value.c_delta===value.c_delta;return jsxRuntimeExports.jsx("div",{onClick:__name(()=>onChange(opt.value),"onClick"),style:{border:selected?"2px solid var(--gray8)":"2px solid var(--gray4)",borderRadius:4,boxSizing:"content-box",backgroundColor:selected?"var(--gray4)":"var(--gray2)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:opt.label??"",children:jsxRuntimeExports.jsx(LissajousPreview,{params:opt.value,stroke:selected?"var(--gray8)":"var(--gray6)"})},JSON.stringify(opt.value))})})}__name(LissajousSelectButtonGroup,"LissajousSelectButtonGroup");function PresetButton$1({label,preset,onClick}){const gradient=`
        linear-gradient(45deg, ${preset.particleColors.map(c=>`rgb(${c.join(",")})`).join(", ")})
    `,numberColors=preset.particleColors.length;return jsxRuntimeExports.jsx("div",{style:{background:gradient,borderRadius:"var(--borderRadiusSmall)",boxShadow:`inset 0 0 7px 5px rgba(${preset.particleColors[numberColors-1].join(",")},0.3)`,cursor:"pointer",width:"auto",padding:"8px 16px",border:`2px solid rgb(${preset.particleColors[0].join(",")})`,height:"3em",display:"flex",alignItems:"center",justifyContent:"center"},onClick:__name(()=>onClick(preset),"onClick"),children:jsxRuntimeExports.jsx("div",{style:{color:"white",textShadow:"0 0px 3px rgba(0,0,0,0.8)",fontWeight:600},children:label})})}__name(PresetButton$1,"PresetButton$1");const presets$1={pastelDream:{lissajousParams:LISSAJOUS_CURVES[0]},burningSunset:{particleCount:10,particleColors:[[59,6,10],[138,0,0],[200,63,18],[255,242,135]],backgroundColor:[0,0,0],loopLifecycle:300,mixingIntensity:.6,ratioA:1,ratioB:2,offset:Math.PI/2,width:1920,height:1080,figureScaleX:.2,figureScaleY:.3,noiseEnabled:!0,noiseScale:.1,noiseIntensity:.65,noiseSpeed:.1,fluidWarpEnabled:!0,fluidWarpIntensity:.1,fluidWarpScale:.1,fluidWarpSpeed:.1,lissajousParams:LISSAJOUS_CURVES[1],animationSpeed:.2,rotateVertical:0,rotateHorizontal:138},oceanBlues:{particleCount:10,particleColors:[[84,9,218],[78,113,255],[187,251,255]],backgroundColor:[0,0,0],loopLifecycle:300,mixingIntensity:.5,ratioA:1,ratioB:2,offset:Math.PI/2,width:1920,height:1080,figureScaleX:.2,figureScaleY:.3,noiseEnabled:!0,noiseScale:.1,noiseIntensity:.1,noiseSpeed:.1,fluidWarpEnabled:!0,fluidWarpIntensity:.1,fluidWarpScale:.1,fluidWarpSpeed:.1,lissajousParams:LISSAJOUS_CURVES[5],animationSpeed:.25,rotateVertical:0,rotateHorizontal:0},hotPink:{particleCount:10,particleColors:[[172,23,84],[229,56,136],[243,113,153],[247,168,196]],backgroundColor:[0,0,0],loopLifecycle:300,mixingIntensity:1,ratioA:1,ratioB:2,offset:Math.PI/2,width:1920,height:1080,figureScaleX:.2,figureScaleY:.3,noiseEnabled:!0,noiseScale:.1,noiseIntensity:.1,noiseSpeed:.1,fluidWarpEnabled:!0,fluidWarpIntensity:.1,fluidWarpScale:.1,fluidWarpSpeed:.1,lissajousParams:LISSAJOUS_CURVES[2],animationSpeed:.3,rotateVertical:0,rotateHorizontal:0},forestGreens:{particleCount:10,particleColors:[[47,82,73],[151,176,103],[227,222,97]],backgroundColor:[0,0,0],loopLifecycle:300,mixingIntensity:.45,ratioA:1,ratioB:2,offset:Math.PI/2,width:1920,height:1080,figureScaleX:.2,figureScaleY:.3,noiseEnabled:!0,noiseScale:.1,noiseIntensity:.3,noiseSpeed:.1,fluidWarpEnabled:!0,fluidWarpIntensity:.1,fluidWarpScale:.1,fluidWarpSpeed:.1,lissajousParams:LISSAJOUS_CURVES[0],animationSpeed:.2,rotateVertical:0,rotateHorizontal:34},tropicalDisco:{particleCount:10,particleColors:[[24,1,97],[79,23,135],[235,54,120],[251,119,60]],backgroundColor:[0,0,0],loopLifecycle:300,mixingIntensity:.3,ratioA:1,ratioB:2,offset:Math.PI/2,width:1920,height:1080,figureScaleX:.2,figureScaleY:.3,noiseEnabled:!0,noiseScale:.1,noiseIntensity:.7,noiseSpeed:.1,fluidWarpEnabled:!0,fluidWarpIntensity:.1,fluidWarpScale:.1,fluidWarpSpeed:.1,lissajousParams:LISSAJOUS_CURVES[5],animationSpeed:.4,rotateVertical:0,rotateHorizontal:0}};function setRef(ref,value){if(typeof ref=="function")return ref(value);ref!=null&&(ref.current=value)}__name(setRef,"setRef");function composeRefs(...refs){return node=>{let hasCleanup=!1;const cleanups=refs.map(ref=>{const cleanup=setRef(ref,node);return!hasCleanup&&typeof cleanup=="function"&&(hasCleanup=!0),cleanup});if(hasCleanup)return()=>{for(let i2=0;i2<cleanups.length;i2++){const cleanup=cleanups[i2];typeof cleanup=="function"?cleanup():setRef(refs[i2],null)}}}}__name(composeRefs,"composeRefs");function useComposedRefs(...refs){return reactExports.useCallback(composeRefs(...refs),refs)}__name(useComposedRefs,"useComposedRefs");function createSlot(ownerName){const SlotClone=createSlotClone(ownerName),Slot2=reactExports.forwardRef((props,forwardedRef)=>{const{children,...slotProps}=props,childrenArray=reactExports.Children.toArray(children),slottable=childrenArray.find(isSlottable);if(slottable){const newElement=slottable.props.children,newChildren=childrenArray.map(child=>child===slottable?reactExports.Children.count(newElement)>1?reactExports.Children.only(null):reactExports.isValidElement(newElement)?newElement.props.children:null:child);return jsxRuntimeExports.jsx(SlotClone,{...slotProps,ref:forwardedRef,children:reactExports.isValidElement(newElement)?reactExports.cloneElement(newElement,void 0,newChildren):null})}return jsxRuntimeExports.jsx(SlotClone,{...slotProps,ref:forwardedRef,children})});return Slot2.displayName=`${ownerName}.Slot`,Slot2}__name(createSlot,"createSlot");function createSlotClone(ownerName){const SlotClone=reactExports.forwardRef((props,forwardedRef)=>{const{children,...slotProps}=props;if(reactExports.isValidElement(children)){const childrenRef=getElementRef(children),props2=mergeProps(slotProps,children.props);return children.type!==reactExports.Fragment&&(props2.ref=forwardedRef?composeRefs(forwardedRef,childrenRef):childrenRef),reactExports.cloneElement(children,props2)}return reactExports.Children.count(children)>1?reactExports.Children.only(null):null});return SlotClone.displayName=`${ownerName}.SlotClone`,SlotClone}__name(createSlotClone,"createSlotClone");var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(child){return reactExports.isValidElement(child)&&typeof child.type=="function"&&"__radixId"in child.type&&child.type.__radixId===SLOTTABLE_IDENTIFIER}__name(isSlottable,"isSlottable");function mergeProps(slotProps,childProps){const overrideProps={...childProps};for(const propName in childProps){const slotPropValue=slotProps[propName],childPropValue=childProps[propName];/^on[A-Z]/.test(propName)?slotPropValue&&childPropValue?overrideProps[propName]=(...args)=>{const result=childPropValue(...args);return slotPropValue(...args),result}:slotPropValue&&(overrideProps[propName]=slotPropValue):propName==="style"?overrideProps[propName]={...slotPropValue,...childPropValue}:propName==="className"&&(overrideProps[propName]=[slotPropValue,childPropValue].filter(Boolean).join(" "))}return{...slotProps,...overrideProps}}__name(mergeProps,"mergeProps");function getElementRef(element){var _a26,_b;let getter=(_a26=Object.getOwnPropertyDescriptor(element.props,"ref"))==null?void 0:_a26.get,mayWarn=getter&&"isReactWarning"in getter&&getter.isReactWarning;return mayWarn?element.ref:(getter=(_b=Object.getOwnPropertyDescriptor(element,"ref"))==null?void 0:_b.get,mayWarn=getter&&"isReactWarning"in getter&&getter.isReactWarning,mayWarn?element.props.ref:element.props.ref||element.ref)}__name(getElementRef,"getElementRef");var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((primitive,node)=>{const Slot=createSlot(`Primitive.${node}`),Node2=reactExports.forwardRef((props,forwardedRef)=>{const{asChild,...primitiveProps}=props,Comp=asChild?Slot:node;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(Comp,{...primitiveProps,ref:forwardedRef})});return Node2.displayName=`Primitive.${node}`,{...primitive,[node]:Node2}},{});function createContextScope(scopeName,createContextScopeDeps=[]){let defaultContexts=[];function createContext3(rootComponentName,defaultContext){const BaseContext=reactExports.createContext(defaultContext),index=defaultContexts.length;defaultContexts=[...defaultContexts,defaultContext];const Provider=__name(props=>{var _a26;const{scope,children,...context}=props,Context=((_a26=scope==null?void 0:scope[scopeName])==null?void 0:_a26[index])||BaseContext,value=reactExports.useMemo(()=>context,Object.values(context));return jsxRuntimeExports.jsx(Context.Provider,{value,children})},"Provider");Provider.displayName=rootComponentName+"Provider";function useContext2(consumerName,scope){var _a26;const Context=((_a26=scope==null?void 0:scope[scopeName])==null?void 0:_a26[index])||BaseContext,context=reactExports.useContext(Context);if(context)return context;if(defaultContext!==void 0)return defaultContext;throw new Error(`\`${consumerName}\` must be used within \`${rootComponentName}\``)}return __name(useContext2,"useContext2"),[Provider,useContext2]}__name(createContext3,"createContext3");const createScope=__name(()=>{const scopeContexts=defaultContexts.map(defaultContext=>reactExports.createContext(defaultContext));return __name(function(scope){const contexts=(scope==null?void 0:scope[scopeName])||scopeContexts;return reactExports.useMemo(()=>({[`__scope${scopeName}`]:{...scope,[scopeName]:contexts}}),[scope,contexts])},"useScope")},"createScope");return createScope.scopeName=scopeName,[createContext3,composeContextScopes(createScope,...createContextScopeDeps)]}__name(createContextScope,"createContextScope");function composeContextScopes(...scopes){const baseScope=scopes[0];if(scopes.length===1)return baseScope;const createScope=__name(()=>{const scopeHooks=scopes.map(createScope2=>({useScope:createScope2(),scopeName:createScope2.scopeName}));return __name(function(overrideScopes){const nextScopes=scopeHooks.reduce((nextScopes2,{useScope,scopeName})=>{const currentScope=useScope(overrideScopes)[`__scope${scopeName}`];return{...nextScopes2,...currentScope}},{});return reactExports.useMemo(()=>({[`__scope${baseScope.scopeName}`]:nextScopes}),[nextScopes])},"useComposedScopes")},"createScope");return createScope.scopeName=baseScope.scopeName,createScope}__name(composeContextScopes,"composeContextScopes");function composeEventHandlers(originalEventHandler,ourEventHandler,{checkForDefaultPrevented=!0}={}){return __name(function(event){if(originalEventHandler==null||originalEventHandler(event),checkForDefaultPrevented===!1||!event.defaultPrevented)return ourEventHandler==null?void 0:ourEventHandler(event)},"handleEvent")}__name(composeEventHandlers,"composeEventHandlers");var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop,defaultProp,onChange=__name(()=>{},"onChange"),caller}){const[uncontrolledProp,setUncontrolledProp,onChangeRef]=useUncontrolledState({defaultProp,onChange}),isControlled=prop!==void 0,value=isControlled?prop:uncontrolledProp;{const isControlledRef=reactExports.useRef(prop!==void 0);reactExports.useEffect(()=>{const wasControlled=isControlledRef.current;wasControlled!==isControlled&&console.warn(`${caller} is changing from ${wasControlled?"controlled":"uncontrolled"} to ${isControlled?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),isControlledRef.current=isControlled},[isControlled,caller])}const setValue=reactExports.useCallback(nextValue=>{var _a26;if(isControlled){const value2=isFunction(nextValue)?nextValue(prop):nextValue;value2!==prop&&((_a26=onChangeRef.current)==null||_a26.call(onChangeRef,value2))}else setUncontrolledProp(nextValue)},[isControlled,prop,setUncontrolledProp,onChangeRef]);return[value,setValue]}__name(useControllableState,"useControllableState");function useUncontrolledState({defaultProp,onChange}){const[value,setValue]=reactExports.useState(defaultProp),prevValueRef=reactExports.useRef(value),onChangeRef=reactExports.useRef(onChange);return useInsertionEffect(()=>{onChangeRef.current=onChange},[onChange]),reactExports.useEffect(()=>{var _a26;prevValueRef.current!==value&&((_a26=onChangeRef.current)==null||_a26.call(onChangeRef,value),prevValueRef.current=value)},[value,prevValueRef]),[value,setValue,onChangeRef]}__name(useUncontrolledState,"useUncontrolledState");function isFunction(value){return typeof value=="function"}__name(isFunction,"isFunction");function usePrevious(value){const ref=reactExports.useRef({value,previous:value});return reactExports.useMemo(()=>(ref.current.value!==value&&(ref.current.previous=ref.current.value,ref.current.value=value),ref.current.previous),[value])}__name(usePrevious,"usePrevious");function useSize(element){const[size2,setSize]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(element){setSize({width:element.offsetWidth,height:element.offsetHeight});const resizeObserver=new ResizeObserver(entries=>{if(!Array.isArray(entries)||!entries.length)return;const entry=entries[0];let width,height;if("borderBoxSize"in entry){const borderSizeEntry=entry.borderBoxSize,borderSize=Array.isArray(borderSizeEntry)?borderSizeEntry[0]:borderSizeEntry;width=borderSize.inlineSize,height=borderSize.blockSize}else width=element.offsetWidth,height=element.offsetHeight;setSize({width,height})});return resizeObserver.observe(element,{box:"border-box"}),()=>resizeObserver.unobserve(element)}else setSize(void 0)},[element]),size2}__name(useSize,"useSize");var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch=reactExports.forwardRef((props,forwardedRef)=>{const{__scopeSwitch,name:name2,checked:checkedProp,defaultChecked,required,disabled,value="on",onCheckedChange,form,...switchProps}=props,[button,setButton]=reactExports.useState(null),composedRefs=useComposedRefs(forwardedRef,node=>setButton(node)),hasConsumerStoppedPropagationRef=reactExports.useRef(!1),isFormControl=button?form||!!button.closest("form"):!0,[checked,setChecked]=useControllableState({prop:checkedProp,defaultProp:defaultChecked??!1,onChange:onCheckedChange,caller:SWITCH_NAME});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:__scopeSwitch,checked,disabled,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":checked,"aria-required":required,"data-state":getState(checked),"data-disabled":disabled?"":void 0,disabled,value,...switchProps,ref:composedRefs,onClick:composeEventHandlers(props.onClick,event=>{setChecked(prevChecked=>!prevChecked),isFormControl&&(hasConsumerStoppedPropagationRef.current=event.isPropagationStopped(),hasConsumerStoppedPropagationRef.current||event.stopPropagation())})}),isFormControl&&jsxRuntimeExports.jsx(SwitchBubbleInput,{control:button,bubbles:!hasConsumerStoppedPropagationRef.current,name:name2,value,checked,required,disabled,form,style:{transform:"translateX(-100%)"}})]})});Switch.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((props,forwardedRef)=>{const{__scopeSwitch,...thumbProps}=props,context=useSwitchContext(THUMB_NAME,__scopeSwitch);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(context.checked),"data-disabled":context.disabled?"":void 0,...thumbProps,ref:forwardedRef})});SwitchThumb.displayName=THUMB_NAME;var BUBBLE_INPUT_NAME="SwitchBubbleInput",SwitchBubbleInput=reactExports.forwardRef(({__scopeSwitch,control,checked,bubbles=!0,...props},forwardedRef)=>{const ref=reactExports.useRef(null),composedRefs=useComposedRefs(ref,forwardedRef),prevChecked=usePrevious(checked),controlSize=useSize(control);return reactExports.useEffect(()=>{const input=ref.current;if(!input)return;const inputProto=window.HTMLInputElement.prototype,setChecked=Object.getOwnPropertyDescriptor(inputProto,"checked").set;if(prevChecked!==checked&&setChecked){const event=new Event("click",{bubbles});setChecked.call(input,checked),input.dispatchEvent(event)}},[prevChecked,checked,bubbles]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:checked,...props,tabIndex:-1,ref:composedRefs,style:{...props.style,...controlSize,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SwitchBubbleInput.displayName=BUBBLE_INPUT_NAME;function getState(checked){return checked?"checked":"unchecked"}__name(getState,"getState");var Root=Switch,Thumb=SwitchThumb;const SwitchableSection$1=__name(({label="Toggle Section",children,activeOnToggled=!0,onToggle,checked})=>{const active=activeOnToggled?checked:!checked;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"1em"},children:[jsxRuntimeExports.jsx("div",{children:label}),jsxRuntimeExports.jsx(Root,{className:"SwitchRoot",onCheckedChange:__name(checked2=>{onToggle(checked2)},"onCheckedChange"),checked,children:jsxRuntimeExports.jsx(Thumb,{className:"SwitchThumb"})})]}),jsxRuntimeExports.jsx("div",{style:{opacity:active?1:.2,pointerEvents:active?"auto":"none",userSelect:active?"auto":"none",transition:"opacity 0.2s ease-in-out"},children})]})},"SwitchableSection$1");function CyberSpaghettiControlsInterior$2({controls}){const state=reactExports.useSyncExternalStore(controls.subscribeInternal.bind(controls),controls.getSnapshot.bind(controls));reactExports.useEffect(()=>{updateAnimationSpeed(state.animationSpeed,state.lissajousParams.integral)},[]),reactExports.useSyncExternalStore(controls.subscribeToExternalState.bind(controls),controls.getExternalState.bind(controls));const timeline=useTimeline(),update=__name(patch=>{const next={...state,...patch};controls.setData(next)},"update"),updateColor=__name((idx,value)=>{const colors=state.particleColors.slice();colors[idx]=hexToRgb(value),update({particleColors:colors})},"updateColor"),addColor=__name(()=>update({particleColors:[...state.particleColors,[255,255,255]]}),"addColor"),removeColor=__name(idx=>{state.particleColors.length!==1&&update({particleColors:state.particleColors.filter((_2,i2)=>i2!==idx)})},"removeColor"),updateAnimationSpeed=__name((speed,distance)=>{const adj=10*LISSAJOUS_CURVES_MAX_INTEGRAL/5e3,loopLength=distance/(speed*adj);return timeline==null||timeline.projectTools.updateFocusRange([0,Math.floor(loopLength)],!0),Math.floor(loopLength)},"updateAnimationSpeed"),setPreset=__name(preset=>{const loopLength=updateAnimationSpeed(preset.animationSpeed,preset.lissajousParams.integral);update({...preset,loopLifecycle:loopLength})},"setPreset");return jsxRuntimeExports.jsxs("div",{className:"hyperspeed-controls",style:{display:"flex",gap:"20px",flexDirection:"column",backgroundColor:"var(--gray1)",width:"100vw",minWidth:"400px",height:"100vh",padding:"1rem",color:"var(--gray6)",overflow:"scroll",scrollbarColor:"var(--gray3) var(--gray1)"},children:[jsxRuntimeExports.jsx("h2",{style:{color:"var(--gray7)",fontWeight:"normal"},children:"Liquid Lissajous (Beta)"}),jsxRuntimeExports.jsxs("div",{children:["Version 0.0.5. ",jsxRuntimeExports.jsx("a",{style:{color:"var(--continuousBlue3)",textDecoration:"underline",cursor:"pointer"},onClick:__name(()=>window.open("https://www.youtube.com/watch?v=ivXyCjc1SoM","_blank"),"onClick"),children:"Watch tutorial"})]}),jsxRuntimeExports.jsx("hr",{}),"Pick a preset to get started",jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(PresetButton$1,{label:"Burning Sunset",preset:presets$1.burningSunset,onClick:setPreset}),jsxRuntimeExports.jsx(PresetButton$1,{label:"Ocean Blues",preset:presets$1.oceanBlues,onClick:setPreset}),jsxRuntimeExports.jsx(PresetButton$1,{label:"Forest Greens",preset:presets$1.forestGreens,onClick:setPreset}),jsxRuntimeExports.jsx(PresetButton$1,{label:"Hot Pink",preset:presets$1.hotPink,onClick:setPreset}),jsxRuntimeExports.jsx(PresetButton$1,{label:"Tropical Disco",preset:presets$1.tropicalDisco,onClick:setPreset})]}),"Customize to your liking",jsxRuntimeExports.jsxs(CollapsibleSection,{title:"General",iconName:"settings",children:[jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["canvas size ",jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.width,min:100,max:1920*2,step:10,onChange:__name(c=>update({width:c}),"onChange")}),jsxRuntimeExports.jsx("span",{children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.height,min:100,max:1080*2,step:10,onChange:__name(c=>update({height:c}),"onChange")})]})]}),jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["animation speed ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.animationSpeed,min:.1,max:1,step:.1,onChange:__name(c=>{update({animationSpeed:c})},"onChange"),onCommit:__name(c=>{const loopLength=updateAnimationSpeed(c,state.lissajousParams.integral);update({animationSpeed:c,loopLifecycle:loopLength})},"onCommit")})]}),jsxRuntimeExports.jsx(SwitchableSection$1,{label:"export perfect loop",activeOnToggled:!1,checked:state.exportPerfectLoop,onToggle:__name(checked=>update({exportPerfectLoop:checked}),"onToggle"),children:jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["export duration (seconds) ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.exportDuration,min:1,max:30,step:1,onCommit:__name(c=>{update({exportDuration:c})},"onCommit")})]})})]}),jsxRuntimeExports.jsxs(CollapsibleSection,{title:"Colors",iconName:"palette",children:[jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["mixing softness ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.mixingIntensity,min:0,max:1,step:.01,onChange:__name(c=>update({mixingIntensity:c}),"onChange")})]}),jsxRuntimeExports.jsxs("fieldset",{style:{borderColor:"var(--gray4)",borderRadius:"var(--borderRadiusSmall)",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"0.5rem",alignContent:"center"},children:[jsxRuntimeExports.jsx("legend",{children:"particle colours"}),state.particleColors.map((_2,i2)=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,justifyContent:"center",borderRadius:"var(--borderRadiusSmall)",border:"1px solid var(--gray3)",padding:"0.0rem 0.5rem"},children:[jsxRuntimeExports.jsx("input",{type:"color",value:rgbToHex(state.particleColors[i2]),onChange:__name(e2=>updateColor(i2,e2.target.value),"onChange"),style:{border:"none",backgroundColor:"var(--gray3)",borderRadius:"var(--borderRadiusSmall)",width:"35px",height:"35px"}}),jsxRuntimeExports.jsx(Icon,{iconName:"delete",onClick:__name(()=>removeColor(i2),"onClick")})]},i2)),jsxRuntimeExports.jsx(Button,{text:"+ add colour",onClick:addColor})]})]}),jsxRuntimeExports.jsxs(CollapsibleSection,{title:"Lissajous Knot",iconName:"all_inclusive",children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"1rem",padding:"1.5rem",borderWidth:"2px",backgroundColor:"var(--gray2)",borderRadius:"var(--borderRadiusSmall)",marginBottom:"1rem",alignItems:"center"},children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Icon,{iconName:"info",hoverBgColor:"var(--gray2)",color:"white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{style:{color:"white"},children:"What are Lissajous knots?"}),jsxRuntimeExports.jsx("br",{}),"Lissajous knots are mathematical paths that are defined by equations involving sine and cosine functions. They are used here to create complex, looping paths on which color particles can move. Feel free to experiment with different parameters to create unique patterns."]})]}),jsxRuntimeExports.jsx("div",{style:{},children:jsxRuntimeExports.jsx(SwitchableSection$1,{label:"display lissajous knot",checked:state.showLissajousFigure,onToggle:__name(checked=>update({showLissajousFigure:checked}),"onToggle"),children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[jsxRuntimeExports.jsx(LissajousSelectButtonGroup,{value:state.lissajousParams,options:LISSAJOUS_CURVES.map(curve=>({label:`${curve.a}:${curve.b}`,value:curve})),onChange:__name(params=>{const loopLength=updateAnimationSpeed(state.animationSpeed,params.integral);update({lissajousParams:params,loopLifecycle:loopLength,rotateHorizontal:0,rotateVertical:0})},"onChange")}),jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["horizontal rotation ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.rotateHorizontal,min:0,max:360,step:1,onChange:__name(c=>{update({rotateHorizontal:c})},"onChange")})]}),jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["vertical rotation ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.rotateVertical,min:0,max:360,step:1,onChange:__name(c=>{update({rotateVertical:c})},"onChange")})]})]})})})]}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Effects",iconName:"star",children:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["noise intensity ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.noiseIntensity,min:0,max:1,step:.01,onChange:__name(c=>{update({noiseIntensity:c})},"onChange")})]})})}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Give Feedback",iconName:"favorite",children:jsxRuntimeExports.jsx("div",{style:{marginBottom:"1rem",color:"var(--gray6)"},children:jsxRuntimeExports.jsx(FeedbackBox,{preamble:"[FEEDBACK FROM LIQUIDLISSAJOUS] "})})})]})}__name(CyberSpaghettiControlsInterior$2,"CyberSpaghettiControlsInterior$2");function CyberSpaghettiExterior$1(){const controls=useControls$1();return controls?jsxRuntimeExports.jsx(CyberSpaghettiControlsInterior$2,{controls}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(CyberSpaghettiExterior$1,"CyberSpaghettiExterior$1");function CyberSpaghettiControls$2(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(ControlsProvider$1,{children:jsxRuntimeExports.jsx(TimelineProvider,{shouldCreate:!1,defaultName:"liquidlissajous.timeline",children:jsxRuntimeExports.jsx(CyberSpaghettiExterior$1,{})})})})}__name(CyberSpaghettiControls$2,"CyberSpaghettiControls$2");var lodash$1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var lodash=lodash$1.exports,hasRequiredLodash;function requireLodash(){return hasRequiredLodash||(hasRequiredLodash=1,function(module,exports){(function(){var undefined$1,VERSION="4.17.21",LARGE_ARRAY_SIZE=200,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`",HASH_UNDEFINED="__lodash_hash_undefined__",MAX_MEMOIZE_SIZE=500,PLACEHOLDER="__lodash_placeholder__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=800,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3,INFINITY=1/0,MAX_SAFE_INTEGER2=9007199254740991,MAX_INTEGER=17976931348623157e292,NAN=NaN,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrimStart=/^\s+/,reWhitespace=/\s/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos="[']",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp(rsApos,"g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var deburredLetters={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&!0&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}__name(apply,"apply");function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=array==null?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}__name(arrayAggregator,"arrayAggregator");function arrayEach(array,iteratee){for(var index=-1,length=array==null?0:array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}__name(arrayEach,"arrayEach");function arrayEachRight(array,iteratee){for(var length=array==null?0:array.length;length--&&iteratee(array[length],length,array)!==!1;);return array}__name(arrayEachRight,"arrayEachRight");function arrayEvery(array,predicate){for(var index=-1,length=array==null?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}__name(arrayEvery,"arrayEvery");function arrayFilter(array,predicate){for(var index=-1,length=array==null?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}__name(arrayFilter,"arrayFilter");function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}__name(arrayIncludes,"arrayIncludes");function arrayIncludesWith(array,value,comparator){for(var index=-1,length=array==null?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}__name(arrayIncludesWith,"arrayIncludesWith");function arrayMap(array,iteratee){for(var index=-1,length=array==null?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}__name(arrayMap,"arrayMap");function arrayPush(array,values){for(var index=-1,length=values.length,offset2=array.length;++index<length;)array[offset2+index]=values[index];return array}__name(arrayPush,"arrayPush");function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}__name(arrayReduce,"arrayReduce");function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}__name(arrayReduceRight,"arrayReduceRight");function arraySome(array,predicate){for(var index=-1,length=array==null?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}__name(arraySome,"arraySome");var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}__name(asciiToArray,"asciiToArray");function asciiWords(string){return string.match(reAsciiWord)||[]}__name(asciiWords,"asciiWords");function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection2){if(predicate(value,key,collection2))return result=key,!1}),result}__name(baseFindKey,"baseFindKey");function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}__name(baseFindIndex,"baseFindIndex");function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}__name(baseIndexOf,"baseIndexOf");function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}__name(baseIndexOfWith,"baseIndexOfWith");function baseIsNaN(value){return value!==value}__name(baseIsNaN,"baseIsNaN");function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}__name(baseMean,"baseMean");function baseProperty(key){return function(object){return object==null?undefined$1:object[key]}}__name(baseProperty,"baseProperty");function basePropertyOf(object){return function(key){return object==null?undefined$1:object[key]}}__name(basePropertyOf,"basePropertyOf");function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection2){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection2)}),accumulator}__name(baseReduce,"baseReduce");function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}__name(baseSortBy,"baseSortBy");function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined$1&&(result=result===undefined$1?current:result+current)}return result}__name(baseSum,"baseSum");function baseTimes(n3,iteratee){for(var index=-1,result=Array(n3);++index<n3;)result[index]=iteratee(index);return result}__name(baseTimes,"baseTimes");function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}__name(baseToPairs,"baseToPairs");function baseTrim(string){return string&&string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,"")}__name(baseTrim,"baseTrim");function baseUnary(func){return function(value){return func(value)}}__name(baseUnary,"baseUnary");function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}__name(baseValues,"baseValues");function cacheHas(cache2,key){return cache2.has(key)}__name(cacheHas,"cacheHas");function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}__name(charsStartIndex,"charsStartIndex");function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}__name(charsEndIndex,"charsEndIndex");function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}__name(countHolders,"countHolders");var deburrLetter=basePropertyOf(deburredLetters),escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+stringEscapes[chr]}__name(escapeStringChar,"escapeStringChar");function getValue(object,key){return object==null?undefined$1:object[key]}__name(getValue,"getValue");function hasUnicode(string){return reHasUnicode.test(string)}__name(hasUnicode,"hasUnicode");function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}__name(hasUnicodeWord,"hasUnicodeWord");function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}__name(iteratorToArray,"iteratorToArray");function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}__name(mapToArray,"mapToArray");function overArg(func,transform){return function(arg){return func(transform(arg))}}__name(overArg,"overArg");function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];(value===placeholder||value===PLACEHOLDER)&&(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}__name(replaceHolders,"replaceHolders");function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}__name(setToArray,"setToArray");function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}__name(setToPairs,"setToPairs");function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}__name(strictIndexOf,"strictIndexOf");function strictLastIndexOf(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}__name(strictLastIndexOf,"strictLastIndexOf");function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}__name(stringSize,"stringSize");function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}__name(stringToArray,"stringToArray");function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}__name(trimmedEndIndex,"trimmedEndIndex");var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)++result;return result}__name(unicodeSize,"unicodeSize");function unicodeToArray(string){return string.match(reUnicode)||[]}__name(unicodeToArray,"unicodeToArray");function unicodeWords(string){return string.match(reUnicodeWord)||[]}__name(unicodeWords,"unicodeWords");var runInContext=__name(function runInContext2(context){context=context==null?root:_2.defaults(root.Object(),context,_2.pick(root,contextProps));var Array2=context.Array,Date2=context.Date,Error2=context.Error,Function2=context.Function,Math2=context.Math,Object2=context.Object,RegExp2=context.RegExp,String2=context.String,TypeError2=context.TypeError,arrayProto=Array2.prototype,funcProto=Function2.prototype,objectProto=Object2.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty2=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object2),oldDash=root._,reIsNative=RegExp2("^"+funcToString.call(hasOwnProperty2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer2=moduleExports?context.Buffer:undefined$1,Symbol2=context.Symbol,Uint8Array2=context.Uint8Array,allocUnsafe=Buffer2?Buffer2.allocUnsafe:undefined$1,getPrototype=overArg(Object2.getPrototypeOf,Object2),objectCreate=Object2.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol2?Symbol2.isConcatSpreadable:undefined$1,symIterator=Symbol2?Symbol2.iterator:undefined$1,symToStringTag=Symbol2?Symbol2.toStringTag:undefined$1,defineProperty=function(){try{var func=getNative(Object2,"defineProperty");return func({},"",{}),func}catch{}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date2&&Date2.now!==root.Date.now&&Date2.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math2.ceil,nativeFloor=Math2.floor,nativeGetSymbols=Object2.getOwnPropertySymbols,nativeIsBuffer=Buffer2?Buffer2.isBuffer:undefined$1,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object2.keys,Object2),nativeMax=Math2.max,nativeMin=Math2.min,nativeNow=Date2.now,nativeParseInt=context.parseInt,nativeRandom=Math2.random,nativeReverse=arrayProto.reverse,DataView2=getNative(context,"DataView"),Map2=getNative(context,"Map"),Promise2=getNative(context,"Promise"),Set2=getNative(context,"Set"),WeakMap2=getNative(context,"WeakMap"),nativeCreate=getNative(Object2,"create"),metaMap=WeakMap2&&new WeakMap2,realNames={},dataViewCtorString=toSource(DataView2),mapCtorString=toSource(Map2),promiseCtorString=toSource(Promise2),setCtorString=toSource(Set2),weakMapCtorString=toSource(WeakMap2),symbolProto=Symbol2?Symbol2.prototype:undefined$1,symbolValueOf=symbolProto?symbolProto.valueOf:undefined$1,symbolToString=symbolProto?symbolProto.toString:undefined$1;function lodash2(value){if(isObjectLike(value)&&!isArray2(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty2.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}__name(lodash2,"lodash");var baseCreate=function(){function object(){}return __name(object,"object"),function(proto){if(!isObject2(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result2=new object;return object.prototype=undefined$1,result2}}();function baseLodash(){}__name(baseLodash,"baseLodash");function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined$1}__name(LodashWrapper,"LodashWrapper"),lodash2.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash2}},lodash2.prototype=baseLodash.prototype,lodash2.prototype.constructor=lodash2,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}__name(LazyWrapper,"LazyWrapper");function lazyClone(){var result2=new LazyWrapper(this.__wrapped__);return result2.__actions__=copyArray(this.__actions__),result2.__dir__=this.__dir__,result2.__filtered__=this.__filtered__,result2.__iteratees__=copyArray(this.__iteratees__),result2.__takeCount__=this.__takeCount__,result2.__views__=copyArray(this.__views__),result2}__name(lazyClone,"lazyClone");function lazyReverse(){if(this.__filtered__){var result2=new LazyWrapper(this);result2.__dir__=-1,result2.__filtered__=!0}else result2=this.clone(),result2.__dir__*=-1;return result2}__name(lazyReverse,"lazyReverse");function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray2(array),isRight=dir<0,arrLength=isArr?array.length:0,view2=getView(0,arrLength,this.__views__),start=view2.start,end=view2.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result2=[];outer:for(;length--&&resIndex<takeCount;){index+=dir;for(var iterIndex=-1,value=array[index];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee2=data.iteratee,type=data.type,computed=iteratee2(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}result2[resIndex++]=value}return result2}__name(lazyValue,"lazyValue"),LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}__name(Hash,"Hash");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}__name(hashClear,"hashClear");function hashDelete(key){var result2=this.has(key)&&delete this.__data__[key];return this.size-=result2?1:0,result2}__name(hashDelete,"hashDelete");function hashGet(key){var data=this.__data__;if(nativeCreate){var result2=data[key];return result2===HASH_UNDEFINED?undefined$1:result2}return hasOwnProperty2.call(data,key)?data[key]:undefined$1}__name(hashGet,"hashGet");function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined$1:hasOwnProperty2.call(data,key)}__name(hashHas,"hashHas");function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined$1?HASH_UNDEFINED:value,this}__name(hashSet,"hashSet"),Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}__name(ListCache,"ListCache");function listCacheClear(){this.__data__=[],this.size=0}__name(listCacheClear,"listCacheClear");function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0}__name(listCacheDelete,"listCacheDelete");function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined$1:data[index][1]}__name(listCacheGet,"listCacheGet");function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}__name(listCacheHas,"listCacheHas");function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}__name(listCacheSet,"listCacheSet"),ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}__name(MapCache,"MapCache");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map2||ListCache),string:new Hash}}__name(mapCacheClear,"mapCacheClear");function mapCacheDelete(key){var result2=getMapData(this,key).delete(key);return this.size-=result2?1:0,result2}__name(mapCacheDelete,"mapCacheDelete");function mapCacheGet(key){return getMapData(this,key).get(key)}__name(mapCacheGet,"mapCacheGet");function mapCacheHas(key){return getMapData(this,key).has(key)}__name(mapCacheHas,"mapCacheHas");function mapCacheSet(key,value){var data=getMapData(this,key),size3=data.size;return data.set(key,value),this.size+=data.size==size3?0:1,this}__name(mapCacheSet,"mapCacheSet"),MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;function SetCache(values2){var index=-1,length=values2==null?0:values2.length;for(this.__data__=new MapCache;++index<length;)this.add(values2[index])}__name(SetCache,"SetCache");function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}__name(setCacheAdd,"setCacheAdd");function setCacheHas(value){return this.__data__.has(value)}__name(setCacheHas,"setCacheHas"),SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}__name(Stack,"Stack");function stackClear(){this.__data__=new ListCache,this.size=0}__name(stackClear,"stackClear");function stackDelete(key){var data=this.__data__,result2=data.delete(key);return this.size=data.size,result2}__name(stackDelete,"stackDelete");function stackGet(key){return this.__data__.get(key)}__name(stackGet,"stackGet");function stackHas(key){return this.__data__.has(key)}__name(stackHas,"stackHas");function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map2||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}__name(stackSet,"stackSet"),Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray2(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result2=skipIndexes?baseTimes(value.length,String2):[],length=result2.length;for(var key in value)(inherited||hasOwnProperty2.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex2(key,length)))&&result2.push(key);return result2}__name(arrayLikeKeys,"arrayLikeKeys");function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined$1}__name(arraySample,"arraySample");function arraySampleSize(array,n3){return shuffleSelf(copyArray(array),baseClamp(n3,0,array.length))}__name(arraySampleSize,"arraySampleSize");function arrayShuffle(array){return shuffleSelf(copyArray(array))}__name(arrayShuffle,"arrayShuffle");function assignMergeValue(object,key,value){(value!==undefined$1&&!eq(object[key],value)||value===undefined$1&&!(key in object))&&baseAssignValue(object,key,value)}__name(assignMergeValue,"assignMergeValue");function assignValue(object,key,value){var objValue=object[key];(!(hasOwnProperty2.call(object,key)&&eq(objValue,value))||value===undefined$1&&!(key in object))&&baseAssignValue(object,key,value)}__name(assignValue,"assignValue");function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}__name(assocIndexOf,"assocIndexOf");function baseAggregator(collection,setter,iteratee2,accumulator){return baseEach(collection,function(value,key,collection2){setter(accumulator,value,iteratee2(value),collection2)}),accumulator}__name(baseAggregator,"baseAggregator");function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}__name(baseAssign,"baseAssign");function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}__name(baseAssignIn,"baseAssignIn");function baseAssignValue(object,key,value){key=="__proto__"&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value,writable:!0}):object[key]=value}__name(baseAssignValue,"baseAssignValue");function baseAt(object,paths){for(var index=-1,length=paths.length,result2=Array2(length),skip=object==null;++index<length;)result2[index]=skip?undefined$1:get2(object,paths[index]);return result2}__name(baseAt,"baseAt");function baseClamp(number2,lower,upper){return number2===number2&&(upper!==undefined$1&&(number2=number2<=upper?number2:upper),lower!==undefined$1&&(number2=number2>=lower?number2:lower)),number2}__name(baseClamp,"baseClamp");function baseClone(value,bitmask,customizer,key,object,stack){var result2,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result2=object?customizer(value,key,object,stack):customizer(value)),result2!==undefined$1)return result2;if(!isObject2(value))return value;var isArr=isArray2(value);if(isArr){if(result2=initCloneArray(value),!isDeep)return copyArray(value,result2)}else{var tag2=getTag(value),isFunc=tag2==funcTag||tag2==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag2==objectTag||tag2==argsTag||isFunc&&!object){if(result2=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result2,value)):copySymbols(value,baseAssign(result2,value))}else{if(!cloneableTags[tag2])return object?value:{};result2=initCloneByTag(value,tag2,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result2),isSet(value)?value.forEach(function(subValue){result2.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}):isMap2(value)&&value.forEach(function(subValue,key2){result2.set(key2,baseClone(subValue,bitmask,customizer,key2,value,stack))});var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?undefined$1:keysFunc(value);return arrayEach(props||value,function(subValue,key2){props&&(key2=subValue,subValue=value[key2]),assignValue(result2,key2,baseClone(subValue,bitmask,customizer,key2,value,stack))}),result2}__name(baseClone,"baseClone");function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}__name(baseConforms,"baseConforms");function baseConformsTo(object,source,props){var length=props.length;if(object==null)return!length;for(object=Object2(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined$1&&!(key in object)||!predicate(value))return!1}return!0}__name(baseConformsTo,"baseConformsTo");function baseDelay(func,wait,args){if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);return setTimeout2(function(){func.apply(undefined$1,args)},wait)}__name(baseDelay,"baseDelay");function baseDifference(array,values2,iteratee2,comparator){var index=-1,includes2=arrayIncludes,isCommon=!0,length=array.length,result2=[],valuesLength=values2.length;if(!length)return result2;iteratee2&&(values2=arrayMap(values2,baseUnary(iteratee2))),comparator?(includes2=arrayIncludesWith,isCommon=!1):values2.length>=LARGE_ARRAY_SIZE&&(includes2=cacheHas,isCommon=!1,values2=new SetCache(values2));outer:for(;++index<length;){var value=array[index],computed=iteratee2==null?value:iteratee2(value);if(value=comparator||value!==0?value:0,isCommon&&computed===computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values2[valuesIndex]===computed)continue outer;result2.push(value)}else includes2(values2,computed,comparator)||result2.push(value)}return result2}__name(baseDifference,"baseDifference");var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result2=!0;return baseEach(collection,function(value,index,collection2){return result2=!!predicate(value,index,collection2),result2}),result2}__name(baseEvery,"baseEvery");function baseExtremum(array,iteratee2,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee2(value);if(current!=null&&(computed===undefined$1?current===current&&!isSymbol(current):comparator(current,computed)))var computed=current,result2=value}return result2}__name(baseExtremum,"baseExtremum");function baseFill(array,value,start,end){var length=array.length;for(start=toInteger(start),start<0&&(start=-start>length?0:length+start),end=end===undefined$1||end>length?length:toInteger(end),end<0&&(end+=length),end=start>end?0:toLength(end);start<end;)array[start++]=value;return array}__name(baseFill,"baseFill");function baseFilter(collection,predicate){var result2=[];return baseEach(collection,function(value,index,collection2){predicate(value,index,collection2)&&result2.push(value)}),result2}__name(baseFilter,"baseFilter");function baseFlatten(array,depth,predicate,isStrict,result2){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result2||(result2=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result2):arrayPush(result2,value):isStrict||(result2[result2.length]=value)}return result2}__name(baseFlatten,"baseFlatten");var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee2){return object&&baseFor(object,iteratee2,keys)}__name(baseForOwn,"baseForOwn");function baseForOwnRight(object,iteratee2){return object&&baseForRight(object,iteratee2,keys)}__name(baseForOwnRight,"baseForOwnRight");function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction2(object[key])})}__name(baseFunctions,"baseFunctions");function baseGet(object,path){path=castPath(path,object);for(var index=0,length=path.length;object!=null&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined$1}__name(baseGet,"baseGet");function baseGetAllKeys(object,keysFunc,symbolsFunc){var result2=keysFunc(object);return isArray2(object)?result2:arrayPush(result2,symbolsFunc(object))}__name(baseGetAllKeys,"baseGetAllKeys");function baseGetTag(value){return value==null?value===undefined$1?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object2(value)?getRawTag(value):objectToString(value)}__name(baseGetTag,"baseGetTag");function baseGt(value,other){return value>other}__name(baseGt,"baseGt");function baseHas(object,key){return object!=null&&hasOwnProperty2.call(object,key)}__name(baseHas,"baseHas");function baseHasIn(object,key){return object!=null&&key in Object2(object)}__name(baseHasIn,"baseHasIn");function baseInRange(number2,start,end){return number2>=nativeMin(start,end)&&number2<nativeMax(start,end)}__name(baseInRange,"baseInRange");function baseIntersection(arrays,iteratee2,comparator){for(var includes2=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array2(othLength),maxLength=1/0,result2=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee2&&(array=arrayMap(array,baseUnary(iteratee2))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee2||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined$1}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result2.length<maxLength;){var value=array[index],computed=iteratee2?iteratee2(value):value;if(value=comparator||value!==0?value:0,!(seen?cacheHas(seen,computed):includes2(result2,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache2=caches[othIndex];if(!(cache2?cacheHas(cache2,computed):includes2(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result2.push(value)}}return result2}__name(baseIntersection,"baseIntersection");function baseInverter(object,setter,iteratee2,accumulator){return baseForOwn(object,function(value,key,object2){setter(accumulator,iteratee2(value),key,object2)}),accumulator}__name(baseInverter,"baseInverter");function baseInvoke(object,path,args){path=castPath(path,object),object=parent(object,path);var func=object==null?object:object[toKey(last2(path))];return func==null?undefined$1:apply(func,object,args)}__name(baseInvoke,"baseInvoke");function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}__name(baseIsArguments,"baseIsArguments");function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}__name(baseIsArrayBuffer,"baseIsArrayBuffer");function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}__name(baseIsDate,"baseIsDate");function baseIsEqual(value,other,bitmask,customizer,stack){return value===other?!0:value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}__name(baseIsEqual,"baseIsEqual");function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray2(object),othIsArr=isArray2(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag,othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty2.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty2.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag?(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack)):!1}__name(baseIsEqualDeep,"baseIsEqualDeep");function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}__name(baseIsMap,"baseIsMap");function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null)return!length;for(object=Object2(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined$1&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result2=customizer(objValue,srcValue,key,object,source,stack);if(!(result2===undefined$1?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result2))return!1}}return!0}__name(baseIsMatch,"baseIsMatch");function baseIsNative(value){if(!isObject2(value)||isMasked(value))return!1;var pattern=isFunction2(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}__name(baseIsNative,"baseIsNative");function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}__name(baseIsRegExp,"baseIsRegExp");function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}__name(baseIsSet,"baseIsSet");function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}__name(baseIsTypedArray,"baseIsTypedArray");function baseIteratee(value){return typeof value=="function"?value:value==null?identity2:typeof value=="object"?isArray2(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}__name(baseIteratee,"baseIteratee");function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result2=[];for(var key in Object2(object))hasOwnProperty2.call(object,key)&&key!="constructor"&&result2.push(key);return result2}__name(baseKeys,"baseKeys");function baseKeysIn(object){if(!isObject2(object))return nativeKeysIn(object);var isProto=isPrototype(object),result2=[];for(var key in object)key=="constructor"&&(isProto||!hasOwnProperty2.call(object,key))||result2.push(key);return result2}__name(baseKeysIn,"baseKeysIn");function baseLt(value,other){return value<other}__name(baseLt,"baseLt");function baseMap(collection,iteratee2){var index=-1,result2=isArrayLike(collection)?Array2(collection.length):[];return baseEach(collection,function(value,key,collection2){result2[++index]=iteratee2(value,key,collection2)}),result2}__name(baseMap,"baseMap");function baseMatches(source){var matchData=getMatchData(source);return matchData.length==1&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}__name(baseMatches,"baseMatches");function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get2(object,path);return objValue===undefined$1&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}__name(baseMatchesProperty,"baseMatchesProperty");function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(stack||(stack=new Stack),isObject2(srcValue))baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined$1;newValue===undefined$1&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn)}__name(baseMerge,"baseMerge");function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined$1,isCommon=newValue===undefined$1;if(isCommon){var isArr=isArray2(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray2(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject2(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):(!isObject2(objValue)||isFunction2(objValue))&&(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}__name(baseMergeDeep,"baseMergeDeep");function baseNth(array,n3){var length=array.length;if(length)return n3+=n3<0?length:0,isIndex2(n3,length)?array[n3]:undefined$1}__name(baseNth,"baseNth");function baseOrderBy(collection,iteratees,orders){iteratees.length?iteratees=arrayMap(iteratees,function(iteratee2){return isArray2(iteratee2)?function(value){return baseGet(value,iteratee2.length===1?iteratee2[0]:iteratee2)}:iteratee2}):iteratees=[identity2];var index=-1;iteratees=arrayMap(iteratees,baseUnary(getIteratee()));var result2=baseMap(collection,function(value,key,collection2){var criteria=arrayMap(iteratees,function(iteratee2){return iteratee2(value)});return{criteria,index:++index,value}});return baseSortBy(result2,function(object,other){return compareMultiple(object,other,orders)})}__name(baseOrderBy,"baseOrderBy");function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}__name(basePick,"basePick");function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result2={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result2,castPath(path,object),value)}return result2}__name(basePickBy,"basePickBy");function basePropertyDeep(path){return function(object){return baseGet(object,path)}}__name(basePropertyDeep,"basePropertyDeep");function basePullAll(array,values2,iteratee2,comparator){var indexOf2=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values2.length,seen=array;for(array===values2&&(values2=copyArray(values2)),iteratee2&&(seen=arrayMap(array,baseUnary(iteratee2)));++index<length;)for(var fromIndex=0,value=values2[index],computed=iteratee2?iteratee2(value):value;(fromIndex=indexOf2(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}__name(basePullAll,"basePullAll");function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;isIndex2(index)?splice.call(array,index,1):baseUnset(array,index)}}return array}__name(basePullAt,"basePullAt");function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}__name(baseRandom,"baseRandom");function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result2=Array2(length);length--;)result2[fromRight?length:++index]=start,start+=step;return result2}__name(baseRange,"baseRange");function baseRepeat(string,n3){var result2="";if(!string||n3<1||n3>MAX_SAFE_INTEGER2)return result2;do n3%2&&(result2+=string),n3=nativeFloor(n3/2),n3&&(string+=string);while(n3);return result2}__name(baseRepeat,"baseRepeat");function baseRest(func,start){return setToString(overRest(func,start,identity2),func+"")}__name(baseRest,"baseRest");function baseSample(collection){return arraySample(values(collection))}__name(baseSample,"baseSample");function baseSampleSize(collection,n3){var array=values(collection);return shuffleSelf(array,baseClamp(n3,0,array.length))}__name(baseSampleSize,"baseSampleSize");function baseSet(object,path,value,customizer){if(!isObject2(object))return object;path=castPath(path,object);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;nested!=null&&++index<length;){var key=toKey(path[index]),newValue=value;if(key==="__proto__"||key==="constructor"||key==="prototype")return object;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined$1,newValue===undefined$1&&(newValue=isObject2(objValue)?objValue:isIndex2(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}__name(baseSet,"baseSet");var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity2,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity2;function baseShuffle(collection){return shuffleSelf(values(collection))}__name(baseShuffle,"baseShuffle");function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),end=end>length?length:end,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result2=Array2(length);++index<length;)result2[index]=array[index+start];return result2}__name(baseSlice,"baseSlice");function baseSome(collection,predicate){var result2;return baseEach(collection,function(value,index,collection2){return result2=predicate(value,index,collection2),!result2}),!!result2}__name(baseSome,"baseSome");function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){for(;low<high;){var mid=low+high>>>1,computed=array[mid];computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid}return high}return baseSortedIndexBy(array,value,identity2,retHighest)}__name(baseSortedIndex,"baseSortedIndex");function baseSortedIndexBy(array,value,iteratee2,retHighest){var low=0,high=array==null?0:array.length;if(high===0)return 0;value=iteratee2(value);for(var valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined$1;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee2(array[mid]),othIsDefined=computed!==undefined$1,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else valIsUndefined?setLow=othIsReflexive&&(retHighest||othIsDefined):valIsNull?setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):othIsNull||othIsSymbol?setLow=!1:setLow=retHighest?computed<=value:computed<value;setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}__name(baseSortedIndexBy,"baseSortedIndexBy");function baseSortedUniq(array,iteratee2){for(var index=-1,length=array.length,resIndex=0,result2=[];++index<length;){var value=array[index],computed=iteratee2?iteratee2(value):value;if(!index||!eq(computed,seen)){var seen=computed;result2[resIndex++]=value===0?0:value}}return result2}__name(baseSortedUniq,"baseSortedUniq");function baseToNumber(value){return typeof value=="number"?value:isSymbol(value)?NAN:+value}__name(baseToNumber,"baseToNumber");function baseToString(value){if(typeof value=="string")return value;if(isArray2(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result2=value+"";return result2=="0"&&1/value==-1/0?"-0":result2}__name(baseToString,"baseToString");function baseUniq(array,iteratee2,comparator){var index=-1,includes2=arrayIncludes,length=array.length,isCommon=!0,result2=[],seen=result2;if(comparator)isCommon=!1,includes2=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set2=iteratee2?null:createSet(array);if(set2)return setToArray(set2);isCommon=!1,includes2=cacheHas,seen=new SetCache}else seen=iteratee2?[]:result2;outer:for(;++index<length;){var value=array[index],computed=iteratee2?iteratee2(value):value;if(value=comparator||value!==0?value:0,isCommon&&computed===computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee2&&seen.push(computed),result2.push(value)}else includes2(seen,computed,comparator)||(seen!==result2&&seen.push(computed),result2.push(value))}return result2}__name(baseUniq,"baseUniq");function baseUnset(object,path){return path=castPath(path,object),object=parent(object,path),object==null||delete object[toKey(last2(path))]}__name(baseUnset,"baseUnset");function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}__name(baseUpdate,"baseUpdate");function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}__name(baseWhile,"baseWhile");function baseWrapperValue(value,actions){var result2=value;return result2 instanceof LazyWrapper&&(result2=result2.value()),arrayReduce(actions,function(result3,action){return action.func.apply(action.thisArg,arrayPush([result3],action.args))},result2)}__name(baseWrapperValue,"baseWrapperValue");function baseXor(arrays,iteratee2,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result2=Array2(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result2[index]=baseDifference(result2[index]||array,arrays[othIndex],iteratee2,comparator));return baseUniq(baseFlatten(result2,1),iteratee2,comparator)}__name(baseXor,"baseXor");function baseZipObject(props,values2,assignFunc){for(var index=-1,length=props.length,valsLength=values2.length,result2={};++index<length;){var value=index<valsLength?values2[index]:undefined$1;assignFunc(result2,props[index],value)}return result2}__name(baseZipObject,"baseZipObject");function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}__name(castArrayLikeObject,"castArrayLikeObject");function castFunction(value){return typeof value=="function"?value:identity2}__name(castFunction,"castFunction");function castPath(value,object){return isArray2(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}__name(castPath,"castPath");var castRest=baseRest;function castSlice(array,start,end){var length=array.length;return end=end===undefined$1?length:end,!start&&end>=length?array:baseSlice(array,start,end)}__name(castSlice,"castSlice");var clearTimeout2=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result2=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result2),result2}__name(cloneBuffer,"cloneBuffer");function cloneArrayBuffer(arrayBuffer){var result2=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array2(result2).set(new Uint8Array2(arrayBuffer)),result2}__name(cloneArrayBuffer,"cloneArrayBuffer");function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}__name(cloneDataView,"cloneDataView");function cloneRegExp(regexp){var result2=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result2.lastIndex=regexp.lastIndex,result2}__name(cloneRegExp,"cloneRegExp");function cloneSymbol(symbol){return symbolValueOf?Object2(symbolValueOf.call(symbol)):{}}__name(cloneSymbol,"cloneSymbol");function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}__name(cloneTypedArray,"cloneTypedArray");function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined$1,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined$1,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}__name(compareAscending,"compareAscending");function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result2=compareAscending(objCriteria[index],othCriteria[index]);if(result2){if(index>=ordersLength)return result2;var order=orders[index];return result2*(order=="desc"?-1:1)}}return object.index-other.index}__name(compareMultiple,"compareMultiple");function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result2=Array2(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result2[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result2[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result2[leftIndex++]=args[argsIndex++];return result2}__name(composeArgs,"composeArgs");function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result2=Array2(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result2[argsIndex]=args[argsIndex];for(var offset2=argsIndex;++rightIndex<rightLength;)result2[offset2+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result2[offset2+holders[holdersIndex]]=args[argsIndex++]);return result2}__name(composeArgsRight,"composeArgsRight");function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array2(length));++index<length;)array[index]=source[index];return array}__name(copyArray,"copyArray");function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined$1;newValue===undefined$1&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}__name(copyObject,"copyObject");function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}__name(copySymbols,"copySymbols");function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}__name(copySymbolsIn,"copySymbolsIn");function createAggregator(setter,initializer){return function(collection,iteratee2){var func=isArray2(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee2,2),accumulator)}}__name(createAggregator,"createAggregator");function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined$1,guard=length>2?sources[2]:undefined$1;for(customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined$1,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined$1:customizer,length=1),object=Object2(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}__name(createAssigner,"createAssigner");function createBaseEach(eachFunc,fromRight){return function(collection,iteratee2){if(collection==null)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee2);for(var length=collection.length,index=fromRight?length:-1,iterable=Object2(collection);(fromRight?index--:++index<length)&&iteratee2(iterable[index],index,iterable)!==!1;);return collection}}__name(createBaseEach,"createBaseEach");function createBaseFor(fromRight){return function(object,iteratee2,keysFunc){for(var index=-1,iterable=Object2(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee2(iterable[key],key,iterable)===!1)break}return object}}__name(createBaseFor,"createBaseFor");function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}return __name(wrapper,"wrapper"),wrapper}__name(createBind,"createBind");function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined$1,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}__name(createCaseFirst,"createCaseFirst");function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}__name(createCompounder,"createCompounder");function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result2=Ctor.apply(thisBinding,args);return isObject2(result2)?result2:thisBinding}}__name(createCtor,"createCtor");function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){for(var length=arguments.length,args=Array2(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);if(length-=holders.length,length<arity)return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined$1,args,holders,undefined$1,undefined$1,arity-length);var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}return __name(wrapper,"wrapper"),wrapper}__name(createCurry,"createCurry");function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object2(collection);if(!isArrayLike(collection)){var iteratee2=getIteratee(predicate,3);collection=keys(collection),predicate=__name(function(key){return iteratee2(iterable[key],key,iterable)},"predicate")}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee2?collection[index]:index]:undefined$1}}__name(createFind,"createFind");function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&getFuncName(func)=="wrapper")var wrapper=new LodashWrapper([],!0)}for(index=wrapper?index:length;++index<length;){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined$1;data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1?wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]):wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray2(value))return wrapper.plant(value).value();for(var index2=0,result2=length?funcs[index2].apply(this,args):value;++index2<length;)result2=funcs[index2].call(this,result2);return result2}})}__name(createFlow,"createFlow");function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary2,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined$1:createCtor(func);function wrapper(){for(var length=arguments.length,args=Array2(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary2,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary2<length&&(args.length=ary2),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}return __name(wrapper,"wrapper"),wrapper}__name(createHybrid,"createHybrid");function createInverter(setter,toIteratee){return function(object,iteratee2){return baseInverter(object,setter,toIteratee(iteratee2),{})}}__name(createInverter,"createInverter");function createMathOperation(operator,defaultValue){return function(value,other){var result2;if(value===undefined$1&&other===undefined$1)return defaultValue;if(value!==undefined$1&&(result2=value),other!==undefined$1){if(result2===undefined$1)return other;typeof value=="string"||typeof other=="string"?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),result2=operator(value,other)}return result2}}__name(createMathOperation,"createMathOperation");function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee2){return apply(iteratee2,thisArg,args)})})})}__name(createOver,"createOver");function createPadding(length,chars){chars=chars===undefined$1?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result2=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result2),0,length).join(""):result2.slice(0,length)}__name(createPadding,"createPadding");function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array2(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}return __name(wrapper,"wrapper"),wrapper}__name(createPartial,"createPartial");function createRange(fromRight){return function(start,end,step){return step&&typeof step!="number"&&isIterateeCall(start,end,step)&&(end=step=undefined$1),start=toFinite(start),end===undefined$1?(end=start,start=0):end=toFinite(end),step=step===undefined$1?start<end?1:-1:toFinite(step),baseRange(start,end,step,fromRight)}}__name(createRange,"createRange");function createRelationalOperation(operator){return function(value,other){return typeof value=="string"&&typeof other=="string"||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}__name(createRelationalOperation,"createRelationalOperation");function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary2,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined$1,newHoldersRight=isCurry?undefined$1:holders,newPartials=isCurry?partials:undefined$1,newPartialsRight=isCurry?undefined$1:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG),bitmask&WRAP_CURRY_BOUND_FLAG||(bitmask&=-4);var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary2,arity],result2=wrapFunc.apply(undefined$1,newData);return isLaziable(func)&&setData(result2,newData),result2.placeholder=placeholder,setWrapToString(result2,func,bitmask)}__name(createRecurry,"createRecurry");function createRound(methodName){var func=Math2[methodName];return function(number2,precision){if(number2=toNumber(number2),precision=precision==null?0:nativeMin(toInteger(precision),292),precision&&nativeIsFinite(number2)){var pair=(toString(number2)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));return pair=(toString(value)+"e").split("e"),+(pair[0]+"e"+(+pair[1]-precision))}return func(number2)}}__name(createRound,"createRound");var createSet=Set2&&1/setToArray(new Set2([,-0]))[1]==INFINITY?function(values2){return new Set2(values2)}:noop2;function createToPairs(keysFunc){return function(object){var tag2=getTag(object);return tag2==mapTag?mapToArray(object):tag2==setTag?setToPairs(object):baseToPairs(object,keysFunc(object))}}__name(createToPairs,"createToPairs");function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary2,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=-97,partials=holders=undefined$1),ary2=ary2===undefined$1?ary2:nativeMax(toInteger(ary2),0),arity=arity===undefined$1?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined$1}var data=isBindKey?undefined$1:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary2,arity];if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=newData[9]===undefined$1?isBindKey?0:func.length:nativeMax(newData[9]-length,0),!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)&&(bitmask&=-25),!bitmask||bitmask==WRAP_BIND_FLAG)var result2=createBind(func,bitmask,thisArg);else bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG?result2=createCurry(func,bitmask,arity):(bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length?result2=createPartial(func,bitmask,thisArg,partials):result2=createHybrid.apply(undefined$1,newData);var setter=data?baseSetData:setData;return setWrapToString(setter(result2,newData),func,bitmask)}__name(createWrap,"createWrap");function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined$1||eq(objValue,objectProto[key])&&!hasOwnProperty2.call(object,key)?srcValue:objValue}__name(customDefaultsAssignIn,"customDefaultsAssignIn");function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject2(objValue)&&isObject2(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined$1,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}__name(customDefaultsMerge,"customDefaultsMerge");function customOmitClone(value){return isPlainObject2(value)?undefined$1:value}__name(customOmitClone,"customOmitClone");function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result2=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined$1;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined$1){if(compared)continue;result2=!1;break}if(seen){if(!arraySome(other,function(othValue2,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue2||equalFunc(arrValue,othValue2,bitmask,customizer,stack)))return seen.push(othIndex)})){result2=!1;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result2=!1;break}}return stack.delete(array),stack.delete(other),result2}__name(equalArrays,"equalArrays");function equalByTag(object,other,tag2,bitmask,customizer,equalFunc,stack){switch(tag2){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array2(object),new Uint8Array2(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result2=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result2;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}__name(equalByTag,"equalByTag");function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty2.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;var result2=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined$1?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result2=!1;break}skipCtor||(skipCtor=key=="constructor")}if(result2&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)&&(result2=!1)}return stack.delete(object),stack.delete(other),result2}__name(equalObjects,"equalObjects");function flatRest(func){return setToString(overRest(func,undefined$1,flatten2),func+"")}__name(flatRest,"flatRest");function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}__name(getAllKeys,"getAllKeys");function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}__name(getAllKeysIn,"getAllKeysIn");var getData=metaMap?function(func){return metaMap.get(func)}:noop2;function getFuncName(func){for(var result2=func.name+"",array=realNames[result2],length=hasOwnProperty2.call(realNames,result2)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func)return data.name}return result2}__name(getFuncName,"getFuncName");function getHolder(func){var object=hasOwnProperty2.call(lodash2,"placeholder")?lodash2:func;return object.placeholder}__name(getHolder,"getHolder");function getIteratee(){var result2=lodash2.iteratee||iteratee;return result2=result2===iteratee?baseIteratee:result2,arguments.length?result2(arguments[0],arguments[1]):result2}__name(getIteratee,"getIteratee");function getMapData(map2,key){var data=map2.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}__name(getMapData,"getMapData");function getMatchData(object){for(var result2=keys(object),length=result2.length;length--;){var key=result2[length],value=object[key];result2[length]=[key,value,isStrictComparable(value)]}return result2}__name(getMatchData,"getMatchData");function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined$1}__name(getNative,"getNative");function getRawTag(value){var isOwn=hasOwnProperty2.call(value,symToStringTag),tag2=value[symToStringTag];try{value[symToStringTag]=undefined$1;var unmasked=!0}catch{}var result2=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag2:delete value[symToStringTag]),result2}__name(getRawTag,"getRawTag");var getSymbols=nativeGetSymbols?function(object){return object==null?[]:(object=Object2(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result2=[];object;)arrayPush(result2,getSymbols(object)),object=getPrototype(object);return result2}:stubArray,getTag=baseGetTag;(DataView2&&getTag(new DataView2(new ArrayBuffer(1)))!=dataViewTag||Map2&&getTag(new Map2)!=mapTag||Promise2&&getTag(Promise2.resolve())!=promiseTag||Set2&&getTag(new Set2)!=setTag||WeakMap2&&getTag(new WeakMap2)!=weakMapTag)&&(getTag=__name(function(value){var result2=baseGetTag(value),Ctor=result2==objectTag?value.constructor:undefined$1,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result2},"getTag"));function getView(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){var data=transforms[index],size3=data.size;switch(data.type){case"drop":start+=size3;break;case"dropRight":end-=size3;break;case"take":end=nativeMin(end,start+size3);break;case"takeRight":start=nativeMax(start,end-size3);break}}return{start,end}}__name(getView,"getView");function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}__name(getWrapDetails,"getWrapDetails");function hasPath(object,path,hasFunc){path=castPath(path,object);for(var index=-1,length=path.length,result2=!1;++index<length;){var key=toKey(path[index]);if(!(result2=object!=null&&hasFunc(object,key)))break;object=object[key]}return result2||++index!=length?result2:(length=object==null?0:object.length,!!length&&isLength(length)&&isIndex2(key,length)&&(isArray2(object)||isArguments(object)))}__name(hasPath,"hasPath");function initCloneArray(array){var length=array.length,result2=new array.constructor(length);return length&&typeof array[0]=="string"&&hasOwnProperty2.call(array,"index")&&(result2.index=array.index,result2.input=array.input),result2}__name(initCloneArray,"initCloneArray");function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}__name(initCloneObject,"initCloneObject");function initCloneByTag(object,tag2,isDeep){var Ctor=object.constructor;switch(tag2){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor;case symbolTag:return cloneSymbol(object)}}__name(initCloneByTag,"initCloneByTag");function insertWrapDetails(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,`{
/* [wrapped with `+details+`] */
`)}__name(insertWrapDetails,"insertWrapDetails");function isFlattenable(value){return isArray2(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}__name(isFlattenable,"isFlattenable");function isIndex2(value,length){var type=typeof value;return length=length??MAX_SAFE_INTEGER2,!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}__name(isIndex2,"isIndex");function isIterateeCall(value,index,object){if(!isObject2(object))return!1;var type=typeof index;return(type=="number"?isArrayLike(object)&&isIndex2(index,object.length):type=="string"&&index in object)?eq(object[index],value):!1}__name(isIterateeCall,"isIterateeCall");function isKey(value,object){if(isArray2(value))return!1;var type=typeof value;return type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)?!0:reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object2(object)}__name(isKey,"isKey");function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}__name(isKeyable,"isKeyable");function isLaziable(func){var funcName=getFuncName(func),other=lodash2[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}__name(isLaziable,"isLaziable");function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}__name(isMasked,"isMasked");var isMaskable=coreJsData?isFunction2:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}__name(isPrototype,"isPrototype");function isStrictComparable(value){return value===value&&!isObject2(value)}__name(isStrictComparable,"isStrictComparable");function matchesStrictComparable(key,srcValue){return function(object){return object==null?!1:object[key]===srcValue&&(srcValue!==undefined$1||key in Object2(object))}}__name(matchesStrictComparable,"matchesStrictComparable");function memoizeCapped(func){var result2=memoize(func,function(key){return cache2.size===MAX_MEMOIZE_SIZE&&cache2.clear(),key}),cache2=result2.cache;return result2}__name(memoizeCapped,"memoizeCapped");function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG),isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo))return data;srcBitmask&WRAP_BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),value=source[7],value&&(data[7]=value),srcBitmask&WRAP_ARY_FLAG&&(data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])),data[9]==null&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}__name(mergeData,"mergeData");function nativeKeysIn(object){var result2=[];if(object!=null)for(var key in Object2(object))result2.push(key);return result2}__name(nativeKeysIn,"nativeKeysIn");function objectToString(value){return nativeObjectToString.call(value)}__name(objectToString,"objectToString");function overRest(func,start,transform2){return start=nativeMax(start===undefined$1?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array2(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array2(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform2(array),apply(func,this,otherArgs)}}__name(overRest,"overRest");function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}__name(parent,"parent");function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex2(index,arrLength)?oldArray[index]:undefined$1}return array}__name(reorder,"reorder");function safeGet(object,key){if(!(key==="constructor"&&typeof object[key]=="function")&&key!="__proto__")return object[key]}__name(safeGet,"safeGet");var setData=shortOut(baseSetData),setTimeout2=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}__name(setWrapToString,"setWrapToString");function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(undefined$1,arguments)}}__name(shortOut,"shortOut");function shuffleSelf(array,size3){var index=-1,length=array.length,lastIndex=length-1;for(size3=size3===undefined$1?length:size3;++index<size3;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size3,array}__name(shuffleSelf,"shuffleSelf");var stringToPath=memoizeCapped(function(string){var result2=[];return string.charCodeAt(0)===46&&result2.push(""),string.replace(rePropName,function(match,number2,quote,subString){result2.push(quote?subString.replace(reEscapeChar,"$1"):number2||match)}),result2});function toKey(value){if(typeof value=="string"||isSymbol(value))return value;var result2=value+"";return result2=="0"&&1/value==-1/0?"-0":result2}__name(toKey,"toKey");function toSource(func){if(func!=null){try{return funcToString.call(func)}catch{}try{return func+""}catch{}}return""}__name(toSource,"toSource");function updateWrapDetails(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}__name(updateWrapDetails,"updateWrapDetails");function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result2=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result2.__actions__=copyArray(wrapper.__actions__),result2.__index__=wrapper.__index__,result2.__values__=wrapper.__values__,result2}__name(wrapperClone,"wrapperClone");function chunk(array,size3,guard){(guard?isIterateeCall(array,size3,guard):size3===undefined$1)?size3=1:size3=nativeMax(toInteger(size3),0);var length=array==null?0:array.length;if(!length||size3<1)return[];for(var index=0,resIndex=0,result2=Array2(nativeCeil(length/size3));index<length;)result2[resIndex++]=baseSlice(array,index,index+=size3);return result2}__name(chunk,"chunk");function compact(array){for(var index=-1,length=array==null?0:array.length,resIndex=0,result2=[];++index<length;){var value=array[index];value&&(result2[resIndex++]=value)}return result2}__name(compact,"compact");function concat2(){var length=arguments.length;if(!length)return[];for(var args=Array2(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray2(array)?copyArray(array):[array],baseFlatten(args,1))}__name(concat2,"concat");var difference=baseRest(function(array,values2){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values2,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values2){var iteratee2=last2(values2);return isArrayLikeObject(iteratee2)&&(iteratee2=undefined$1),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values2,1,isArrayLikeObject,!0),getIteratee(iteratee2,2)):[]}),differenceWith=baseRest(function(array,values2){var comparator=last2(values2);return isArrayLikeObject(comparator)&&(comparator=undefined$1),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values2,1,isArrayLikeObject,!0),undefined$1,comparator):[]});function drop(array,n3,guard){var length=array==null?0:array.length;return length?(n3=guard||n3===undefined$1?1:toInteger(n3),baseSlice(array,n3<0?0:n3,length)):[]}__name(drop,"drop");function dropRight(array,n3,guard){var length=array==null?0:array.length;return length?(n3=guard||n3===undefined$1?1:toInteger(n3),n3=length-n3,baseSlice(array,0,n3<0?0:n3)):[]}__name(dropRight,"dropRight");function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]}__name(dropRightWhile,"dropRightWhile");function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]}__name(dropWhile,"dropWhile");function fill(array,value,start,end){var length=array==null?0:array.length;return length?(start&&typeof start!="number"&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}__name(fill,"fill");function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=fromIndex==null?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}__name(findIndex,"findIndex");function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined$1&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}__name(findLastIndex,"findLastIndex");function flatten2(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}__name(flatten2,"flatten");function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[]}__name(flattenDeep,"flattenDeep");function flattenDepth(array,depth){var length=array==null?0:array.length;return length?(depth=depth===undefined$1?1:toInteger(depth),baseFlatten(array,depth)):[]}__name(flattenDepth,"flattenDepth");function fromPairs(pairs){for(var index=-1,length=pairs==null?0:pairs.length,result2={};++index<length;){var pair=pairs[index];result2[pair[0]]=pair[1]}return result2}__name(fromPairs,"fromPairs");function head(array){return array&&array.length?array[0]:undefined$1}__name(head,"head");function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=fromIndex==null?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)}__name(indexOf,"indexOf");function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}__name(initial,"initial");var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee2=last2(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee2===last2(mapped)?iteratee2=undefined$1:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee2,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last2(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return comparator=typeof comparator=="function"?comparator:undefined$1,comparator&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined$1,comparator):[]});function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}__name(join,"join");function last2(array){var length=array==null?0:array.length;return length?array[length-1]:undefined$1}__name(last2,"last");function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined$1&&(index=toInteger(fromIndex),index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)),value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)}__name(lastIndexOf,"lastIndexOf");function nth(array,n3){return array&&array.length?baseNth(array,toInteger(n3)):undefined$1}__name(nth,"nth");var pull=baseRest(pullAll);function pullAll(array,values2){return array&&array.length&&values2&&values2.length?basePullAll(array,values2):array}__name(pullAll,"pullAll");function pullAllBy(array,values2,iteratee2){return array&&array.length&&values2&&values2.length?basePullAll(array,values2,getIteratee(iteratee2,2)):array}__name(pullAllBy,"pullAllBy");function pullAllWith(array,values2,comparator){return array&&array.length&&values2&&values2.length?basePullAll(array,values2,undefined$1,comparator):array}__name(pullAllWith,"pullAllWith");var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result2=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex2(index,length)?+index:index}).sort(compareAscending)),result2});function remove(array,predicate){var result2=[];if(!(array&&array.length))return result2;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result2.push(value),indexes.push(index))}return basePullAt(array,indexes),result2}__name(remove,"remove");function reverse(array){return array==null?array:nativeReverse.call(array)}__name(reverse,"reverse");function slice(array,start,end){var length=array==null?0:array.length;return length?(end&&typeof end!="number"&&isIterateeCall(array,start,end)?(start=0,end=length):(start=start==null?0:toInteger(start),end=end===undefined$1?length:toInteger(end)),baseSlice(array,start,end)):[]}__name(slice,"slice");function sortedIndex(array,value){return baseSortedIndex(array,value)}__name(sortedIndex,"sortedIndex");function sortedIndexBy(array,value,iteratee2){return baseSortedIndexBy(array,value,getIteratee(iteratee2,2))}__name(sortedIndexBy,"sortedIndexBy");function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1}__name(sortedIndexOf,"sortedIndexOf");function sortedLastIndex(array,value){return baseSortedIndex(array,value,!0)}__name(sortedLastIndex,"sortedLastIndex");function sortedLastIndexBy(array,value,iteratee2){return baseSortedIndexBy(array,value,getIteratee(iteratee2,2),!0)}__name(sortedLastIndexBy,"sortedLastIndexBy");function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1}__name(sortedLastIndexOf,"sortedLastIndexOf");function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}__name(sortedUniq,"sortedUniq");function sortedUniqBy(array,iteratee2){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee2,2)):[]}__name(sortedUniqBy,"sortedUniqBy");function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}__name(tail,"tail");function take(array,n3,guard){return array&&array.length?(n3=guard||n3===undefined$1?1:toInteger(n3),baseSlice(array,0,n3<0?0:n3)):[]}__name(take,"take");function takeRight(array,n3,guard){var length=array==null?0:array.length;return length?(n3=guard||n3===undefined$1?1:toInteger(n3),n3=length-n3,baseSlice(array,n3<0?0:n3,length)):[]}__name(takeRight,"takeRight");function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]}__name(takeRightWhile,"takeRightWhile");function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}__name(takeWhile,"takeWhile");var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee2=last2(arrays);return isArrayLikeObject(iteratee2)&&(iteratee2=undefined$1),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee2,2))}),unionWith=baseRest(function(arrays){var comparator=last2(arrays);return comparator=typeof comparator=="function"?comparator:undefined$1,baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined$1,comparator)});function uniq(array){return array&&array.length?baseUniq(array):[]}__name(uniq,"uniq");function uniqBy(array,iteratee2){return array&&array.length?baseUniq(array,getIteratee(iteratee2,2)):[]}__name(uniqBy,"uniqBy");function uniqWith(array,comparator){return comparator=typeof comparator=="function"?comparator:undefined$1,array&&array.length?baseUniq(array,undefined$1,comparator):[]}__name(uniqWith,"uniqWith");function unzip(array){if(!(array&&array.length))return[];var length=0;return array=arrayFilter(array,function(group){if(isArrayLikeObject(group))return length=nativeMax(group.length,length),!0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}__name(unzip,"unzip");function unzipWith(array,iteratee2){if(!(array&&array.length))return[];var result2=unzip(array);return iteratee2==null?result2:arrayMap(result2,function(group){return apply(iteratee2,undefined$1,group)})}__name(unzipWith,"unzipWith");var without=baseRest(function(array,values2){return isArrayLikeObject(array)?baseDifference(array,values2):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee2=last2(arrays);return isArrayLikeObject(iteratee2)&&(iteratee2=undefined$1),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee2,2))}),xorWith=baseRest(function(arrays){var comparator=last2(arrays);return comparator=typeof comparator=="function"?comparator:undefined$1,baseXor(arrayFilter(arrays,isArrayLikeObject),undefined$1,comparator)}),zip=baseRest(unzip);function zipObject(props,values2){return baseZipObject(props||[],values2||[],assignValue)}__name(zipObject,"zipObject");function zipObjectDeep(props,values2){return baseZipObject(props||[],values2||[],baseSet)}__name(zipObjectDeep,"zipObjectDeep");var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee2=length>1?arrays[length-1]:undefined$1;return iteratee2=typeof iteratee2=="function"?(arrays.pop(),iteratee2):undefined$1,unzipWith(arrays,iteratee2)});function chain(value){var result2=lodash2(value);return result2.__chain__=!0,result2}__name(chain,"chain");function tap(value,interceptor){return interceptor(value),value}__name(tap,"tap");function thru(value,interceptor){return interceptor(value)}__name(thru,"thru");var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=__name(function(object){return baseAt(object,paths)},"interceptor");return length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex2(start)?this.thru(interceptor):(value=value.slice(start,+start+(length?1:0)),value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined$1}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined$1),array}))});function wrapperChain(){return chain(this)}__name(wrapperChain,"wrapperChain");function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}__name(wrapperCommit,"wrapperCommit");function wrapperNext(){this.__values__===undefined$1&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length,value=done?undefined$1:this.__values__[this.__index__++];return{done,value}}__name(wrapperNext,"wrapperNext");function wrapperToIterator(){return this}__name(wrapperToIterator,"wrapperToIterator");function wrapperPlant(value){for(var result2,parent2=this;parent2 instanceof baseLodash;){var clone3=wrapperClone(parent2);clone3.__index__=0,clone3.__values__=undefined$1,result2?previous.__wrapped__=clone3:result2=clone3;var previous=clone3;parent2=parent2.__wrapped__}return previous.__wrapped__=value,result2}__name(wrapperPlant,"wrapperPlant");function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined$1}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}__name(wrapperReverse,"wrapperReverse");function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}__name(wrapperValue,"wrapperValue");var countBy=createAggregator(function(result2,value,key){hasOwnProperty2.call(result2,key)?++result2[key]:baseAssignValue(result2,key,1)});function every(collection,predicate,guard){var func=isArray2(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined$1),func(collection,getIteratee(predicate,3))}__name(every,"every");function filter(collection,predicate){var func=isArray2(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}__name(filter,"filter");var find=createFind(findIndex),findLast=createFind(findLastIndex);function flatMap(collection,iteratee2){return baseFlatten(map(collection,iteratee2),1)}__name(flatMap,"flatMap");function flatMapDeep(collection,iteratee2){return baseFlatten(map(collection,iteratee2),INFINITY)}__name(flatMapDeep,"flatMapDeep");function flatMapDepth(collection,iteratee2,depth){return depth=depth===undefined$1?1:toInteger(depth),baseFlatten(map(collection,iteratee2),depth)}__name(flatMapDepth,"flatMapDepth");function forEach(collection,iteratee2){var func=isArray2(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee2,3))}__name(forEach,"forEach");function forEachRight(collection,iteratee2){var func=isArray2(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee2,3))}__name(forEachRight,"forEachRight");var groupBy=createAggregator(function(result2,value,key){hasOwnProperty2.call(result2,key)?result2[key].push(value):baseAssignValue(result2,key,[value])});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString2(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}__name(includes,"includes");var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result2=isArrayLike(collection)?Array2(collection.length):[];return baseEach(collection,function(value){result2[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result2}),keyBy=createAggregator(function(result2,value,key){baseAssignValue(result2,key,value)});function map(collection,iteratee2){var func=isArray2(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee2,3))}__name(map,"map");function orderBy(collection,iteratees,orders,guard){return collection==null?[]:(isArray2(iteratees)||(iteratees=iteratees==null?[]:[iteratees]),orders=guard?undefined$1:orders,isArray2(orders)||(orders=orders==null?[]:[orders]),baseOrderBy(collection,iteratees,orders))}__name(orderBy,"orderBy");var partition=createAggregator(function(result2,value,key){result2[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee2,accumulator){var func=isArray2(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee2,4),accumulator,initAccum,baseEach)}__name(reduce,"reduce");function reduceRight(collection,iteratee2,accumulator){var func=isArray2(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee2,4),accumulator,initAccum,baseEachRight)}__name(reduceRight,"reduceRight");function reject(collection,predicate){var func=isArray2(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}__name(reject,"reject");function sample(collection){var func=isArray2(collection)?arraySample:baseSample;return func(collection)}__name(sample,"sample");function sampleSize(collection,n3,guard){(guard?isIterateeCall(collection,n3,guard):n3===undefined$1)?n3=1:n3=toInteger(n3);var func=isArray2(collection)?arraySampleSize:baseSampleSize;return func(collection,n3)}__name(sampleSize,"sampleSize");function shuffle(collection){var func=isArray2(collection)?arrayShuffle:baseShuffle;return func(collection)}__name(shuffle,"shuffle");function size2(collection){if(collection==null)return 0;if(isArrayLike(collection))return isString2(collection)?stringSize(collection):collection.length;var tag2=getTag(collection);return tag2==mapTag||tag2==setTag?collection.size:baseKeys(collection).length}__name(size2,"size");function some(collection,predicate,guard){var func=isArray2(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined$1),func(collection,getIteratee(predicate,3))}__name(some,"some");var sortBy=baseRest(function(collection,iteratees){if(collection==null)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){return root.Date.now()};function after(n3,func){if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);return n3=toInteger(n3),function(){if(--n3<1)return func.apply(this,arguments)}}__name(after,"after");function ary(func,n3,guard){return n3=guard?undefined$1:n3,n3=func&&n3==null?func.length:n3,createWrap(func,WRAP_ARY_FLAG,undefined$1,undefined$1,undefined$1,undefined$1,n3)}__name(ary,"ary");function before(n3,func){var result2;if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);return n3=toInteger(n3),function(){return--n3>0&&(result2=func.apply(this,arguments)),n3<=1&&(func=undefined$1),result2}}__name(before,"before");var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined$1:arity;var result2=createWrap(func,WRAP_CURRY_FLAG,undefined$1,undefined$1,undefined$1,undefined$1,undefined$1,arity);return result2.placeholder=curry.placeholder,result2}__name(curry,"curry");function curryRight(func,arity,guard){arity=guard?undefined$1:arity;var result2=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined$1,undefined$1,undefined$1,undefined$1,undefined$1,arity);return result2.placeholder=curryRight.placeholder,result2}__name(curryRight,"curryRight");function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result2,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);wait=toNumber(wait)||0,isObject2(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined$1,lastInvokeTime=time,result2=func.apply(thisArg,args),result2}__name(invokeFunc,"invokeFunc");function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout2(timerExpired,wait),leading?invokeFunc(time):result2}__name(leadingEdge,"leadingEdge");function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}__name(remainingWait,"remainingWait");function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined$1||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}__name(shouldInvoke,"shouldInvoke");function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout2(timerExpired,remainingWait(time))}__name(timerExpired,"timerExpired");function trailingEdge(time){return timerId=undefined$1,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined$1,result2)}__name(trailingEdge,"trailingEdge");function cancel(){timerId!==undefined$1&&clearTimeout2(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined$1}__name(cancel,"cancel");function flush(){return timerId===undefined$1?result2:trailingEdge(now())}__name(flush,"flush");function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined$1)return leadingEdge(lastCallTime);if(maxing)return clearTimeout2(timerId),timerId=setTimeout2(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined$1&&(timerId=setTimeout2(timerExpired,wait)),result2}return __name(debounced,"debounced"),debounced.cancel=cancel,debounced.flush=flush,debounced}__name(debounce,"debounce");var defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function flip2(func){return createWrap(func,WRAP_FLIP_FLAG)}__name(flip2,"flip");function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function")throw new TypeError2(FUNC_ERROR_TEXT);var memoized=__name(function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache2=memoized.cache;if(cache2.has(key))return cache2.get(key);var result2=func.apply(this,args);return memoized.cache=cache2.set(key,result2)||cache2,result2},"memoized");return memoized.cache=new(memoize.Cache||MapCache),memoized}__name(memoize,"memoize"),memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!="function")throw new TypeError2(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}__name(negate,"negate");function once(func){return before(2,func)}__name(once,"once");var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray2(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined$1,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined$1,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined$1,undefined$1,undefined$1,indexes)});function rest(func,start){if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);return start=start===undefined$1?start:toInteger(start),baseRest(func,start)}__name(rest,"rest");function spread(func,start){if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);return start=start==null?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})}__name(spread,"spread");function throttle(func,wait,options){var leading=!0,trailing=!0;if(typeof func!="function")throw new TypeError2(FUNC_ERROR_TEXT);return isObject2(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading,maxWait:wait,trailing})}__name(throttle,"throttle");function unary(func){return ary(func,1)}__name(unary,"unary");function wrap(value,wrapper){return partial(castFunction(wrapper),value)}__name(wrap,"wrap");function castArray(){if(!arguments.length)return[];var value=arguments[0];return isArray2(value)?value:[value]}__name(castArray,"castArray");function clone2(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}__name(clone2,"clone");function cloneWith(value,customizer){return customizer=typeof customizer=="function"?customizer:undefined$1,baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}__name(cloneWith,"cloneWith");function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}__name(cloneDeep,"cloneDeep");function cloneDeepWith(value,customizer){return customizer=typeof customizer=="function"?customizer:undefined$1,baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}__name(cloneDeepWith,"cloneDeepWith");function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}__name(conformsTo,"conformsTo");function eq(value,other){return value===other||value!==value&&other!==other}__name(eq,"eq");var gt2=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return value>=other}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty2.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray2=Array2.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction2(value)}__name(isArrayLike,"isArrayLike");function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}__name(isArrayLikeObject,"isArrayLikeObject");function isBoolean2(value){return value===!0||value===!1||isObjectLike(value)&&baseGetTag(value)==boolTag}__name(isBoolean2,"isBoolean");var isBuffer=nativeIsBuffer||stubFalse,isDate2=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement2(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject2(value)}__name(isElement2,"isElement");function isEmpty(value){if(value==null)return!0;if(isArrayLike(value)&&(isArray2(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag2=getTag(value);if(tag2==mapTag||tag2==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty2.call(value,key))return!1;return!0}__name(isEmpty,"isEmpty");function isEqual(value,other){return baseIsEqual(value,other)}__name(isEqual,"isEqual");function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;var result2=customizer?customizer(value,other):undefined$1;return result2===undefined$1?baseIsEqual(value,other,undefined$1,customizer):!!result2}__name(isEqualWith,"isEqualWith");function isError(value){if(!isObjectLike(value))return!1;var tag2=baseGetTag(value);return tag2==errorTag||tag2==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject2(value)}__name(isError,"isError");function isFinite2(value){return typeof value=="number"&&nativeIsFinite(value)}__name(isFinite2,"isFinite");function isFunction2(value){if(!isObject2(value))return!1;var tag2=baseGetTag(value);return tag2==funcTag||tag2==genTag||tag2==asyncTag||tag2==proxyTag}__name(isFunction2,"isFunction");function isInteger2(value){return typeof value=="number"&&value==toInteger(value)}__name(isInteger2,"isInteger");function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER2}__name(isLength,"isLength");function isObject2(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}__name(isObject2,"isObject");function isObjectLike(value){return value!=null&&typeof value=="object"}__name(isObjectLike,"isObjectLike");var isMap2=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}__name(isMatch,"isMatch");function isMatchWith(object,source,customizer){return customizer=typeof customizer=="function"?customizer:undefined$1,baseIsMatch(object,source,getMatchData(source),customizer)}__name(isMatchWith,"isMatchWith");function isNaN2(value){return isNumber2(value)&&value!=+value}__name(isNaN2,"isNaN");function isNative(value){if(isMaskable(value))throw new Error2(CORE_ERROR_TEXT);return baseIsNative(value)}__name(isNative,"isNative");function isNull2(value){return value===null}__name(isNull2,"isNull");function isNil(value){return value==null}__name(isNil,"isNil");function isNumber2(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag}__name(isNumber2,"isNumber");function isPlainObject2(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(proto===null)return!0;var Ctor=hasOwnProperty2.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}__name(isPlainObject2,"isPlainObject");var isRegExp2=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger2(value)&&value>=-9007199254740991&&value<=MAX_SAFE_INTEGER2}__name(isSafeInteger,"isSafeInteger");var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString2(value){return typeof value=="string"||!isArray2(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}__name(isString2,"isString");function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}__name(isSymbol,"isSymbol");var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined2(value){return value===undefined$1}__name(isUndefined2,"isUndefined");function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}__name(isWeakMap,"isWeakMap");function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}__name(isWeakSet,"isWeakSet");var lt2=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return isString2(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return iteratorToArray(value[symIterator]());var tag2=getTag(value),func=tag2==mapTag?mapToArray:tag2==setTag?setToArray:values;return func(value)}__name(toArray,"toArray");function toFinite(value){if(!value)return value===0?value:0;if(value=toNumber(value),value===INFINITY||value===-1/0){var sign2=value<0?-1:1;return sign2*MAX_INTEGER}return value===value?value:0}__name(toFinite,"toFinite");function toInteger(value){var result2=toFinite(value),remainder=result2%1;return result2===result2?remainder?result2-remainder:result2:0}__name(toInteger,"toInteger");function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}__name(toLength,"toLength");function toNumber(value){if(typeof value=="number")return value;if(isSymbol(value))return NAN;if(isObject2(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject2(other)?other+"":other}if(typeof value!="string")return value===0?value:+value;value=baseTrim(value);var isBinary2=reIsBinary.test(value);return isBinary2||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary2?2:8):reIsBadHex.test(value)?NAN:+value}__name(toNumber,"toNumber");function toPlainObject(value){return copyObject(value,keysIn(value))}__name(toPlainObject,"toPlainObject");function toSafeInteger(value){return value?baseClamp(toInteger(value),-9007199254740991,MAX_SAFE_INTEGER2):value===0?value:0}__name(toSafeInteger,"toSafeInteger");function toString(value){return value==null?"":baseToString(value)}__name(toString,"toString");var assign2=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source)hasOwnProperty2.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at2=flatRest(baseAt);function create2(prototype,properties){var result2=baseCreate(prototype);return properties==null?result2:baseAssign(result2,properties)}__name(create2,"create");var defaults=baseRest(function(object,sources){object=Object2(object);var index=-1,length=sources.length,guard=length>2?sources[2]:undefined$1;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(length=1);++index<length;)for(var source=sources[index],props=keysIn(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value=object[key];(value===undefined$1||eq(value,objectProto[key])&&!hasOwnProperty2.call(object,key))&&(object[key]=source[key])}return object}),defaultsDeep=baseRest(function(args){return args.push(undefined$1,customDefaultsMerge),apply(mergeWith,undefined$1,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}__name(findKey,"findKey");function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}__name(findLastKey,"findLastKey");function forIn(object,iteratee2){return object==null?object:baseFor(object,getIteratee(iteratee2,3),keysIn)}__name(forIn,"forIn");function forInRight(object,iteratee2){return object==null?object:baseForRight(object,getIteratee(iteratee2,3),keysIn)}__name(forInRight,"forInRight");function forOwn(object,iteratee2){return object&&baseForOwn(object,getIteratee(iteratee2,3))}__name(forOwn,"forOwn");function forOwnRight(object,iteratee2){return object&&baseForOwnRight(object,getIteratee(iteratee2,3))}__name(forOwnRight,"forOwnRight");function functions(object){return object==null?[]:baseFunctions(object,keys(object))}__name(functions,"functions");function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}__name(functionsIn,"functionsIn");function get2(object,path,defaultValue){var result2=object==null?undefined$1:baseGet(object,path);return result2===undefined$1?defaultValue:result2}__name(get2,"get");function has(object,path){return object!=null&&hasPath(object,path,baseHas)}__name(has,"has");function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}__name(hasIn,"hasIn");var invert=createInverter(function(result2,value,key){value!=null&&typeof value.toString!="function"&&(value=nativeObjectToString.call(value)),result2[value]=key},constant(identity2)),invertBy=createInverter(function(result2,value,key){value!=null&&typeof value.toString!="function"&&(value=nativeObjectToString.call(value)),hasOwnProperty2.call(result2,value)?result2[value].push(key):result2[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}__name(keys,"keys");function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}__name(keysIn,"keysIn");function mapKeys(object,iteratee2){var result2={};return iteratee2=getIteratee(iteratee2,3),baseForOwn(object,function(value,key,object2){baseAssignValue(result2,iteratee2(value,key,object2),value)}),result2}__name(mapKeys,"mapKeys");function mapValues(object,iteratee2){var result2={};return iteratee2=getIteratee(iteratee2,3),baseForOwn(object,function(value,key,object2){baseAssignValue(result2,key,iteratee2(value,key,object2))}),result2}__name(mapValues,"mapValues");var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result2={};if(object==null)return result2;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path}),copyObject(object,getAllKeysIn(object),result2),isDeep&&(result2=baseClone(result2,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var length=paths.length;length--;)baseUnset(result2,paths[length]);return result2});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}__name(omitBy,"omitBy");var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});function pickBy(object,predicate){if(object==null)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}__name(pickBy,"pickBy");function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;for(length||(length=1,object=undefined$1);++index<length;){var value=object==null?undefined$1:object[toKey(path[index])];value===undefined$1&&(index=length,value=defaultValue),object=isFunction2(value)?value.call(object):value}return object}__name(result,"result");function set(object,path,value){return object==null?object:baseSet(object,path,value)}__name(set,"set");function setWith(object,path,value,customizer){return customizer=typeof customizer=="function"?customizer:undefined$1,object==null?object:baseSet(object,path,value,customizer)}__name(setWith,"setWith");var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function transform(object,iteratee2,accumulator){var isArr=isArray2(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);if(iteratee2=getIteratee(iteratee2,4),accumulator==null){var Ctor=object&&object.constructor;isArrLike?accumulator=isArr?new Ctor:[]:isObject2(object)?accumulator=isFunction2(Ctor)?baseCreate(getPrototype(object)):{}:accumulator={}}return(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object2){return iteratee2(accumulator,value,index,object2)}),accumulator}__name(transform,"transform");function unset(object,path){return object==null?!0:baseUnset(object,path)}__name(unset,"unset");function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater))}__name(update,"update");function updateWith(object,path,updater,customizer){return customizer=typeof customizer=="function"?customizer:undefined$1,object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}__name(updateWith,"updateWith");function values(object){return object==null?[]:baseValues(object,keys(object))}__name(values,"values");function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}__name(valuesIn,"valuesIn");function clamp2(number2,lower,upper){return upper===undefined$1&&(upper=lower,lower=undefined$1),upper!==undefined$1&&(upper=toNumber(upper),upper=upper===upper?upper:0),lower!==undefined$1&&(lower=toNumber(lower),lower=lower===lower?lower:0),baseClamp(toNumber(number2),lower,upper)}__name(clamp2,"clamp");function inRange(number2,start,end){return start=toFinite(start),end===undefined$1?(end=start,start=0):end=toFinite(end),number2=toNumber(number2),baseInRange(number2,start,end)}__name(inRange,"inRange");function random2(lower,upper,floating){if(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined$1),floating===undefined$1&&(typeof upper=="boolean"?(floating=upper,upper=undefined$1):typeof lower=="boolean"&&(floating=lower,lower=undefined$1)),lower===undefined$1&&upper===undefined$1?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined$1?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}__name(random2,"random");var camelCase=createCompounder(function(result2,word,index){return word=word.toLowerCase(),result2+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}__name(capitalize,"capitalize");function deburr(string){return string=toString(string),string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}__name(deburr,"deburr");function endsWith(string,target,position){string=toString(string),target=baseToString(target);var length=string.length;position=position===undefined$1?length:baseClamp(toInteger(position),0,length);var end=position;return position-=target.length,position>=0&&string.slice(position,end)==target}__name(endsWith,"endsWith");function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}__name(escape,"escape");function escapeRegExp(string){return string=toString(string),string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}__name(escapeRegExp,"escapeRegExp");var kebabCase=createCompounder(function(result2,word,index){return result2+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result2,word,index){return result2+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}__name(pad,"pad");function padEnd(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}__name(padEnd,"padEnd");function padStart(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}__name(padStart,"padStart");function parseInt2(string,radix,guard){return guard||radix==null?radix=0:radix&&(radix=+radix),nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}__name(parseInt2,"parseInt");function repeat2(string,n3,guard){return(guard?isIterateeCall(string,n3,guard):n3===undefined$1)?n3=1:n3=toInteger(n3),baseRepeat(toString(string),n3)}__name(repeat2,"repeat");function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}__name(replace,"replace");var snakeCase=createCompounder(function(result2,word,index){return result2+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){return limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined$1),limit=limit===undefined$1?MAX_ARRAY_LENGTH:limit>>>0,limit?(string=toString(string),string&&(typeof separator=="string"||separator!=null&&!isRegExp2(separator))&&(separator=baseToString(separator),!separator&&hasUnicode(string))?castSlice(stringToArray(string),0,limit):string.split(separator,limit)):[]}__name(split,"split");var startCase=createCompounder(function(result2,word,index){return result2+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){return string=toString(string),position=position==null?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target}__name(startsWith,"startsWith");function template(string,options,guard){var settings=lodash2.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined$1),string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp2((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+(hasOwnProperty2.call(options,"sourceURL")?(options.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+`
`;string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset2){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset2).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+=`' +
__e(`+escapeValue+`) +
'`),evaluateValue&&(isEvaluating=!0,source+=`';
`+evaluateValue+`;
__p += '`),interpolateValue&&(source+=`' +
((__t = (`+interpolateValue+`)) == null ? '' : __t) +
'`),index=offset2+match.length,match}),source+=`';
`;var variable=hasOwnProperty2.call(options,"variable")&&options.variable;if(!variable)source=`with (obj) {
`+source+`
}
`;else if(reForbiddenIdentifierChars.test(variable))throw new Error2(INVALID_TEMPL_VAR_ERROR_TEXT);source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+`) {
`+(variable?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+source+`return __p
}`;var result2=attempt(function(){return Function2(importsKeys,sourceURL+"return "+source).apply(undefined$1,importsValues)});if(result2.source=source,isError(result2))throw result2;return result2}__name(template,"template");function toLower(value){return toString(value).toLowerCase()}__name(toLower,"toLower");function toUpper(value){return toString(value).toUpperCase()}__name(toUpper,"toUpper");function trim(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined$1))return baseTrim(string);if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}__name(trim,"trim");function trimEnd(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined$1))return string.slice(0,trimmedEndIndex(string)+1);if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}__name(trimEnd,"trimEnd");function trimStart(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined$1))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}__name(trimStart,"trimStart");function truncate2(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject2(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(end<1)return omission;var result2=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined$1)return result2+omission;if(strSymbols&&(end+=result2.length-end),isRegExp2(separator)){if(string.slice(end).search(separator)){var match,substring=result2;for(separator.global||(separator=RegExp2(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result2=result2.slice(0,newEnd===undefined$1?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result2.lastIndexOf(separator);index>-1&&(result2=result2.slice(0,index))}return result2+omission}__name(truncate2,"truncate");function unescape(string){return string=toString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}__name(unescape,"unescape");var upperCase=createCompounder(function(result2,word,index){return result2+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),pattern=guard?undefined$1:pattern,pattern===undefined$1?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}__name(words,"words");var attempt=baseRest(function(func,args){try{return apply(func,undefined$1,args)}catch(e2){return isError(e2)?e2:new Error2(e2)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if(typeof pair[1]!="function")throw new TypeError2(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})}__name(cond,"cond");function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}__name(conforms,"conforms");function constant(value){return function(){return value}}__name(constant,"constant");function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}__name(defaultTo,"defaultTo");var flow=createFlow(),flowRight=createFlow(!0);function identity2(value){return value}__name(identity2,"identity");function iteratee(func){return baseIteratee(typeof func=="function"?func:baseClone(func,CLONE_DEEP_FLAG))}__name(iteratee,"iteratee");function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}__name(matches,"matches");function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}__name(matchesProperty,"matchesProperty");var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);options==null&&!(isObject2(source)&&(methodNames.length||!props.length))&&(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain2=!(isObject2(options)&&"chain"in options)||!!options.chain,isFunc=isFunction2(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain2||chainAll){var result2=object(this.__wrapped__),actions=result2.__actions__=copyArray(this.__actions__);return actions.push({func,args:arguments,thisArg:object}),result2.__chain__=chainAll,result2}return func.apply(object,arrayPush([this.value()],arguments))})}),object}__name(mixin,"mixin");function noConflict(){return root._===this&&(root._=oldDash),this}__name(noConflict,"noConflict");function noop2(){}__name(noop2,"noop");function nthArg(n3){return n3=toInteger(n3),baseRest(function(args){return baseNth(args,n3)})}__name(nthArg,"nthArg");var over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}__name(property,"property");function propertyOf(object){return function(path){return object==null?undefined$1:baseGet(object,path)}}__name(propertyOf,"propertyOf");var range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}__name(stubArray,"stubArray");function stubFalse(){return!1}__name(stubFalse,"stubFalse");function stubObject(){return{}}__name(stubObject,"stubObject");function stubString(){return""}__name(stubString,"stubString");function stubTrue(){return!0}__name(stubTrue,"stubTrue");function times(n3,iteratee2){if(n3=toInteger(n3),n3<1||n3>MAX_SAFE_INTEGER2)return[];var index=MAX_ARRAY_LENGTH,length=nativeMin(n3,MAX_ARRAY_LENGTH);iteratee2=getIteratee(iteratee2),n3-=MAX_ARRAY_LENGTH;for(var result2=baseTimes(length,iteratee2);++index<n3;)iteratee2(index);return result2}__name(times,"times");function toPath(value){return isArray2(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}__name(toPath,"toPath");function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}__name(uniqueId,"uniqueId");var add2=createMathOperation(function(augend,addend){return augend+addend},0),ceil2=createRound("ceil"),divide2=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor2=createRound("floor");function max2(array){return array&&array.length?baseExtremum(array,identity2,baseGt):undefined$1}__name(max2,"max");function maxBy(array,iteratee2){return array&&array.length?baseExtremum(array,getIteratee(iteratee2,2),baseGt):undefined$1}__name(maxBy,"maxBy");function mean(array){return baseMean(array,identity2)}__name(mean,"mean");function meanBy(array,iteratee2){return baseMean(array,getIteratee(iteratee2,2))}__name(meanBy,"meanBy");function min2(array){return array&&array.length?baseExtremum(array,identity2,baseLt):undefined$1}__name(min2,"min");function minBy(array,iteratee2){return array&&array.length?baseExtremum(array,getIteratee(iteratee2,2),baseLt):undefined$1}__name(minBy,"minBy");var multiply2=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round2=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum2(array){return array&&array.length?baseSum(array,identity2):0}__name(sum2,"sum");function sumBy(array,iteratee2){return array&&array.length?baseSum(array,getIteratee(iteratee2,2)):0}return __name(sumBy,"sumBy"),lodash2.after=after,lodash2.ary=ary,lodash2.assign=assign2,lodash2.assignIn=assignIn,lodash2.assignInWith=assignInWith,lodash2.assignWith=assignWith,lodash2.at=at2,lodash2.before=before,lodash2.bind=bind,lodash2.bindAll=bindAll,lodash2.bindKey=bindKey,lodash2.castArray=castArray,lodash2.chain=chain,lodash2.chunk=chunk,lodash2.compact=compact,lodash2.concat=concat2,lodash2.cond=cond,lodash2.conforms=conforms,lodash2.constant=constant,lodash2.countBy=countBy,lodash2.create=create2,lodash2.curry=curry,lodash2.curryRight=curryRight,lodash2.debounce=debounce,lodash2.defaults=defaults,lodash2.defaultsDeep=defaultsDeep,lodash2.defer=defer,lodash2.delay=delay,lodash2.difference=difference,lodash2.differenceBy=differenceBy,lodash2.differenceWith=differenceWith,lodash2.drop=drop,lodash2.dropRight=dropRight,lodash2.dropRightWhile=dropRightWhile,lodash2.dropWhile=dropWhile,lodash2.fill=fill,lodash2.filter=filter,lodash2.flatMap=flatMap,lodash2.flatMapDeep=flatMapDeep,lodash2.flatMapDepth=flatMapDepth,lodash2.flatten=flatten2,lodash2.flattenDeep=flattenDeep,lodash2.flattenDepth=flattenDepth,lodash2.flip=flip2,lodash2.flow=flow,lodash2.flowRight=flowRight,lodash2.fromPairs=fromPairs,lodash2.functions=functions,lodash2.functionsIn=functionsIn,lodash2.groupBy=groupBy,lodash2.initial=initial,lodash2.intersection=intersection,lodash2.intersectionBy=intersectionBy,lodash2.intersectionWith=intersectionWith,lodash2.invert=invert,lodash2.invertBy=invertBy,lodash2.invokeMap=invokeMap,lodash2.iteratee=iteratee,lodash2.keyBy=keyBy,lodash2.keys=keys,lodash2.keysIn=keysIn,lodash2.map=map,lodash2.mapKeys=mapKeys,lodash2.mapValues=mapValues,lodash2.matches=matches,lodash2.matchesProperty=matchesProperty,lodash2.memoize=memoize,lodash2.merge=merge,lodash2.mergeWith=mergeWith,lodash2.method=method,lodash2.methodOf=methodOf,lodash2.mixin=mixin,lodash2.negate=negate,lodash2.nthArg=nthArg,lodash2.omit=omit,lodash2.omitBy=omitBy,lodash2.once=once,lodash2.orderBy=orderBy,lodash2.over=over,lodash2.overArgs=overArgs,lodash2.overEvery=overEvery,lodash2.overSome=overSome,lodash2.partial=partial,lodash2.partialRight=partialRight,lodash2.partition=partition,lodash2.pick=pick,lodash2.pickBy=pickBy,lodash2.property=property,lodash2.propertyOf=propertyOf,lodash2.pull=pull,lodash2.pullAll=pullAll,lodash2.pullAllBy=pullAllBy,lodash2.pullAllWith=pullAllWith,lodash2.pullAt=pullAt,lodash2.range=range,lodash2.rangeRight=rangeRight,lodash2.rearg=rearg,lodash2.reject=reject,lodash2.remove=remove,lodash2.rest=rest,lodash2.reverse=reverse,lodash2.sampleSize=sampleSize,lodash2.set=set,lodash2.setWith=setWith,lodash2.shuffle=shuffle,lodash2.slice=slice,lodash2.sortBy=sortBy,lodash2.sortedUniq=sortedUniq,lodash2.sortedUniqBy=sortedUniqBy,lodash2.split=split,lodash2.spread=spread,lodash2.tail=tail,lodash2.take=take,lodash2.takeRight=takeRight,lodash2.takeRightWhile=takeRightWhile,lodash2.takeWhile=takeWhile,lodash2.tap=tap,lodash2.throttle=throttle,lodash2.thru=thru,lodash2.toArray=toArray,lodash2.toPairs=toPairs,lodash2.toPairsIn=toPairsIn,lodash2.toPath=toPath,lodash2.toPlainObject=toPlainObject,lodash2.transform=transform,lodash2.unary=unary,lodash2.union=union,lodash2.unionBy=unionBy,lodash2.unionWith=unionWith,lodash2.uniq=uniq,lodash2.uniqBy=uniqBy,lodash2.uniqWith=uniqWith,lodash2.unset=unset,lodash2.unzip=unzip,lodash2.unzipWith=unzipWith,lodash2.update=update,lodash2.updateWith=updateWith,lodash2.values=values,lodash2.valuesIn=valuesIn,lodash2.without=without,lodash2.words=words,lodash2.wrap=wrap,lodash2.xor=xor,lodash2.xorBy=xorBy,lodash2.xorWith=xorWith,lodash2.zip=zip,lodash2.zipObject=zipObject,lodash2.zipObjectDeep=zipObjectDeep,lodash2.zipWith=zipWith,lodash2.entries=toPairs,lodash2.entriesIn=toPairsIn,lodash2.extend=assignIn,lodash2.extendWith=assignInWith,mixin(lodash2,lodash2),lodash2.add=add2,lodash2.attempt=attempt,lodash2.camelCase=camelCase,lodash2.capitalize=capitalize,lodash2.ceil=ceil2,lodash2.clamp=clamp2,lodash2.clone=clone2,lodash2.cloneDeep=cloneDeep,lodash2.cloneDeepWith=cloneDeepWith,lodash2.cloneWith=cloneWith,lodash2.conformsTo=conformsTo,lodash2.deburr=deburr,lodash2.defaultTo=defaultTo,lodash2.divide=divide2,lodash2.endsWith=endsWith,lodash2.eq=eq,lodash2.escape=escape,lodash2.escapeRegExp=escapeRegExp,lodash2.every=every,lodash2.find=find,lodash2.findIndex=findIndex,lodash2.findKey=findKey,lodash2.findLast=findLast,lodash2.findLastIndex=findLastIndex,lodash2.findLastKey=findLastKey,lodash2.floor=floor2,lodash2.forEach=forEach,lodash2.forEachRight=forEachRight,lodash2.forIn=forIn,lodash2.forInRight=forInRight,lodash2.forOwn=forOwn,lodash2.forOwnRight=forOwnRight,lodash2.get=get2,lodash2.gt=gt2,lodash2.gte=gte,lodash2.has=has,lodash2.hasIn=hasIn,lodash2.head=head,lodash2.identity=identity2,lodash2.includes=includes,lodash2.indexOf=indexOf,lodash2.inRange=inRange,lodash2.invoke=invoke,lodash2.isArguments=isArguments,lodash2.isArray=isArray2,lodash2.isArrayBuffer=isArrayBuffer,lodash2.isArrayLike=isArrayLike,lodash2.isArrayLikeObject=isArrayLikeObject,lodash2.isBoolean=isBoolean2,lodash2.isBuffer=isBuffer,lodash2.isDate=isDate2,lodash2.isElement=isElement2,lodash2.isEmpty=isEmpty,lodash2.isEqual=isEqual,lodash2.isEqualWith=isEqualWith,lodash2.isError=isError,lodash2.isFinite=isFinite2,lodash2.isFunction=isFunction2,lodash2.isInteger=isInteger2,lodash2.isLength=isLength,lodash2.isMap=isMap2,lodash2.isMatch=isMatch,lodash2.isMatchWith=isMatchWith,lodash2.isNaN=isNaN2,lodash2.isNative=isNative,lodash2.isNil=isNil,lodash2.isNull=isNull2,lodash2.isNumber=isNumber2,lodash2.isObject=isObject2,lodash2.isObjectLike=isObjectLike,lodash2.isPlainObject=isPlainObject2,lodash2.isRegExp=isRegExp2,lodash2.isSafeInteger=isSafeInteger,lodash2.isSet=isSet,lodash2.isString=isString2,lodash2.isSymbol=isSymbol,lodash2.isTypedArray=isTypedArray,lodash2.isUndefined=isUndefined2,lodash2.isWeakMap=isWeakMap,lodash2.isWeakSet=isWeakSet,lodash2.join=join,lodash2.kebabCase=kebabCase,lodash2.last=last2,lodash2.lastIndexOf=lastIndexOf,lodash2.lowerCase=lowerCase,lodash2.lowerFirst=lowerFirst,lodash2.lt=lt2,lodash2.lte=lte,lodash2.max=max2,lodash2.maxBy=maxBy,lodash2.mean=mean,lodash2.meanBy=meanBy,lodash2.min=min2,lodash2.minBy=minBy,lodash2.stubArray=stubArray,lodash2.stubFalse=stubFalse,lodash2.stubObject=stubObject,lodash2.stubString=stubString,lodash2.stubTrue=stubTrue,lodash2.multiply=multiply2,lodash2.nth=nth,lodash2.noConflict=noConflict,lodash2.noop=noop2,lodash2.now=now,lodash2.pad=pad,lodash2.padEnd=padEnd,lodash2.padStart=padStart,lodash2.parseInt=parseInt2,lodash2.random=random2,lodash2.reduce=reduce,lodash2.reduceRight=reduceRight,lodash2.repeat=repeat2,lodash2.replace=replace,lodash2.result=result,lodash2.round=round2,lodash2.runInContext=runInContext2,lodash2.sample=sample,lodash2.size=size2,lodash2.snakeCase=snakeCase,lodash2.some=some,lodash2.sortedIndex=sortedIndex,lodash2.sortedIndexBy=sortedIndexBy,lodash2.sortedIndexOf=sortedIndexOf,lodash2.sortedLastIndex=sortedLastIndex,lodash2.sortedLastIndexBy=sortedLastIndexBy,lodash2.sortedLastIndexOf=sortedLastIndexOf,lodash2.startCase=startCase,lodash2.startsWith=startsWith,lodash2.subtract=subtract,lodash2.sum=sum2,lodash2.sumBy=sumBy,lodash2.template=template,lodash2.times=times,lodash2.toFinite=toFinite,lodash2.toInteger=toInteger,lodash2.toLength=toLength,lodash2.toLower=toLower,lodash2.toNumber=toNumber,lodash2.toSafeInteger=toSafeInteger,lodash2.toString=toString,lodash2.toUpper=toUpper,lodash2.trim=trim,lodash2.trimEnd=trimEnd,lodash2.trimStart=trimStart,lodash2.truncate=truncate2,lodash2.unescape=unescape,lodash2.uniqueId=uniqueId,lodash2.upperCase=upperCase,lodash2.upperFirst=upperFirst,lodash2.each=forEach,lodash2.eachRight=forEachRight,lodash2.first=head,mixin(lodash2,function(){var source={};return baseForOwn(lodash2,function(func,methodName){hasOwnProperty2.call(lodash2.prototype,methodName)||(source[methodName]=func)}),source}(),{chain:!1}),lodash2.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash2[methodName].placeholder=lodash2}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n3){n3=n3===undefined$1?1:nativeMax(toInteger(n3),0);var result2=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result2.__filtered__?result2.__takeCount__=nativeMin(n3,result2.__takeCount__):result2.__views__.push({size:nativeMin(n3,MAX_ARRAY_LENGTH),type:methodName+(result2.__dir__<0?"Right":"")}),result2},LazyWrapper.prototype[methodName+"Right"]=function(n3){return this.reverse()[methodName](n3).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee2){var result2=this.clone();return result2.__iteratees__.push({iteratee:getIteratee(iteratee2,3),type}),result2.__filtered__=result2.__filtered__||isFilter,result2}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity2)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return typeof path=="function"?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result2=this;return result2.__filtered__&&(start>0||end<0)?new LazyWrapper(result2):(start<0?result2=result2.takeRight(-start):start&&(result2=result2.drop(start)),end!==undefined$1&&(end=toInteger(end),result2=end<0?result2.dropRight(-end):result2.take(end-start)),result2)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash2[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash2.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee2=args[0],useLazy=isLazy||isArray2(value),interceptor=__name(function(value2){var result3=lodashFunc.apply(lodash2,arrayPush([value2],args));return isTaker&&chainAll?result3[0]:result3},"interceptor");useLazy&&checkIteratee&&typeof iteratee2=="function"&&iteratee2.length!=1&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result2=func.apply(value,args);return result2.__actions__.push({func:thru,args:[interceptor],thisArg:undefined$1}),new LodashWrapper(result2,chainAll)}return isUnwrapped&&onlyLazy?func.apply(this,args):(result2=this.thru(interceptor),isUnwrapped?isTaker?result2.value()[0]:result2.value():result2)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash2.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray2(value)?value:[],args)}return this[chainName](function(value2){return func.apply(isArray2(value2)?value2:[],args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash2[methodName];if(lodashFunc){var key=lodashFunc.name+"";hasOwnProperty2.call(realNames,key)||(realNames[key]=[]),realNames[key].push({name:methodName,func:lodashFunc})}}),realNames[createHybrid(undefined$1,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined$1}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash2.prototype.at=wrapperAt,lodash2.prototype.chain=wrapperChain,lodash2.prototype.commit=wrapperCommit,lodash2.prototype.next=wrapperNext,lodash2.prototype.plant=wrapperPlant,lodash2.prototype.reverse=wrapperReverse,lodash2.prototype.toJSON=lodash2.prototype.valueOf=lodash2.prototype.value=wrapperValue,lodash2.prototype.first=lodash2.prototype.head,symIterator&&(lodash2.prototype[symIterator]=wrapperToIterator),lodash2},"runInContext"),_2=runInContext();freeModule?((freeModule.exports=_2)._=_2,freeExports._=_2):root._=_2}).call(lodash)}(lodash$1,lodash$1.exports)),lodash$1.exports}__name(requireLodash,"requireLodash");var lodashExports=requireLodash();function deepBind(resources,bindings){function deepBindRecursive(resource){if(typeof resource=="string"&&resource.startsWith("@_?"))return bindings[resource.substring(3)]||resource;if(Array.isArray(resource))return resource.map(deepBindRecursive);if(typeof resource=="object"&&resource!==null){const newObj={};for(const key in resource)newObj[key]=deepBindRecursive(resource[key]);return newObj}return resource}return __name(deepBindRecursive,"deepBindRecursive"),deepBindRecursive(resources)}__name(deepBind,"deepBind");function deepReplace(resources,prefix){function deepReplaceRecursive(resource){if(typeof resource=="string"&&resource.startsWith("@_"))return resource.replace("@_",`${prefix}_`);if(Array.isArray(resource))return resource.map(deepReplaceRecursive);if(typeof resource=="object"&&resource!==null){const newObj={};for(const key in resource)newObj[key]=deepReplaceRecursive(resource[key]);return newObj}return resource}return __name(deepReplaceRecursive,"deepReplaceRecursive"),deepReplaceRecursive(resources)}__name(deepReplace,"deepReplace");function build(resourceObjectCallback){return self2=>{let resourceEntries=Object.entries(resourceObjectCallback(__name(id=>`${self2}_${id}`,"ref")));const expandedResources=[],indicesToDelete=[];for(let i2=0;i2<resourceEntries.length;i2++){const[id,obj]=resourceEntries[i2];if(typeof obj=="function"){const newResources=obj(`${self2}_${id}`);expandedResources.push(...newResources),indicesToDelete.push(i2)}}for(let i2=0;i2<resourceEntries.length;i2++){const[id,obj]=resourceEntries[i2];if(typeof obj!="function"&&obj.type==="Use"){let data=deepBind(obj.data.resources,obj.data.bindings);data=deepReplace(data,`${self2}_${id}`),expandedResources.push(...data),indicesToDelete.push(i2)}}resourceEntries=resourceEntries.filter((_2,i2)=>!indicesToDelete.includes(i2));const resources=resourceEntries.map(([id,obj])=>({id:`${self2}_${id}`,...obj}));return resources.push(...expandedResources),resources}}__name(build,"build");function Use(data,bindings){return{type:"Use",data:{resources:data,bindings:bindings||{}}}}__name(Use,"Use");function exportResources(buildCb){return buildCb("@")}__name(exportResources,"exportResources");function VertexSignature$1(data){return{type:"VertexSignature",data}}__name(VertexSignature$1,"VertexSignature$1");function GlobalSignature$1(data){return{type:"GlobalSignature",data}}__name(GlobalSignature$1,"GlobalSignature$1");function InstanceSignature$1(data){return{type:"InstanceSignature",data}}__name(InstanceSignature$1,"InstanceSignature$1");function TextureSignature$1(data){return{type:"TextureSignature",data}}__name(TextureSignature$1,"TextureSignature$1");function Vertex$1(data){return{type:"Vertex",data}}__name(Vertex$1,"Vertex$1");function Instance$1(data){return{type:"Instance",data}}__name(Instance$1,"Instance$1");function Global$1(data){return{type:"Global",data}}__name(Global$1,"Global$1");function Texture$2(data){return{type:"Texture",data}}__name(Texture$2,"Texture$2");function Program$2(data){return{type:"Program",data}}__name(Program$2,"Program$2");const external=__name(s2=>`@_?${s2}`,"external");var blurX_fs_default=`in vec2 uv;

#ifndef FNC_GAUSSIAN
#define FNC_GAUSSIAN
float gaussian(float d, float s) { return exp(-(d*d) / (2.0 * s*s)); }
float gaussian( vec2 d, float s) { return exp(-( d.x*d.x + d.y*d.y) / (2.0 * s*s)); }
float gaussian( vec3 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z ) / (2.0 * s*s)); }
float gaussian( vec4 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z + d.w*d.w ) / (2.0 * s*s)); }
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef FNC_SAMPLECLAMP2EDGE
#define FNC_SAMPLECLAMP2EDGE
vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, vec2 texResolution) {
    vec2 pixel = 1.0/texResolution;
    return SAMPLER_FNC( tex, clamp(st, pixel, 1.0-pixel) );
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(0.01), vec2(0.99) ) ); 
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, float edge) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(edge), vec2(1.0 - edge) ) ); 
}
#endif

#ifndef GAUSSIANBLUR1D_TYPE
#ifdef GAUSSIANBLUR_TYPE
#define GAUSSIANBLUR1D_TYPE GAUSSIANBLUR_TYPE
#else
#define GAUSSIANBLUR1D_TYPE vec4
#endif
#endif

#ifndef GAUSSIANBLUR1D_SAMPLER_FNC
#ifdef GAUSSIANBLUR_SAMPLER_FNC
#define GAUSSIANBLUR1D_SAMPLER_FNC(TEX, UV) GAUSSIANBLUR_SAMPLER_FNC(TEX, UV)
#else
#define GAUSSIANBLUR1D_SAMPLER_FNC(TEX, UV) sampleClamp2edge(TEX, UV)
#endif
#endif

#ifndef FNC_GAUSSIANBLUR1D
#define FNC_GAUSSIANBLUR1D

#ifdef PLATFORM_WEBGL

GAUSSIANBLUR1D_TYPE gaussianBlur1D(in SAMPLER_TYPE tex,in vec2 st,in vec2 offset,const int kernelSize){
    GAUSSIANBLUR1D_TYPE accumColor = GAUSSIANBLUR1D_TYPE(0.0);

    float kernelSizef = float(kernelSize);
    float accumWeight = 0.0;
    const float k = 0.39894228;
    for (int i = 0; i < 16; i++) {
        if( i >= kernelSize)
            break;
        float x = -0.5 * (float(kernelSize) - 1.0)+float(i);
        float weight = (k/float(kernelSize)) * gaussian(x, kernelSizef);
        GAUSSIANBLUR1D_TYPE tex = GAUSSIANBLUR1D_SAMPLER_FNC(tex, st + x * offset);
        accumColor += weight * tex;
        accumWeight += weight;
    }
    return accumColor/accumWeight;
}

#else

GAUSSIANBLUR1D_TYPE gaussianBlur1D(in SAMPLER_TYPE tex,in vec2 st,in vec2 offset,const int kernelSize){
    GAUSSIANBLUR1D_TYPE accumColor=GAUSSIANBLUR1D_TYPE(0.);

    float kernelSizef = float(kernelSize);
    
    float accumWeight = 0.0;
    const float k = 0.39894228;
    for (int i = 0; i < kernelSize; i++) {
        float x = -0.5 * ( kernelSizef -1.0) + float(i);
        float weight = (k / kernelSizef) * gaussian(x, kernelSizef);
        GAUSSIANBLUR1D_TYPE tex = GAUSSIANBLUR1D_SAMPLER_FNC(tex, st + x * offset);
        accumColor += weight * tex;
        accumWeight += weight;
    }
    return accumColor/accumWeight;
}
#endif

#endif

void main() {
    vec2 off = vec2(2.0 / canvas.x, 0.0);
    int kernelSize = int( mix(1., 15., amount) );
    outColor = gaussianBlur1D(src, uv, off, kernelSize);
}`,blurY_fs_default=`in vec2 uv;

#ifndef FNC_GAUSSIAN
#define FNC_GAUSSIAN
float gaussian(float d, float s) { return exp(-(d*d) / (2.0 * s*s)); }
float gaussian( vec2 d, float s) { return exp(-( d.x*d.x + d.y*d.y) / (2.0 * s*s)); }
float gaussian( vec3 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z ) / (2.0 * s*s)); }
float gaussian( vec4 d, float s) { return exp(-( d.x*d.x + d.y*d.y + d.z*d.z + d.w*d.w ) / (2.0 * s*s)); }
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef FNC_SAMPLECLAMP2EDGE
#define FNC_SAMPLECLAMP2EDGE
vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, vec2 texResolution) {
    vec2 pixel = 1.0/texResolution;
    return SAMPLER_FNC( tex, clamp(st, pixel, 1.0-pixel) );
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(0.01), vec2(0.99) ) ); 
}

vec4 sampleClamp2edge(SAMPLER_TYPE tex, vec2 st, float edge) { 
    return SAMPLER_FNC( tex, clamp(st, vec2(edge), vec2(1.0 - edge) ) ); 
}
#endif

#ifndef GAUSSIANBLUR1D_TYPE
#ifdef GAUSSIANBLUR_TYPE
#define GAUSSIANBLUR1D_TYPE GAUSSIANBLUR_TYPE
#else
#define GAUSSIANBLUR1D_TYPE vec4
#endif
#endif

#ifndef GAUSSIANBLUR1D_SAMPLER_FNC
#ifdef GAUSSIANBLUR_SAMPLER_FNC
#define GAUSSIANBLUR1D_SAMPLER_FNC(TEX, UV) GAUSSIANBLUR_SAMPLER_FNC(TEX, UV)
#else
#define GAUSSIANBLUR1D_SAMPLER_FNC(TEX, UV) sampleClamp2edge(TEX, UV)
#endif
#endif

#ifndef FNC_GAUSSIANBLUR1D
#define FNC_GAUSSIANBLUR1D

#ifdef PLATFORM_WEBGL

GAUSSIANBLUR1D_TYPE gaussianBlur1D(in SAMPLER_TYPE tex,in vec2 st,in vec2 offset,const int kernelSize){
    GAUSSIANBLUR1D_TYPE accumColor = GAUSSIANBLUR1D_TYPE(0.0);

    float kernelSizef = float(kernelSize);
    float accumWeight = 0.0;
    const float k = 0.39894228;
    for (int i = 0; i < 16; i++) {
        if( i >= kernelSize)
            break;
        float x = -0.5 * (float(kernelSize) - 1.0)+float(i);
        float weight = (k/float(kernelSize)) * gaussian(x, kernelSizef);
        GAUSSIANBLUR1D_TYPE tex = GAUSSIANBLUR1D_SAMPLER_FNC(tex, st + x * offset);
        accumColor += weight * tex;
        accumWeight += weight;
    }
    return accumColor/accumWeight;
}

#else

GAUSSIANBLUR1D_TYPE gaussianBlur1D(in SAMPLER_TYPE tex,in vec2 st,in vec2 offset,const int kernelSize){
    GAUSSIANBLUR1D_TYPE accumColor=GAUSSIANBLUR1D_TYPE(0.);

    float kernelSizef = float(kernelSize);
    
    float accumWeight = 0.0;
    const float k = 0.39894228;
    for (int i = 0; i < kernelSize; i++) {
        float x = -0.5 * ( kernelSizef -1.0) + float(i);
        float weight = (k / kernelSizef) * gaussian(x, kernelSizef);
        GAUSSIANBLUR1D_TYPE tex = GAUSSIANBLUR1D_SAMPLER_FNC(tex, st + x * offset);
        accumColor += weight * tex;
        accumWeight += weight;
    }
    return accumColor/accumWeight;
}
#endif

#endif

void main() {
    vec2 off = vec2(0.0, 2.0 / canvas.y);
    int kernelSize = int( mix(1., 15., amount) );
    outColor = gaussianBlur1D(src, uv, off, kernelSize);
}`;function Blur({quad,quadSig,canvasSig,compositionGlobal,compositionGlobalSig,inputTexture}){return build(ref=>({global_sig:GlobalSignature$1({amount:"float"}),global:Global$1({signature:ref("global_sig"),exportName:"cyberspag_blur"}),p_blurX:Program$2({vertexSignature:quadSig,globalSignatures:{g:ref("global_sig"),c:compositionGlobalSig},vertexShader:`
                out vec2 uv;
                void main() {
                    uv = position / 2. + vec2(0.5);
                    gl_Position = vec4(position.xy, 0.0, 1.0);
                }
                `,fragmentShader:blurX_fs_default,textures:{src:{filter:"linear",wrap:"clamp"}}}),p_blurY:Program$2({vertexSignature:quadSig,globalSignatures:{g:ref("global_sig"),c:compositionGlobalSig},vertexShader:`
                out vec2 uv;
                void main() {
                    uv = position / 2. + vec2(0.5);
                    gl_Position = vec4(position.xy, 0.0, 1.0);
                }
                `,fragmentShader:blurY_fs_default,textures:{src:{filter:"linear",wrap:"clamp"}}}),p_drawTex:Program$2({vertexSignature:quadSig,globalSignatures:{},vertexShader:`
                out vec2 uv;
                void main() {
                    uv = position / 2. + vec2(0.5);
                    gl_Position = vec4(position.xy, 0.0, 1.0);
                }
                `,fragmentShader:`
                in vec2 uv;
                void main() {
                    outColor = texture(src, uv);
                }
                `,textures:{src:{filter:"linear",wrap:"clamp"}}}),pass1:Texture$2({signature:canvasSig,drawOps:[{program:ref("p_blurX"),vertex:quad,globals:{g:ref("global"),c:compositionGlobal},textures:{src:inputTexture}}]}),out:Texture$2({signature:canvasSig,drawOps:[{program:ref("p_blurY"),vertex:quad,globals:{g:ref("global"),c:compositionGlobal},textures:{src:ref("pass1")}}]})}))}__name(Blur,"Blur");var ray_fs_default=`in vec2 uv;
in float texture_sample_factor;
in float progress_factor;

float gaussian(float x, float sigma) {
    return exp(-pow(x - 0.5, 2.0) / (2.0 * pow(sigma, 2.0)));
}

void main() {

    float color_variance_factor = 1.;
    float final_color_factor = progress_factor + color_variance_factor * (texture_sample_factor - color_variance_factor / 2.);
    final_color_factor = clamp(final_color_factor, 0.0, 1.0);

    vec4 color = texture(colorTex, vec2(final_color_factor, 0.0));
    
    float gaussian_hor_1 = gaussian(uv.x, 0.1);
    float gaussian_ver_1 = gaussian(uv.y, 0.1);
    float col_intensity = gaussian_hor_1 * gaussian_ver_1;
    float gaussian_hor_2 = gaussian(uv.x, 0.05);
    float gaussian_ver_2 = gaussian(uv.y, 0.05 + temperature * 0.05);
    float light_intensity = gaussian_hor_2 * gaussian_ver_2;
    float col_brightness = dot(color.rgb,vec3(1.)) / 3.0;
    bool use_light = col_brightness > 0.3;
    light_intensity = use_light ? light_intensity : 0.0;
    vec3 col = color.rgb * col_intensity + vec3(1.0) * light_intensity;
    outColor = showUI < 0.5 ? vec4(col, 1.) : vec4(col, 1.) * vec4(vec3(0.5),1.0);
}`,ray_vs_default=`vec3 centerPoint = vec3(0.0,0.0,1.0);
float radius1 = 0.1;
float radius2 = 0.5;

mat4 perspective_projection(float aspect, float fov, float near, float far) {
    
    
    
    
    float top = near * tan(radians(fov) / 2.0);
    float right = top * aspect;
    return mat4(
        vec4(near / right, 0.0, 0.0, 0.0),
        vec4(0.0, near / top, 0.0, 0.0),
        vec4(0.0, 0.0, -(far + near) / (far - near), -1.0),
        vec4(0.0, 0.0, -(2.0 * far * near) / (far - near), 0.0)
    );
}

mat4 translation(vec3 vector) {
    return mat4(
        vec4(1.0, 0.0, 0.0, 0.0),
        vec4(0.0, 1.0, 0.0, 0.0),
        vec4(0.0, 0.0, 1.0, 0.0),
        vec4(vector, 1.0)
    );
}

mat4 rotation(vec3 axis, float angle) {

    axis = normalize(axis);
    mat3 w = mat3(
        vec3(0.0, axis.z, -axis.y),
        vec3(-axis.z, 0.0, axis.x),
        vec3(axis.y, -axis.x, 0.0)
    );

    mat3 I = mat3(
        vec3(1.0, 0.0, 0.0),
        vec3(0.0, 1.0, 0.0),
        vec3(0.0, 0.0, 1.0)
    );

    mat3 intermediate = mat3(
        I + sin(radians(angle)) * w + (1.0 - cos(radians(angle))) * w * w
    );

    return mat4(
        vec4(intermediate[0], 0.0),
        vec4(intermediate[1], 0.0),
        vec4(intermediate[2], 0.0),
        vec4(0.0, 0.0, 0.0, 1.0)
    );
}
uint seed_from_float(float f) {
    
    return uint(floor(f * 4294967296.0)); 
}

uint splitmix32(uint x) {
    x += 0x9E3779B9u;
    x = (x ^ (x >> 16)) * 0x85EBCA6Bu;
    x = (x ^ (x >> 13)) * 0xC2B2AE35u;
    x =  x ^ (x >> 16);
    return x;
}

uint stream(uvec3 key) {
    
    uint x = key.x * 0x9E3779B1u ^ key.y * 0x85EBCA77u ^ key.z * 0xC2B2AE3Du;
    return splitmix32(x);
}

float u01(uint x) {
    
    return float(x) * (1.0 / 4294967296.0);
}
float minRadius(float nearAbs, float fovDeg, float aspect) {
    float halfH = nearAbs * tan(radians(fovDeg) * 0.5);
    float halfW = halfH * aspect;
    return length(vec2(halfW, halfH)); 
}

mat4 generateRayPositions(vec2 origin, float nCD, float nCR, float fCD, float fCR, float angle, float ray_length, float ray_progress, float ray_thickness, vec3 chaos_vector) {
    float minDistanceFactor = mix(10.,1.,temperature);
    nCR -= nCR * (1. - minDistanceFactor / 100.) * chaos_vector.y;
    vec3 nearPoint = vec3(nCR * sin(radians(angle)), nCR * cos(radians(angle)), nCD);
    fCR -= fCR * chaos_vector.x;

    vec3 farPoint = vec3(origin,0.) + vec3(fCR * sin(radians(angle)), fCR * cos(radians(angle)), fCD);
    vec3 delta = -(farPoint - nearPoint);
    float ray_full_length = length(delta);
    float computed_progress = ray_progress * (1. + ray_length) - ray_length;
    vec3 rayStart = farPoint + computed_progress * delta;
    vec3 rayEnd = farPoint + (ray_length + computed_progress) * delta;
    vec2 normal = vec2(sin(radians(angle)), cos(radians(angle)));
    vec2 orthogonal_to_normal = vec2(-normal.y, normal.x);
    vec2 o = orthogonal_to_normal;

    return mat4(
        vec4(rayStart + vec3(o * ray_thickness,0.0),1.0),
        vec4(rayStart - vec3(o * ray_thickness,0.0),1.0),
        vec4(rayEnd + vec3(o * ray_thickness,0.0),1.0),
        vec4(rayEnd - vec3(o * ray_thickness,0.0),1.0)
    );
}

int positionToIndex(vec2 position) {
    
    int x = position.x == -1.0 ? 0 : 1;
    int y = position.y == -1.0 ? 0 : 1;
    return x + y * 2;
}

mat4 debugPositions() {
    return mat4(
        vec4(-.5,-.5,-1.,1.0),
        vec4(-.5,.5,-1.,1.0),
        vec4(.2,-.2,-1.,1.0),
        vec4(.2,.2,-1.,1.0)
    );
}

struct ParticleParams {
    float progress;
    uint incarnation;
    float angle;
    float ray_length_variation_factor;
    float ray_thickness_variation_factor;
    float texture_sample_factor;
    vec3 chaos_vector;
};

ParticleParams ppar_for(uint instance_key, float frame, float lifecycle) {
    float offset = u01(stream(uvec3(instance_key, 0u, 0u)));
    float startFrame = -((offset * lifecycle));
    float elapsedFrames = frame - startFrame;
    uint incarnation = uint(mod(floor(elapsedFrames / lifecycle),3.));
    float progress = fract(elapsedFrames / lifecycle);
    float angle = mix(0.,360.,u01(stream(uvec3(instance_key, incarnation, 1u))));
    float ray_length_variation = u01(stream(uvec3(instance_key, incarnation, 2u)));
    float ray_thickness_variation = u01(stream(uvec3(instance_key, incarnation, 3u)));
    float texture_sample_factor = u01(stream(uvec3(instance_key, incarnation, 4u)));
    vec3 chaos_vector = vec3(u01(stream(uvec3(instance_key, incarnation, 5u))), u01(stream(uvec3(instance_key, incarnation, 6u))), u01(stream(uvec3(instance_key, incarnation, 7u))));
    return ParticleParams(progress, incarnation, angle, ray_length_variation, ray_thickness_variation, texture_sample_factor, chaos_vector);
}

float angle = 90.;
float RAY_LENGTH_VARIATION = 0.25;
float RAY_PROGRESS = .5;
float RAY_THICKNESS_VARIATION = .25;
float LIFECYCLE = 100.;

out vec2 uv;
out float texture_sample_factor;
out float progress_factor;
void main() {

    uint instance_key = uint(gl_InstanceID);
    ParticleParams ppar = ppar_for(instance_key,  playheadPosition,  LIFECYCLE);

    float nearCircleDistance = -.01;
    float nearCircleRadius = minRadius(nearCircleDistance, 45.0, canvas.x/canvas.y) * 100.;
    float farCircleDistance = mix(-10.,-28.,origin.z);
    float farMinRadius = minRadius(farCircleDistance, 45.0, canvas.x/canvas.y);
    float farCircleRadius = .5;
    mat4 t = translation(vec3(0.0, 0.5, 0.0));
    mat4 r = rotation(vec3(.0, 1.0, 0.0), 15.0);
    mat4 p = perspective_projection(canvas.x/canvas.y, 45.0, -nearCircleDistance, -farCircleDistance);

    float ray_length = mix(0.1,0.3,pressure);
    float ray_thickness = mix(0.05, 0.032, pressure);

    float final_ray_length = clamp(ray_length * (1.0 + ppar.ray_length_variation_factor * RAY_LENGTH_VARIATION - RAY_LENGTH_VARIATION / 2.),0.,1.);
    float final_ray_thickness = clamp(ray_thickness * (1.0 + ppar.ray_thickness_variation_factor * RAY_THICKNESS_VARIATION - RAY_THICKNESS_VARIATION / 2.),0.,1.);
    
    mat4 rayPositions = generateRayPositions((origin.xy * 2. - vec2(1.)) * farMinRadius, nearCircleDistance, nearCircleRadius, farCircleDistance, farCircleRadius, ppar.angle, final_ray_length, ppar.progress, final_ray_thickness,normalize(ppar.chaos_vector));

    int idx = positionToIndex(position);
    gl_Position = p * rayPositions[idx];
    uv = (position / vec2(2.0, 2.0)) + vec2(0.5);
    texture_sample_factor = ppar.texture_sample_factor;
    progress_factor = ppar.progress;
}`;function RayTunnel({timeline_sig,quadSig}){return build(ref=>({global_sig:GlobalSignature$1({origin:"vec4",temperature:"float",pressure:"float",showUI:"float"}),ray_sig:InstanceSignature$1({attributes:{},maxInstanceCount:5e4}),global:Global$1({signature:ref("global_sig"),exportName:"cyberspag_globals"}),ray:Instance$1({signature:ref("ray_sig"),exportName:"cyberspag_ray"}),colorTex_sig:TextureSignature$1({type:"RGBA32F",size:[100,1]}),colorTex:Texture$2({signature:ref("colorTex_sig"),exportName:"cyberspag_colorTexture"}),draw_ray:Program$2({vertexShader:ray_vs_default,fragmentShader:ray_fs_default,globalSignatures:{g:ref("global_sig"),t:timeline_sig},instanceSignature:ref("ray_sig"),vertexSignature:quadSig,textures:{colorTex:{filter:"nearest",clamp:"wrap"}}})}))}__name(RayTunnel,"RayTunnel");var fog_fs_default=`#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef RANDOM_SCALE
#ifdef RANDOM_HIGHER_RANGE
#define RANDOM_SCALE vec4(.1031, .1030, .0973, .1099)
#else
#define RANDOM_SCALE vec4(443.897, 441.423, .0973, .1099)
#endif
#endif

#ifndef FNC_RANDOM
#define FNC_RANDOM
float random(in float x) {
#ifdef RANDOM_SINLESS
    x = fract(x * RANDOM_SCALE.x);
    x *= x + 33.33;
    x *= x + x;
    return fract(x);
#else
    return fract(sin(x) * 43758.5453);
#endif
}

float random(in vec2 st) {
#ifdef RANDOM_SINLESS
    vec3 p3  = fract(vec3(st.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 33.33);
    return fract((p3.x + p3.y) * p3.z);
#else
    return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
#endif
}

float random(in vec3 pos) {
#ifdef RANDOM_SINLESS
    pos  = fract(pos * RANDOM_SCALE.xyz);
    pos += dot(pos, pos.zyx + 31.32);
    return fract((pos.x + pos.y) * pos.z);
#else
    return fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
#endif
}

float random(in vec4 pos) {
#ifdef RANDOM_SINLESS
    pos = fract(pos * RANDOM_SCALE);
    pos += dot(pos, pos.wzxy + 33.33);
    return fract((pos.x + pos.y) * (pos.z + pos.w));
#else
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return fract(sin(dot_product) * 43758.5453);
#endif
}

vec2 random2(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec2 p) {
    vec3 p3 = fract(p.xyx * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec2 random2(vec3 p3) {
    p3 = fract(p3 * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xx + p3.yz) * p3.zy);
}

vec3 random3(float p) {
    vec3 p3 = fract(vec3(p) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yzx + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx); 
}

vec3 random3(vec2 p) {
    vec3 p3 = fract(vec3(p.xyx) * RANDOM_SCALE.xyz);
    p3 += dot(p3, p3.yxz + 19.19);
    return fract((p3.xxy + p3.yzz) * p3.zyx);
}

vec3 random3(vec3 p) {
    p = fract(p * RANDOM_SCALE.xyz);
    p += dot(p, p.yxz + 19.19);
    return fract((p.xxy + p.yzz) * p.zyx);
}

vec4 random4(float p) {
    vec4 p4 = fract(p * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);   
}

vec4 random4(vec2 p) {
    vec4 p4 = fract(p.xyxy * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec3 p) {
    vec4 p4 = fract(p.xyzx * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}

vec4 random4(vec4 p4) {
    p4 = fract(p4  * RANDOM_SCALE);
    p4 += dot(p4, p4.wzxy + 19.19);
    return fract((p4.xxyz + p4.yzzw) * p4.zywx);
}
#endif
#ifndef FNC_SRANDOM
#define FNC_SRANDOM

float srandom(in float x) {
  return -1. + 2. * fract(sin(x) * 43758.5453);
}

float srandom(in vec2 st) {
  return -1. + 2. * fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

float srandom(in vec3 pos) {
  return -1. + 2. * fract(sin(dot(pos.xyz, vec3(70.9898, 78.233, 32.4355))) * 43758.5453123);
}

float srandom(in vec4 pos) {
    float dot_product = dot(pos, vec4(12.9898,78.233,45.164,94.673));
    return -1. + 2. * fract(sin(dot_product) * 43758.5453);
}

vec2 srandom2(in vec2 st) {
    const vec2 k = vec2(.3183099, .3678794);
    st = st * k + k.yx;
    return -1. + 2. * fract(16. * k * fract(st.x * st.y * (st.x + st.y)));
}

vec3 srandom3(in vec3 p) {
    p = vec3( dot(p, vec3(127.1, 311.7, 74.7)),
            dot(p, vec3(269.5, 183.3, 246.1)),
            dot(p, vec3(113.5, 271.9, 124.6)));
    return -1. + 2. * fract(sin(p) * 43758.5453123);
}

vec2 srandom2(in vec2 p, const in float tileLength) {
    p = mod(p, vec2(tileLength));
    return srandom2(p);
}

vec3 srandom3(in vec3 p, const in float tileLength) {
    p = mod(p, vec3(tileLength));
    return srandom3(p);
}

#endif
#ifndef FNC_CUBIC
#define FNC_CUBIC 
float cubic(const in float v) { return v*v*(3.0-2.0*v); }
vec2  cubic(const in vec2 v)  { return v*v*(3.0-2.0*v); }
vec3  cubic(const in vec3 v)  { return v*v*(3.0-2.0*v); }
vec4  cubic(const in vec4 v)  { return v*v*(3.0-2.0*v); }

float cubic(const in float v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    float v2 = v * v;
    float v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec2 cubic(const in vec2 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec2 v2 = v * v;
    vec2 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec3 cubic(const in vec3 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec3 v2 = v * v;
    vec3 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}

vec4 cubic(const in vec4 v, in float slope0, in float slope1) {
    float a = slope0 + slope1 - 2.;
    float b = -2. * slope0 - slope1 + 3.;
    float c = slope0;
    vec4 v2 = v * v;
    vec4 v3 = v * v2;
    return a * v3 + b * v2 + c * v;
}
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_GNOISE
#define FNC_GNOISE

float gnoise(float x) {
    float i = floor(x);  
    float f = fract(x);  
    return mix(random(i), random(i + 1.0), smoothstep(0.,1.,f)); 
}

float gnoise(vec2 st) {
    vec2 i = floor(st);
    vec2 f = fract(st);
    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));
    vec2 u = cubic(f);
    return mix( a, b, u.x) +
                (c - a)* u.y * (1.0 - u.x) +
                (d - b) * u.x * u.y;
}

float gnoise(vec3 p) {
    vec3 i = floor(p);
    vec3 f = fract(p);
    vec3 u = quintic(f);
    return -1.0 + 2.0 * mix( mix( mix( random(i + vec3(0.0,0.0,0.0)), 
                                        random(i + vec3(1.0,0.0,0.0)), u.x),
                                mix( random(i + vec3(0.0,1.0,0.0)), 
                                        random(i + vec3(1.0,1.0,0.0)), u.x), u.y),
                            mix( mix( random(i + vec3(0.0,0.0,1.0)), 
                                        random(i + vec3(1.0,0.0,1.0)), u.x),
                                mix( random(i + vec3(0.0,1.0,1.0)), 
                                        random(i + vec3(1.0,1.0,1.0)), u.x), u.y), u.z );
}

float gnoise(vec3 p, float tileLength) {
    vec3 i = floor(p);
    vec3 f = fract(p);
            
    vec3 u = quintic(f);
        
    return mix( mix( mix( dot( srandom3(i + vec3(0.0,0.0,0.0), tileLength), f - vec3(0.0,0.0,0.0)), 
                            dot( srandom3(i + vec3(1.0,0.0,0.0), tileLength), f - vec3(1.0,0.0,0.0)), u.x),
                    mix( dot( srandom3(i + vec3(0.0,1.0,0.0), tileLength), f - vec3(0.0,1.0,0.0)), 
                            dot( srandom3(i + vec3(1.0,1.0,0.0), tileLength), f - vec3(1.0,1.0,0.0)), u.x), u.y),
                mix( mix( dot( srandom3(i + vec3(0.0,0.0,1.0), tileLength), f - vec3(0.0,0.0,1.0)), 
                            dot( srandom3(i + vec3(1.0,0.0,1.0), tileLength), f - vec3(1.0,0.0,1.0)), u.x),
                    mix( dot( srandom3(i + vec3(0.0,1.0,1.0), tileLength), f - vec3(0.0,1.0,1.0)), 
                            dot( srandom3(i + vec3(1.0,1.0,1.0), tileLength), f - vec3(1.0,1.0,1.0)), u.x), u.y), u.z );
}

vec3 gnoise3(vec3 x) {
    return vec3(gnoise(x+vec3(123.456, 0.567, 0.37)),
                gnoise(x+vec3(0.11, 47.43, 19.17)),
                gnoise(x) );
}

#endif

#ifndef FBM_OCTAVES
#define FBM_OCTAVES 4
#endif

#ifndef FBM_NOISE_FNC
#define FBM_NOISE_FNC(UV) snoise(UV)
#endif

#ifndef FBM_NOISE2_FNC
#define FBM_NOISE2_FNC(UV) FBM_NOISE_FNC(UV)
#endif

#ifndef FBM_NOISE3_FNC
#define FBM_NOISE3_FNC(UV) FBM_NOISE_FNC(UV)
#endif

#ifndef FBM_NOISE_TILABLE_FNC
#define FBM_NOISE_TILABLE_FNC(UV, TILE) gnoise(UV, TILE)
#endif

#ifndef FBM_NOISE3_TILABLE_FNC
#define FBM_NOISE3_TILABLE_FNC(UV, TILE) FBM_NOISE_TILABLE_FNC(UV, TILE)
#endif

#ifndef FBM_NOISE_TYPE
#define FBM_NOISE_TYPE float
#endif

#ifndef FBM_VALUE_INITIAL
#define FBM_VALUE_INITIAL 0.0
#endif

#ifndef FBM_SCALE_SCALAR
#define FBM_SCALE_SCALAR 2.0
#endif

#ifndef FBM_AMPLITUDE_INITIAL
#define FBM_AMPLITUDE_INITIAL 0.5
#endif

#ifndef FBM_AMPLITUDE_SCALAR
#define FBM_AMPLITUDE_SCALAR 0.5
#endif

#ifndef FNC_FBM
#define FNC_FBM
FBM_NOISE_TYPE fbm(in vec2 st) {
    
    FBM_NOISE_TYPE value = FBM_NOISE_TYPE(FBM_VALUE_INITIAL);
    float amplitude = FBM_AMPLITUDE_INITIAL;

    
    for (int i = 0; i < FBM_OCTAVES; i++) {
        value += amplitude * FBM_NOISE2_FNC(st);
        st *= FBM_SCALE_SCALAR;
        amplitude *= FBM_AMPLITUDE_SCALAR;
    }
    return value;
}

FBM_NOISE_TYPE fbm(in vec3 pos) {
    
    FBM_NOISE_TYPE value = FBM_NOISE_TYPE(FBM_VALUE_INITIAL);
    float amplitude = FBM_AMPLITUDE_INITIAL;

    
    for (int i = 0; i < FBM_OCTAVES; i++) {
        value += amplitude * FBM_NOISE3_FNC(pos);
        pos *= FBM_SCALE_SCALAR;
        amplitude *= FBM_AMPLITUDE_SCALAR;
    }
    return value;
}

FBM_NOISE_TYPE fbm(vec3 p, float tileLength) {
    const float persistence = 0.5;
    const float lacunarity = 2.0;

    float amplitude = 0.5;
    FBM_NOISE_TYPE total = FBM_NOISE_TYPE(0.0);
    float normalization = 0.0;

    for (int i = 0; i < FBM_OCTAVES; ++i) {
        float noiseValue = FBM_NOISE3_TILABLE_FNC(p, tileLength * lacunarity * 0.5) * 0.5 + 0.5;
        total += noiseValue * amplitude;
        normalization += amplitude;
        amplitude *= persistence;
        p = p * lacunarity;
    }

    return total / normalization;
}
#endif

in vec2 uv;
void main() {
    float fog = fbm(vec3(uv * 1., playheadPosition / 50.)) * 0.5 + 0.5;
    vec3 col = texture(src, vec2(fog,0.5)).rgb * temperature * 0.25;
    outColor = vec4(col, 1.0);
    
    
}`,showerhead_vs_default=`mat4 perspective_projection(float aspect, float fov, float near, float far) {
    
    
    
    
    float top = near * tan(radians(fov) / 2.0);
    float right = top * aspect;
    return mat4(
        vec4(near / right, 0.0, 0.0, 0.0),
        vec4(0.0, near / top, 0.0, 0.0),
        vec4(0.0, 0.0, -(far + near) / (far - near), -1.0),
        vec4(0.0, 0.0, -(2.0 * far * near) / (far - near), 0.0)
    );
}

mat4 translation(vec3 vector) {
    return mat4(
        vec4(1.0, 0.0, 0.0, 0.0),
        vec4(0.0, 1.0, 0.0, 0.0),
        vec4(0.0, 0.0, 1.0, 0.0),
        vec4(vector, 1.0)
    );
}

mat4 rotation(vec3 axis, float angle) {

    axis = normalize(axis);
    mat3 w = mat3(
        vec3(0.0, axis.z, -axis.y),
        vec3(-axis.z, 0.0, axis.x),
        vec3(axis.y, -axis.x, 0.0)
    );

    mat3 I = mat3(
        vec3(1.0, 0.0, 0.0),
        vec3(0.0, 1.0, 0.0),
        vec3(0.0, 0.0, 1.0)
    );

    mat3 intermediate = mat3(
        I + sin(radians(angle)) * w + (1.0 - cos(radians(angle))) * w * w
    );

    return mat4(
        vec4(intermediate[0], 0.0),
        vec4(intermediate[1], 0.0),
        vec4(intermediate[2], 0.0),
        vec4(0.0, 0.0, 0.0, 1.0)
    );
}
float minRadius(float nearAbs, float fovDeg, float aspect) {
    float halfH = nearAbs * tan(radians(fovDeg) * 0.5);
    float halfW = halfH * aspect;
    return length(vec2(halfW, halfH)); 
}
vec2 texSize(sampler2D src) {
    return vec2(textureSize(src, 0));
}
float widthF(sampler2D src) { return texSize(src).x; }
vec2 uvForIndex(int i, sampler2D src) {
    float u = (float(i) + 0.5) / widthF(src);
    return vec2(u, 0.5);
}
vec4 readSlot(int i, sampler2D src) { return texture(src, uvForIndex(i, src)); }

out vec2 uv;
void main() {
    vec3 o_point = origin.xyz;
    o_point.z = mix(-10.,-28.,origin.z);
    o_point.xy = origin.xy * 2. - vec2(1.);
    o_point.xy *= minRadius(o_point.z, 45.0, canvas.x/canvas.y);
    mat4 t = translation(o_point);
    mat4 p = perspective_projection(canvas.x/canvas.y, 45.0, .01, -o_point.z + 5.);
    gl_Position = p * t * vec4(position.xy, 0.0, 1.0);
    uv = position.xy * 0.5 + 0.5;
    mat4 adjustScaleAndFlipY = mat4(
        1.0, 0.0, 0.0, 0.0,
        0.0, 2.25, 0.0, 0.0,
        0.0, 0.0, 1.0, 0.0,
        0.0, 0.0, 0.0, 1.0
    );
    mat4 s = adjustScaleAndFlipY;
    mat4 position_relative = translation(vec3(0., .6, 0.));
    mat4 t_ = position_relative;
    vec3 tiltXAxis = vec3(0.,1.,0.);
    vec3 tiltYAxis = vec3(1.,0.,0.);
    
    mat4 tiltXMat = rotation(tiltXAxis,readSlot(0,data).r * -80.);
    mat4 tiltYMat = rotation(tiltYAxis,readSlot(1,data).r * 45. + 180.);
    gl_Position = p * t * s * tiltXMat * tiltYMat * t_ * vec4(position.xy, 0.0, 1.0);
}`,showerhead_fs_default=`in vec2 uv;
void main() {
    
    vec3 col = vec3(0.); 
    float highlights = pow(texture(src,uv).r,4.0);
    outColor = vec4(col * sqrt(texture(src,uv).r) + highlights, texture(src,uv).a) * showUI;
    float colorSampleVal = fract(texture(src,uv).r * 2.);
    vec3 col2 = texture(colorTex, vec2(colorSampleVal,0.5)).rgb;
    outColor = vec4(col2 * sqrt(texture(src,uv).r) + highlights, texture(src,uv).a) * showUI;
    
    
    
}`,tilt_fs_default=`vec2 texSize(sampler2D src) {
    return vec2(textureSize(src, 0));
}
float widthF(sampler2D src) { return texSize(src).x; }
vec2 uvForIndex(int i, sampler2D src) {
    float u = (float(i) + 0.5) / widthF(src);
    return vec2(u, 0.5);
}
vec4 readSlot(int i, sampler2D src) { return texture(src, uvForIndex(i, src)); }
struct tDampedSpringMotionParams
{
    
    float m_posPosCoef, m_posVelCoef;
    
    float m_velPosCoef, m_velVelCoef;
};

void CalcDampedSpringMotionParams(
    inout tDampedSpringMotionParams pOutParams, 
    float                           deltaTime,  
    float                           angularFrequency, 
    float                           dampingRatio)     
{
    const float epsilon = 0.0001;

    
    float damping = max(dampingRatio, 0.0);
    float omega   = max(angularFrequency, 0.0);

    
    
    if ( omega < epsilon )
    {
        pOutParams.m_posPosCoef = 1.0; pOutParams.m_posVelCoef = 0.0;
        pOutParams.m_velPosCoef = 0.0; pOutParams.m_velVelCoef = 1.0;
        return;
    }

    if (damping > 1.0 + epsilon)
    {
        
        float za = -omega * damping;
        float zb =  omega * sqrt(damping*damping - 1.0);
        float z1 = za - zb;
        float z2 = za + zb;

        float e1 = exp( z1 * deltaTime );
        float e2 = exp( z2 * deltaTime );

        float invTwoZb = 1.0 / (2.0*zb); 

        float e1_Over_TwoZb = e1*invTwoZb;
        float e2_Over_TwoZb = e2*invTwoZb;

        float z1e1_Over_TwoZb = z1*e1_Over_TwoZb;
        float z2e2_Over_TwoZb = z2*e2_Over_TwoZb;

        pOutParams.m_posPosCoef =  e1_Over_TwoZb*z2 - z2e2_Over_TwoZb + e2;
        pOutParams.m_posVelCoef = -e1_Over_TwoZb    + e2_Over_TwoZb;

        pOutParams.m_velPosCoef = (z1e1_Over_TwoZb - z2e2_Over_TwoZb + e2)*z2;
        pOutParams.m_velVelCoef = -z1e1_Over_TwoZb + z2e2_Over_TwoZb;
    }
    else if (damping < 1.0 - epsilon)
    {
        
        float omegaZeta = omega * damping;
        float alpha     = omega * sqrt(1.0 - damping*damping);

        float expTerm = exp( -omegaZeta * deltaTime );
        float cosTerm = cos( alpha * deltaTime );
        float sinTerm = sin( alpha * deltaTime );

        float invAlpha = 1.0 / alpha;

        float expSin = expTerm*sinTerm;
        float expCos = expTerm*cosTerm;
        float expOmegaZetaSin_Over_Alpha = expTerm*omegaZeta*sinTerm*invAlpha;

        pOutParams.m_posPosCoef = expCos + expOmegaZetaSin_Over_Alpha;
        pOutParams.m_posVelCoef = expSin*invAlpha;

        pOutParams.m_velPosCoef = -expSin*alpha - omegaZeta*expOmegaZetaSin_Over_Alpha;
        pOutParams.m_velVelCoef =  expCos - expOmegaZetaSin_Over_Alpha;
    }
    else
    {
        
        float expTerm     = exp( -omega*deltaTime );
        float timeExp     = deltaTime*expTerm;
        float timeExpFreq = timeExp*omega;

        pOutParams.m_posPosCoef = timeExpFreq + expTerm;
        pOutParams.m_posVelCoef = timeExp;

        pOutParams.m_velPosCoef = -omega*timeExpFreq;
        pOutParams.m_velVelCoef = -timeExpFreq + expTerm;
    }
}

void UpdateDampedSpringMotion(
    inout float                     pPos,            
    inout float                     pVel,            
    float                           equilibriumPos,  
    tDampedSpringMotionParams       params)          
{
    float oldPos = pPos - equilibriumPos; 
    float oldVel = pVel;

    pPos = oldPos*params.m_posPosCoef + oldVel*params.m_posVelCoef + equilibriumPos;
    pVel = oldPos*params.m_velPosCoef + oldVel*params.m_velVelCoef;
}

float uDeltaTime      = 1.0/60.0;
float uAngularFrequency = 5.0;
float uDampingRatio     = 0.6;

int idx(vec2 uv) { return int(floor(uv.x * 100.)); }
in vec2 uv;
void main() {
    vec4 slot = vec4(0.,0.,0.,0.);
    float equilibrium = 0.;
    float lastVal = 0.;
    if (idx(uv) == 0) {
        slot = readSlot(0,src);
        lastVal = origin.x;
        equilibrium = (origin.x - slot.z) / uDeltaTime;
    }
    if (idx(uv) == 1) {
        slot = readSlot(1,src);
        lastVal = origin.y;
        equilibrium = (origin.y - slot.z) / uDeltaTime;
    }
    if (idx(uv) > 1) {
        discard;
    }

    float pos = slot.x;
    float vel = slot.y;

    
    float uEquilibrium = equilibrium * 0.5;

    
    tDampedSpringMotionParams P;
    CalcDampedSpringMotionParams(P, uDeltaTime, uAngularFrequency, uDampingRatio);

    
    UpdateDampedSpringMotion(pos, vel, uEquilibrium, P);

    
    outColor = vec4(pos,vel,lastVal,1.);
}`;function Tilt({compositionGlobalSig,compositionGlobal,raytunnelGlobal,raytunnelGlobalSig,quad,quadSig}){return build(ref=>({state_sig:TextureSignature$1({type:"RGBA32F",size:[100,1]}),p_compute:Program$2({vertexShader:`
                    out vec2 uv;
                    void main() {
                        uv = (position.xy + 1.0) * 0.5;
                        gl_Position = vec4(position, 0.0, 1.0);
                    }
                `,fragmentShader:tilt_fs_default,textures:{src:{filter:"nearest",wrap:"clamp"}},globalSignatures:{g:compositionGlobalSig,r:raytunnelGlobalSig},vertexSignature:quadSig}),out:Texture$2({signature:ref("state_sig"),historyLength:2,drawOps:[{program:ref("p_compute"),vertex:quad,globals:{g:compositionGlobal,r:raytunnelGlobal},textures:{src:{id:ref("out"),latency:1}}}]})}))}__name(Tilt,"Tilt");var computeConstraintPass_fs_default=`float minRadius(float nearAbs, float fovDeg, float aspect) {
    float halfH = nearAbs * tan(radians(fovDeg) * 0.5);
    float halfW = halfH * aspect;
    return length(vec2(halfW, halfH)); 
}

float restLength = 0.01;     
float omega = 1.;          
float kLR = 0.2;            
in vec2 uv;
vec3 endPos = vec3(5.0, -16.0, -30.0);
void main() {
    vec3 o_point = origin.xyz;
  o_point.z = mix(-10.,-28.,origin.z);
  o_point.xy = origin.xy * 2. - vec2(1.);
  o_point.xy *= minRadius(o_point.z, 45.0, canvas.x/canvas.y);
  o_point.y -= 3.2;

  int W = textureSize(src, 0).x;
  float texel = 1.0 / float(W);
  int i = clamp(int(floor(uv.x * float(W))), 0, W-1);
  float u  = (float(i) + 0.5) * texel;

  vec3 p = texture(src, vec2(u, 0.5)).xyz;
  vec3 corr = vec3(0.0);
  const float eps = 1e-6;

  if (i > 0) {
    float uL = (float(i-1) + 0.5) * texel;
    vec3 pL = texture(src, vec2(uL, 0.5)).xyz;
    vec3 d  = p - pL;
    float len = length(d) + eps;
    vec3 n  = d / len;
    vec3 c  = (len - restLength) * n;   
    corr   -= 0.5 * c;                  
  }
  if (i < W - 1) {
    float uR = (float(i+1) + 0.5) * texel;
    vec3 pR = texture(src, vec2(uR, 0.5)).xyz;
    vec3 d  = p - pR;
    float len = length(d) + eps;
    vec3 n  = d / len;
    vec3 c  = (len - restLength) * n;
    corr   -= 0.5 * c;
  }

  float maxStep = restLength; 
  float m = length(corr);
  if (m > maxStep) corr *= (maxStep / (m + 1e-6));
  p += omega * corr;

  if (i == 0)      p = o_point;
  if (i == W - 1)  p = endPos;

  outColor = vec4(p, 1.0);
}`,computeNewPos_fs_default=`float minRadius(float nearAbs, float fovDeg, float aspect) {
    float halfH = nearAbs * tan(radians(fovDeg) * 0.5);
    float halfW = halfH * aspect;
    return length(vec2(halfW, halfH)); 
}
vec3 endPos = vec3(5.,-16.,-30.);
float dt = 1. / 60.;         
float damping = 0.5;    
vec3 gravity = vec3(0.,-12.,0.);     
in vec2 uv;
void main() {
    vec3 o_point = origin.xyz;
  o_point.z = mix(-10.,-28.,origin.z);
  o_point.xy = origin.xy * 2. - vec2(1.);
  o_point.xy *= minRadius(o_point.z, 45.0, canvas.x/canvas.y);
  o_point.y -= 3.2;
  int W = textureSize(curPosTex, 0).x;
  float texel = 1.0 / float(W);
  int i = int(floor(uv.x * float(W)));
  float u = (float(i) + 0.5) * texel;

  vec3 pPrev = texture(lastPosTex, vec2(u, 0.5)).xyz;   
  vec3 pCur  = texture(curPosTex, vec2(u, 0.5)).xyz;  

  vec3 v     = (pCur - pPrev) * damping;
  vec3 pNew  = pCur + v + gravity * (dt * dt);

  vec3 pNewOnPole = o_point + vec3(0.,-float(i) * 0.01, 0.);

  if (i == 0)      pNew = o_point;
  if (i == W - 1)  pNew = endPos;
  
  
  
  float x = float(i) / float(W);
  pNew = mix(pNewOnPole,pNew, 1.- pow(1.-x,20.));
  pNew = mix(pNewOnPole,pNew, smoothstep(0.04,0.12,x));
  
  
  

  outColor = vec4(pNew, 1.0);
}`,drawLineSegment_vs_default=`mat4 perspective_projection(float aspect, float fov, float near, float far) {
    
    
    
    
    float top = near * tan(radians(fov) / 2.0);
    float right = top * aspect;
    return mat4(
        vec4(near / right, 0.0, 0.0, 0.0),
        vec4(0.0, near / top, 0.0, 0.0),
        vec4(0.0, 0.0, -(far + near) / (far - near), -1.0),
        vec4(0.0, 0.0, -(2.0 * far * near) / (far - near), 0.0)
    );
}

mat4 translation(vec3 vector) {
    return mat4(
        vec4(1.0, 0.0, 0.0, 0.0),
        vec4(0.0, 1.0, 0.0, 0.0),
        vec4(0.0, 0.0, 1.0, 0.0),
        vec4(vector, 1.0)
    );
}

mat4 rotation(vec3 axis, float angle) {

    axis = normalize(axis);
    mat3 w = mat3(
        vec3(0.0, axis.z, -axis.y),
        vec3(-axis.z, 0.0, axis.x),
        vec3(axis.y, -axis.x, 0.0)
    );

    mat3 I = mat3(
        vec3(1.0, 0.0, 0.0),
        vec3(0.0, 1.0, 0.0),
        vec3(0.0, 0.0, 1.0)
    );

    mat3 intermediate = mat3(
        I + sin(radians(angle)) * w + (1.0 - cos(radians(angle))) * w * w
    );

    return mat4(
        vec4(intermediate[0], 0.0),
        vec4(intermediate[1], 0.0),
        vec4(intermediate[2], 0.0),
        vec4(0.0, 0.0, 0.0, 1.0)
    );
}
float uHalfWidth = 0.18;             
float uHalfLengthScale = 20.;       

float uMaxHalfLength = 1.0;         

out vec2 uv;
out float pos;
void main() {
    vec2 aPos = position;
    uv = position;
  
  int W = textureSize(data, 0).x;
  int i = clamp(gl_InstanceID, 0, max(W - 1, 0));
  i = W-i;

  pos = float(i) / float(W);

  
  int j = (i < W - 1) ? (i + 1) : max(i - 1, 0);

  
  vec3 Pi = texelFetch(data, ivec2(i, 0), 0).xyz;
  vec3 Pj = texelFetch(data, ivec2(j, 0), 0).xyz;

  
  vec2 t = Pj.xy - Pi.xy;
  float L = length(t);
  vec2 tangent = (L > 1e-8) ? (t / L) : vec2(1.0, 0.0);
  vec2 normal  = vec2(-tangent.y, tangent.x);

  
  float halfLen = min(uHalfLengthScale * L * 0.5, uMaxHalfLength);

  
  vec2 offsetXY = normal  * (aPos.x * uHalfWidth) +
                  tangent * (aPos.y * uHalfWidth);

  vec3 worldPos = vec3(Pi.xy + offsetXY, Pi.z);

  mat4 p = perspective_projection(canvas.x/canvas.y, 45.0, 0.01, 100.0);
  gl_Position = p * vec4(worldPos, 1.0);
}`,drawLineSegment_fs_default=`in vec2 uv;                    
in float pos;

vec2  uCenter = vec2(0.0);     
float uRadius = 1.;            
float uFeatherPx = 0.;         

void main() {
        

        vec3 col = texture(colorTex, vec2(pos,0.)).rgb;
        vec3 COLOR_MID = col;
        vec3 COLOR_INNER   = vec3(0.,0.,0.);
    
    col += vec3(0.5);
  
  vec2  uViewport = canvas;
  vec2  dUV   = uv - uCenter;
  float r     = length(dUV);
  float px2uv = 2.0 / min(uViewport.x, uViewport.y); 
  float feather = max(uFeatherPx * px2uv, 1e-5);

  
  float a = 1.0 - smoothstep(uRadius - feather, uRadius + feather, r);
  if (a <= 0.0) { discard; }

  
  float t = uv.x * uv.x;

  vec3 base = mix(COLOR_INNER, COLOR_MID, t);
    outColor = vec4(base,a);

    float highlights = smoothstep(0.3,.7,t) * smoothstep(1.,0.9,t);

    float colorSampleVal = t * 0.75;
    vec3 col2 = texture(colorTex, vec2(colorSampleVal,0.5)).rgb;
    outColor = vec4(col2 * sqrt(t) + vec3(highlights) * 0.2, a) * showUI;
}`;const defaultVS=`
                    out vec2 uv;
                    void main() {
                        uv = (position.xy + 1.0) * 0.5;
                        gl_Position = vec4(position, 0.0, 1.0);
                    }
                `,get_constraint=__name((ref,compositionGlobal,raytunnelGlobal,quad,input)=>Texture$2({signature:ref("state_sig"),drawOps:[{program:ref("p_compute_constraint_pass"),vertex:quad,globals:{g:compositionGlobal,r:raytunnelGlobal},textures:{src:input}}]}),"get_constraint");function Rope({compositionGlobalSig,compositionGlobal,raytunnelGlobal,raytunnelGlobalSig,quad,quadSig,canvasSig}){return build(ref=>({state_sig:TextureSignature$1({type:"RGBA32F",size:[1e3,1]}),p_compute_new_pos:Program$2({vertexShader:defaultVS,fragmentShader:computeNewPos_fs_default,globalSignatures:{g:compositionGlobalSig,r:raytunnelGlobalSig},vertexSignature:quadSig,textures:{lastPosTex:{filter:"nearest",wrap:"clamp"},curPosTex:{filter:"nearest",wrap:"clamp"}}}),p_compute_constraint_pass:Program$2({vertexShader:defaultVS,fragmentShader:computeConstraintPass_fs_default,globalSignatures:{g:compositionGlobalSig,r:raytunnelGlobalSig},vertexSignature:quadSig,textures:{src:{filter:"nearest",wrap:"clamp"}}}),p_put_new_pos:Program$2({vertexShader:defaultVS,fragmentShader:`
                    in vec2 uv;
                    void main() {
                        outColor = texture(src,uv);
                    }
                `,globalSignatures:{},vertexSignature:quadSig,textures:{src:{filter:"nearest",wrap:"clamp"}}}),new_pos:Texture$2({signature:ref("state_sig"),drawOps:[{program:ref("p_compute_new_pos"),vertex:quad,globals:{g:compositionGlobal,r:raytunnelGlobal},textures:{lastPosTex:{id:ref("outPos"),latency:2},curPosTex:{id:ref("outPos"),latency:1}}}]}),constraint_1:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("new_pos")),constraint_2:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_1")),constraint_3:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_2")),constraint_4:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_3")),constraint_5:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_4")),constraint_6:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_5")),constraint_7:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_6")),constraint_8:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_7")),constraint_9:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_8")),constraint_10:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_9")),constraint_11:get_constraint(ref,compositionGlobal,raytunnelGlobal,quad,ref("constraint_10")),outPos:Texture$2({signature:ref("state_sig"),historyLength:3,drawOps:[{program:ref("p_put_new_pos"),vertex:quad,globals:{},textures:{src:ref("constraint_11")}}]}),rope_seg_instance_sig:InstanceSignature$1({attributes:{},maxInstanceCount:5e4}),rope_seg_instance:Instance$1({exportName:"rope_seg_instance",signature:ref("rope_seg_instance_sig")}),p_draw_rope:Program$2({vertexShader:drawLineSegment_vs_default,fragmentShader:drawLineSegment_fs_default,globalSignatures:{g:compositionGlobalSig,r:raytunnelGlobalSig},vertexSignature:quadSig,instanceSignature:ref("rope_seg_instance_sig"),textures:{data:{filter:"nearest",wrap:"clamp"},colorTex:{filter:"nearest",wrap:"clamp"}}}),out:Texture$2({signature:canvasSig,drawOps:[{program:ref("p_draw_rope"),vertex:quad,instance:ref("rope_seg_instance"),globals:{g:compositionGlobal,r:raytunnelGlobal},textures:{data:ref("outPos")}}]})}))}__name(Rope,"Rope");function Main(){return build(ref=>({showerhead_tex_sig:TextureSignature$1({size:[1e3,1e3],type:"RGBA8"}),showerhead_tex:Texture$2({signature:ref("showerhead_tex_sig"),exportName:"cyberspag_showerhead"}),p_draw_showerhead:Program$2({vertexShader:showerhead_vs_default,fragmentShader:showerhead_fs_default,vertexSignature:external("quadSig"),globalSignatures:{c:external("compositionGlobalSig"),g:ref("raytunnel_global_sig")},textures:{src:{filter:"linear",wrap:"repeat"},data:{filter:"nearest",wrap:"clamp"},colorTex:{filter:"nearest",wrap:"clamp"}}}),p_draw_bg:Program$2({vertexShader:`
                out vec2 uv;
                void main() {
                    gl_Position = vec4(position.xy, 0.0, 1.0);
                    uv = position.xy * 0.5 + 0.5;
                }
            `,fragmentShader:fog_fs_default,vertexSignature:external("quadSig"),globalSignatures:{c:external("compositionGlobalSig"),g:ref("raytunnel_global_sig")},textures:{src:{filter:"nearest",wrap:"clamp"}}}),raytunnel_tex:Texture$2({signature:external("canvasSig"),drawOps:[{program:ref("raytunnel_draw_ray"),vertex:external("quad"),instance:ref("raytunnel_ray"),globals:{g:ref("raytunnel_global"),t:external("compositionGlobal")},textures:{colorTex:ref("raytunnel_colorTex")},blend:"add"}]}),blur:Blur({quad:external("quad"),quadSig:external("quadSig"),inputTexture:ref("raytunnel_tex"),canvasSig:external("canvasSig"),compositionGlobal:external("compositionGlobal"),compositionGlobalSig:external("compositionGlobalSig")}),rope:Rope({compositionGlobal:external("compositionGlobal"),compositionGlobalSig:external("compositionGlobalSig"),quad:external("quad"),quadSig:external("quadSig"),raytunnelGlobal:ref("raytunnel_global"),raytunnelGlobalSig:ref("raytunnel_global_sig"),canvasSig:external("canvasSig")}),raytunnel:RayTunnel({timeline_sig:external("compositionGlobalSig"),quadSig:external("quadSig")}),p_fog:Program$2({vertexShader:`
                out vec2 uv;
                void main() {
                    gl_Position = vec4(position.xy, 0.0, 1.0);
                    uv = position.xy * 0.5 + 0.5;
                }
            `,fragmentShader:fog_fs_default,vertexSignature:external("quadSig"),globalSignatures:{c:external("compositionGlobalSig"),g:ref("raytunnel_global_sig")},textures:{src:{filter:"linear",wrap:"repeat"}}}),tilt:Tilt({compositionGlobal:external("compositionGlobal"),compositionGlobalSig:external("compositionGlobalSig"),quad:external("quad"),quadSig:external("quadSig"),raytunnelGlobal:ref("raytunnel_global"),raytunnelGlobalSig:ref("raytunnel_global_sig")}),out:Texture$2({signature:external("canvasSig"),drawOps:[{program:ref("p_draw_bg"),vertex:external("quad"),globals:{c:external("compositionGlobal"),g:ref("raytunnel_global")},textures:{src:ref("raytunnel_colorTex")}},{program:ref("rope_p_draw_rope"),vertex:external("quad"),instance:ref("rope_rope_seg_instance"),globals:{g:external("compositionGlobal"),r:ref("raytunnel_global")},textures:{data:ref("rope_outPos"),colorTex:ref("raytunnel_colorTex")}},{program:ref("p_draw_showerhead"),vertex:external("quad"),globals:{g:ref("raytunnel_global"),c:external("compositionGlobal")},textures:{src:ref("showerhead_tex"),data:{id:ref("tilt_out"),latency:0},colorTex:ref("raytunnel_colorTex")}},{program:ref("blur_p_drawTex"),vertex:external("quad"),globals:{},textures:{src:ref("raytunnel_tex")},blend:"add"},{program:ref("blur_p_drawTex"),vertex:external("quad"),globals:{},textures:{src:ref("blur_out")},blend:"add"}]})}))}__name(Main,"Main");const defaultControls={canvasWidth:1920,canvasHeight:1080,centerX:.5,centerY:.5,centerZ:.5,centerXLast:.5,centerYLast:.5,tiltX:0,tiltXLast:0,tiltY:0,tiltYLast:0,lastTimestamp:Date.now(),temperature:.5,pressure:.5,showUI:0,colorStops:[{color:{r:1,g:0,b:0},position:0,id:crypto.randomUUID()},{color:{r:0,g:0,b:1},position:.5,id:crypto.randomUUID()}]};let colorStopsHash="",cache$2;function colorTextureStream(state){const colorStops=[...state.colorStops].sort((a2,b2)=>a2.position-b2.position);if(colorStops[0].position!==0){const newColorStop={...colorStops[0],position:0};colorStops.push(newColorStop)}if(colorStops.sort((a2,b2)=>a2.position-b2.position),colorStops[colorStops.length-1].position!==1){const newColorStop={...colorStops[0],position:1};colorStops.push(newColorStop)}colorStops.sort((a2,b2)=>a2.position-b2.position);const hash=JSON.stringify(colorStops);if(hash===colorStopsHash&&cache$2!==void 0)return cache$2;colorStopsHash=hash;const colorBuffer=Array(400).fill(0);for(let i2=0;i2<colorBuffer.length/4;i2++){const pos=i2/(colorBuffer.length/4);for(let j2=0;j2<colorStops.length;j2++){let nextIdx=colorStops.length-1;if(pos<=colorStops[j2].position){nextIdx=j2;const currentIdx=nextIdx-1<0?0:nextIdx-1,next=colorStops[nextIdx],current=colorStops[currentIdx],relativePos=(pos-current.position)/(next.position-current.position===0?1:next.position-current.position);colorBuffer[i2*4]=current.color.r+relativePos*(next.color.r-current.color.r),colorBuffer[i2*4+1]=current.color.g+relativePos*(next.color.g-current.color.g),colorBuffer[i2*4+2]=current.color.b+relativePos*(next.color.b-current.color.b),colorBuffer[i2*4+3]=current.position+relativePos*(next.position-current.position);break}}}colorBuffer.forEach((value,index)=>{colorBuffer[index]=Math.floor(value*1e3)/1e3});const response={versionId:crypto.randomUUID(),commands:[{resource:"cyberspag_colorTexture",type:"setTextureData",payload:[colorBuffer]}]};return cache$2=response,response}__name(colorTextureStream,"colorTextureStream");let cache$1,sliceCache;function globalStream(state){const stateSlice={centerX:state.centerX,centerY:state.centerY,centerZ:state.centerZ,temperature:state.temperature,pressure:state.pressure,showUI:state.showUI};return JSON.stringify(stateSlice)===sliceCache||(sliceCache=JSON.stringify(stateSlice),cache$1={versionId:crypto.randomUUID(),commands:[{resource:"cyberspag_globals",type:"setGlobals",payload:[{origin:[state.centerX,state.centerY,state.centerZ,0],temperature:[state.temperature],pressure:[state.pressure],showUI:[state.showUI]}]},{resource:"cyberspag_blur",type:"setGlobals",payload:[{amount:[state.temperature]}]},{resource:"rope_seg_instance",type:"setInstanceData",payload:[{},1e3]}]}),cache$1}__name(globalStream,"globalStream");let cache,pressure;function rayInstanceStream(state){return pressure===state.pressure||(pressure=state.pressure,cache={versionId:crypto.randomUUID(),commands:[{resource:"cyberspag_ray",type:"setInstanceData",payload:[{},200+600*state.pressure]}]}),cache}__name(rayInstanceStream,"rayInstanceStream");function assetsStream(){return{versionId:"assetsLoaded",commands:[{resource:"cyberspag_showerhead",type:"setTextureData",payload:["asset://showerhead.png"]}]}}__name(assetsStream,"assetsStream");function renderStateReducer(state){const cyberspag_globalStream=globalStream(state),cyberspag_rayInstanceStream=rayInstanceStream(state),cyberspag_colorTextureStream=colorTextureStream(state),cyberspag_assetsStream=assetsStream();return{cyberspag_global:cyberspag_globalStream,cyberspag_ray:cyberspag_rayInstanceStream,cyberspag_colorTexture:cyberspag_colorTextureStream,cyberspag_assets:cyberspag_assetsStream}}__name(renderStateReducer,"renderStateReducer");var _externalStateSubscribers3,_JSONAsset_instances,notifyExternalStateSubscribers_fn3,_internalSubscribers3,notifyInternalSubscribers_fn3,_externalSubscribers3,notifyExternalSubscribers_fn3;const _JSONAsset=class _JSONAsset{constructor(data){__privateAdd(this,_JSONAsset_instances);__publicField(this,"data");__publicField(this,"externalState",crypto.randomUUID());__privateAdd(this,_externalStateSubscribers3,[]);__privateAdd(this,_internalSubscribers3,[]);__privateAdd(this,_externalSubscribers3,[]);this.data=data}setData(data){this.data=data,__privateMethod(this,_JSONAsset_instances,notifyExternalSubscribers_fn3).call(this)}receiveExternalUpdate(update){this.data=update,this.externalState=crypto.randomUUID(),__privateMethod(this,_JSONAsset_instances,notifyExternalStateSubscribers_fn3).call(this),__privateMethod(this,_JSONAsset_instances,notifyInternalSubscribers_fn3).call(this)}subscribeToExternalState(cb){return __privateGet(this,_externalStateSubscribers3).push(cb),()=>{__privateSet(this,_externalStateSubscribers3,__privateGet(this,_externalStateSubscribers3).filter(c=>c!==cb))}}getExternalState(){return this.externalState}subscribeInternal(cb){return __privateGet(this,_internalSubscribers3).push(cb),()=>{__privateSet(this,_internalSubscribers3,__privateGet(this,_internalSubscribers3).filter(c=>c!==cb))}}subscribeExternal(cb){return __privateGet(this,_externalSubscribers3).push(cb),()=>{__privateSet(this,_externalSubscribers3,__privateGet(this,_externalSubscribers3).filter(c=>c!==cb))}}getSnapshot(){return this.data}};_externalStateSubscribers3=new WeakMap,_JSONAsset_instances=new WeakSet,notifyExternalStateSubscribers_fn3=__name(function(){__privateGet(this,_externalStateSubscribers3).forEach(cb=>cb())},"#notifyExternalStateSubscribers"),_internalSubscribers3=new WeakMap,notifyInternalSubscribers_fn3=__name(function(){__privateGet(this,_internalSubscribers3).forEach(cb=>cb())},"#notifyInternalSubscribers"),_externalSubscribers3=new WeakMap,notifyExternalSubscribers_fn3=__name(function(){__privateGet(this,_externalSubscribers3).forEach(cb=>cb())},"#notifyExternalSubscribers"),__name(_JSONAsset,"JSONAsset");let JSONAsset=_JSONAsset;var _a19;let Controller$2=(_a19=class{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=new JSONAsset(data),this.data.subscribeExternal(()=>{var _a26;const update=(_a26=this.data)==null?void 0:_a26.getSnapshot();update&&this.update(update)}),this.initialised=!0}receiveUpdate(update){var _a26;(_a26=this.data)==null||_a26.receiveExternalUpdate(update)}receiveMetadataUpdate(){}getSnapshot(){var _a26;return(_a26=this.data)==null?void 0:_a26.getSnapshot()}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}},__name(_a19,"Controller"),_a19);reactExports.createContext(null);function JSONAssetCreator({children,defaultName:defaultName2="untitled",defaultData={},defaultType="default",preferredEditorAddress=""}){const{initialized:indexInitialized,index}=useIndex(),{FreeWorkload}=useCK();return reactExports.useEffect(()=>{if(indexInitialized){if(Object.entries(index.data).find(([assetId,assetMetadata])=>assetMetadata.type===defaultType&&assetMetadata.name===defaultName2)!==void 0)return;const workload=FreeWorkload();workload.thread("default").worker({instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},{createAsset:{asset:{data:defaultData,metadata:{type:defaultType,name:defaultName2,preferredEditorAddress:CONFIG.SELF_HOST+preferredEditorAddress},on_update:{type:"simple"},id:defaultName2}}}),workload.dispatch()}},[indexInitialized,index,FreeWorkload,defaultName2,defaultData,defaultType,preferredEditorAddress]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children})}__name(JSONAssetCreator,"JSONAssetCreator");function useJSONAssets(assetFilter){const{initialized:indexInitialized,index}=useIndex(),registeredAssets=indexInitialized?Object.entries(index.data).filter(([id,metadata])=>assetFilter(id,metadata)).map(([assetId])=>({assetId,assetController:new Controller$2})):[];return{...useAssets(registeredAssets),index}}__name(useJSONAssets,"useJSONAssets");const InteriorContext=reactExports.createContext(null);function Interior$1({controls,graphics,local,composition,timeline,index,children}){const[graphicsState,setGraphicsState]=reactExports.useState("start"),graphicsSnapshot=graphics.getSnapshot(),controlsSnapshot=controls.getSnapshot(),localSnapshot=local.getSnapshot(),compositionSnapshot=composition.getSnapshot(),indexSnapshot=index.getSnapshot(),updateGraphics=__name(newGraphics=>{setGraphicsState(newGraphics),graphics.setData({sourceId:graphicsState,source:newGraphics}),controls.setData({sourceId:graphicsState,renderState:controlsSnapshot})},"updateGraphics"),updateControls=__name(newControls=>{controls.setData({sourceId:graphicsState,renderState:newControls})},"updateControls"),updateLocal=__name(newLocal=>{local.setData(newLocal)},"updateLocal"),updateComposition=__name(newComposition=>{composition.setData(newComposition)},"updateComposition");return jsxRuntimeExports.jsx(InteriorContext.Provider,{value:{graphics:graphicsSnapshot,controls:controlsSnapshot,local:localSnapshot,timeline,index:indexSnapshot,composition:compositionSnapshot,updateComposition,updateGraphics,updateControls,updateLocal},children})}__name(Interior$1,"Interior$1");function Exterior({children,effectInstanceName}){const{initialized,index,assets:jsonAssets}=useJSONAssets((id,metadata)=>id===`${effectInstanceName}.controls`&&metadata.type==="controls"||id===`${effectInstanceName}.graphics`&&metadata.type==="graphics"||id===`${effectInstanceName}.local`&&metadata.type==="local"||id==="default.composition"&&metadata.type==="composition"),timeline=useTimeline();return initialized&&jsonAssets[`${effectInstanceName}.controls`]&&jsonAssets[`${effectInstanceName}.graphics`]&&jsonAssets[`${effectInstanceName}.local`]&&jsonAssets["default.composition"]&&timeline?jsxRuntimeExports.jsx(Interior$1,{controls:jsonAssets[`${effectInstanceName}.controls`].data,graphics:jsonAssets[`${effectInstanceName}.graphics`].data,local:jsonAssets[`${effectInstanceName}.local`].data,composition:jsonAssets["default.composition"].data,timeline,index,children}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(Exterior,"Exterior");function useEffectFoundation(){const context=reactExports.useContext(InteriorContext);if(!context)throw new Error("useEffectFoundation must be used within an EffectFoundation");return context}__name(useEffectFoundation,"useEffectFoundation");function EffectFoundation({children,defaultControls:defaultControls2,defaultGraphics,defaultLocal,effectInstanceName}){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(JSONAssetCreator,{defaultName:"default.composition",defaultData:{canvasDimensions:[1920,1080],compositionName:effectInstanceName,layers:[{effects:[{instanceId:effectInstanceName}]}]},defaultType:"composition",children:jsxRuntimeExports.jsx(JSONAssetCreator,{defaultName:`${effectInstanceName}.controls`,defaultData:{sourceId:"start",renderState:defaultControls2},defaultType:"controls",children:jsxRuntimeExports.jsx(JSONAssetCreator,{defaultName:`${effectInstanceName}.local`,defaultData:defaultLocal,defaultType:"local",children:jsxRuntimeExports.jsx(JSONAssetCreator,{defaultName:`${effectInstanceName}.graphics`,defaultData:{sourceId:"start",source:defaultGraphics},defaultType:"graphics",children:jsxRuntimeExports.jsx(TimelineProvider,{defaultName:"default.timeline",children:jsxRuntimeExports.jsx(Exterior,{effectInstanceName,children})})})})})})})}__name(EffectFoundation,"EffectFoundation");function CyberSpaghettiControlsInterior$1(){const{controls,graphics,index,local,timeline,composition,updateControls,updateGraphics,updateLocal,updateComposition}=useEffectFoundation(),state=local;reactExports.useEffect(()=>{timeline.project.timelineData.focusRange[1]!==300&&timeline.projectTools.updateFocusRange([0,300],!0)},[timeline]);const dimensionsRef=reactExports.useRef([-1,-1]),updateCb=reactExports.useCallback(lodashExports.throttle((state2,patch,composition2)=>{let nextLocal={...state2,...patch};updateLocal(nextLocal);const nextControls=renderStateReducer(nextLocal);(nextLocal.canvasWidth!==dimensionsRef.current[0]||nextLocal.canvasHeight!==dimensionsRef.current[1])&&(dimensionsRef.current=[nextLocal.canvasWidth,nextLocal.canvasHeight],updateComposition({...composition2,canvasDimensions:[nextLocal.canvasWidth,nextLocal.canvasHeight]})),updateControls(nextControls)},50),[]),update=__name(patch=>{updateCb(state,patch,composition)},"update"),labelRowStyle={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:2},groupedRowStyle={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginBottom:2};return jsxRuntimeExports.jsxs("div",{className:"hyperspeed-controls",style:{display:"flex",gap:"20px",flexDirection:"column",backgroundColor:"var(--gray1)",width:"100vw",height:"100vh",padding:"1rem",color:"var(--gray6)",overflow:"scroll",scrollbarColor:"var(--gray3) var(--gray1)"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx("h2",{style:{color:"var(--gray7)",fontWeight:"normal"},children:"Neon Shower (Beta)"}),"v.0.0.0"]}),jsxRuntimeExports.jsx("hr",{}),"Customize to your liking below.",jsxRuntimeExports.jsx(CollapsibleSection,{iconName:"grid_guides",title:"Composition",defaultOpen:!0,children:jsxRuntimeExports.jsxs("div",{style:groupedRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Canvas Size"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasWidth,min:0,max:3840,step:10,onCommit:__name(v2=>update({canvasWidth:v2}),"onCommit")}),jsxRuntimeExports.jsx("span",{style:{margin:"0 0.5rem"},children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasHeight,min:0,max:3840,step:10,onCommit:__name(v2=>update({canvasHeight:v2}),"onCommit")})]})]})}),jsxRuntimeExports.jsxs(CollapsibleSection,{iconName:"shower",title:"Showerhead",defaultOpen:!0,children:[jsxRuntimeExports.jsx("span",{style:{display:"block",marginBottom:4,color:"var(--gray6)",fontWeight:500},children:"Colors"}),jsxRuntimeExports.jsx("div",{style:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1.5rem"},children:jsxRuntimeExports.jsx(GradientPicker,{stops:state.colorStops,onChange:__name(colors=>{update({colorStops:colors})},"onChange"),style:{width:"100%",height:"200px"}})}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Pressure"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.pressure,min:0,max:1,step:.01,onChange:__name(v2=>update({pressure:v2,showUI:1}),"onChange"),onCommit:__name(v2=>update({pressure:v2,showUI:0}),"onCommit")})]}),jsxRuntimeExports.jsxs("div",{style:labelRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Temperature"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.temperature,min:0,max:1,step:.01,onChange:__name(v2=>update({temperature:v2,showUI:1}),"onChange"),onCommit:__name(v2=>update({temperature:v2,showUI:0}),"onCommit")})]}),jsxRuntimeExports.jsxs("div",{style:groupedRowStyle,children:[jsxRuntimeExports.jsx("span",{children:"Position"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[jsxRuntimeExports.jsx("span",{style:{margin:"0 0.5rem"},children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.centerX,min:0,max:1,step:.01,onChange:__name(v2=>update({centerX:v2,showUI:1}),"onChange"),onCommit:__name(v2=>update({centerX:v2,showUI:0}),"onCommit")}),jsxRuntimeExports.jsx("span",{style:{margin:"0 0.5rem"},children:"y"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.centerY,min:0,max:1,step:.01,onChange:__name(v2=>update({centerY:v2,showUI:1}),"onChange"),onCommit:__name(v2=>update({centerY:v2,showUI:0}),"onCommit")}),jsxRuntimeExports.jsx("span",{style:{margin:"0 0.5rem"},children:"z"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.centerZ,min:0,max:1,step:.01,onChange:__name(v2=>update({centerZ:v2,showUI:1}),"onChange"),onCommit:__name(v2=>update({centerZ:v2,showUI:0}),"onCommit")})]})]})]}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Give Feedback",iconName:"favorite",children:jsxRuntimeExports.jsx("div",{style:{marginBottom:"1rem",color:"var(--gray6)"},children:jsxRuntimeExports.jsx(FeedbackBox,{preamble:"[FEEDBACK FROM NEONSHOWER] "})})})]})}__name(CyberSpaghettiControlsInterior$1,"CyberSpaghettiControlsInterior$1");function CyberSpaghettiControls$1(){const[loadedImage,setLoadedImage]=reactExports.useState(null);return reactExports.useEffect(()=>{const img=new Image;img.src="/pinsandcurves-panels/neonshower/showerhead.png",img.onload=()=>{const canvas=document.createElement("canvas");canvas.width=img.width,canvas.height=img.height;const ctx=canvas.getContext("2d");ctx==null||ctx.drawImage(img,0,0);const dataUrl=canvas.toDataURL();setLoadedImage(dataUrl)}},[]),jsxRuntimeExports.jsx(EffectFoundation,{defaultControls:renderStateReducer(defaultControls),defaultGraphics:exportResources(Main()),defaultLocal:defaultControls,effectInstanceName:"NeonShowerV0",children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CyberSpaghettiControlsInterior$1,{}),loadedImage&&jsxRuntimeExports.jsx(JSONAssetCreator,{defaultName:"showerhead.png",defaultData:loadedImage,defaultType:"png",children:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})})]})})}__name(CyberSpaghettiControls$1,"CyberSpaghettiControls$1");async function imagesToMp4$1(frames,{width,height,fps,bitrate=2e7,filename="video.mp4"}){if(!("VideoEncoder"in globalThis))throw new Error("WebCodecs VideoEncoder is not available in this environment.");const target=new ArrayBufferTarget,muxer=new Muxer({target,video:{codec:"avc",width,height,frameRate:fps},fastStart:"in-memory"}),encoder=new VideoEncoder({output:__name((chunk,meta)=>muxer.addVideoChunk(chunk,meta),"output"),error:__name(e2=>console.error("VideoEncoder error:",e2),"error")});encoder.configure({codec:"avc1.42003D",width,height,bitrate,framerate:fps});const frameDurationUs=1e6/fps;let pts=0;for(const dataUrl of frames){const blob=await(await fetch(dataUrl)).blob(),bitmap=await createImageBitmap(blob),videoFrame=new VideoFrame(bitmap,{timestamp:pts});encoder.encode(videoFrame),videoFrame.close(),bitmap.close(),pts+=frameDurationUs}await encoder.flush(),encoder.close(),muxer.finalize();const{buffer}=target;return new Blob([buffer],{type:"video/mp4"})}__name(imagesToMp4$1,"imagesToMp4$1");var _timeline3,_width3,_height3,_anticipatedFrame3,_frames3,_canvas3,_secondcanvas,_compName,_captureFrameCallback,_subscribers3,_status3,_renderMode3,_rendering3,_a20;let FrameSaver$1=(_a20=class{constructor({timeline,width,height}){__privateAdd(this,_timeline3);__privateAdd(this,_width3);__privateAdd(this,_height3);__privateAdd(this,_anticipatedFrame3);__privateAdd(this,_frames3,[]);__privateAdd(this,_canvas3);__privateAdd(this,_secondcanvas);__privateAdd(this,_compName,"untitled");__privateAdd(this,_captureFrameCallback,null);__privateAdd(this,_subscribers3,[]);__privateAdd(this,_status3,{rendering:!1,totalFrames:0,renderedFrames:0});__privateAdd(this,_renderMode3,"imseq");__privateAdd(this,_rendering3,!1);__privateSet(this,_timeline3,timeline),__privateSet(this,_width3,width),__privateSet(this,_height3,height),__privateSet(this,_canvas3,document.createElement("canvas")),__privateSet(this,_secondcanvas,document.createElement("canvas"))}setName(name2){__privateSet(this,_compName,name2)}setSize(width,height){let cwidth=width,cheight=height;width%2!==0&&(cwidth=width+1),height%2!==0&&(cheight=height+1),__privateSet(this,_width3,width),__privateSet(this,_height3,height),__privateGet(this,_canvas3).width=cwidth,__privateGet(this,_canvas3).height=cheight,__privateGet(this,_secondcanvas).width=cwidth,__privateGet(this,_secondcanvas).height=cheight}attachCaptureFrame(callback){__privateSet(this,_captureFrameCallback,callback)}subscribe(cb){return __privateGet(this,_subscribers3).push(cb),()=>{__privateSet(this,_subscribers3,__privateGet(this,_subscribers3).filter(s2=>s2!==cb))}}getStatus(){return __privateGet(this,_status3)}frame(){if(!__privateGet(this,_rendering3)||!__privateGet(this,_canvas3)||!__privateGet(this,_secondcanvas)||!__privateGet(this,_captureFrameCallback))return;const project=__privateGet(this,_timeline3).getProject(),currentFrame=project.timelineData.playheadPosition;if(currentFrame!==__privateGet(this,_anticipatedFrame3))return;const focusRange=project.timelineData.focusRange;if(currentFrame<focusRange[1]){const canvas=__privateGet(this,_canvas3),tmp=__privateGet(this,_secondcanvas),tmpCtx=tmp.getContext("2d"),ctx=canvas.getContext("2d"),data=__privateGet(this,_captureFrameCallback).call(this),w2=__privateGet(this,_width3),h2=__privateGet(this,_height3),clamped=data instanceof Uint8ClampedArray?data:new Uint8ClampedArray(data.buffer,data.byteOffset,data.byteLength);if(clamped.length!==w2*h2*4)throw new Error(`Bad length: got ${clamped.length}, expected ${w2*h2*4}`);const imageData=new ImageData(clamped,__privateGet(this,_width3),__privateGet(this,_height3));tmpCtx.putImageData(imageData,0,0),ctx.setTransform(1,0,0,-1,0,h2),ctx.drawImage(tmp,0,0),ctx==null||ctx.setTransform(1,0,0,1,0,0);const dataurl=canvas.toDataURL("image/png");__privateGet(this,_frames3).push(dataurl),__privateSet(this,_anticipatedFrame3,currentFrame+1),__privateGet(this,_timeline3).projectTools.updatePlayheadPosition(currentFrame+1,!0),__privateSet(this,_status3,{...__privateGet(this,_status3),renderedFrames:__privateGet(this,_status3).renderedFrames+1})}else{const jszip=new JSZip,folder=jszip.folder("frames");__privateGet(this,_frames3).forEach((frame,index)=>{const base64Data=frame.split(",")[1],binaryString=window.atob(base64Data),binaryLen=binaryString.length,bytes2=new Uint8Array(binaryLen);for(let i2=0;i2<binaryLen;i2++)bytes2[i2]=binaryString.charCodeAt(i2);const fileName="frame"+String(index).padStart(5,"0")+".png";folder.file(fileName,bytes2,{base64:!0})}),__privateGet(this,_renderMode3)==="imseq"&&jszip.generateAsync({type:"blob"}).then(content=>{const blobUrl=URL.createObjectURL(content),a2=document.createElement("a");a2.href=blobUrl,a2.download=`${__privateGet(this,_compName)}.zip`,a2.click(),URL.revokeObjectURL(blobUrl),__privateSet(this,_status3,{...__privateGet(this,_status3),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline3).projectTools.updatePlayheadPosition(0,!0)}),__privateGet(this,_renderMode3)==="mp4"&&imagesToMp4$1(__privateGet(this,_frames3),{width:__privateGet(this,_width3),height:__privateGet(this,_height3),fps:30}).then(mp4Blob=>{const mp4BlobUrl=URL.createObjectURL(mp4Blob),a2=document.createElement("a");a2.href=mp4BlobUrl,a2.download=`${__privateGet(this,_compName)}.mp4`,a2.click(),URL.revokeObjectURL(mp4BlobUrl),__privateSet(this,_status3,{...__privateGet(this,_status3),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline3).projectTools.updatePlayheadPosition(0,!0)}),__privateSet(this,_frames3,[]),__privateSet(this,_anticipatedFrame3,0),__privateSet(this,_rendering3,!1)}}beginImSeq(){__privateGet(this,_rendering3)||(__privateSet(this,_renderMode3,"imseq"),this.begin())}beginMp4(){__privateGet(this,_rendering3)||(__privateSet(this,_renderMode3,"mp4"),this.begin())}begin(){__privateSet(this,_rendering3,!0);const focusRange=__privateGet(this,_timeline3).getProject().timelineData.focusRange;__privateSet(this,_anticipatedFrame3,focusRange[0]),__privateSet(this,_status3,{rendering:!0,totalFrames:focusRange[1]-focusRange[0],renderedFrames:0}),__privateGet(this,_timeline3).projectTools.updatePlayheadPosition(focusRange[0],!0)}saveFrame(){const canvas=__privateGet(this,_canvas3),tmp=__privateGet(this,_secondcanvas),ctx=canvas.getContext("2d"),tmpCtx=tmp.getContext("2d"),data=__privateGet(this,_captureFrameCallback).call(this),w2=__privateGet(this,_width3),h2=__privateGet(this,_height3),clamped=data instanceof Uint8ClampedArray?data:new Uint8ClampedArray(data.buffer,data.byteOffset,data.byteLength);if(clamped.length!==w2*h2*4)throw new Error(`Bad length: got ${clamped.length}, expected ${w2*h2*4}`);const imageData=new ImageData(clamped,__privateGet(this,_width3),__privateGet(this,_height3));tmpCtx.putImageData(imageData,0,0),ctx.setTransform(1,0,0,-1,0,h2),ctx.drawImage(tmp,0,0),ctx==null||ctx.setTransform(1,0,0,1,0,0);const dataUrl=canvas.toDataURL("image/png"),a2=document.createElement("a");a2.href=dataUrl,a2.style.display="none",a2.download="frame.png",document.body.appendChild(a2),a2.click(),document.body.removeChild(a2)}},_timeline3=new WeakMap,_width3=new WeakMap,_height3=new WeakMap,_anticipatedFrame3=new WeakMap,_frames3=new WeakMap,_canvas3=new WeakMap,_secondcanvas=new WeakMap,_compName=new WeakMap,_captureFrameCallback=new WeakMap,_subscribers3=new WeakMap,_status3=new WeakMap,_renderMode3=new WeakMap,_rendering3=new WeakMap,__name(_a20,"FrameSaver"),_a20);function isBrowserKnownToWork$1(){const ua=navigator.userAgent;return/Chrome\/\d+/.test(ua)&&!/Edg/.test(ua)&&!/OPR/.test(ua)?!0:(/Firefox/.test(ua)||/Safari/.test(ua)&&!/Chrome/.test(ua),!1)}__name(isBrowserKnownToWork$1,"isBrowserKnownToWork$1");function FrameSaverScreen$1({frameSaver,recordEvent,compName}){const{rendering,totalFrames,renderedFrames}=React.useSyncExternalStore(frameSaver.subscribe.bind(frameSaver),frameSaver.getStatus.bind(frameSaver)),videoEncoderAvailable=isBrowserKnownToWork$1(),{FreeWorkload}=useCK();useUnit(unit=>"beginRender"in unit.payload,(unit,workload)=>{workload.thread("default").worker(globalThis.CK_INSTANCE,{beginRender_response:!0}),workload.dispatch()});const[displayOverlay,setDisplayOverlay]=React.useState(!1),registerUnitProcessor=useRegisterUnitProcessor();return jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:10},children:[jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginImSeq(),recordEvent({path:`${compName}-renderframes-imseq`,event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export image sequence",iconName:"animated_images"}),videoEncoderAvailable&&jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginMp4(),recordEvent({path:`${compName}-renderframes-mp4`,event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export as .mp4",iconName:"movie"}),jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{recordEvent({path:`${compName}-saveframe`,event:!0}),frameSaver.saveFrame()},"onClick"),text:"export frame",iconName:"camera"}),displayOverlay&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:30,color:"var(--gray6)",backgroundColor:"var(--gray1)",borderRadius:"var(--borderRadiusSmall)",marginLeft:20,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:40},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:10,right:10},children:!rendering&&jsxRuntimeExports.jsx(Icon,{iconName:"close",onClick:__name(()=>{setDisplayOverlay(!1)},"onClick")})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",fontSize:20,fontWeight:600},children:rendering?`Rendering: ${renderedFrames} / ${totalFrames}`:"Done!"}),jsxRuntimeExports.jsx("div",{children:rendering?"Your download will begin shortly...":null})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{children:"If you enjoy using this tool, subscribe to our email newsletter to get updates on new features and releases!"}),jsxRuntimeExports.jsx(Button,{bgColor:"var(--yellow3)",color:"var(--gray1)",hoverBgColor:"var(--yellow2)",hoverColor:"var(--gray1)",onClick:__name(()=>{window.open("http://eepurl.com/i6WBsQ","_blank")},"onClick"),text:"Subscribe to newsletter",iconName:"email"})]})]})]})}__name(FrameSaverScreen$1,"FrameSaverScreen$1");function PlayButton$1({togglePlaying,playing}){return jsxRuntimeExports.jsx(Button,{iconName:playing?"pause":"play_arrow",bgColor:"var(--green2)",hoverBgColor:"var(--green1)",color:"var(--gray8)",onClick:togglePlaying})}__name(PlayButton$1,"PlayButton$1");function TimelineBar$1({timeline}){const project=reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline)),togglePlaying=__name(()=>{const project2=timeline.getProject(),isPlaying=project2.timelineData.playing,currentFrame=project2.timelineData.playheadPosition;isPlaying?timeline.projectTools.updatePlayheadPosition(currentFrame,!0):timeline.projectTools.startPlayback()},"togglePlaying");return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:"20px"},children:[jsxRuntimeExports.jsx(PlayButton$1,{togglePlaying,playing:timeline.getProject().timelineData.playing}),jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",width:"100px"},children:`${project.timelineData.playheadPosition} / ${project.timelineData.focusRange[1]}`})]})}__name(TimelineBar$1,"TimelineBar$1");const _PersistentResource=class _PersistentResource{constructor(resources,id,data,gl2){__publicField(this,"resourceType","persistent");__publicField(this,"id");__publicField(this,"data");__publicField(this,"gl");__publicField(this,"resources");this.id=id,this.data=data,this.resources=resources,this.gl=gl2}};__name(_PersistentResource,"PersistentResource");let PersistentResource=_PersistentResource;const _VariableResource=class _VariableResource{constructor(resources,id,data,gl2){__publicField(this,"resourceType","variable");__publicField(this,"id");__publicField(this,"data");__publicField(this,"resources");__publicField(this,"dirty",!0);__publicField(this,"dependsOn",[]);__publicField(this,"isDependencyOf",[]);__publicField(this,"gl");this.id=id,this.data=data,this.resources=resources,this.gl=gl2}markAndPropagateDirty(){this.dirty=!0;for(const dep of this.isDependencyOf){const resource=this.resources.get(dep);resource&&"markAndPropagateDirty"in resource&&resource.markAndPropagateDirty()}}};__name(_VariableResource,"VariableResource");let VariableResource=_VariableResource;function generateUniformBlockString$1(uniformProvider){let block=`layout(std140) uniform ${uniformProvider.uniformProviderName} {
`;for(const uniform of uniformProvider.uniformStructure)block+=`    ${uniform.type} ${uniform.name};
`;return block+=`};
`,block}__name(generateUniformBlockString$1,"generateUniformBlockString$1");function generateVertexBlockString$1(vertexProvider,instanceProvider){let block="";for(let i2=0;i2<vertexProvider.vertexStructure.length;i2++){const vertex=vertexProvider.vertexStructure[i2];block+=`layout(location = ${i2}) in ${vertex.type} ${vertex.name};
`}if(instanceProvider)for(let i2=0;i2<instanceProvider.instanceStructure.length;i2++){const instance=instanceProvider.instanceStructure[i2];block+=`layout(location = ${i2+vertexProvider.vertexStructure.length}) in ${instance.type} ${instance.name};
`}return block}__name(generateVertexBlockString$1,"generateVertexBlockString$1");const _ProgramProvider=class _ProgramProvider{constructor(gl2,programDes){__publicField(this,"gl");__publicField(this,"programDescription");__publicField(this,"program",null);if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.programDescription=programDes,this.setup()}dispose(){this.program&&(this.gl.deleteProgram(this.program),this.program=null)}setup(){const vertexShaderSource=`#version 300 es
        precision mediump float;
        precision mediump int;
        ${this.programDescription.uniformProviderSignatures.map(sig=>generateUniformBlockString$1(sig)).join(`
`)}
        ${generateVertexBlockString$1(this.programDescription.vertexProviderSignature,this.programDescription.instanceProviderSignature)}
        ${this.programDescription.textureNames.map(name2=>`uniform sampler2D ${name2};`).join(`
`)}
        ${this.programDescription.vertexShader}
        `,fragmentShaderSource=`#version 300 es
        precision mediump float;
        precision mediump int;
        out vec4 outColor;
        ${this.programDescription.uniformProviderSignatures.map(sig=>generateUniformBlockString$1(sig)).join(`
`)}
        ${this.programDescription.textureNames.map(name2=>`uniform sampler2D ${name2};`).join(`
`)}
        ${this.programDescription.fragmentShader}
        `,vertexShader=this.gl.createShader(this.gl.VERTEX_SHADER);if(!vertexShader)throw new Error("Failed to create vertex shader");if(this.gl.shaderSource(vertexShader,vertexShaderSource),this.gl.compileShader(vertexShader),!this.gl.getShaderParameter(vertexShader,this.gl.COMPILE_STATUS)){const error=this.gl.getShaderInfoLog(vertexShader);throw this.gl.deleteShader(vertexShader),new Error(`Vertex shader compilation failed: ${error}`)}const fragmentShader=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(!fragmentShader)throw new Error("Failed to create fragment shader");if(this.gl.shaderSource(fragmentShader,fragmentShaderSource),this.gl.compileShader(fragmentShader),!this.gl.getShaderParameter(fragmentShader,this.gl.COMPILE_STATUS)){const error=this.gl.getShaderInfoLog(fragmentShader);throw this.gl.deleteShader(fragmentShader),console.log(fragmentShaderSource),new Error(`Fragment shader compilation failed: ${error}`)}if(this.program=this.gl.createProgram(),!this.program)throw new Error("Failed to create program");if(this.gl.attachShader(this.program,vertexShader),this.gl.attachShader(this.program,fragmentShader),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){const error=this.gl.getProgramInfoLog(this.program);throw this.gl.deleteProgram(this.program),new Error(`Program linking failed: ${error}`)}this.gl.deleteShader(vertexShader),this.gl.deleteShader(fragmentShader)}};__name(_ProgramProvider,"ProgramProvider");let ProgramProvider=_ProgramProvider;var _a21;let Program$1=(_a21=class extends PersistentResource{constructor(resources,id,data,gl2){super(resources,id,data,gl2);__publicField(this,"type","Program");__publicField(this,"programProvider");this.programProvider=new ProgramProvider(gl2,{vertexShader:data.vertexShader,fragmentShader:data.fragmentShader,uniformProviderSignatures:Object.keys(data.globalSignatures).map(signatureKey=>{const signature=data.globalSignatures[signatureKey],res=this.resources.get(signature);if(!res)throw new Error(`Global signature ${signature} not found for program ${id}`);const sig=res.data,uniformStructure=[];for(const[name2,type]of Object.entries(sig))uniformStructure.push({name:name2,type});return{uniformProviderName:signatureKey,uniformStructure}}),vertexProviderSignature:(()=>{const res=this.resources.get(data.vertexSignature);if(!res)throw new Error(`Vertex signature ${data.vertexSignature} not found for program ${id}`);const sig=res.data,vertexStructure=[];for(const[name2,type]of Object.entries(sig.attributes))vertexStructure.push({name:name2,type});return{vertexProviderName:data.vertexSignature,vertexStructure,maxTriangleCount:sig.maxTriangleCount,maxVertexCount:sig.maxVertexCount}})(),instanceProviderSignature:(()=>{if(data.instanceSignature){const res=this.resources.get(data.instanceSignature);if(!res)throw new Error(`Instance signature ${data.instanceSignature} not found for program ${id}`);const sig=res.data,instanceStructure=[];for(const[name2,type]of Object.entries(sig.attributes))instanceStructure.push({name:name2,type});return{instanceProviderName:data.instanceSignature,instanceStructure,maxInstanceCount:sig.maxInstanceCount}}else return})(),textureNames:Object.keys(data.textures||{})})}dispose(){this.programProvider.dispose()}},__name(_a21,"Program"),_a21);const _VertexSignature=class _VertexSignature extends PersistentResource{constructor(){super(...arguments);__publicField(this,"type","VertexSignature")}dispose(){}};__name(_VertexSignature,"VertexSignature");let VertexSignature=_VertexSignature;const _InstanceSignature=class _InstanceSignature extends PersistentResource{constructor(){super(...arguments);__publicField(this,"type","InstanceSignature")}dispose(){}};__name(_InstanceSignature,"InstanceSignature");let InstanceSignature=_InstanceSignature;const _GlobalSignature=class _GlobalSignature extends PersistentResource{constructor(){super(...arguments);__publicField(this,"type","GlobalSignature")}dispose(){}};__name(_GlobalSignature,"GlobalSignature");let GlobalSignature=_GlobalSignature;const _TextureSignature=class _TextureSignature extends PersistentResource{constructor(){super(...arguments);__publicField(this,"type","TextureSignature")}dispose(){}};__name(_TextureSignature,"TextureSignature");let TextureSignature=_TextureSignature;const getUploadInfo$1=__name((t2,gl2)=>{switch(t2){case"RGBA8":return{internalFormat:gl2.RGBA8,format:gl2.RGBA,type:gl2.UNSIGNED_BYTE};case"R8":return{internalFormat:gl2.R8,format:gl2.RED,type:gl2.UNSIGNED_BYTE};case"R32F":return{internalFormat:gl2.R32F,format:gl2.RED,type:gl2.FLOAT};case"RGBA32F":return{internalFormat:gl2.RGBA32F,format:gl2.RGBA,type:gl2.FLOAT};default:throw new Error("Unknown texture type")}},"getUploadInfo$1");var _a22;let Texture$1=(_a22=class{constructor(gl2,description){__publicField(this,"description");__publicField(this,"gl");__publicField(this,"framebuffer",null);__publicField(this,"texture",null);this.gl=gl2,this.description=description,this.setup()}dispose(){this.framebuffer&&(this.gl.deleteFramebuffer(this.framebuffer),this.framebuffer=null),this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}setup(){const{internalFormat,format:format2,type}=getUploadInfo$1(this.description.type,this.gl);if(this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,internalFormat,this.description.shape[0],this.description.shape[1],0,format2,type,null),this.description.createFramebuffer){if(this.framebuffer=this.gl.createFramebuffer(),!this.framebuffer)throw new Error("Failed to create framebuffer");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0);const status=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(status!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error(`Framebuffer is not complete: ${status}`);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}this.gl.bindTexture(this.gl.TEXTURE_2D,null)}setData(data){if(!this.texture)throw new Error("Texture not initialized");const{format:format2,type}=getUploadInfo$1(this.description.type,this.gl),[width,height]=this.description.shape,gl2=this.gl;if(gl2.bindTexture(gl2.TEXTURE_2D,this.texture),gl2.pixelStorei(gl2.UNPACK_ALIGNMENT,1),data instanceof HTMLImageElement){const{internalFormat}=getUploadInfo$1(this.description.type,gl2);gl2.texImage2D(gl2.TEXTURE_2D,0,internalFormat,format2,type,data)}else if(data instanceof Float32Array||data instanceof Uint8Array)gl2.texSubImage2D(gl2.TEXTURE_2D,0,0,0,width,height,format2,type,data);else{let typedArray=null;this.description.type==="RGBA8"||this.description.type==="R8"?typedArray=new Uint8Array(data):(this.description.type==="R32F"||this.description.type==="RGBA32F")&&(typedArray=new Float32Array(data)),typedArray&&gl2.texSubImage2D(gl2.TEXTURE_2D,0,0,0,width,height,format2,type,typedArray)}gl2.bindTexture(gl2.TEXTURE_2D,null)}},__name(_a22,"Texture"),_a22);function getPropertyTypeSize(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${type}`)}}__name(getPropertyTypeSize,"getPropertyTypeSize");function getPropertyTypeType(type,gl2){switch(type){case"float":case"vec2":case"vec4":return gl2.FLOAT;case"int":return gl2.INT;default:throw new Error(`Unknown vertex type: ${type}`)}}__name(getPropertyTypeType,"getPropertyTypeType");function getBufferRowSize(propertyStructure){return propertyStructure.reduce((acc,attr)=>{switch(attr.type){case"float":case"int":return acc+4;case"vec2":return acc+8;case"vec4":return acc+16;default:throw new Error(`Unknown vertex type: ${attr.type}`)}},0)}__name(getBufferRowSize,"getBufferRowSize");function SetupInstances(gl2,resources,instanceId,instanceAttributeLength){const l2=instanceAttributeLength,instance=resources.get(instanceId);if(!instance)throw new Error("Something went wrong.");gl2.bindBuffer(gl2.ARRAY_BUFFER,instance.instanceProvider.instanceBuffer);const instanceStructure=instance.instanceProvider.instanceStructureObject;for(let i2=0;i2<instanceStructure.length;i2++){const attribute=instanceStructure[i2],location=l2+attribute.layoutIdx;gl2.vertexAttribPointer(location,getPropertyTypeSize(attribute.type),getPropertyTypeType(attribute.type,gl2),!1,getBufferRowSize(instanceStructure),getBufferRowSize(instanceStructure.slice(0,i2))),gl2.enableVertexAttribArray(location),gl2.vertexAttribDivisor(location,1)}gl2.bindBuffer(gl2.ARRAY_BUFFER,null)}__name(SetupInstances,"SetupInstances");function SetupTextures(gl2,resources,textures2,programData,program){let slot=0;for(const[textureName,textureValue]of Object.entries(textures2)){const textureId=typeof textureValue=="string"?textureValue:textureValue.id,latency=typeof textureValue=="string"?void 0:textureValue.latency;SetupTexture(gl2,resources,textureName,textureId,programData,program,slot,latency),slot++}}__name(SetupTextures,"SetupTextures");function SetupTexture(gl2,resources,textureName,textureId,programData,program,slot,latency){const texture=resources.get(textureId);if(!texture)throw new Error("Something went wrong.");if(texture.type!=="StaticTexture"&&texture.type!=="DynamicTexture")throw new Error("Something went wrong.");const textureProvider=texture.type==="StaticTexture"?texture.textureProvider:latency===void 0?texture.textureProviders[0]:texture.textureProviders[latency],location=gl2.getUniformLocation(program,textureName);if(location===null)throw new Error("Something went wrong.");gl2.activeTexture(gl2.TEXTURE0+slot),gl2.bindTexture(gl2.TEXTURE_2D,textureProvider.texture);const texSettings=programData.textures[textureName];if(!texSettings)throw new Error("Something went wrong.");const filter=texSettings.filter==="linear"?gl2.LINEAR:gl2.NEAREST,wrap=texSettings.wrap==="repeat"?gl2.REPEAT:gl2.CLAMP_TO_EDGE;gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_MIN_FILTER,filter),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_MAG_FILTER,filter),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_WRAP_S,wrap),gl2.texParameteri(gl2.TEXTURE_2D,gl2.TEXTURE_WRAP_T,wrap),gl2.uniform1i(location,slot)}__name(SetupTexture,"SetupTexture");function SetupUniforms(gl2,resources,globalIds,program){let i2=0;for(const[key,globalId]of Object.entries(globalIds)){const global2=resources.get(globalId);if(!global2)throw new Error("Something went wrong.");if(!resources.get(global2.data.signature))throw new Error("Something went wrong.");const uniformProvider=global2.uniformProvider,webglprogram=program.programProvider.program;if(program.data.globalSignatures[key]!==global2.data.signature)throw new Error("Global signature does not match program signature.");gl2.bindBuffer(gl2.UNIFORM_BUFFER,uniformProvider.buffer),gl2.bindBufferBase(gl2.UNIFORM_BUFFER,i2,uniformProvider.buffer);const uniformBlockIndex=gl2.getUniformBlockIndex(webglprogram,key);if(uniformBlockIndex===-1)throw new Error("Something went wrong.");gl2.uniformBlockBinding(webglprogram,uniformBlockIndex,i2),gl2.bindBuffer(gl2.UNIFORM_BUFFER,null),i2++}}__name(SetupUniforms,"SetupUniforms");function SetupVertices(gl2,resources,vertexId){const vertex=resources.get(vertexId);if(!vertex)throw new Error("Something went wrong.");gl2.bindBuffer(gl2.ELEMENT_ARRAY_BUFFER,vertex.vertexProvider.indexBuffer),gl2.bindBuffer(gl2.ARRAY_BUFFER,vertex.vertexProvider.vertexBuffer);const vertexStructure=vertex.vertexProvider.vertexStructureObject;for(let i2=0;i2<vertexStructure.length;i2++){const attribute=vertexStructure[i2],location=attribute.layoutIdx;gl2.vertexAttribPointer(location,getPropertyTypeSize(attribute.type),getPropertyTypeType(attribute.type,gl2),!1,getBufferRowSize(vertexStructure),getBufferRowSize(vertexStructure.slice(0,i2))),gl2.enableVertexAttribArray(location)}gl2.bindBuffer(gl2.ARRAY_BUFFER,null)}__name(SetupVertices,"SetupVertices");const _StaticTexture=class _StaticTexture extends VariableResource{constructor(resources,id,data,gl2){super(resources,id,data,gl2);__publicField(this,"type","StaticTexture");__publicField(this,"textureProvider");const res=this.resources.get(this.data.signature);if(!res)throw new Error("Missing signature data");const sig=res.data;this.textureProvider=new Texture$1(gl2,{shape:sig.size,type:sig.type,createFramebuffer:!1})}dispose(){this.textureProvider.dispose()}computeDependencies(){const dynamicTextures=Array.from(this.resources.values()).filter(r2=>r2.type==="DynamicTexture");for(const texture of dynamicTextures){let isDependencyOf=!1;const textureDrawOps=texture.data.drawOps;for(const drawOp of textureDrawOps)if(Object.values(drawOp.textures).includes(this.id)){isDependencyOf=!0;break}isDependencyOf&&this.isDependencyOf.push(texture.id)}}setTextureData(textureData){if(typeof textureData=="string"){const img=new Image;img.src=textureData,textureData=img,img.onload=()=>{this.textureProvider&&(this.textureProvider.setData(img),this.markAndPropagateDirty(),this.dirty=!1)}}else this.textureProvider.setData(textureData),this.markAndPropagateDirty(),this.dirty=!1}};__name(_StaticTexture,"StaticTexture");let StaticTexture=_StaticTexture;const _DynamicTexture=class _DynamicTexture extends VariableResource{constructor(resources,id,data,gl2){super(resources,id,data,gl2);__publicField(this,"type","DynamicTexture");__publicField(this,"textureProviders");const res=this.resources.get(this.data.signature);if(!res)throw new Error("Missing signature data");const sig=res.data;if(this.data.screen&&sig.type!=="RGBA8")throw new Error("Screen textures must be of type RGBA8");if(this.data.historyLength!==void 0&&this.data.screen!==void 0)throw new Error("A screen texture can't be stateful.");let historyLength=this.data.historyLength;historyLength===void 0&&(historyLength=1);const textureProviders=[];for(let i2=0;i2<historyLength;i2++)textureProviders.push(new Texture$1(gl2,{shape:sig.size,type:sig.type,createFramebuffer:!0}));this.textureProviders=textureProviders}dispose(){for(let i2=0;i2<this.textureProviders.length;i2++)this.textureProviders[i2].dispose()}computeDependencies(){const drawOps=this.data.drawOps,dependsOn=[];for(const drawOp of drawOps)dependsOn.push(...Object.values(drawOp.textures).map(texVal=>typeof texVal=="string"?texVal:texVal.latency===0?texVal.id:crypto.randomUUID()).filter(texId=>texId!==this.id));this.dependsOn=dependsOn;const dynamicTextures=Array.from(this.resources.values()).filter(r2=>r2.type==="DynamicTexture").filter(tex=>tex.id!==this.id);for(const texture of dynamicTextures){let isDependencyOf=!1;const textureDrawOps=texture.data.drawOps;for(const drawOp of textureDrawOps)if(Object.values(drawOp.textures).map(texVal=>typeof texVal=="string"?texVal:texVal.latency===0?texVal.id:crypto.randomUUID()).includes(this.id)){isDependencyOf=!0;break}isDependencyOf&&this.isDependencyOf.push(texture.id)}}updateTextureData(capture){if(!this.dirty)return;for(const dep of this.dependsOn){const res=this.resources.get(dep);res&&res.type==="DynamicTexture"&&"dirty"in res&&res.dirty&&res.updateTextureData()}const pixels=this.performRenderPass(capture);return this.dirty=!1,pixels}performRenderPass(capture){const res=this.resources.get(this.data.signature);if(!res)throw new Error("Missing signature data");const sig=res.data;if(this.data.screen){const canvas=this.gl.canvas;this.gl.viewport(0,0,canvas.width,canvas.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}else{this.gl.viewport(0,0,sig.size[0],sig.size[1]);const textureProvider=this.textureProviders[0];this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,textureProvider.framebuffer)}this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.disable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.BLEND);for(const drawOp of this.data.drawOps){if(drawOp.blend){if(typeof drawOp.blend=="string")switch(drawOp.blend){case"add":this.gl.blendFunc(this.gl.ONE,this.gl.ONE);break;case"subtract":this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);break;case"multiply":this.gl.blendFunc(this.gl.DST_COLOR,this.gl.ZERO);break;case"screen":this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE);break;case"overlay":this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);break;default:throw new Error("blend mode not recognised")}}else this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.performDrawOp(drawOp)}if(this.gl.disable(this.gl.BLEND),capture){const pixels=new Uint8Array(sig.size[0]*sig.size[1]*4);return this.gl.readPixels(0,0,sig.size[0],sig.size[1],this.gl.RGBA,this.gl.UNSIGNED_BYTE,pixels),pixels}}rotateTextures(){if(!this.data.screen){const last2=this.textureProviders.pop();this.textureProviders.unshift(last2)}}performDrawOp(drawOp){SetupVertices(this.gl,this.resources,drawOp.vertex);const vertex=this.resources.get(drawOp.vertex);if(!vertex)throw new Error("Something went wrong.");const signatureId=vertex.data.signature,vertexSignature=this.resources.get(signatureId);if(!vertexSignature)throw new Error("Something went wrong.");const vertexAttributeLength=Object.keys(vertexSignature.data.attributes).length;drawOp.instance&&SetupInstances(this.gl,this.resources,drawOp.instance,vertexAttributeLength);const program=this.resources.get(drawOp.program);if(!program)throw new Error("Something went wrong.");if(this.gl.useProgram(program.programProvider.program),SetupUniforms(this.gl,this.resources,drawOp.globals,program),Object.values(drawOp.textures).includes(this.id)||Object.values(drawOp.textures).filter(val=>typeof val!="string").filter(val=>val.id===this.id&&val.latency===0).length>0)throw new Error("Self references not allowed.");if(SetupTextures(this.gl,this.resources,drawOp.textures,program.data,program.programProvider.program),drawOp.instance!==void 0){const instance=this.resources.get(drawOp.instance);if(!instance)throw new Error("Something went wrong.");this.gl.drawElementsInstanced(this.gl.TRIANGLES,vertex.triangleCount*3,this.gl.UNSIGNED_SHORT,0,instance.instanceCount)}else this.gl.drawElements(this.gl.TRIANGLES,vertex.triangleCount*3,this.gl.UNSIGNED_SHORT,0)}};__name(_DynamicTexture,"DynamicTexture");let DynamicTexture=_DynamicTexture;var _a23;let VertexProvider$1=(_a23=class{constructor(gl2,vertexProviderSignature){__publicField(this,"gl");__publicField(this,"vertexProviderSignature");__publicField(this,"vertexBuffer",null);__publicField(this,"indexBuffer",null);__publicField(this,"vertexStructureObject",[]);if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.vertexProviderSignature=vertexProviderSignature,this.setup()}dispose(){this.vertexBuffer&&(this.gl.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null),this.indexBuffer&&(this.gl.deleteBuffer(this.indexBuffer),this.indexBuffer=null)}setup(){if(this.vertexBuffer=this.gl.createBuffer(),this.indexBuffer=this.gl.createBuffer(),!this.vertexBuffer||!this.indexBuffer)throw new Error("Failed to create vertex or index buffer");const derivedVertexStructureObject=[];for(let layoutIdx=0;layoutIdx<this.vertexProviderSignature.vertexStructure.length;layoutIdx++){const attribute=this.vertexProviderSignature.vertexStructure[layoutIdx];derivedVertexStructureObject.push({...attribute,layoutIdx})}this.vertexStructureObject=derivedVertexStructureObject,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexProviderSignature.maxVertexCount*this.getBufferRowSize(this.vertexStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const indexCount=this.vertexProviderSignature.maxTriangleCount*3;this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,indexCount*Uint16Array.BYTES_PER_ELEMENT,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}getPropertyTypeSize(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${type}`)}}getBufferRowSize(propertyStructure){return propertyStructure.reduce((acc,attr)=>{switch(attr.type){case"float":case"int":return acc+4;case"vec2":return acc+8;case"vec4":return acc+16;default:throw new Error(`Unknown vertex type: ${attr.type}`)}},0)}setData(data,structureObject,count,buffer){const bufferData=new ArrayBuffer(this.getBufferRowSize(structureObject)*count);for(let i2=0;i2<count;i2++)for(const key of Object.keys(data)){const attribute=structureObject.find(attr=>attr.name===key);if(attribute){const offset2=i2*this.getBufferRowSize(structureObject)+this.getBufferRowSize(structureObject.slice(0,structureObject.indexOf(attribute))),view2=new DataView(bufferData);let setter;switch(attribute.type){case"float":case"vec2":case"vec4":setter=__name((value,offset22)=>view2.setFloat32(offset22,value,!0),"setter");break;case"int":setter=__name((value,offset22)=>view2.setInt32(offset22,value,!0),"setter");break;default:throw new Error(`Unknown vertex type: ${attribute.type}`)}const values=data[key],size2=this.getPropertyTypeSize(attribute.type);for(let j2=0;j2<size2;j2++)j2<values.length&&setter(values[i2*size2+j2],offset2+j2*4)}}if(!buffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,buffer),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,bufferData),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setVertexData(data){if(!this.vertexBuffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.setData(data,this.vertexStructureObject,this.vertexProviderSignature.maxVertexCount,this.vertexBuffer)}setIndexData(data){if(!this.indexBuffer)throw new Error("Index buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const indexData=new Uint16Array(data);this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,indexData),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}},__name(_a23,"VertexProvider"),_a23);const _Vertex=class _Vertex extends VariableResource{constructor(resources,id,data,gl2){super(resources,id,data,gl2);__publicField(this,"type","Vertex");__publicField(this,"vertexProvider");__publicField(this,"triangleCount",0);const res=this.resources.get(data.signature);if(!res)throw new Error("Signature not found");const sig=res.data,vertexProviderSignature={maxVertexCount:sig.maxVertexCount,maxTriangleCount:sig.maxTriangleCount,vertexStructure:(()=>{const structure=[];for(const[name2,type]of Object.entries(sig.attributes))structure.push({name:name2,type});return structure})(),vertexProviderName:id};this.vertexProvider=new VertexProvider$1(gl2,vertexProviderSignature)}dispose(){this.vertexProvider.dispose()}computeDependencies(){const dynamicTextures=Array.from(this.resources.values()).filter(r2=>r2.type==="DynamicTexture");for(const texture of dynamicTextures){let isDependencyOf=!1;const drawOps=texture.data.drawOps;for(const drawOp of drawOps)if(drawOp.vertex&&drawOp.vertex===this.id){isDependencyOf=!0;break}isDependencyOf&&this.isDependencyOf.push(texture.id)}}setVertices(vertices,indices,triangleCount){this.vertexProvider.setVertexData(vertices),this.vertexProvider.setIndexData(indices),this.triangleCount=triangleCount,this.markAndPropagateDirty(),this.dirty=!1}};__name(_Vertex,"Vertex");let Vertex=_Vertex;const _InstanceProvider=class _InstanceProvider{constructor(gl2,instanceProviderSignature){__publicField(this,"gl");__publicField(this,"instanceProviderSignature");__publicField(this,"instanceBuffer",null);__publicField(this,"instanceStructureObject",[]);if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.instanceProviderSignature=instanceProviderSignature,this.setup()}dispose(){this.instanceBuffer&&(this.gl.deleteBuffer(this.instanceBuffer),this.instanceBuffer=null)}setup(){if(this.instanceBuffer=this.gl.createBuffer(),!this.instanceBuffer)throw new Error("Failed to create instance buffer");const derivedInstanceStructureObject=[];for(let layoutIdx=0;layoutIdx<this.instanceProviderSignature.instanceStructure.length;layoutIdx++){const attribute=this.instanceProviderSignature.instanceStructure[layoutIdx];derivedInstanceStructureObject.push({...attribute,layoutIdx})}this.instanceStructureObject=derivedInstanceStructureObject,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.instanceBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.instanceProviderSignature.maxInstanceCount*this.getBufferRowSize(this.instanceStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}getPropertyTypeSize(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec4":return 4;case"int":return 1;default:throw new Error(`Unknown vertex type: ${type}`)}}getBufferRowSize(propertyStructure){return propertyStructure.reduce((acc,attr)=>{switch(attr.type){case"float":case"int":return acc+4;case"vec2":return acc+8;case"vec4":return acc+16;default:throw new Error(`Unknown vertex type: ${attr.type}`)}},0)}setData(data,structureObject,count,buffer){const bufferData=new ArrayBuffer(this.getBufferRowSize(structureObject)*count);for(let i2=0;i2<count;i2++)for(const key of Object.keys(data)){const attribute=structureObject.find(attr=>attr.name===key);if(attribute){const offset2=i2*this.getBufferRowSize(structureObject)+this.getBufferRowSize(structureObject.slice(0,structureObject.indexOf(attribute))),view2=new DataView(bufferData);let setter;switch(attribute.type){case"float":case"vec2":case"vec4":setter=__name((value,offset22)=>view2.setFloat32(offset22,value,!0),"setter");break;case"int":setter=__name((value,offset22)=>view2.setInt32(offset22,value,!0),"setter");break;default:throw new Error(`Unknown vertex type: ${attribute.type}`)}const values=data[key],size2=this.getPropertyTypeSize(attribute.type);for(let j2=0;j2<size2;j2++)j2<values.length&&setter(values[i2*size2+j2],offset2+j2*4)}}if(!buffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,buffer),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,bufferData),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setInstanceData(data){if(!this.instanceBuffer)throw new Error("Instance buffer is not initialized. Call setup() first.");this.setData(data,this.instanceStructureObject,this.instanceProviderSignature.maxInstanceCount,this.instanceBuffer)}};__name(_InstanceProvider,"InstanceProvider");let InstanceProvider=_InstanceProvider;const _Instance=class _Instance extends VariableResource{constructor(resources,id,data,gl2){super(resources,id,data,gl2);__publicField(this,"type","Instance");__publicField(this,"instanceProvider");__publicField(this,"instanceCount",0);const res=this.resources.get(data.signature);if(!res)throw new Error("Signature not found");const sig=res.data,instanceProviderSignature={maxInstanceCount:sig.maxInstanceCount,instanceProviderName:id,instanceStructure:(()=>{const structure=[];for(const[attr,type]of Object.entries(sig.attributes))structure.push({name:attr,type});return structure})()};this.instanceProvider=new InstanceProvider(gl2,instanceProviderSignature)}dispose(){this.instanceProvider.dispose()}computeDependencies(){const dynamicTextures=Array.from(this.resources.values()).filter(r2=>r2.type==="DynamicTexture");for(const texture of dynamicTextures){let isDependencyOf=!1;const drawOps=texture.data.drawOps;for(const drawOp of drawOps)if(drawOp.instance&&drawOp.instance===this.id){isDependencyOf=!0;break}isDependencyOf&&this.isDependencyOf.push(texture.id)}}setInstanceData(instanceData,instanceCount){this.instanceProvider.setInstanceData(instanceData),this.instanceCount=instanceCount,this.markAndPropagateDirty(),this.dirty=!1}};__name(_Instance,"Instance");let Instance=_Instance;var _a24;let UniformProvider$1=(_a24=class{constructor(gl2,uniformProviderSignature){__publicField(this,"gl");__publicField(this,"uniformStructure");__publicField(this,"uniformProviderName");__publicField(this,"buffer",null);const{uniformProviderName,uniformStructure}=uniformProviderSignature;if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.uniformProviderName=uniformProviderName,this.uniformStructure=uniformStructure,this.setup()}dispose(){this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=null)}setup(){const buffer=this.gl.createBuffer();if(!buffer)throw new Error("Failed to create uniform buffer");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,buffer),this.gl.bufferData(this.gl.UNIFORM_BUFFER,this.uniformBufferSize,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null),this.buffer=buffer}getUniformSize(name2){const uniform=this.uniformStructure.find(u2=>u2.name===name2);if(!uniform)throw new Error(`Uniform ${name2} not found in structure`);const type=uniform.type;switch(type){case"float":return 4;case"vec2":return 8;case"vec3":return 16;case"vec4":return 16;case"mat3":case"mat3x3":return 64;case"mat4":case"mat4x4":return 64;case"int":return 4;case"ivec2":return 8;case"ivec3":return 16;case"ivec4":return 16;default:throw new Error(`Unknown uniform type: ${type}`)}}getUniformType(name2){const uniform=this.uniformStructure.find(u2=>u2.name===name2);if(!uniform)throw new Error(`Uniform ${name2} not found in structure`);const type=uniform.type;switch(type){case"float":case"vec2":case"vec3":case"vec4":case"mat3":case"mat3x3":case"mat4":case"mat4x4":return"float";case"int":case"ivec2":case"ivec3":case"ivec4":return"int";default:throw new Error(`Unknown uniform type: ${type}`)}}getUniformOffset(name2){let offset2=0;for(let i2=0;i2<this.uniformStructure.length;i2++){const uniform=this.uniformStructure[i2];if(uniform.name===name2)return offset2;offset2+=this.getUniformSize(uniform.name)}throw new Error(`Uniform ${name2} not found in structure`)}get uniformBufferSize(){const baseSize=this.uniformStructure.reduce((total,uniform)=>{const size2=this.getUniformSize(uniform.name);return total+size2},0);return Math.ceil(baseSize/16)*16}setUniforms(uniformValues){if(!this.buffer)throw new Error("Uniform buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,this.buffer);for(const uniform of Object.keys(uniformValues)){const value=uniformValues[uniform],offset2=this.getUniformOffset(uniform),size2=this.getUniformSize(uniform),type=this.getUniformType(uniform);if(Array.isArray(value)){if(value.length*4!==size2)throw new Error(`Uniform ${uniform} has incorrect size. Expected ${size2/4} elements, got ${value.length}`);const arr=type==="int"?new Int32Array(value):new Float32Array(value);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,offset2,arr)}else if(typeof value=="number"){if(size2!==4)throw new Error(`Uniform ${uniform} has incorrect size. Expected ${size2/4} elements, got 1`);const arr=type==="int"?new Int32Array([value]):new Float32Array([value]);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,offset2,arr)}else throw new Error(`Uniform ${uniform} has unsupported type. Expected number or array, got ${typeof value}`)}this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null)}},__name(_a24,"UniformProvider"),_a24);const _Global=class _Global extends VariableResource{constructor(resources,id,data,gl2){super(resources,id,data,gl2);__publicField(this,"type","Global");__publicField(this,"uniformProvider");const globalSignatureData=(()=>{const obj=this.resources.get(this.data.signature);if(!obj)throw new Error("Uniform signature not found");return obj.data})(),generateUniformStructure=__name(()=>{const uniformStructure=[];return Object.entries(globalSignatureData).map(([name2,value])=>{uniformStructure.push({name:name2,type:value})}),uniformStructure},"generateUniformStructure"),uniformProviderSignature={uniformProviderName:this.id,uniformStructure:generateUniformStructure()};this.uniformProvider=new UniformProvider$1(gl2,uniformProviderSignature),this.uniformProvider.setup()}dispose(){this.uniformProvider.dispose()}computeDependencies(){const dynamicTextures=Array.from(this.resources.values()).filter(r2=>r2.type==="DynamicTexture");for(const texture of dynamicTextures){let isDependencyOf=!1;const drawOps=texture.data.drawOps;for(const drawOp of drawOps)if(drawOp.globals&&Object.values(drawOp.globals).includes(this.id)){isDependencyOf=!0;break}isDependencyOf&&this.isDependencyOf.push(texture.id)}}setGlobals(globals){this.uniformProvider.setUniforms(globals),this.markAndPropagateDirty(),this.dirty=!1}};__name(_Global,"Global");let Global=_Global;var ResourceType=(ResourceType2=>(ResourceType2.VertexSignature="VertexSignature",ResourceType2.InstanceSignature="InstanceSignature",ResourceType2.GlobalSignature="GlobalSignature",ResourceType2.StaticTexture="StaticTexture",ResourceType2.DynamicTexture="DynamicTexture",ResourceType2.Global="Global",ResourceType2.Vertex="Vertex",ResourceType2.Instance="Instance",ResourceType2.TextureSignature="TextureSignature",ResourceType2.Program="Program",ResourceType2))(ResourceType||{});const ResourceDict={VertexSignature,InstanceSignature,GlobalSignature,TextureSignature,StaticTexture,DynamicTexture,Global,Vertex,Instance,Program:Program$1};function getResourceType(typeStr,data){return typeStr==="Texture"?"drawOps"in data?ResourceType.DynamicTexture:ResourceType.StaticTexture:typeStr}__name(getResourceType,"getResourceType");function processResources(resources,unprocessedResources,gl2){unprocessedResources.sort((a2,b2)=>a2.type==="Program"&&b2.type!=="Program"?1:a2.type!=="Program"&&b2.type==="Program"?-1:0);for(const unprocessedResource of unprocessedResources){const type=getResourceType(unprocessedResource.type,unprocessedResource.data),resource=new ResourceDict[type](resources,unprocessedResource.id,unprocessedResource.data,gl2);resources.set(unprocessedResource.id,resource)}for(const resource of resources.values())if(resource.resourceType==="variable")if("computeDependencies"in resource)resource.computeDependencies(resources);else throw new Error(`Resource ${resource.id} is missing computeDependencies method`);for(const unprocessedResource of unprocessedResources){const resource=resources.get(unprocessedResource.id);if(!resource)throw new Error(`Resource ${unprocessedResource.id} not found`);"markDirtyAndPropogate"in resource&&resource.markDirtyAndPropagate()}return resources}__name(processResources,"processResources");function getResourceChanges(newResources,oldResources){const newResourceMap=new Map(newResources.map(res=>[res.id,res])),oldResourceMap=new Map(oldResources.map(res=>[res.id,res])),toDelete=[],toAdd=[];for(const key of newResourceMap.keys()){const newContent=JSON.stringify(newResourceMap.get(key));if(oldResourceMap.has(key)){const oldContent=JSON.stringify(oldResourceMap.get(key));console.log(oldContent,newContent),oldContent!==newContent&&(console.log("Resource changed:",key),toAdd.push(newResourceMap.get(key)),toDelete.push(oldResourceMap.get(key)))}else toAdd.push(newResourceMap.get(key))}for(const key of oldResourceMap.keys())newResourceMap.has(key)||toDelete.push(oldResourceMap.get(key));return{toDelete,toAdd}}__name(getResourceChanges,"getResourceChanges");const _Graphics=class _Graphics{constructor(gl2){__publicField(this,"resources",new Map);__publicField(this,"gl");__publicField(this,"resourceBlueprint",[]);this.gl=gl2,gl2.getExtension("EXT_color_buffer_float")}compile(newResourceBlueprint){const{toDelete,toAdd}=getResourceChanges(newResourceBlueprint,this.resourceBlueprint);toDelete.forEach(resourceBlueprint=>{const resource=this.resources.get(resourceBlueprint.id);if(!resource)throw new Error("Something went wrong.");resource.dispose(),this.resources.delete(resource.id)}),processResources(this.resources,toAdd,this.gl)}executeCommands(commands,assets){commands.forEach(command=>{if(!command.resource)this[command.type](...command.payload);else{const resource=Array.from(this.resources.values()).find(r2=>r2.data&&"exportName"in r2.data?r2.data.exportName===command.resource:!1);if(!resource){console.warn(`Resource not found: ${command.resource}`);return}if(command.type in resource)if(command.type==="setTextureData"&&typeof command.payload[0]=="string"&&command.payload[0].startsWith("asset://")){const processedPath=command.payload[0].replace("asset://",""),asset=assets==null?void 0:assets.get(processedPath);asset&&resource[command.type](asset)}else resource[command.type](...command.payload);else console.warn(`Unknown command type: ${command.type}`)}})}};__name(_Graphics,"Graphics");let Graphics=_Graphics;const _NectarRenderer=class _NectarRenderer{constructor(gl2){__publicField(this,"gl");__publicField(this,"gfx");__publicField(this,"sourceId");__publicField(this,"assets",new Map);__publicField(this,"state",{});this.gl=gl2,this.gfx=new Graphics(gl2)}setSource(sourceId,source){sourceId!==this.sourceId&&(this.gfx.compile(source),this.state={},this.sourceId=sourceId)}attachAssets(assets){assets.forEach(([id,asset])=>{this.assets.set(id,asset)})}setState(sourceId,state){if(!this.gfx||sourceId!==this.sourceId)return;const skippedKeys=[];for(const key in state){const versionId=state[key].versionId,existing=this.state[key];if(!(existing&&existing.versionId===versionId)){if(!state[key].commands.filter(c=>c.type==="setTextureData"&&typeof c.payload[0]=="string"&&c.payload[0].startsWith("asset://")).map(c=>c.payload[0].replace("asset://","")).every(asset=>this.assets.has(asset))){skippedKeys.push(key);continue}this.gfx.executeCommands(state[key].commands,this.assets)}}const filteredState=Object.fromEntries(Object.entries(state).filter(([key])=>!skippedKeys.includes(key)));this.state=filteredState}frame(){if(!this.gfx)return;Array.from(this.gfx.resources.values()).filter(r2=>r2.type==="DynamicTexture"&&r2.dirty).forEach(r2=>r2.rotateTextures());const screenTexture=Array.from(this.gfx.resources.values()).find(t2=>t2.data.screen===!0);screenTexture&&screenTexture.updateTextureData()}captureTexture(id){if(!this.gfx)return;const resource=Array.from(this.gfx.resources.values()).find(r2=>r2.data.exportName===id);if(resource&&resource.type==="DynamicTexture")return resource.updateTextureData(!0)}};__name(_NectarRenderer,"NectarRenderer");let NectarRenderer=_NectarRenderer;function buildGraphics(graphicsAssetsEntries,compDesc,viewportRenderer){const effectInstanceIds=[];for(const layer of compDesc.layers)for(const effect of layer.effects)effectInstanceIds.push(effect.instanceId);const gfx=build(ref=>{const resources={},__canvasSig=TextureSignature$1({type:"RGBA8",size:[compDesc.canvasDimensions[0],compDesc.canvasDimensions[1]]}),__compositionGlobalSig=GlobalSignature$1({screen:"vec2",canvas:"vec2",playheadPosition:"float",numberOfFrames:"float",TOTAL_FRAME:"int"}),__compositionGlobal=Global$1({signature:ref("__compositionGlobalSig"),exportName:"compositionGlobal"}),__quadSig=VertexSignature$1({attributes:{position:"vec2"},maxTriangleCount:1024,maxVertexCount:1024}),__quad=Vertex$1({signature:ref("__quadSig"),exportName:"quad"});let inputName="__initialInput";const externalBundle={inputTexture:ref(inputName),compositionGlobal:ref("__compositionGlobal"),quad:ref("__quad"),canvasSig:ref("__canvasSig"),compositionGlobalSig:ref("__compositionGlobalSig"),quadSig:ref("__quadSig")},__initialInput=Texture$2({signature:ref("__canvasSig")});for(const instanceId of effectInstanceIds){const foundAssetEntry=graphicsAssetsEntries.find(([id,asset])=>id.endsWith(".graphics")?id.replace(".graphics","")===instanceId:!1);if(foundAssetEntry){if(!foundAssetEntry[0].endsWith(".graphics"))continue;const processedId=foundAssetEntry[0].replace(".graphics","");resources[processedId]=Use(foundAssetEntry[1].source,externalBundle),inputName=processedId+"_out",externalBundle.inputTexture=ref(inputName)}}const __exportTexture=Texture$2({signature:ref("__canvasSig"),exportName:"exportTexture",drawOps:[{program:ref("__putTextureProgram"),vertex:ref("__quad"),globals:{},textures:{src:externalBundle.inputTexture}}]}),__putTextureProgram=Program$2({vertexShader:`
                out vec2 uv;
                void main() {
                    gl_Position = vec4(position, 0.0, 1.0);
                    uv = position * 0.5 + 0.5;
                }
            `,fragmentShader:`
                in vec2 uv;
                void main() {
                    outColor= texture(src, uv);
                }
            `,textures:{src:{filter:"linear",wrap:"repeat"}},vertexSignature:ref("__quadSig"),globalSignatures:{}}),__viewportRenderer=viewportRenderer(externalBundle);return{__canvasSig,__initialInput,__viewportRenderer,__compositionGlobalSig,__compositionGlobal,__quadSig,__quad,__putTextureProgram,__exportTexture,...resources}}),registry={instances:{}};let currentSourceId="";for(const[id,asset]of graphicsAssetsEntries){if(!id.endsWith(".graphics"))continue;const processedId=id.replace(".graphics","");registry.instances[processedId]=asset.sourceId,currentSourceId+=asset.sourceId}return currentSourceId+=JSON.stringify(compDesc),registry.currentSourceId=currentSourceId,{gfx,registry}}__name(buildGraphics,"buildGraphics");function getSourceId(instanceId,sourceId,sourceRegistry){return sourceRegistry.instances[instanceId]===sourceId?sourceRegistry.currentSourceId:"INVALIDATED"}__name(getSourceId,"getSourceId");function buildControls(controlsAssetsEntries,sourceRegistry){let controls={};for(const[id,asset]of controlsAssetsEntries){if(!id.endsWith(".controls"))continue;const processedId=id.replace(".controls","");getSourceId(processedId,asset.sourceId,sourceRegistry)===sourceRegistry.currentSourceId&&(controls={...controls,...asset.renderState})}return controls}__name(buildControls,"buildControls");function Viewport({inputTexture,compositionGlobal,quad,quadSig,canvasSig,compositionGlobalSig}){return build(ref=>({screenDraw:Program$2({vertexSignature:quadSig,globalSignatures:{g:compositionGlobalSig},vertexShader:`
                    out vec2 uv;
                    void main() {
                    float cw = screen.x;
                    float ch = screen.y;
                    float iw = canvas.x;
                    float ih = canvas.y;

                    float a_img  = iw / ih;
                    float a_cont = cw / ch;

                    vec2 sizeNDC;
                    if (a_img > a_cont) {
                        sizeNDC = vec2(2.0, 2.0 * (a_cont / a_img));
                    } else {
                        sizeNDC = vec2(2.0 * (a_img / a_cont), 2.0);
                    }

                    vec2 scale = sizeNDC * 0.5;
                    gl_Position = vec4(position * scale, 0.0, 1.0);
                    uv = position * 0.5 + 0.5;
                    }

                `,fragmentShader:`
                    in vec2 uv;
                    void main() {
                        outColor = texture(inputTex, uv);
                        //outColor = vec4(1.0,0.0,0.0,1.0);
                    }
                `,textures:{inputTex:{wrap:"clamp",filter:"linear"}}}),screenTex:Texture$2({signature:canvasSig,screen:!0,drawOps:[{vertex:quad,globals:{g:compositionGlobal},textures:{inputTex:inputTexture},program:ref("screenDraw")}]})}))}__name(Viewport,"Viewport");function useRaf(callback,isActive){const savedCallback=React.useRef();React.useEffect(()=>{savedCallback.current=callback},[callback]),React.useEffect(()=>{let startTime,animationFrame;function tick(){const timeElapsed=Date.now()-startTime;startTime=Date.now(),loop(),savedCallback.current&&savedCallback.current(timeElapsed)}__name(tick,"tick");function loop(){animationFrame=window.requestAnimationFrame(tick)}return __name(loop,"loop"),startTime=Date.now(),loop(),()=>{window.cancelAnimationFrame(animationFrame)}},[isActive])}__name(useRaf,"useRaf");const defaultEvent$1={path:"viewer-loaded",event:!0};function Interior({timeline,controls,graphics,composition,images}){const canvasRef=reactExports.useRef(null),containerRef=reactExports.useRef(null),[renderer,setRenderer]=reactExports.useState(null),graphicsSnapshot=graphics.map(([id,asset])=>[id,asset.getSnapshot()]),controlsSnapshot=controls.map(([id,asset])=>[id,asset.getSnapshot()]),imagesSnapshot=images.map(([id,asset])=>[id,asset.getSnapshot()]),compositionSnapshot=composition.getSnapshot(),timelineProject=reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline)),[registry,setRegistry]=reactExports.useState({currentSourceId:"not_initialized",instances:{}}),{recordEvent}=useTracker(defaultEvent$1),[dimensions,setDimensions]=reactExports.useState([1920,1080]),[totalFrame,setTotalFrame]=reactExports.useState(0);reactExports.useEffect(()=>{function resizeCanvasToFit(container,canvas){const containerWidth=container.clientWidth,containerHeight=container.clientHeight;canvas.width=containerWidth,canvas.height=containerHeight,setDimensions([containerWidth,containerHeight])}__name(resizeCanvasToFit,"resizeCanvasToFit");const handleResize=__name(()=>{if(canvasRef.current&&containerRef.current){const container=containerRef.current,canvas=canvasRef.current;resizeCanvasToFit(container,canvas)}},"handleResize");return window.addEventListener("resize",handleResize),handleResize(),()=>{window.removeEventListener("resize",handleResize)}},[canvasRef]);const frameSaverRef=reactExports.useRef(new FrameSaver$1({timeline,width:dimensions[0],height:dimensions[1]})),frameSaver=frameSaverRef.current;return reactExports.useRef(!1),reactExports.useEffect(()=>{const canvas=canvasRef.current;if(!canvas)return;const gl2=canvas.getContext("webgl2");if(!gl2)throw new Error("WebGL2 not supported");const r2=new NectarRenderer(gl2);setRenderer(r2),frameSaver.attachCaptureFrame(()=>r2.captureTexture("exportTexture"))},[frameSaver]),useRaf(()=>{renderer&&(renderer.frame(),frameSaver.frame(),setTotalFrame(tf=>tf+1))},!0),reactExports.useEffect(()=>{if(!renderer||!graphicsSnapshot||!compositionSnapshot)return;const{registry:newRegistry,gfx}=buildGraphics(graphicsSnapshot,compositionSnapshot,Viewport);newRegistry.currentSourceId!==registry.currentSourceId&&setRegistry(newRegistry),frameSaver.setSize(compositionSnapshot.canvasDimensions[0],compositionSnapshot.canvasDimensions[1]),frameSaver.setName(compositionSnapshot.compositionName),renderer.setSource(registry.currentSourceId,gfx(""))},[renderer,graphics,composition,registry,frameSaverRef]),reactExports.useEffect(()=>{if(!renderer||!controlsSnapshot||!compositionSnapshot||!imagesSnapshot)return;const compositionGlobalStream={versionId:crypto.randomUUID(),commands:[{resource:"compositionGlobal",type:"setGlobals",payload:[{playheadPosition:[timelineProject.timelineData.playheadPosition],numberOfFrames:[timelineProject.timelineData.numberOfFrames],screen:[dimensions[0],dimensions[1]],canvas:[compositionSnapshot.canvasDimensions[0],compositionSnapshot.canvasDimensions[1]],TOTAL_FRAME:[totalFrame]}]}]},quadStream={versionId:"default",commands:[{resource:"quad",type:"setVertices",payload:[{position:[-1,-1,1,-1,-1,1,1,1]},[0,1,2,2,1,3],2]}]},renderState={...buildControls(controlsSnapshot,registry),compositionGlobal:compositionGlobalStream,quadStream};renderer.attachAssets(imagesSnapshot),renderer.setState(registry.currentSourceId,renderState)},[renderer,controls,timelineProject,frameSaver,registry,dimensions,composition,images,totalFrame]),timeline?jsxRuntimeExports.jsxs("div",{style:{width:"100vw",height:"100vh",backgroundColor:"var(--gray1)",position:"relative"},children:[jsxRuntimeExports.jsx("div",{ref:containerRef,style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)"},children:jsxRuntimeExports.jsx("canvas",{ref:canvasRef,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"60px",backgroundColor:"var(--gray2)"},children:jsxRuntimeExports.jsx(TimelineBar$1,{timeline})}),jsxRuntimeExports.jsx(FrameSaverScreen$1,{frameSaver,recordEvent,compName:compositionSnapshot.compositionName})]}):jsxRuntimeExports.jsx("div",{children:"No timeline found"})}__name(Interior,"Interior");function Setup({timeline,controls,graphics,composition,images}){return timeline&&controls&&graphics&&composition&&images?jsxRuntimeExports.jsx(Interior,{controls,timeline,graphics,composition,images}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(Setup,"Setup");const pb$1=new u$1.ProjectBuilder;pb$1.setTimelineData(3500,30,45);pb$1.addContinuousSignal("s1","Unused Signal",[0,1]);pb$1.addContinuousSignal("cx","Center X",[0,1]);pb$1.addPin("cx",0,0,"return easyLinear()");pb$1.addPin("cx",50,1,"return easyLinear()");pb$1.addPin("cx",900,1,"return easyLinear()");pb$1.addContinuousSignal("cy","Center Y",[0,1]);pb$1.addPin("cy",0,0,"return easyLinear()");pb$1.addPin("cy",50,1,"return easyLinear()");pb$1.addPin("cy",900,1,"return easyLinear()");pb$1.setSignalActiveStatus("s1",!0);pb$1.setSignalActiveStatus("cx",!1);pb$1.setSignalActiveStatus("cy",!1);const defaultProject$1=__name(()=>{const project=pb$1.getProject();return _e.TimelineController.fromProject(project).serialize()},"defaultProject$1");function ViewerExterior(){const timeline=useTimeline(),{initialized,assets:jsonAssets,index}=useJSONAssets((id,metadata)=>metadata.type==="controls"||metadata.type==="graphics"||id==="default.composition"&&metadata.type==="composition"||metadata.type==="png"||metadata.type==="jpg"),composition=initialized?jsonAssets["default.composition"]:void 0,controlsIds=initialized?index?Object.keys(index.data).filter(id=>index.data[id].type==="controls"):[]:[],graphicsIds=initialized?index?Object.keys(index.data).filter(id=>index.data[id].type==="graphics"):[]:[],imagesIds=initialized?index?Object.keys(index.data).filter(id=>index.data[id].type==="png"||index.data[id].type==="jpg"):[]:[],controls=Object.entries(jsonAssets).filter(([id,asset])=>controlsIds.includes(id)),graphics=Object.entries(jsonAssets).filter(([id,asset])=>graphicsIds.includes(id)),images=Object.entries(jsonAssets).filter(([id,asset])=>imagesIds.includes(id));return!initialized||!composition||!timeline?jsxRuntimeExports.jsx(FullscreenLoader,{}):jsxRuntimeExports.jsx(Setup,{timeline,composition:composition.data,controls,graphics,images})}__name(ViewerExterior,"ViewerExterior");function Viewer(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(TimelineProvider,{defaultProject:defaultProject$1,defaultName:"default.timeline",shouldCreate:!0,children:jsxRuntimeExports.jsx(ViewerExterior,{})})})}__name(Viewer,"Viewer");function AssetTestPanelContent(){const{initialized,index}=useIndex();return console.log("AssetTestPanelContent initialized:",initialized,"index:",index),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{children:"Asset Test Panel"}),jsxRuntimeExports.jsx("p",{children:"This is a placeholder for the Asset Test Panel content."})]})}__name(AssetTestPanelContent,"AssetTestPanelContent");function AssetTestPanel(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(AssetTestPanelContent,{})})}__name(AssetTestPanel,"AssetTestPanel");var _externalStateSubscribers4,_Controls_instances3,notifyExternalStateSubscribers_fn4,_internalSubscribers4,notifyInternalSubscribers_fn4,_externalSubscribers4,notifyExternalSubscribers_fn4;const _Controls=class _Controls{constructor(data){__privateAdd(this,_Controls_instances3);__publicField(this,"data");__publicField(this,"externalState",crypto.randomUUID());__privateAdd(this,_externalStateSubscribers4,[]);__privateAdd(this,_internalSubscribers4,[]);__privateAdd(this,_externalSubscribers4,[]);this.data=data}setData(data){this.data=data,__privateMethod(this,_Controls_instances3,notifyExternalSubscribers_fn4).call(this)}receiveExternalUpdate(update){this.data=update,this.externalState=crypto.randomUUID(),__privateMethod(this,_Controls_instances3,notifyExternalStateSubscribers_fn4).call(this),__privateMethod(this,_Controls_instances3,notifyInternalSubscribers_fn4).call(this)}subscribeToExternalState(cb){return __privateGet(this,_externalStateSubscribers4).push(cb),()=>{__privateSet(this,_externalStateSubscribers4,__privateGet(this,_externalStateSubscribers4).filter(c=>c!==cb))}}getExternalState(){return this.externalState}subscribeInternal(cb){return __privateGet(this,_internalSubscribers4).push(cb),()=>{__privateSet(this,_internalSubscribers4,__privateGet(this,_internalSubscribers4).filter(c=>c!==cb))}}subscribeExternal(cb){return __privateGet(this,_externalSubscribers4).push(cb),()=>{__privateSet(this,_externalSubscribers4,__privateGet(this,_externalSubscribers4).filter(c=>c!==cb))}}getSnapshot(){return this.data}};_externalStateSubscribers4=new WeakMap,_Controls_instances3=new WeakSet,notifyExternalStateSubscribers_fn4=__name(function(){__privateGet(this,_externalStateSubscribers4).forEach(cb=>cb())},"#notifyExternalStateSubscribers"),_internalSubscribers4=new WeakMap,notifyInternalSubscribers_fn4=__name(function(){__privateGet(this,_internalSubscribers4).forEach(cb=>cb())},"#notifyInternalSubscribers"),_externalSubscribers4=new WeakMap,notifyExternalSubscribers_fn4=__name(function(){__privateGet(this,_externalSubscribers4).forEach(cb=>cb())},"#notifyExternalSubscribers"),__name(_Controls,"Controls"),__publicField(_Controls,"defaultControls",{width:800,height:600,colorStops:[{color:{r:1,g:0,b:0},position:0,id:crypto.randomUUID()},{color:{r:0,g:0,b:1},position:.5,id:crypto.randomUUID()}],canvasPoint:[0,0],canvasScale:1,shapeScale:1,shapePoint:[0,0],perspectiveFactor:1,noiseDegenerationEnabled:!1,noiseDegenerationAmplitude:.5,noiseDegenerationFrequency:1,speed:1,exportDuration:10,exportPerfectLoop:!0,shapeImageAssetId:"",shapeImageAssetIds:[],showShapeInspector:!1,grainEnabled:!1,grainIntensity:.5,overlayShape:!0});let Controls=_Controls;var _a25;let Controller$1=(_a25=class{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=new Controls(data),this.data.subscribeExternal(()=>{var _a26;const update=(_a26=this.data)==null?void 0:_a26.getSnapshot();this.update(update)}),this.initialised=!0}receiveUpdate(update){var _a26;(_a26=this.data)==null||_a26.receiveExternalUpdate(update)}receiveMetadataUpdate(){}getSnapshot(){var _a26;return(_a26=this.data)==null?void 0:_a26.getSnapshot()}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}},__name(_a25,"Controller"),_a25);const ControlsContext=reactExports.createContext(null);function ControlsProvider({children}){const{initialized:indexInitialized,index}=useIndex(),tController=reactExports.useRef(new Controller$1),timelineAssets=indexInitialized?Object.entries(index.data).filter(([assetId2,assetMetadata])=>assetMetadata.type==="controls"&&assetMetadata.name==="echoknight.controls").map(([assetId2,assetMetadata])=>({assetId:assetId2,assetController:tController.current})):[],assetId=timelineAssets.length>0?timelineAssets[0].assetId:void 0,{FreeWorkload}=useCK();reactExports.useEffect(()=>{if(indexInitialized&&assetId===void 0){const workload=FreeWorkload();workload.thread("default").worker({instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},{createAsset:{asset:{data:Controls.defaultControls,metadata:{type:"controls",name:"echoknight.controls",preferredEditorAddress:CONFIG.SELF_HOST+"echoknight-controlconsole"},on_update:{type:"simple"},id:"echoknight.controls"}}}),workload.dispatch()}},[assetId,indexInitialized]);const{initialized:assetsInitialized,assets}=useAssets(timelineAssets),controls=indexInitialized&&assetsInitialized&&assetId!==void 0&&assets[assetId]!==void 0?assets[assetId].data:void 0;return jsxRuntimeExports.jsx(ControlsContext.Provider,{value:controls,children})}__name(ControlsProvider,"ControlsProvider");function useControls(){return React.useContext(ControlsContext)}__name(useControls,"useControls");const _Engine=class _Engine{constructor(){__publicField(this,"time");__publicField(this,"REL_TIME",0);__publicField(this,"CONFIG",Controls.defaultControls);__publicField(this,"currentImageAssetId","");__publicField(this,"image",null);this.time=0}async init(config3,assets){return this.CONFIG=config3,new Promise((resolve,reject)=>{if(this.CONFIG.shapeImageAssetId){if(assets.find(a2=>a2.assetId===this.CONFIG.shapeImageAssetId)!==void 0){const id=this.CONFIG.shapeImageAssetId,asset=assets.find(a2=>a2.assetId===id);if(asset){const image=new Image;image.src=asset.assetController.getSnapshot(),image.onload=()=>this.image?reject(this.currentImageAssetId):(this.image=image,this.currentImageAssetId=id,resolve(!0))}else this.image=null}}else return reject()})}update(config3,timeline,assets){this.time=timeline.getProject().timelineData.playheadPosition;const loopLength=timeline.getProject().timelineData.focusRange[1];if(this.REL_TIME=this.time%loopLength/loopLength,this.CONFIG=config3,this.CONFIG.shapeImageAssetId!==this.currentImageAssetId&&assets.find(a2=>a2.assetId===this.CONFIG.shapeImageAssetId)!==void 0){const id=this.CONFIG.shapeImageAssetId,asset=assets.find(a2=>a2.assetId===id);if(asset){const image=new Image;image.src=asset.assetController.getSnapshot(),image.onload=()=>{this.image=image,this.currentImageAssetId=id}}else this.image=null}}};__name(_Engine,"Engine");let Engine=_Engine;async function imagesToMp4(frames,{width,height,fps,bitrate=2e7,filename="video.mp4"}){if(!("VideoEncoder"in globalThis))throw new Error("WebCodecs VideoEncoder is not available in this environment.");const target=new ArrayBufferTarget,muxer=new Muxer({target,video:{codec:"avc",width,height,frameRate:fps},fastStart:"in-memory"}),encoder=new VideoEncoder({output:__name((chunk,meta)=>muxer.addVideoChunk(chunk,meta),"output"),error:__name(e2=>console.error("VideoEncoder error:",e2),"error")});encoder.configure({codec:"avc1.42003D",width,height,bitrate,framerate:fps});const frameDurationUs=1e6/fps;let pts=0;for(const dataUrl of frames){const blob=await(await fetch(dataUrl)).blob(),bitmap=await createImageBitmap(blob),videoFrame=new VideoFrame(bitmap,{timestamp:pts});encoder.encode(videoFrame),videoFrame.close(),bitmap.close(),pts+=frameDurationUs}await encoder.flush(),encoder.close(),muxer.finalize();const{buffer}=target;return new Blob([buffer],{type:"video/mp4"})}__name(imagesToMp4,"imagesToMp4");var _timeline4,_width4,_height4,_canvas4,_anticipatedFrame4,_controls2,_frames4,_subscribers4,_status4,_renderMode4,_rendering4;const _FrameSaver=class _FrameSaver{constructor({timeline,width,height}){__privateAdd(this,_timeline4);__privateAdd(this,_width4);__privateAdd(this,_height4);__privateAdd(this,_canvas4);__privateAdd(this,_anticipatedFrame4);__privateAdd(this,_controls2);__privateAdd(this,_frames4,[]);__privateAdd(this,_subscribers4,[]);__privateAdd(this,_status4,{rendering:!1,totalFrames:0,renderedFrames:0});__privateAdd(this,_renderMode4,"imseq");__privateAdd(this,_rendering4,!1);__privateSet(this,_timeline4,timeline),__privateSet(this,_width4,width),__privateSet(this,_height4,height)}setControls(controls){__privateSet(this,_controls2,controls)}setSize(width,height){__privateSet(this,_width4,width),__privateSet(this,_height4,height)}addCanvas(canvas){__privateSet(this,_canvas4,canvas)}subscribe(cb){return __privateGet(this,_subscribers4).push(cb),()=>{__privateSet(this,_subscribers4,__privateGet(this,_subscribers4).filter(s2=>s2!==cb))}}getStatus(){return __privateGet(this,_status4)}frame(){if(!__privateGet(this,_rendering4)||!__privateGet(this,_canvas4))return;const project=__privateGet(this,_timeline4).getProject(),currentFrame=project.timelineData.playheadPosition;if(currentFrame!==__privateGet(this,_anticipatedFrame4))return;const focusRange=project.timelineData.focusRange;if(__privateGet(this,_status4).renderedFrames+1<__privateGet(this,_status4).totalFrames){const canvas=document.querySelector("canvas");__privateGet(this,_frames4).push(canvas.toDataURL()),__privateSet(this,_anticipatedFrame4,(currentFrame+1)%focusRange[1]),__privateGet(this,_timeline4).projectTools.updatePlayheadPosition(__privateGet(this,_anticipatedFrame4),!0),__privateSet(this,_status4,{...__privateGet(this,_status4),renderedFrames:__privateGet(this,_status4).renderedFrames+1})}else{const jszip=new JSZip,folder=jszip.folder("frames");__privateGet(this,_frames4).forEach((frame,index)=>{const base64Data=frame.split(",")[1],binaryString=window.atob(base64Data),binaryLen=binaryString.length,bytes2=new Uint8Array(binaryLen);for(let i2=0;i2<binaryLen;i2++)bytes2[i2]=binaryString.charCodeAt(i2);const fileName="frame"+String(index).padStart(5,"0")+".png";folder.file(fileName,bytes2,{base64:!0})}),__privateGet(this,_renderMode4)==="imseq"&&jszip.generateAsync({type:"blob"}).then(content=>{const blobUrl=URL.createObjectURL(content),a2=document.createElement("a");a2.href=blobUrl,a2.download="frames.zip",a2.click(),URL.revokeObjectURL(blobUrl),__privateSet(this,_status4,{...__privateGet(this,_status4),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline4).projectTools.updatePlayheadPosition(0,!0)}),__privateGet(this,_renderMode4)==="mp4"&&imagesToMp4(__privateGet(this,_frames4),{width:__privateGet(this,_width4),height:__privateGet(this,_height4),fps:30}).then(mp4Blob=>{const mp4BlobUrl=URL.createObjectURL(mp4Blob),a2=document.createElement("a");a2.href=mp4BlobUrl,a2.download="animation.mp4",a2.click(),URL.revokeObjectURL(mp4BlobUrl),__privateSet(this,_status4,{...__privateGet(this,_status4),renderedFrames:0,totalFrames:0,rendering:!1}),__privateGet(this,_timeline4).projectTools.updatePlayheadPosition(0,!0)}),__privateSet(this,_frames4,[]),__privateSet(this,_anticipatedFrame4,0),__privateSet(this,_rendering4,!1)}}beginImSeq(){__privateGet(this,_rendering4)||(__privateSet(this,_renderMode4,"imseq"),this.begin())}beginMp4(){__privateGet(this,_rendering4)||(__privateSet(this,_renderMode4,"mp4"),this.begin())}begin(){__privateSet(this,_rendering4,!0);const focusRange=__privateGet(this,_timeline4).getProject().timelineData.focusRange,totalFrames=__privateGet(this,_controls2).exportPerfectLoop?focusRange[1]-focusRange[0]:Math.floor(__privateGet(this,_controls2).exportDuration*30);__privateSet(this,_anticipatedFrame4,focusRange[0]),__privateSet(this,_status4,{rendering:!0,totalFrames,renderedFrames:0}),__privateGet(this,_timeline4).projectTools.updatePlayheadPosition(focusRange[0],!0)}saveFrame(){const canvas=document.querySelector("canvas");console.log("Saving frame",canvas);const dataUrl=canvas.toDataURL(),a2=document.createElement("a");a2.href=dataUrl,a2.style.display="none",a2.download="frame.png",document.body.appendChild(a2),a2.click(),document.body.removeChild(a2)}};_timeline4=new WeakMap,_width4=new WeakMap,_height4=new WeakMap,_canvas4=new WeakMap,_anticipatedFrame4=new WeakMap,_controls2=new WeakMap,_frames4=new WeakMap,_subscribers4=new WeakMap,_status4=new WeakMap,_renderMode4=new WeakMap,_rendering4=new WeakMap,__name(_FrameSaver,"FrameSaver");let FrameSaver=_FrameSaver;function isBrowserKnownToWork(){const ua=navigator.userAgent;return/Chrome\/\d+/.test(ua)&&!/Edg/.test(ua)&&!/OPR/.test(ua)?!0:(/Firefox/.test(ua)||/Safari/.test(ua)&&!/Chrome/.test(ua),!1)}__name(isBrowserKnownToWork,"isBrowserKnownToWork");function FrameSaverScreen({frameSaver,recordEvent,controls}){const{rendering,totalFrames,renderedFrames}=React.useSyncExternalStore(frameSaver.subscribe.bind(frameSaver),frameSaver.getStatus.bind(frameSaver));frameSaver.setControls(controls);const videoEncoderAvailable=isBrowserKnownToWork(),{FreeWorkload}=useCK();useUnit(unit=>"beginRender"in unit.payload,(unit,workload)=>{workload.thread("default").worker(globalThis.CK_INSTANCE,{beginRender_response:!0}),workload.dispatch()});const[displayOverlay,setDisplayOverlay]=React.useState(!1),registerUnitProcessor=useRegisterUnitProcessor();return jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)",display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:10},children:[jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginImSeq(),recordEvent({path:"echoknight-renderframes",event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export image sequence",iconName:"animated_images"}),videoEncoderAvailable&&jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{const w2=FreeWorkload();w2.setMetadata("recording",!1);const c=new CK_Circuit(registerUnitProcessor,w2);await c.instance(globalThis.CK_INSTANCE).call("beginRender"),c.complete(),frameSaver.beginMp4(),recordEvent({path:"echoknight-renderframes",event:!0}),setDisplayOverlay(!0)},"onClick"),text:"export as .mp4",iconName:"movie"}),jsxRuntimeExports.jsx(Button,{onClick:__name(async()=>{recordEvent({path:"echoknight-saveframe",event:!0}),frameSaver.saveFrame()},"onClick"),text:"export frame",iconName:"camera"}),displayOverlay&&jsxRuntimeExports.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:30,color:"var(--gray6)",backgroundColor:"var(--gray1)",borderRadius:"var(--borderRadiusSmall)",marginLeft:20,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:40},children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:10,right:10},children:!rendering&&jsxRuntimeExports.jsx(Icon,{iconName:"close",onClick:__name(()=>{setDisplayOverlay(!1)},"onClick")})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",fontSize:20,fontWeight:600},children:rendering?`Rendering: ${renderedFrames} / ${totalFrames}`:"Done!"}),jsxRuntimeExports.jsx("div",{children:rendering?"Your download will begin shortly...":null})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10},children:[jsxRuntimeExports.jsx("div",{children:"If you enjoy using this tool, subscribe to our email newsletter to get updates on new features and releases!"}),jsxRuntimeExports.jsx(Button,{bgColor:"var(--yellow3)",color:"var(--gray1)",hoverBgColor:"var(--yellow2)",hoverColor:"var(--gray1)",onClick:__name(()=>{window.open("http://eepurl.com/i6WBsQ","_blank")},"onClick"),text:"Subscribe to newsletter",iconName:"email"})]})]})]})}__name(FrameSaverScreen,"FrameSaverScreen");function generateUniformBlockString(uniformProvider){let block=`layout(std140) uniform ${uniformProvider.uniformProviderName} {
`;for(const uniform of uniformProvider.uniformStructure)block+=`    ${uniform.type} ${uniform.name};
`;return block+=`};
`,block}__name(generateUniformBlockString,"generateUniformBlockString");function generateVertexBlockString(vertexProvider){let block="";for(let i2=0;i2<vertexProvider.vertexStructure.length;i2++){const vertex=vertexProvider.vertexStructure[i2];block+=`layout(location = ${i2}) in ${vertex.type} ${vertex.name};
`}return block}__name(generateVertexBlockString,"generateVertexBlockString");const _Program=class _Program{constructor(gl2,programDes){__publicField(this,"gl");__publicField(this,"programDescription");__publicField(this,"program",null);if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.programDescription=programDes}setup(){const vertexShaderSource=`#version 300 es
        precision mediump float;
        precision mediump int;
        ${generateUniformBlockString(this.programDescription.uniformProviderSignature)}
        ${generateVertexBlockString(this.programDescription.vertexProviderSignature)}
        ${this.programDescription.vertexShader}
        `,fragmentShaderSource=`#version 300 es
        precision mediump float;
        precision mediump int;
        ${generateUniformBlockString(this.programDescription.uniformProviderSignature)}
        ${this.programDescription.fragmentShader}
        `,vertexShader=this.gl.createShader(this.gl.VERTEX_SHADER);if(!vertexShader)throw new Error("Failed to create vertex shader");if(this.gl.shaderSource(vertexShader,vertexShaderSource),this.gl.compileShader(vertexShader),!this.gl.getShaderParameter(vertexShader,this.gl.COMPILE_STATUS)){const error=this.gl.getShaderInfoLog(vertexShader);throw this.gl.deleteShader(vertexShader),new Error(`Vertex shader compilation failed: ${error}`)}const fragmentShader=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(!fragmentShader)throw new Error("Failed to create fragment shader");if(this.gl.shaderSource(fragmentShader,fragmentShaderSource),this.gl.compileShader(fragmentShader),!this.gl.getShaderParameter(fragmentShader,this.gl.COMPILE_STATUS)){const error=this.gl.getShaderInfoLog(fragmentShader);throw this.gl.deleteShader(fragmentShader),new Error(`Fragment shader compilation failed: ${error}`)}if(this.program=this.gl.createProgram(),!this.program)throw new Error("Failed to create program");if(this.gl.attachShader(this.program,vertexShader),this.gl.attachShader(this.program,fragmentShader),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){const error=this.gl.getProgramInfoLog(this.program);throw this.gl.deleteProgram(this.program),new Error(`Program linking failed: ${error}`)}this.gl.deleteShader(vertexShader),this.gl.deleteShader(fragmentShader)}draw(pdc){const{uniformProvider,vertexProvider}=pdc;if(!this.program)throw new Error("Program is not set up");this.gl.useProgram(this.program),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,uniformProvider.buffer),this.gl.bindBufferBase(this.gl.UNIFORM_BUFFER,0,uniformProvider.buffer);const index=this.gl.getUniformBlockIndex(this.program,uniformProvider.uniformProviderName);if(index===-1)throw new Error(`Uniform block ${uniformProvider.uniformProviderName} not found in program`);this.gl.uniformBlockBinding(this.program,index,0),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null);let slot=0;for(const[texName,texture]of Object.entries(pdc.textures)){const location=this.gl.getUniformLocation(this.program,texName);if(location===null){console.warn(`Uniform location for ${texName} not found`);continue}this.gl.activeTexture(this.gl.TEXTURE0+slot),this.gl.bindTexture(this.gl.TEXTURE_2D,texture.texture),this.gl.uniform1i(location,slot),slot++}this.gl.bindVertexArray(vertexProvider.vao),vertexProvider.vertexProviderSignature.instancedCall?this.gl.drawElementsInstanced(this.gl.TRIANGLES,vertexProvider.vertexProviderSignature.indexCount,this.gl.UNSIGNED_SHORT,0,vertexProvider.vertexProviderSignature.instanceCount):this.gl.drawElements(this.gl.TRIANGLES,vertexProvider.vertexProviderSignature.indexCount,this.gl.UNSIGNED_SHORT,0),this.gl.bindVertexArray(null)}};__name(_Program,"Program");let Program=_Program;const getUploadInfo=__name((t2,gl2)=>{switch(t2){case"RGBA8":return{internalFormat:gl2.RGBA8,format:gl2.RGBA,type:gl2.UNSIGNED_BYTE};case"R8":return{internalFormat:gl2.R8,format:gl2.RED,type:gl2.UNSIGNED_BYTE};case"R32F":return{internalFormat:gl2.R32F,format:gl2.RED,type:gl2.FLOAT};case"RGBA32F":return{internalFormat:gl2.RGBA32F,format:gl2.RGBA,type:gl2.FLOAT};default:throw new Error("Unknown texture type")}},"getUploadInfo"),_Texture=class _Texture{constructor(gl2,description){__publicField(this,"description");__publicField(this,"gl");__publicField(this,"framebuffer",null);__publicField(this,"texture",null);this.gl=gl2,this.description=description}setup(){const{internalFormat,format:format2,type}=getUploadInfo(this.description.type,this.gl);if(this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,internalFormat,this.description.shape[0],this.description.shape[1],0,format2,type,null),this.description.textureOptions){const{minFilter,magFilter,wrapS,wrapT}=this.description.textureOptions;this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,minFilter??this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,magFilter??this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,wrapS??this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,wrapT??this.gl.CLAMP_TO_EDGE)}else this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE);if(this.description.createFramebuffer){if(this.framebuffer=this.gl.createFramebuffer(),!this.framebuffer)throw new Error("Failed to create framebuffer");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0);const status=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);if(status!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error(`Framebuffer is not complete: ${status}`);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}this.gl.bindTexture(this.gl.TEXTURE_2D,null)}setDescription(description){this.description=description,this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null),this.framebuffer&&(this.gl.deleteFramebuffer(this.framebuffer),this.framebuffer=null),this.setup()}setData(data){if(!this.texture)throw new Error("Texture not initialized");const{format:format2,type}=getUploadInfo(this.description.type,this.gl),[width,height]=this.description.shape,gl2=this.gl;if(gl2.bindTexture(gl2.TEXTURE_2D,this.texture),gl2.pixelStorei(gl2.UNPACK_ALIGNMENT,1),data instanceof HTMLImageElement){const{internalFormat}=getUploadInfo(this.description.type,gl2);gl2.texImage2D(gl2.TEXTURE_2D,0,internalFormat,format2,type,data)}else gl2.texSubImage2D(gl2.TEXTURE_2D,0,0,0,width,height,format2,type,data);gl2.bindTexture(gl2.TEXTURE_2D,null)}};__name(_Texture,"Texture");let Texture=_Texture;const _UniformProvider=class _UniformProvider{constructor(gl2,uniformProviderSignature){__publicField(this,"gl");__publicField(this,"uniformStructure");__publicField(this,"uniformProviderName");__publicField(this,"buffer",null);const{uniformProviderName,uniformStructure}=uniformProviderSignature;if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.uniformProviderName=uniformProviderName,this.uniformStructure=uniformStructure}setup(){const buffer=this.gl.createBuffer();if(!buffer)throw new Error("Failed to create uniform buffer");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,buffer),this.gl.bufferData(this.gl.UNIFORM_BUFFER,this.uniformBufferSize,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null),this.buffer=buffer}getUniformSize(name2){const uniform=this.uniformStructure.find(u2=>u2.name===name2);if(!uniform)throw new Error(`Uniform ${name2} not found in structure`);const type=uniform.type;switch(type){case"float":return 4;case"vec2":return 8;case"vec3":return 16;case"vec4":return 16;case"mat3":case"mat3x3":return 64;case"mat4":case"mat4x4":return 64;case"int":return 4;case"ivec2":return 8;case"ivec3":return 16;case"ivec4":return 16;default:throw new Error(`Unknown uniform type: ${type}`)}}getUniformType(name2){const uniform=this.uniformStructure.find(u2=>u2.name===name2);if(!uniform)throw new Error(`Uniform ${name2} not found in structure`);const type=uniform.type;switch(type){case"float":case"vec2":case"vec3":case"vec4":case"mat3":case"mat3x3":case"mat4":case"mat4x4":return"float";case"int":case"ivec2":case"ivec3":case"ivec4":return"int";default:throw new Error(`Unknown uniform type: ${type}`)}}getUniformOffset(name2){let offset2=0;for(let i2=0;i2<this.uniformStructure.length;i2++){const uniform=this.uniformStructure[i2];if(uniform.name===name2)return offset2;offset2+=this.getUniformSize(uniform.name)}throw new Error(`Uniform ${name2} not found in structure`)}get uniformBufferSize(){const baseSize=this.uniformStructure.reduce((total,uniform)=>{const size2=this.getUniformSize(uniform.name);return total+size2},0);return Math.ceil(baseSize/16)*16}setUniforms(uniformValues){if(!this.buffer)throw new Error("Uniform buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,this.buffer);for(const uniform of Object.keys(uniformValues)){const value=uniformValues[uniform],offset2=this.getUniformOffset(uniform),size2=this.getUniformSize(uniform),type=this.getUniformType(uniform);if(Array.isArray(value)){if(value.length*4!==size2)throw new Error(`Uniform ${uniform} has incorrect size. Expected ${size2/4} elements, got ${value.length}`);const arr=type==="int"?new Int32Array(value):new Float32Array(value);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,offset2,arr)}else if(typeof value=="number"){if(size2!==4)throw new Error(`Uniform ${uniform} has incorrect size. Expected ${size2/4} elements, got 1`);const arr=type==="int"?new Int32Array([value]):new Float32Array([value]);this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,offset2,arr)}else throw new Error(`Uniform ${uniform} has unsupported type. Expected number or array, got ${typeof value}`)}this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null)}};__name(_UniformProvider,"UniformProvider");let UniformProvider=_UniformProvider;const _VertexProvider=class _VertexProvider{constructor(gl2,vertexProviderSignature){__publicField(this,"gl");__publicField(this,"vertexProviderSignature");__publicField(this,"vertexBuffer",null);__publicField(this,"indexBuffer",null);__publicField(this,"instanceBuffer",null);__publicField(this,"vao",null);__publicField(this,"onlyVertexStructureObject",[]);__publicField(this,"onlyInstanceStructureObject",[]);if(this.gl=gl2,!this.gl)throw new Error("WebGL2RenderingContext is not provided");this.vertexProviderSignature=vertexProviderSignature}setup(){if(this.vertexBuffer=this.gl.createBuffer(),this.instanceBuffer=this.gl.createBuffer(),this.indexBuffer=this.gl.createBuffer(),!this.vertexBuffer||!this.instanceBuffer||!this.indexBuffer)throw new Error("Failed to create vertex, instance or index buffer");const derivedVertexStructureObject=[];for(let layoutIdx=0;layoutIdx<this.vertexProviderSignature.vertexStructure.length;layoutIdx++){const attribute=this.vertexProviderSignature.vertexStructure[layoutIdx];derivedVertexStructureObject.push({...attribute,layoutIdx})}const onlyVertexStructureObject=derivedVertexStructureObject.filter(attr=>!attr.instanceAttribute),onlyInstanceStructureObject=derivedVertexStructureObject.filter(attr=>attr.instanceAttribute);if(this.onlyVertexStructureObject=onlyVertexStructureObject,this.onlyInstanceStructureObject=onlyInstanceStructureObject,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexProviderSignature.vertexCount*this.getBufferRowSize(onlyVertexStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.vertexProviderSignature.indexCount*Uint16Array.BYTES_PER_ELEMENT,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.vertexProviderSignature.instanceCount&&this.vertexProviderSignature.instancedCall&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.instanceBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexProviderSignature.instanceCount*this.getBufferRowSize(onlyInstanceStructureObject),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)),this.vao=this.gl.createVertexArray(),!this.vao)throw new Error("Failed to create vertex array object");for(let layoutIdx=0;layoutIdx<this.vertexProviderSignature.vertexStructure.length;layoutIdx++)this.gl.enableVertexAttribArray(layoutIdx);this.gl.bindVertexArray(this.vao),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer);for(const attribute of onlyVertexStructureObject){const location=attribute.layoutIdx,attrIdx=onlyVertexStructureObject.findIndex(attr=>attr.name===attribute.name);this.gl.enableVertexAttribArray(location),this.gl.vertexAttribPointer(location,this.getPropertyTypeSize(attribute.type),this.getPropertyTypeType(attribute.type,this.gl),!1,this.getBufferRowSize(onlyVertexStructureObject),this.getBufferRowSize(onlyVertexStructureObject.slice(0,attrIdx)))}if(this.vertexProviderSignature.instanceCount&&this.vertexProviderSignature.instancedCall){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.instanceBuffer);for(const attribute of onlyInstanceStructureObject){const location=attribute.layoutIdx,attrIdx=onlyInstanceStructureObject.findIndex(attr=>attr.name===attribute.name);this.gl.enableVertexAttribArray(location),this.gl.vertexAttribPointer(location,this.getPropertyTypeSize(attribute.type),this.getPropertyTypeType(attribute.type,this.gl),!1,this.getBufferRowSize(onlyInstanceStructureObject),this.getBufferRowSize(onlyInstanceStructureObject.slice(0,attrIdx))),this.gl.vertexAttribDivisor(location,1)}}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindVertexArray(null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}getPropertyTypeSize(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;case"int":return 1;case"ivec2":return 2;case"ivec3":return 3;case"ivec4":return 4;default:throw new Error(`Unknown vertex type: ${type}`)}}getPropertyTypeType(type,gl2){switch(type){case"float":case"vec2":case"vec3":case"vec4":return gl2.FLOAT;case"int":case"ivec2":case"ivec3":case"ivec4":return gl2.SHORT;default:throw new Error(`Unknown vertex type: ${type}`)}}getBufferRowSize(propertyStructure){return propertyStructure.reduce((acc,attr)=>{switch(attr.type){case"float":case"int":return acc+4;case"vec2":case"ivec2":return acc+8;case"vec3":case"ivec3":return acc+12;case"vec4":case"ivec4":return acc+16;default:throw new Error(`Unknown vertex type: ${attr.type}`)}},0)}setData(data,structureObject,count,buffer){const bufferData=new ArrayBuffer(this.getBufferRowSize(structureObject)*count);for(let i2=0;i2<count;i2++)for(const key of Object.keys(data)){const attribute=structureObject.find(attr=>attr.name===key);if(attribute){const offset2=i2*this.getBufferRowSize(structureObject)+this.getBufferRowSize(structureObject.slice(0,structureObject.indexOf(attribute))),view2=new DataView(bufferData);let setter;switch(attribute.type){case"float":case"vec2":case"vec3":case"vec4":setter=__name((value,offset22)=>view2.setFloat32(offset22,value,!0),"setter");break;case"int":case"ivec2":case"ivec3":case"ivec4":setter=__name((value,offset22)=>view2.setInt32(offset22,value,!0),"setter");break;default:throw new Error(`Unknown vertex type: ${attribute.type}`)}const values=data[key],size2=this.getPropertyTypeSize(attribute.type);for(let j2=0;j2<size2;j2++)j2<values.length&&setter(values[i2*size2+j2],offset2+j2*4)}}if(!buffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,buffer),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,bufferData),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setVertexData(data){if(!this.vertexBuffer)throw new Error("Vertex buffer is not initialized. Call setup() first.");this.setData(data,this.onlyVertexStructureObject,this.vertexProviderSignature.vertexCount,this.vertexBuffer)}setInstanceData(data){if(!this.vertexProviderSignature.instanceCount||!this.vertexProviderSignature.instancedCall)throw new Error("This vertex provider does not support instanced rendering");if(!this.instanceBuffer)throw new Error("Instance buffer is not initialized. Call setup() first.");this.setData(data,this.onlyInstanceStructureObject,this.vertexProviderSignature.instanceCount,this.instanceBuffer)}setIndexData(data){if(!this.indexBuffer)throw new Error("Index buffer is not initialized. Call setup() first.");if(this.gl.getParameter(this.gl.VERTEX_ARRAY_BINDING)===this.vao)throw new Error("Vertex array object is bound. This is not allowed at this point.");this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const indexData=new Uint16Array(data);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,indexData,this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}};__name(_VertexProvider,"VertexProvider");let VertexProvider=_VertexProvider;const circleVertexSignature={vertexProviderName:"CircleVertexProvider",vertexStructure:[{name:"a_position",type:"vec2"},{name:"size",type:"float"},{name:"a_color",type:"vec4"}],vertexCount:4,indexCount:6,instancedCall:!1},circleVertexProvider=__name(gl2=>{const prov=new VertexProvider(gl2,circleVertexSignature);return prov.setup(),prov.setVertexData({a_position:[-1,-1,1,-1,-1,1,1,1],size:[1,1,1,1],a_color:[1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1]}),prov.setIndexData([0,1,2,1,2,3]),prov},"circleVertexProvider"),circleProgram=__name((gl2,uniformProviderSignature)=>new Program(gl2,{vertexShader:`
            out vec2 v_texCoord;
            out vec4 v_color;
            void main() {
                mat3 m = mat3(
                    boundingBox.x, 0., 0.,
                    0., boundingBox.y, 0.,
                    boundingBox.z, boundingBox.w, 1.
                );
                vec3 pos = m * vec3(a_position, 1.0);
                v_color = a_color;

                gl_Position = vec4(pos.xy, 0.0, 1.0);
                v_texCoord = a_position;
            }
            `,fragmentShader:`
            out vec4 outColor;
            in vec4 v_color;
            in vec2 v_texCoord;
            void main() {
                vec2 center = shapePoint;
                float radius = length(center - v_texCoord);
                float size = .05; 
                if (radius < size) {
                    outColor = vec4(1.,1.0,1.0,1.);
                } else {
                    outColor = vec4(0.0, 0.0, 0.0, 0.0); // Transparent outside the circle
                }
                //outColor = vec4(1.,0.,0.,1.);
            }
            `,vertexProviderSignature:circleVertexSignature,uniformProviderSignature}),"circleProgram");var frag_default$1=`out vec4 outColor;
in vec2 v_texCoord;
uniform sampler2D u_texture;
uniform sampler2D u_colorGradient;
#define N 32
#define SIGMA 0.005

#ifndef MAT_OKLAB2RGB
#define MAT_OKLAB2RGB
const mat3 OKLAB2RGB_A = mat3(
    1.0,           1.0,           1.0,
    0.3963377774, -0.1055613458, -0.0894841775,
    0.2158037573, -0.0638541728, -1.2914855480);

const mat3 OKLAB2RGB_B = mat3(
    4.0767416621, -1.2684380046, -0.0041960863,
    -3.3077115913, 2.6097574011, -0.7034186147,
    0.2309699292, -0.3413193965, 1.7076147010);
#endif

#ifndef FNC_OKLAB2RGB
#define FNC_OKLAB2RGB
vec3 oklab2rgb(const in vec3 oklab) {
    vec3 lms = OKLAB2RGB_A * oklab;
    return OKLAB2RGB_B * (lms * lms * lms);
}
vec4 oklab2rgb(const in vec4 oklab) { return vec4(oklab2rgb(oklab.xyz), oklab.a); }
#endif
#ifndef MAT_RGB2OKLAB
#define MAT_RGB2OKLAB
const mat3 RGB2OKLAB_A = mat3(
    0.2104542553, 1.9779984951, 0.0259040371,
    0.7936177850, -2.4285922050, 0.7827717662,
    -0.0040720468, 0.4505937099, -0.8086757660);

const mat3 RGB2OKLAB_B = mat3(
    0.4122214708, 0.2119034982, 0.0883024619,
    0.5363325363, 0.6806995451, 0.2817188376,
    0.0514459929, 0.1073969566, 0.6299787005);
#endif

#ifndef FNC_RGB2OKLAB
#define FNC_RGB2OKLAB
vec3 rgb2oklab(const in vec3 rgb) {
    vec3 lms = RGB2OKLAB_B * rgb;
    return RGB2OKLAB_A * (sign(lms)*pow(abs(lms), vec3(0.3333333333333)));

}
vec4 rgb2oklab(const in vec4 rgb) { return vec4(rgb2oklab(rgb.rgb), rgb.a); }
#endif

float gaussian(float x, float sigma) {
    return exp(-0.5 * (x * x) / (sigma * sigma));
}

vec4 getColorFromGradient(float d) {
    
    d += time.x * canvasBox.z;
    float d_mod = mod(d, canvasBox.z);
    d_mod /= canvasBox.z;

    vec3 colorA = vec3(0.);
    vec3 colorB = vec3(0.);
    float colAPos = 0.0;
    float colBPos = 0.0;
    float maxColors = 200.;
    float endPos = float(numberColorStops) / maxColors;
    d_mod = d_mod;
    for (int i = 0; i < numberColorStops; i++) {
        vec2 pc = vec2(float(i) / float(numberColorStops),float(i+1) / float(numberColorStops));
        vec2 pos = pc * endPos;
        vec2 pixPos = vec2((float(i) + 0.5) / maxColors, (float(i+1) + 0.5) / maxColors);
        vec4 col1 = texture(u_colorGradient, vec2(pixPos.x, 0.5));
        vec4 col2 = texture(u_colorGradient, vec2(pixPos.y, 0.5));

        if (d_mod >= col1.a && d_mod < col2.a) {
            colorA = col1.rgb;
            colAPos = col1.a;
            colorB = col2.rgb;
            colBPos = col2.a;
            break;
        }
    }

    float relD = (d_mod - colAPos) / (colBPos - colAPos);
    
    
    
    return vec4(oklab2rgb(mix(rgb2oklab(colorA), rgb2oklab(colorB), relD)), 1.0);

}

float perspectiveFunction(float d) {
    float slope = perspectiveFactor * 10.;
    float y = 1. + slope * d;
    return 1. / (d + (1. - perspectiveFactor));

    
}

void main() {

    vec2 distVector = v_texCoord - canvasBox.xy;

    float normedDistance = sqrt(dot(distVector, distVector));
    float angle = (atan(distVector.y, distVector.x) + 3.14159265) / 6.28318530718;

    float accum = 0.0;
    float totalWeight = 0.0;
    for (int i = 0; i < N; i++) {
        float offset = (float(i) - float(N) * 0.5 + 0.5) / float(N); 
        float span = 0.02;
        offset *= span; 
        float weight = gaussian(offset, SIGMA);
        float pos = mod(angle + offset, 1.0); 
        float sample_ = texture(u_texture, vec2(pos, 0.5)).r;

        accum += sample_ * weight;
        totalWeight += weight;
    }
    float blurred = accum / totalWeight;
    
    float targetDistance = texture(u_texture, vec2(angle, 0.5)).r;
    targetDistance = blurred;
    
    float currentDistance = normedDistance;
    vec2 maxDistancePoint = vec2(sqrt(2.)) - canvasBox.xy;
    float maxDistance = sqrt(dot(maxDistancePoint, maxDistancePoint));
    float distance = currentDistance;

    distance /= targetDistance;

    
    
    float PI = 3.14159265;
    distance = perspectiveFunction(distance);
    

    vec4 color = getColorFromGradient(distance);
    
    outColor = color;

    
}`;const mainCanvasProgram=__name((gl2,uSig,vSig)=>new Program(gl2,{vertexShader:`
            out vec2 v_texCoord;
            void main() {
                gl_Position = vec4(a_position, 0.0, 1.0);
                v_texCoord = a_position * vec2(1., aspectRatio);
            }
        `,fragmentShader:frag_default$1,vertexProviderSignature:vSig,uniformProviderSignature:uSig}),"mainCanvasProgram"),scanViewProgram=__name((gl2,uSig,vSig)=>new Program(gl2,{vertexShader:`
            out vec2 v_texCoord;
            void main() {
                gl_Position = vec4(a_position, 0.0, 1.0);
                v_texCoord = a_position;
            }
        `,fragmentShader:`
            out vec4 outColor;
            in vec2 v_texCoord;
            uniform sampler2D u_texture;
            #define N 32
            #define SIGMA 0.005

            float gaussian(float x, float sigma) {
                return exp(-0.5 * (x * x) / (sigma * sigma));
            }

            void main() {
                vec2 distVector = v_texCoord - shapePoint;
                float normedDistance = sqrt(dot(distVector, distVector));
                float angle = (atan(-distVector.y, -distVector.x) + 3.14159265) / 6.28318530718;

                float accum = 0.0;
                float totalWeight = 0.0;
                for (int i = 0; i < N; i++) {
                    float offset = (float(i) - float(N) * 0.5 + 0.5) / float(N); 
                    float span = 0.02;
                    offset *= span; 
                    float weight = gaussian(offset, SIGMA);
                    float pos = mod(angle + offset, 1.0); 
                    float sample_ = texture(u_texture, vec2(pos, 0.5)).r;

                    accum += sample_ * weight;
                    totalWeight += weight;
                }
                float blurred = accum / totalWeight;
                
                float targetDistance = texture(u_texture, vec2(angle, 0.5)).r;
                targetDistance = blurred;
                targetDistance *= sqrt(8.);
                
                float currentDistance = normedDistance;
                if (currentDistance < targetDistance) {
                    vec4 inner = vec4(0.0,0.0,1.0,1.0);
                    vec4 outer = vec4(0.0,0.0,1.0,.5);
                    outColor = mix(inner, outer, currentDistance / targetDistance);
                    float edge = 0.05;
                    float edgeFactor = smoothstep(targetDistance - edge, targetDistance + edge, currentDistance);
                    outColor = mix(outColor, vec4(0.0, 0.0, 1.0, 1.0), edgeFactor);
                } else {
                    outColor = vec4(0.0, 0.0, 0.0, 0.0);
                }
            }
        `,vertexProviderSignature:vSig,uniformProviderSignature:uSig}),"scanViewProgram");var frag_default=`out vec4 outColor;
in vec2 v_texCoord;
uniform sampler2D u_texture;

#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_GRAD4
#define FNC_GRAD4
vec4 grad4(float j, vec4 ip) {
    const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
    vec4 p,s;
    p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
    p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
    s = vec4(lessThan(p, vec4(0.0)));
    p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;
    return p;
}
#endif

#ifndef FNC_SNOISE
#define FNC_SNOISE
float snoise(in vec2 v) {
    const vec4 C = vec4(0.211324865405187,  
                        0.366025403784439,  
                        -0.577350269189626,  
                        0.024390243902439); 
    
    vec2 i  = floor(v + dot(v, C.yy) );
    vec2 x0 = v -   i + dot(i, C.xx);

    
    vec2 i1;
    
    
    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    
    
    
    vec4 x12 = x0.xyxy + C.xxzz;
    x12.xy -= i1;

    
    i = mod289(i); 
    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
    m = m*m ;
    m = m*m ;

    
    

    vec3 x = 2.0 * fract(p * C.www) - 1.0;
    vec3 h = abs(x) - 0.5;
    vec3 ox = floor(x + 0.5);
    vec3 a0 = x - ox;

    
    
    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

    
    vec3 g;
    g.x  = a0.x  * x0.x  + h.x  * x0.y;
    g.yz = a0.yz * x12.xz + h.yz * x12.yw;
    return 130.0 * dot(m, g);
}

float snoise(in vec3 v) {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

    
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;

    
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );

    
    
    
    
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; 
    vec3 x3 = x0 - D.yyy;      

    
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

    
    
    float n_ = 0.142857142857; 
    vec3  ns = n_ * D.wyz - D.xzx;

    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  

    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    

    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);

    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );

    
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));

    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;

    
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
}

float snoise(in vec4 v) {
    const vec4  C = vec4( 0.138196601125011,  
                        0.276393202250021,  
                        0.414589803375032,  
                        -0.447213595499958); 

    
    vec4 i  = floor(v + dot(v, vec4(.309016994374947451)) ); 
    vec4 x0 = v -   i + dot(i, C.xxxx);

    

    
    vec4 i0;
    vec3 isX = step( x0.yzw, x0.xxx );
    vec3 isYZ = step( x0.zww, x0.yyz );
    
    i0.x = isX.x + isX.y + isX.z;
    i0.yzw = 1.0 - isX;
    
    i0.y += isYZ.x + isYZ.y;
    i0.zw += 1.0 - isYZ.xy;
    i0.z += isYZ.z;
    i0.w += 1.0 - isYZ.z;

    
    vec4 i3 = clamp( i0, 0.0, 1.0 );
    vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
    vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

    
    
    
    
    
    vec4 x1 = x0 - i1 + C.xxxx;
    vec4 x2 = x0 - i2 + C.yyyy;
    vec4 x3 = x0 - i3 + C.zzzz;
    vec4 x4 = x0 + C.wwww;

    
    i = mod289(i);
    float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
    vec4 j1 = permute( permute( permute( permute (
                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

    
    
    vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

    vec4 p0 = grad4(j0,   ip);
    vec4 p1 = grad4(j1.x, ip);
    vec4 p2 = grad4(j1.y, ip);
    vec4 p3 = grad4(j1.z, ip);
    vec4 p4 = grad4(j1.w, ip);

    
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    p4 *= taylorInvSqrt(dot(p4,p4));

    
    vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
    vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
    m0 = m0 * m0;
    m1 = m1 * m1;
    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;
}

vec2 snoise2( vec2 x ){
    float s  = snoise(vec2( x ));
    float s1 = snoise(vec2( x.y - 19.1, x.x + 47.2 ));
    return vec2( s , s1 );
}

vec3 snoise3( vec3 x ){
    float s  = snoise(vec3( x ));
    float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
    float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
    return vec3( s , s1 , s2 );
}

vec3 snoise3( vec4 x ){
    float s  = snoise(vec4( x ));
    float s1 = snoise(vec4( x.y - 19.1 , x.z + 33.4 , x.x + 47.2, x.w ));
    float s2 = snoise(vec4( x.z + 74.2 , x.x - 124.5 , x.y + 99.4, x.w ));
    return vec3( s , s1 , s2 );
}

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif
#ifndef FNC_MOD289
#define FNC_MOD289

float mod289(const in float x) { return x - floor(x * (1. / 289.)) * 289.; }
vec2 mod289(const in vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec3 mod289(const in vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }
vec4 mod289(const in vec4 x) { return x - floor(x * (1. / 289.)) * 289.; }

#endif

#ifndef FNC_PERMUTE
#define FNC_PERMUTE

float permute(const in float v) { return mod289(((v * 34.0) + 1.0) * v); }
vec2 permute(const in vec2 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec3 permute(const in vec3 v) { return mod289(((v * 34.0) + 1.0) * v); }
vec4 permute(const in vec4 v) { return mod289(((v * 34.0) + 1.0) * v); }

#endif
#ifndef FNC_TAYLORINVSQRT
#define FNC_TAYLORINVSQRT
float taylorInvSqrt(in float r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec2 taylorInvSqrt(in vec2 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 taylorInvSqrt(in vec3 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec4 taylorInvSqrt(in vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
#endif
#ifndef FNC_QUINTIC
#define FNC_QUINTIC 

float quintic(const in float v) { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec2  quintic(const in vec2 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec3  quintic(const in vec3 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }
vec4  quintic(const in vec4 v)  { return v*v*v*(v*(v*6.0-15.0)+10.0); }

#endif

#ifndef FNC_PNOISE
#define FNC_PNOISE

float pnoise(in vec2 P, in vec2 rep) {
    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
    Pi = mod(Pi, rep.xyxy); 
    Pi = mod289(Pi);        
    vec4 ix = Pi.xzxz;
    vec4 iy = Pi.yyww;
    vec4 fx = Pf.xzxz;
    vec4 fy = Pf.yyww;

    vec4 i = permute(permute(ix) + iy);

    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
    vec4 gy = abs(gx) - 0.5 ;
    vec4 tx = floor(gx + 0.5);
    gx = gx - tx;

    vec2 g00 = vec2(gx.x,gy.x);
    vec2 g10 = vec2(gx.y,gy.y);
    vec2 g01 = vec2(gx.z,gy.z);
    vec2 g11 = vec2(gx.w,gy.w);

    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
    g00 *= norm.x;
    g01 *= norm.y;
    g10 *= norm.z;
    g11 *= norm.w;

    float n00 = dot(g00, vec2(fx.x, fy.x));
    float n10 = dot(g10, vec2(fx.y, fy.y));
    float n01 = dot(g01, vec2(fx.z, fy.z));
    float n11 = dot(g11, vec2(fx.w, fy.w));

    vec2 fade_xy = quintic(Pf.xy);
    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
    return 2.3 * n_xy;
}

float pnoise(in vec3 P, in vec3 rep) {
    vec3 Pi0 = mod(floor(P), rep); 
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = quintic(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}

float pnoise(in vec4 P, in vec4 rep) {
    vec4 Pi0 = mod(floor(P), rep); 
    vec4 Pi1 = mod(Pi0 + 1.0, rep); 
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec4 Pf0 = fract(P); 
    vec4 Pf1 = Pf0 - 1.0; 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = vec4(Pi0.zzzz);
    vec4 iz1 = vec4(Pi1.zzzz);
    vec4 iw0 = vec4(Pi0.wwww);
    vec4 iw1 = vec4(Pi1.wwww);

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 ixy00 = permute(ixy0 + iw0);
    vec4 ixy01 = permute(ixy0 + iw1);
    vec4 ixy10 = permute(ixy1 + iw0);
    vec4 ixy11 = permute(ixy1 + iw1);

    vec4 gx00 = ixy00 * (1.0 / 7.0);
    vec4 gy00 = floor(gx00) * (1.0 / 7.0);
    vec4 gz00 = floor(gy00) * (1.0 / 6.0);
    gx00 = fract(gx00) - 0.5;
    gy00 = fract(gy00) - 0.5;
    gz00 = fract(gz00) - 0.5;
    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
    vec4 sw00 = step(gw00, vec4(0.0));
    gx00 -= sw00 * (step(0.0, gx00) - 0.5);
    gy00 -= sw00 * (step(0.0, gy00) - 0.5);

    vec4 gx01 = ixy01 * (1.0 / 7.0);
    vec4 gy01 = floor(gx01) * (1.0 / 7.0);
    vec4 gz01 = floor(gy01) * (1.0 / 6.0);
    gx01 = fract(gx01) - 0.5;
    gy01 = fract(gy01) - 0.5;
    gz01 = fract(gz01) - 0.5;
    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
    vec4 sw01 = step(gw01, vec4(0.0));
    gx01 -= sw01 * (step(0.0, gx01) - 0.5);
    gy01 -= sw01 * (step(0.0, gy01) - 0.5);

    vec4 gx10 = ixy10 * (1.0 / 7.0);
    vec4 gy10 = floor(gx10) * (1.0 / 7.0);
    vec4 gz10 = floor(gy10) * (1.0 / 6.0);
    gx10 = fract(gx10) - 0.5;
    gy10 = fract(gy10) - 0.5;
    gz10 = fract(gz10) - 0.5;
    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
    vec4 sw10 = step(gw10, vec4(0.0));
    gx10 -= sw10 * (step(0.0, gx10) - 0.5);
    gy10 -= sw10 * (step(0.0, gy10) - 0.5);

    vec4 gx11 = ixy11 * (1.0 / 7.0);
    vec4 gy11 = floor(gx11) * (1.0 / 7.0);
    vec4 gz11 = floor(gy11) * (1.0 / 6.0);
    gx11 = fract(gx11) - 0.5;
    gy11 = fract(gy11) - 0.5;
    gz11 = fract(gz11) - 0.5;
    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
    vec4 sw11 = step(gw11, vec4(0.0));
    gx11 -= sw11 * (step(0.0, gx11) - 0.5);
    gy11 -= sw11 * (step(0.0, gy11) - 0.5);

    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
    g0000 *= norm00.x;
    g0100 *= norm00.y;
    g1000 *= norm00.z;
    g1100 *= norm00.w;

    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
    g0001 *= norm01.x;
    g0101 *= norm01.y;
    g1001 *= norm01.z;
    g1101 *= norm01.w;

    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
    g0010 *= norm10.x;
    g0110 *= norm10.y;
    g1010 *= norm10.z;
    g1110 *= norm10.w;

    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
    g0011 *= norm11.x;
    g0111 *= norm11.y;
    g1011 *= norm11.z;
    g1111 *= norm11.w;

    float n0000 = dot(g0000, Pf0);
    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
    float n1111 = dot(g1111, Pf1);

    vec4 fade_xyzw = quintic(Pf0);
    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
    return 2.2 * n_xyzw;
}
#endif
#ifndef FNC_RGB2LUMA
#define FNC_RGB2LUMA
float rgb2luma(const in vec3 rgb) { return dot(rgb, vec3(0.2126, 0.7152, 0.0722)); }
float rgb2luma(const in vec4 rgb) { return rgb2luma(rgb.rgb); }
#endif

#ifndef FNC_LUMA
#define FNC_LUMA
float luma(float v) { return v; }
float luma(in vec3 v) { return rgb2luma(v); }
float luma(in vec4 v) { return rgb2luma(v.rgb); }
#endif
#ifndef FNC_BLENDSOFTLIGHT
#define FNC_BLENDSOFTLIGHT
float blendSoftLight(in float base, in float blend) {
    return (blend < .5)? (2. * base * blend + base * base * (1. - 2.*blend)): (sqrt(base) * (2. * blend - 1.) + 2. * base * (1. - blend));
}

vec3 blendSoftLight(in vec3 base, in vec3 blend) {
    return vec3(blendSoftLight(base.r, blend.r),
                blendSoftLight(base.g, blend.g),
                blendSoftLight(base.b, blend.b));
}

vec4 blendSoftLight(in vec4 base, in vec4 blend) {
    return vec4(blendSoftLight( base.r, blend.r ),
                blendSoftLight( base.g, blend.g ),
                blendSoftLight( base.b, blend.b ),
                blendSoftLight( base.a, blend.a )
    );
}

vec3 blendSoftLight(in vec3 base, in vec3 blend, in float opacity) {
    return (blendSoftLight(base, blend) * opacity + base * (1. - opacity));
}
#endif
#ifndef SAMPLER_FNC
#if __VERSION__ >= 300
#define SAMPLER_FNC(TEX, UV) texture(TEX, UV)
#else
#define SAMPLER_FNC(TEX, UV) texture2D(TEX, UV)
#endif
#endif

#ifndef SAMPLER_TYPE
#define SAMPLER_TYPE sampler2D
#endif

#ifndef GRAIN_TYPE
#define GRAIN_TYPE vec3
#endif

#ifndef GRAIN_SAMPLER_FNC
#define GRAIN_SAMPLER_FNC(TEX, UV) SAMPLER_FNC(TEX, UV).rgb
#endif

#ifndef FNC_GRAIN
#define FNC_GRAIN
float grain(vec2 texCoord, vec2 resolution, float t, float multiplier) {
    vec2 mult = texCoord * resolution;
    float offset = snoise(vec3(mult / multiplier, t));
    float n1 = pnoise(vec3(mult, offset), vec3(1. / texCoord * resolution, 1.));
    return n1 / 2. + .5;
}

float grain(vec2 texCoord, vec2 resolution, float t) {
    return grain(texCoord, resolution, t, 2.5);
}

float grain(vec2 texCoord, vec2 resolution) {
    return grain(texCoord, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t, float multiplier ) {
    GRAIN_TYPE org = GRAIN_SAMPLER_FNC(tex, st);

    float g = grain(st, resolution, t, multiplier);

    
    float luminance = luma(org);
    
    
    
    float response = smoothstep(0.05, 0.5, luminance);
    return mix( blendSoftLight(org, GRAIN_TYPE(g)), 
                org, 
                response * response);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, vec2 resolution) {
    return grain(tex, st, resolution, 0.);
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t, float multiplier  ) {
    return grain(tex, st, vec2(resolution), t, multiplier );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution, float t ) {
    return grain(tex, st, resolution, t, 2.5 );
}

GRAIN_TYPE grain(SAMPLER_TYPE tex, vec2 st, float resolution) {
    return grain(tex, st, resolution, 0.);
}

#endif

void main() {
    outColor = vec4(texture(u_texture, v_texCoord).rgba);
    if (grainEnabled == 1) {
        float grainVal = grain(v_texCoord,dimensions, time * 50.);
        outColor.xyz += (grainVal - 0.5) * grainIntensity * 0.8;
    }
}`;const effectProgram=__name((gl2,uSig,vSig)=>new Program(gl2,{vertexShader:`
            out vec2 v_texCoord;
            void main() {
                mat3 m = mat3(
                    boundingBox.x, 0., 0.,
                    0., boundingBox.y, 0.,
                    boundingBox.z, boundingBox.w, 1.
                );
                vec3 pos = m * vec3(a_position, 1.0);

                gl_Position = vec4(pos.xy, 0.0, 1.0);
                v_texCoord = texCoord;
            }
        `,fragmentShader:frag_default,vertexProviderSignature:vSig,uniformProviderSignature:uSig}),"effectProgram"),_StarShapedDomainWipeRenderer=class _StarShapedDomainWipeRenderer{constructor(canvas){__publicField(this,"canvas");__publicField(this,"gl");__publicField(this,"image");__publicField(this,"imageId","");__publicField(this,"resources",{});__publicField(this,"width",1920);__publicField(this,"height",1080);if(this.canvas=canvas,this.gl=canvas.getContext("webgl2",{preserveDrawingBuffer:!0}),!this.gl)throw new Error("WebGL2 not supported")}async onFrameReady(cb){return cb()}setup(engine){this.gl.getExtension("EXT_color_buffer_float"),this.resources.uniformProviderSignature={uniformProviderName:"Uniforms",uniformStructure:[{name:"shapePoint",type:"vec2"},{name:"canvasPoint",type:"vec2"},{name:"boundingBox",type:"vec4"}]},this.resources.mainCanvasUniformProviderSignature={uniformProviderName:"MainCanvasUniforms",uniformStructure:[{name:"canvasBox",type:"vec4"},{name:"boundingBox",type:"vec4"},{name:"time",type:"vec2"},{name:"dimensions",type:"vec2"},{name:"numberColorStops",type:"int"},{name:"perspectiveFactor",type:"float"},{name:"aspectRatio",type:"float"}]},this.resources.effectUniformsProviderSignature={uniformProviderName:"EffectUniforms",uniformStructure:[{name:"boundingBox",type:"vec4"},{name:"dimensions",type:"vec2"},{name:"aspectRatio",type:"float"},{name:"grainEnabled",type:"int"},{name:"grainIntensity",type:"float"},{name:"time",type:"float"}]},this.resources.scanViewUniformProviderSignature={uniformProviderName:"ScanViewUniforms",uniformStructure:[{name:"boundingBox",type:"vec4"},{name:"shapePoint",type:"vec2"}]},this.resources.circleVertexProvider=circleVertexProvider(this.gl),this.resources.circleProgram=circleProgram(this.gl,this.resources.uniformProviderSignature),this.resources.circleProgram.setup(),this.resources.uniformProvider=new UniformProvider(this.gl,this.resources.uniformProviderSignature),this.resources.uniformProvider.setup(),this.resources.mainCanvasUniformProvider=new UniformProvider(this.gl,this.resources.mainCanvasUniformProviderSignature),this.resources.mainCanvasUniformProvider.setup(),this.resources.scanViewUniformProvider=new UniformProvider(this.gl,this.resources.scanViewUniformProviderSignature),this.resources.scanViewUniformProvider.setup(),this.resources.effectUniformsProvider=new UniformProvider(this.gl,this.resources.effectUniformsProviderSignature),this.resources.effectUniformsProvider.setup(),this.resources.fullscreenQuadVertexProviderSignature={vertexProviderName:"FullscreenQuad",vertexStructure:[{name:"a_position",type:"vec2"},{name:"texCoord",type:"vec2"}],vertexCount:4,indexCount:6,instancedCall:!1},this.resources.fullscreenQuadVertexProvider=new VertexProvider(this.gl,this.resources.fullscreenQuadVertexProviderSignature),this.resources.fullscreenQuadVertexProvider.setup(),this.resources.exampleProgram=new Program(this.gl,{vertexShader:`
            out vec2 v_texCoord;
            void main() {
                mat3 m = mat3(
                    boundingBox.x, 0., 0.,
                    0., boundingBox.y, 0.,
                    boundingBox.z, boundingBox.w, 1.
                );
                vec3 pos = m * vec3(a_position, 1.0);

                gl_Position = vec4(pos.xy, 0.0, 1.0);
                v_texCoord = texCoord;
            }
            `,fragmentShader:`
            out vec4 outColor;
            in vec2 v_texCoord;
            uniform sampler2D u_texture;
            void main() {
                outColor = vec4(texture(u_texture, v_texCoord).rgba);
                //outColor = vec4(v_texCoord, 0.0, 1.0); // just for testing
            }
            `,vertexProviderSignature:this.resources.fullscreenQuadVertexProviderSignature,uniformProviderSignature:this.resources.uniformProviderSignature}),this.resources.exampleProgram.setup(),this.resources.inputShape=new Texture(this.gl,{shape:[500,500],type:"RGBA8",textureOptions:{minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE}}),this.resources.inputShape.setup(),this.resources.inputShape.setData(engine.image),this.imageId=engine.currentImageAssetId,this.resources.shapeViewerTexture=new Texture(this.gl,{shape:[500,500],type:"RGBA8",createFramebuffer:!0}),this.resources.shapeViewerTexture.setup(),this.resources.mainCanvasTexture=new Texture(this.gl,{shape:[1920,1080],type:"RGBA8",createFramebuffer:!0}),this.resources.mainCanvasTexture.setup(),this.resources.fullscreenQuadVertexProvider.setVertexData({a_position:[-1,-1,1,-1,-1,1,1,1],texCoord:[0,0,1,0,0,1,1,1]}),this.resources.fullscreenQuadVertexProvider.setIndexData([0,1,2,1,3,2]),this.resources.distanceTexture=new Texture(this.gl,{shape:[4e3,1],type:"R8",createFramebuffer:!0,textureOptions:{minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.REPEAT,wrapT:this.gl.CLAMP_TO_EDGE}}),this.resources.distanceTexture.setup(),this.resources.distanceComputationProgram=new Program(this.gl,{vertexShader:`
            out vec2 v_texCoord;
            void main() {
                gl_Position = vec4(a_position, 0.0, 1.0);
                v_texCoord = texCoord;
            }
        `,fragmentShader:`
            out float distanceValue;
            in vec2 v_texCoord;
            uniform sampler2D u_texture;
            vec2 toUV(vec2 p) {
                return p * 0.5 + 0.5;
            }

            float threshold(float val) {
                if (val > 0.5) {
                    return 1.0;
                } else {
                    return 0.0;
                }
            }
            void main() {
                float angle = v_texCoord.x * 6.28318530718; 
                vec2 p1 = shapePoint;
                float val = texture(u_texture, toUV(p1)).a;
                float inShapeVal = threshold(val);
                vec2 p2 = vec2(0.);
                for (int i = 1; i < 11; i++) {
                    float pc = float(i) / 10.0;
                    p2 = shapePoint + vec2(cos(angle), sin(angle)) * pc * sqrt(8.0);
                    float val = texture(u_texture, toUV(p2)).a;
                    bool notInShape = threshold(val) != inShapeVal;
                    if (notInShape) {
                        break;
                    }
                }
                vec2 mid = (p1 + p2) * 0.5;
                for (int i = 0; i < 16; i++) {
                    float val = texture(u_texture, toUV(mid)).a;
                    if (val > 0.5) {
                        val = 1.0;
                    } else {
                        val = 0.0;
                    }
                    bool inShape = val == inShapeVal;
                    if (inShape) {
                        p1 = mid;
                    } else {
                        p2 = mid;
                    }
                    mid = (p1 + p2) * 0.5;
                }
                distanceValue = sqrt(dot(mid - shapePoint, mid - shapePoint)) / sqrt(8.0);
                //distanceValue = 0.5;
            }
        `,vertexProviderSignature:this.resources.fullscreenQuadVertexProviderSignature,uniformProviderSignature:this.resources.uniformProviderSignature}),this.resources.distanceComputationProgram.setup(),this.resources.mainCanvasDistanceRendererProgram=mainCanvasProgram(this.gl,this.resources.mainCanvasUniformProviderSignature,this.resources.fullscreenQuadVertexProviderSignature),this.resources.mainCanvasDistanceRendererProgram.setup(),this.resources.scanViewProgram=scanViewProgram(this.gl,this.resources.scanViewUniformProviderSignature,this.resources.fullscreenQuadVertexProviderSignature),this.resources.scanViewProgram.setup(),this.resources.effectProgram=effectProgram(this.gl,this.resources.effectUniformsProviderSignature,this.resources.fullscreenQuadVertexProviderSignature),this.resources.effectProgram.setup(),this.resources.colorGradientTexture=new Texture(this.gl,{shape:[200,1],type:"RGBA32F",createFramebuffer:!1,textureOptions:{minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE}}),this.resources.colorGradientTexture.setup()}draw(engine){(engine.CONFIG.width!==this.width||engine.CONFIG.height!==this.height)&&(this.width=engine.CONFIG.width,this.height=engine.CONFIG.height,this.resources.mainCanvasTexture.setDescription({shape:[engine.CONFIG.width,engine.CONFIG.height],type:"RGBA8",createFramebuffer:!0})),this.imageId!==engine.currentImageAssetId&&(this.resources.inputShape.setData(engine.image),this.imageId=engine.currentImageAssetId);const colorFloatArray=new Float32Array(200*4);for(let i2=0;i2<200;i2++)colorFloatArray[i2]=1;const sortedColorStops=engine.CONFIG.colorStops.sort((a2,b2)=>a2.position-b2.position),firstColorStop=sortedColorStops[0];colorFloatArray[0]=firstColorStop.color.r,colorFloatArray[1]=firstColorStop.color.g,colorFloatArray[2]=firstColorStop.color.b,colorFloatArray[3]=0;for(let i2=0;i2<sortedColorStops.length;i2++){const colorStop=sortedColorStops[i2],index=(i2+1)*4;colorFloatArray[index]=colorStop.color.r,colorFloatArray[index+1]=colorStop.color.g,colorFloatArray[index+2]=colorStop.color.b,colorFloatArray[index+3]=colorStop.position}const lastIndex=(sortedColorStops.length+1)*4;colorFloatArray[lastIndex]=firstColorStop.color.r,colorFloatArray[lastIndex+1]=firstColorStop.color.g,colorFloatArray[lastIndex+2]=firstColorStop.color.b,colorFloatArray[lastIndex+3]=1,this.resources.colorGradientTexture.setData(colorFloatArray),this.gl.viewport(0,0,4e3,1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.resources.distanceTexture.framebuffer),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.resources.uniformProvider.setUniforms({shapePoint:engine.CONFIG.shapePoint,canvasPoint:engine.CONFIG.canvasPoint,boundingBox:[1,1,0,0]}),this.resources.distanceComputationProgram.draw({uniformProvider:this.resources.uniformProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.inputShape}}),this.gl.viewport(0,0,engine.CONFIG.width,engine.CONFIG.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.resources.mainCanvasTexture.framebuffer),this.gl.clearColor(1,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendEquation(this.gl.FUNC_ADD),this.resources.mainCanvasUniformProvider.setUniforms({canvasBox:[...engine.CONFIG.canvasPoint,engine.CONFIG.canvasScale,engine.CONFIG.shapeScale],boundingBox:[1,1,0,0],time:[engine.REL_TIME,0],numberColorStops:engine.CONFIG.colorStops.length+1,perspectiveFactor:engine.CONFIG.perspectiveFactor,aspectRatio:engine.CONFIG.height/engine.CONFIG.width,dimensions:[engine.CONFIG.width,engine.CONFIG.height]}),this.resources.mainCanvasDistanceRendererProgram.draw({uniformProvider:this.resources.mainCanvasUniformProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.distanceTexture,u_colorGradient:this.resources.colorGradientTexture}});const scale=engine.CONFIG.shapeScale,sx=-scale,sy=-scale*engine.CONFIG.width/engine.CONFIG.height,shapePos=[engine.CONFIG.shapePoint[0],engine.CONFIG.shapePoint[1]],cp=engine.CONFIG.canvasPoint,tx=-sx*shapePos[0]+cp[0],ty=-sy*shapePos[1]+cp[1]*(engine.CONFIG.width/engine.CONFIG.height);engine.CONFIG.overlayShape&&(this.resources.uniformProvider.setUniforms({shapePoint:engine.CONFIG.shapePoint,canvasPoint:engine.CONFIG.canvasPoint,boundingBox:[sx,sy,tx,ty]}),this.resources.exampleProgram.draw({uniformProvider:this.resources.uniformProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.inputShape}})),this.gl.disable(this.gl.BLEND),this.gl.viewport(0,0,500,500),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.resources.shapeViewerTexture.framebuffer),this.gl.clearColor(1,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendEquation(this.gl.FUNC_ADD),this.resources.uniformProvider.setUniforms({shapePoint:engine.CONFIG.shapePoint,canvasPoint:engine.CONFIG.canvasPoint,boundingBox:[1,1,0,0]}),this.resources.exampleProgram.draw({uniformProvider:this.resources.uniformProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.inputShape}}),this.resources.scanViewUniformProvider.setUniforms({shapePoint:engine.CONFIG.shapePoint,boundingBox:[-1,1,0,0]}),this.resources.scanViewProgram.draw({uniformProvider:this.resources.scanViewUniformProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.distanceTexture}}),this.resources.uniformProvider.setUniforms({shapePoint:engine.CONFIG.shapePoint,canvasPoint:engine.CONFIG.canvasPoint,boundingBox:[1,1,0,0]}),this.resources.circleProgram.draw({uniformProvider:this.resources.uniformProvider,vertexProvider:this.resources.circleVertexProvider,textures:{}}),this.gl.disable(this.gl.BLEND),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.resources.effectUniformsProvider.setUniforms({boundingBox:[-1,1,0,0],aspectRatio:engine.CONFIG.height/engine.CONFIG.width,dimensions:[engine.CONFIG.width,engine.CONFIG.height],grainEnabled:engine.CONFIG.grainEnabled?1:0,grainIntensity:engine.CONFIG.grainIntensity,time:engine.REL_TIME}),this.resources.effectProgram.draw({uniformProvider:this.resources.effectUniformsProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.mainCanvasTexture}}),engine.CONFIG.showShapeInspector&&(this.resources.uniformProvider.setUniforms({shapePoint:engine.CONFIG.shapePoint,canvasPoint:engine.CONFIG.canvasPoint,boundingBox:[.25,-.25*engine.CONFIG.width/engine.CONFIG.height,.5,-.5]}),this.resources.exampleProgram.draw({uniformProvider:this.resources.uniformProvider,vertexProvider:this.resources.fullscreenQuadVertexProvider,textures:{u_texture:this.resources.shapeViewerTexture}}))}};__name(_StarShapedDomainWipeRenderer,"StarShapedDomainWipeRenderer");let StarShapedDomainWipeRenderer=_StarShapedDomainWipeRenderer;function PlayButton({togglePlaying,playing}){return jsxRuntimeExports.jsx(Button,{iconName:playing?"pause":"play_arrow",bgColor:"var(--green2)",hoverBgColor:"var(--green1)",color:"var(--gray8)",onClick:togglePlaying})}__name(PlayButton,"PlayButton");function TimelineBar({timeline}){const project=reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline)),togglePlaying=__name(()=>{const project2=timeline.getProject(),isPlaying=project2.timelineData.playing,currentFrame=project2.timelineData.playheadPosition;isPlaying?timeline.projectTools.updatePlayheadPosition(currentFrame,!0):timeline.projectTools.startPlayback()},"togglePlaying");return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:"20px"},children:[jsxRuntimeExports.jsx(PlayButton,{togglePlaying,playing:timeline.getProject().timelineData.playing}),jsxRuntimeExports.jsx("div",{style:{color:"var(--gray7)",width:"100px"},children:`${project.timelineData.playheadPosition} / ${project.timelineData.focusRange[1]}`})]})}__name(TimelineBar,"TimelineBar");const defaultEvent={path:"echoknight-loaded",event:!0},_ImageController=class _ImageController{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=data,this.initialised=!0}receiveUpdate(update){this.data=update}receiveMetadataUpdate(){}getSnapshot(){return this.data}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}};__name(_ImageController,"ImageController");let ImageController=_ImageController;function StarShapedDomainInterior({timeline,controls}){const canvasRef=reactExports.useRef(null),containerRef=reactExports.useRef(null),engine=reactExports.useRef(new Engine).current,rendererRef=reactExports.useRef(null),controlsSnapshot=reactExports.useSyncExternalStore(controls.subscribeInternal.bind(controls),controls.getSnapshot.bind(controls));reactExports.useSyncExternalStore(timeline.onTimelineUpdate.bind(timeline),timeline.getProject.bind(timeline));const{index:indexInitialized,index}=useIndex(),assetsList=indexInitialized?Object.keys(index.data).filter(id=>index.data[id].type==="image").map(id=>({assetId:id,assetController:new ImageController})):[],{initialized:assetsInitialized,assets}=useAssets(assetsList),processedAssets=reactExports.useMemo(()=>assetsInitialized?Object.keys(assets).map(id=>({assetId:id,assetController:assets[id]})):[],[assetsInitialized,assets]),{width,height}=controlsSnapshot,[engineInitialized,setEngineInitialized]=React.useState(!1);reactExports.useEffect(()=>{engineInitialized||engine.init(controlsSnapshot,processedAssets).then(()=>{setEngineInitialized(!0)}).catch(error=>{})},[engineInitialized,engine,controlsSnapshot,processedAssets]),engineInitialized&&engine.update(controlsSnapshot,timeline,processedAssets);const{recordEvent}=useTracker(defaultEvent);reactExports.useEffect(()=>{if(!canvasRef.current)return;const canvas=canvasRef.current;canvas.width=width,canvas.height=height},[width,height,canvasRef]),reactExports.useEffect(()=>{function resizeCanvasToFit(container,canvas,aspectRatio){const containerWidth=container.clientWidth,containerHeight=container.clientHeight,containerAspect=containerWidth/containerHeight;let dwidth,dheight;containerAspect>aspectRatio?(dheight=containerHeight,dwidth=dheight*aspectRatio):(dwidth=containerWidth,dheight=dwidth/aspectRatio),canvas.style.width=`${dwidth}px`,canvas.style.height=`${dheight}px`}__name(resizeCanvasToFit,"resizeCanvasToFit");const handleResize=__name(()=>{if(canvasRef.current&&containerRef.current){const container=containerRef.current,canvas=canvasRef.current,aspectRatio=width/height;resizeCanvasToFit(container,canvas,aspectRatio)}},"handleResize");return window.addEventListener("resize",handleResize),handleResize(),()=>{window.removeEventListener("resize",handleResize)}},[width,height,engineInitialized,timeline]);const frameSaver=reactExports.useRef(new FrameSaver({timeline,width,height})).current;return frameSaver.setSize(width,height),reactExports.useEffect(()=>{const canvas=canvasRef.current;if(canvas){if(frameSaver.addCanvas(canvas),canvas.width=width,canvas.height=height,!rendererRef.current){rendererRef.current=new StarShapedDomainWipeRenderer(canvas);const renderer=rendererRef.current;renderer.setup(engine);const loop=__name(()=>{renderer.draw(engine);const{rendering}=frameSaver.getStatus();rendering&&renderer.onFrameReady&&renderer.onFrameReady(frameSaver.frame.bind(frameSaver)),requestAnimationFrame(loop)},"loop");requestAnimationFrame(loop)}return()=>{}}},[width,height,timeline,controls,engine,engineInitialized,canvasRef.current]),timeline?engineInitialized?jsxRuntimeExports.jsxs("div",{style:{width:"100vw",height:"100vh",backgroundColor:"var(--gray1)",position:"relative"},children:[jsxRuntimeExports.jsx("div",{ref:containerRef,style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100% - 60px)"},children:jsxRuntimeExports.jsx("canvas",{ref:canvasRef,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"60px",backgroundColor:"var(--gray2)"},children:jsxRuntimeExports.jsx(TimelineBar,{timeline})}),jsxRuntimeExports.jsx(FrameSaverScreen,{frameSaver,recordEvent,controls:controlsSnapshot})]}):jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",gap:"10px",alignItems:"center",height:"100vh",width:"100vw",backgroundColor:"var(--gray1)",color:"var(--gray4)",padding:"20px"},children:[jsxRuntimeExports.jsx("div",{style:{fontSize:"4rem"},className:"materialSymbols",children:"image"}),jsxRuntimeExports.jsxs("div",{style:{textAlign:"center"},children:["Waiting for image to load...",jsxRuntimeExports.jsx("br",{}),"If you haven't uploaded an image yet, please do so using the 'shape' settings."]})]}):jsxRuntimeExports.jsx("div",{children:"No timeline found"})}__name(StarShapedDomainInterior,"StarShapedDomainInterior");function StarShapedDomainSetup({timeline,controls}){return timeline&&controls?jsxRuntimeExports.jsx(StarShapedDomainInterior,{controls,timeline}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(StarShapedDomainSetup,"StarShapedDomainSetup");const pb=new u$1.ProjectBuilder;pb.setTimelineData(5e3,30,45);pb.addContinuousSignal("s1","Unused Signal",[0,1]);pb.addContinuousSignal("cx","Center X",[0,1]);pb.addPin("cx",0,0,"return easyLinear()");pb.addPin("cx",50,1,"return easyLinear()");pb.addPin("cx",900,1,"return easyLinear()");pb.addContinuousSignal("cy","Center Y",[0,1]);pb.addPin("cy",0,0,"return easyLinear()");pb.addPin("cy",50,1,"return easyLinear()");pb.addPin("cy",900,1,"return easyLinear()");pb.setSignalActiveStatus("s1",!0);pb.setSignalActiveStatus("cx",!1);pb.setSignalActiveStatus("cy",!1);const defaultProject=__name(()=>{const project=pb.getProject();return _e.TimelineController.fromProject(project).serialize()},"defaultProject"),defaultName="echoknight.timeline";function LiquidLissajousExterior(){const timeline=useTimeline(),controls=useControls();return jsxRuntimeExports.jsx(StarShapedDomainSetup,{timeline,controls})}__name(LiquidLissajousExterior,"LiquidLissajousExterior");function LiquidLissajous(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(TimelineProvider,{defaultProject,defaultName,shouldCreate:!0,children:jsxRuntimeExports.jsx(ControlsProvider,{children:jsxRuntimeExports.jsx(LiquidLissajousExterior,{})})})})}__name(LiquidLissajous,"LiquidLissajous");function PresetButton({label,preset,onClick}){const colorStops=[...preset.colorStops].map(c=>[Math.round(c.color.r*255),Math.round(c.color.g*255),Math.round(c.color.b*255),c.position]),gradient=`
        linear-gradient(90deg, ${colorStops.map(c=>`rgb(${c.slice(0,3).join(",")}) ${Math.floor(c[3]*100)}%`).join(", ")})
    `,numberColors=colorStops.length;return jsxRuntimeExports.jsx("div",{style:{background:gradient,borderRadius:"var(--borderRadiusSmall)",boxShadow:`inset 0 0 7px 5px rgba(${colorStops[numberColors-1].join(",")},0.3)`,cursor:"pointer",width:"auto",padding:"8px 16px",border:`2px solid rgb(${colorStops[0].slice(0,3).join(",")})`,height:"3em",display:"flex",alignItems:"center",justifyContent:"center"},onClick:__name(()=>onClick(preset),"onClick"),children:jsxRuntimeExports.jsx("div",{style:{color:"white",textShadow:"0 0px 3px rgba(0,0,0,0.8)",fontWeight:600},children:label})})}__name(PresetButton,"PresetButton");const presets={daisy:{width:1920,height:1080,colorStops:[{color:{r:.7789670312499999,g:1,b:.25749999999999995},position:.03631344833815029,id:"9b2af099-7ee7-41ba-9889-d63f53d86078"},{color:{r:.93090625,g:.3761339062178194,b:.0366980698242188},position:.22652863078034682,id:"70c89263-47ae-42fe-9927-95d37eb9869f"},{color:{r:.8087781817674637,g:.6524299011230469,b:.916796875},position:.5860560422687862,id:"ecd6b632-4262-4a2e-b548-2b4ee772e5a7"},{color:{r:.4684095249023437,g:.8900270055666961,b:.89559375},position:.7418600975433526,id:"d2d952ca-b8f4-4446-9460-464ed778438e"}],canvasPoint:[-.04,-.04],canvasScale:.33,shapeScale:.36,shapePoint:[-.01,-.01],perspectiveFactor:.1,noiseDegenerationEnabled:!1,noiseDegenerationAmplitude:.5,noiseDegenerationFrequency:1,speed:.66,exportDuration:10,exportPerfectLoop:!0,shapeImageAssetId:"daisy_shape.png",grainEnabled:!0,grainIntensity:.15,overlayShape:!1},arcade:{width:1920,height:1080,colorStops:[{color:{r:.01,g:.00998308125,b:.0099},position:0,id:"9b2af099-7ee7-41ba-9889-d63f53d86078"},{color:{r:1,g:.3659375,b:.3659375},position:.028331602239884394,id:"70c89263-47ae-42fe-9927-95d37eb9869f"},{color:{r:1,g:.9253397851562499,b:.58665625},position:.08521495664739884,id:"0f91ae11-bf42-40ea-ab95-30b5b8e885a6"},{color:{r:.01,g:.0099,b:.0099},position:.18932893786127167,id:"2c0c0939-095e-4bae-9f6d-024181ba5450"},{color:{r:.009997142857142857,g:.01,b:.0099},position:.2303332731213873,id:"d2d952ca-b8f4-4446-9460-464ed778438e"},{color:{r:0,g:.9215686274509803,b:.2976954656862746},position:.3204423320086705,id:"ecd6b632-4262-4a2e-b548-2b4ee772e5a7"},{color:{r:.6352941176470588,g:1,b:.9411911764705883},position:.3819939938583815,id:"d2b0a649-00a1-4a2e-88e7-0415513828b4"},{color:{r:.01,g:.0099,b:.0099},position:.4643639360549133,id:"915b3fe4-766a-4282-85ac-72981402a7cb"},{color:{r:.01,g:.0099,b:.0099},position:.5065536940028902,id:"74932177-dd61-42de-a403-07eb13ebb240"},{color:{r:0,g:.08818750000000009,b:1},position:.5925024837427746,id:"27b41890-87f9-47e4-a94a-06aeba2b458b"},{color:{r:.21568627450980393,g:.2391911764705883,b:1},position:.6597611091040463,id:"65a21e80-46c2-4fab-9c3c-c20c0cfec7da"},{color:{r:.01,g:.0099,b:.0099},position:.7244964776011561,id:"05410c20-cbea-4292-ada8-f391c4ad0766"},{color:{r:.01,g:.0099,b:.0099},position:.780013773482659,id:"296b1e7f-7d1b-404f-8e24-7c84853293e3"},{color:{r:1,g:0,b:.5769375000000005},position:.848491690751445,id:"b733d01b-c9fe-4755-bb3e-291b7dbc235f"},{color:{r:1,g:.399734375,b:.5717667514648436},position:.8842575867052023,id:"51165c66-def5-40f2-b532-059bdad8ade7"},{color:{r:.01,g:.0099,b:.0099},position:.9248554913294798,id:"3111c12d-32b2-4382-aa8f-34b3f86f892b"}],canvasPoint:[-.04,-.04],canvasScale:1.31,shapeScale:.36,shapePoint:[-.01,-.01],perspectiveFactor:.59,noiseDegenerationEnabled:!1,noiseDegenerationAmplitude:.5,noiseDegenerationFrequency:1,speed:.51,exportDuration:10,exportPerfectLoop:!0,shapeImageAssetId:"star_shape.png",grainEnabled:!0,grainIntensity:.47,overlayShape:!1},love:{width:1920,height:1080,colorStops:[{color:{r:.37534375,g:0,b:.12681926953125014},position:.060309790462427744,id:"9b2af099-7ee7-41ba-9889-d63f53d86078"},{color:{r:1,g:.41870312499999995,b:.4769599711914061},position:.29274295520231214,id:"cb8dc445-e2de-48bd-bd44-77ff6e4108aa"},{color:{r:1,g:.8818098958333335,b:.7163437500000001},position:.3979915552745665,id:"ecd6b632-4262-4a2e-b548-2b4ee772e5a7"},{color:{r:1,g:.7190296948242195,b:.281578125},position:.6822954299132948,id:"bff39565-4df6-4eb8-a421-b20ad7bc7536"}],canvasPoint:[-.04,-.04],canvasScale:.22,shapeScale:.36,shapePoint:[.01,.02],perspectiveFactor:.63,noiseDegenerationEnabled:!1,noiseDegenerationAmplitude:.5,noiseDegenerationFrequency:1,speed:.77,exportDuration:10,exportPerfectLoop:!0,shapeImageAssetId:"heart_shape.png",grainEnabled:!0,grainIntensity:.47,overlayShape:!0}},SwitchableSection=__name(({label="Toggle Section",children,activeOnToggled=!0,onToggle,checked})=>{const active=activeOnToggled?checked:!checked;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"1em"},children:[jsxRuntimeExports.jsx("div",{children:label}),jsxRuntimeExports.jsx(Root,{className:"SwitchRoot",onCheckedChange:__name(checked2=>{onToggle(checked2)},"onCheckedChange"),checked,children:jsxRuntimeExports.jsx(Thumb,{className:"SwitchThumb"})})]}),jsxRuntimeExports.jsx("div",{style:{opacity:active?1:.2,pointerEvents:active?"auto":"none",userSelect:active?"auto":"none",transition:"opacity 0.2s ease-in-out"},children})]})},"SwitchableSection"),_Controller=class _Controller{constructor(){__publicField(this,"initialised",!1);__publicField(this,"data");__publicField(this,"update");__publicField(this,"updateMetadata")}load(data){this.data=data,this.initialised=!0}receiveUpdate(update){this.data=update}receiveMetadataUpdate(){}getSnapshot(){return this.data}destroy(){this.data=void 0,this.initialised=!1}setHooks(hooks){this.update=hooks.update,this.updateMetadata=hooks.updateMetadata}};__name(_Controller,"Controller");let Controller=_Controller;const ImageUploader=__name(({selectedImage,updateState,images})=>{const{initialized,index}=useIndex(),assetsList=images.filter(id=>initialized&&Object.keys(index.data).includes(id)).map(id=>({assetId:id,assetController:new Controller})),{initialized:assetsInitialized,assets}=useAssets(assetsList),fileInput=reactExports.useRef(null),{FreeWorkload}=useCK(),handleInputChange=__name(e2=>{if(e2.target.files&&e2.target.files.length>0){const file=e2.target.files[0],fileName=file.name;let newAssetId=fileName;if(images.includes(fileName)){let counter=1;for(;images.includes(`${fileName}_${counter}`);)counter++;newAssetId=`${fileName}_${counter}`}updateState({shapeImageAssetId:newAssetId,shapeImageAssetIds:[...images,newAssetId]});const reader=new FileReader;reader.onloadend=()=>{const dataUrl=reader.result,workload=FreeWorkload();workload.thread("default").worker({instance_id:"ASSET_SERVER",modality:"wasmjs",resource_id:`${CONFIG.PAC_BACKGROUND_SERVICES}AssetServerV2`},{createAsset:{asset:{data:dataUrl,metadata:{type:"image",name:newAssetId+".image",preferredEditorAddress:CONFIG.SELF_HOST+"image-viewer"},on_update:{type:"simple"},id:newAssetId}}}),workload.dispatch()},reader.readAsDataURL(file)}},"handleInputChange");return jsxRuntimeExports.jsxs("div",{style:{border:"2px solid var(--gray3)",borderRadius:"var(--borderRadiusSmall)",padding:"10px",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"10px"},children:[images.map((img,index2)=>jsxRuntimeExports.jsx("div",{style:{width:"80px",height:"80px",border:`2px solid ${img===selectedImage?"var(--gray8)":"var(--gray3)"}`,borderRadius:"var(--borderRadiusSmall)"},onClick:__name(()=>updateState({shapeImageAssetId:img}),"onClick"),children:assetsInitialized&&assets[img]?jsxRuntimeExports.jsx("img",{src:assets[img].data,alt:`Image ${index2}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--borderRadiusSmall)"}}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."})},index2)),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:handleInputChange,ref:fileInput,style:{display:"none"}}),jsxRuntimeExports.jsx("div",{style:{width:"80px",height:"80px",border:"2px dashed var(--gray3)",borderRadius:"var(--borderRadiusSmall)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1.5rem"},className:"materialSymbols",onClick:__name(()=>{fileInput.current&&fileInput.current.click()},"onClick"),children:"upload"})]})},"ImageUploader"),SvgIcon=__name(props=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"713",height:"355",fill:"none",viewBox:"1 1 711 353",...props,children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#clip0_1_76)",children:[jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M0 0h713v355H0z"}),jsxRuntimeExports.jsx("path",{fill:"#1D2126",d:"M-14-13h813v430H-14z"}),jsxRuntimeExports.jsxs("g",{filter:"url(#filter0_i_1_76)",children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#clip1_1_76)",children:[jsxRuntimeExports.jsx("rect",{width:"333",height:"333",x:"9",y:"11",fill:"#2C333A",rx:"10"}),jsxRuntimeExports.jsx("path",{fill:"#1D2126",d:"M9 11h333v333H9z"}),jsxRuntimeExports.jsx("circle",{cx:"120.5",cy:"77.5",r:"11.5",fill:"#C6D6E6"}),jsxRuntimeExports.jsx("path",{fill:"#2C333A",d:"m237.5 11 48.383 148.907h156.57l-126.668 92.029 48.383 148.907L237.5 308.814l-126.668 92.029 48.383-148.907-126.668-92.029h156.57z"}),jsxRuntimeExports.jsx("path",{stroke:"#6CB476",strokeWidth:"8",d:"m282.078 161.143.899 2.764h147.165L313.434 248.7l-2.351 1.708.897 2.765 44.579 137.198-116.707-84.794-2.352-1.708-2.352 1.708-116.708 84.794 44.58-137.198.897-2.765-2.351-1.708-116.708-84.793h147.165l.899-2.764L237.5 23.945z"}),jsxRuntimeExports.jsx("path",{stroke:"#C6D6E6",strokeDasharray:"14 8",strokeWidth:"8",d:"m119.137 76.519 121 153"}),jsxRuntimeExports.jsx("path",{fill:"#2C333A",d:"M171 170v-10h8.5l10.5-4 2-6 1-2 9 5 1.5 20-10.5 8-5.5-1z"}),jsxRuntimeExports.jsx("circle",{cx:"187.5",cy:"164.5",r:"11.5",fill:"#0F2"}),jsxRuntimeExports.jsx("circle",{cx:"237.5",cy:"226.5",r:"11.5",fill:"#C6D6E6"}),jsxRuntimeExports.jsx("path",{stroke:"#0F2",strokeLinecap:"round",strokeWidth:"10",d:"M35 284.51c2.345 6.722 7.105 17.491 8.402 20.295.637 1.378 1.07 2.804 1.893 3.854.424.54 1.528.357 2.363.011 1.72-.714 2.732-2.447 7.311-10.314 4.16-7.146 11.848-20.806 17.827-30.37s9.966-14.648 12.253-17.613c2.288-2.966 2.757-3.659 3.951-4.373"})]}),jsxRuntimeExports.jsx("rect",{width:"327",height:"327",x:"12",y:"14",stroke:"#708090",strokeWidth:"6",rx:"7"})]}),jsxRuntimeExports.jsxs("g",{filter:"url(#filter1_i_1_76)",children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#clip2_1_76)",children:[jsxRuntimeExports.jsx("rect",{width:"333",height:"333",x:"371",y:"11",fill:"#1D2126",rx:"10"}),jsxRuntimeExports.jsx("path",{fill:"#1D2126",d:"M371 11h333v333H371z"}),jsxRuntimeExports.jsxs("mask",{id:"path-16-outside-1_1_76",width:"267",height:"233",x:"441",y:"49",fill:"#000",maskUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M441 49h267v233H441z"}),jsxRuntimeExports.jsx("path",{d:"M627.9 273.4q-12.9 0-22.2-7.5t-13.5-25.5l-12-49.2q-3.6 13.5-8.4 26.4-4.8 12.6-9.3 22.5-7.5 17.7-16.5 25.5-8.7 7.8-20.1 7.8-12.9 0-21.9-8.7-8.7-8.7-12.9-24.3L451.5 89.8q-4.8-15.3 1.5-23.7 6.6-8.4 17.4-8.4 9.9 0 15.3 6.6 5.7 6.6 9.6 22.5L530.1 229l20.7-65.4q6-18.6 7.5-29.4 1.8-11.1 1.8-17.1 0-9.6-2.1-16.2-1.8-6.6-3.3-12.3-3.6-15.6 2.1-21.6 6-6 15.3-6 9.6 0 15.6 6 6.3 5.7 9.3 19.8l32.7 141.9q14.4-42 20.4-67.8 6.3-25.8 6.3-39.3 0-13.8-1.2-21.3T652.5 88q-1.2-5.1-1.2-10.2 0-7.5 5.4-13.8 5.7-6.3 18.6-6.3 9.9 0 15.3 7.2t7.2 17.7q2.1 10.5 2.1 20.4 0 14.1-3.3 32.4t-8.7 37.8q-5.1 19.2-11.4 36.9t-12.6 30.6q-8.4 17.7-16.8 25.2t-19.2 7.5"})]}),jsxRuntimeExports.jsx("path",{fill:"#2C333A",d:"M627.9 273.4q-12.9 0-22.2-7.5t-13.5-25.5l-12-49.2q-3.6 13.5-8.4 26.4-4.8 12.6-9.3 22.5-7.5 17.7-16.5 25.5-8.7 7.8-20.1 7.8-12.9 0-21.9-8.7-8.7-8.7-12.9-24.3L451.5 89.8q-4.8-15.3 1.5-23.7 6.6-8.4 17.4-8.4 9.9 0 15.3 6.6 5.7 6.6 9.6 22.5L530.1 229l20.7-65.4q6-18.6 7.5-29.4 1.8-11.1 1.8-17.1 0-9.6-2.1-16.2-1.8-6.6-3.3-12.3-3.6-15.6 2.1-21.6 6-6 15.3-6 9.6 0 15.6 6 6.3 5.7 9.3 19.8l32.7 141.9q14.4-42 20.4-67.8 6.3-25.8 6.3-39.3 0-13.8-1.2-21.3T652.5 88q-1.2-5.1-1.2-10.2 0-7.5 5.4-13.8 5.7-6.3 18.6-6.3 9.9 0 15.3 7.2t7.2 17.7q2.1 10.5 2.1 20.4 0 14.1-3.3 32.4t-8.7 37.8q-5.1 19.2-11.4 36.9t-12.6 30.6q-8.4 17.7-16.8 25.2t-19.2 7.5"}),jsxRuntimeExports.jsx("path",{fill:"#B96767",d:"m605.7 265.9-5.022 6.227zm-13.5-25.5 7.791-1.818-.009-.039-.01-.039zm-12-49.2 7.772-1.896-15.502-.165zm-8.4 26.4 7.476 2.848.011-.029.011-.029zm-9.3 22.5-7.283-3.31-.043.094-.04.095zM546 265.6l-5.239-6.046-.051.045-.05.044zm-42-.9-5.657 5.657.048.048.049.047zm-12.9-24.3-7.737 2.034.006.023.006.023zM451.5 89.8l7.737-2.034-.048-.182-.056-.179zm1.5-23.7-6.291-4.943-.055.071-.054.072zm32.7-1.8-6.192 5.066.068.082.069.081zm9.6 22.5 7.771-1.902-.001-.004zM530.1 229l-7.771 1.902 6.785 27.724 8.613-27.212zm20.7-65.4-7.614-2.456-.006.021-.007.021zm7.5-29.4-7.897-1.281-.014.09-.013.09zm-.3-33.3-7.718 2.105.044.161.051.16zm-3.3-12.3-7.795 1.799.027.119.031.118zm2.1-21.6-5.657-5.657-.072.073-.071.074zm30.9 0-5.657 5.657.141.141.149.134zm9.3 19.8-7.825 1.665.014.066.015.066zm32.7 141.9-7.796 1.796 6.286 27.276 9.078-26.477zm20.4-67.8-7.772-1.898-.01.043-.01.043zm5.1-60.6 7.9-1.264zM652.5 88l-7.787 1.832.065.28.086.274zm4.2-24-5.932-5.367-.072.08-.07.08zm41.1 18.6-7.885 1.352.019.109.021.108zm-1.2 52.8 7.873 1.42zm-8.7 37.8-7.71-2.135-.011.041-.011.04zm-11.4 36.9 7.537 2.683zm-12.6 30.6-7.189-3.511-.019.041-.019.04zm-16.8 25.2 5.328 5.968zm-19.2 7.5v-8c-6.929 0-12.517-1.969-17.178-5.727L605.7 265.9l-5.022 6.227c7.739 6.242 16.951 9.273 27.222 9.273zm-22.2-7.5 5.022-6.227c-4.233-3.414-8.127-9.932-10.731-21.091L592.2 240.4l-7.791 1.818c2.996 12.841 8.102 23.323 16.269 29.909zm-13.5-25.5 7.772-1.896-12-49.2-7.772 1.896-7.772 1.896 12 49.2zm-12-49.2-7.73-2.061a282 282 0 0 1-8.168 25.671l7.498 2.79 7.498 2.79a298 298 0 0 0 8.632-27.129zm-8.4 26.4-7.476-2.848c-3.154 8.279-6.19 15.621-9.107 22.038l7.283 3.31 7.283 3.31c3.083-6.783 6.247-14.441 9.493-22.962zm-9.3 22.5-7.366-3.121c-4.783 11.289-9.694 18.52-14.373 22.575L546 265.6l5.239 6.046c7.321-6.345 13.41-16.114 18.627-28.425zM546 265.6l-5.34-5.957c-4.373 3.921-9.185 5.757-14.76 5.757v16c9.625 0 18.213-3.364 25.44-9.843zm-20.1 7.8v-8c-6.596 0-11.882-2.142-16.34-6.452L504 264.7l-5.56 5.752c7.542 7.29 16.856 10.948 27.46 10.948zm-21.9-8.7 5.657-5.657c-4.546-4.546-8.286-11.264-10.832-20.723l-7.725 2.08-7.725 2.08c3.054 11.341 7.914 20.823 14.968 27.877zm-12.9-24.3 7.737-2.034-39.6-150.6L451.5 89.8l-7.737 2.034 39.6 150.6zM451.5 89.8l7.633-2.395c-2.85-9.085-1.703-13.879.267-16.505l-6.4-4.8-6.4-4.8c-6.43 8.574-6.283 19.58-2.733 30.895zm1.5-23.7 6.291 4.943c2.863-3.645 6.332-5.343 11.109-5.343v-16c-9.623 0-17.754 3.902-23.691 11.457zm17.4-8.4v8c4.632 0 7.282 1.433 9.108 3.666L485.7 64.3l6.192-5.066c-5.374-6.567-12.924-9.534-21.492-9.534zm15.3 6.6-6.055 5.229c2.53 2.929 5.366 8.907 7.885 19.177l7.77-1.906 7.77-1.906c-2.681-10.93-6.245-19.952-11.315-25.823zm9.6 22.5-7.771 1.902 34.8 142.2L530.1 229l7.771-1.902-34.8-142.2zM530.1 229l7.627 2.414 20.7-65.4-7.627-2.414-7.627-2.414-20.7 65.4zm20.7-65.4 7.614 2.456c4.049-12.554 6.715-22.87 7.81-30.755L558.3 134.2l-7.924-1.101c-.905 6.515-3.239 15.799-7.19 28.045zm7.5-29.4 7.897 1.281c1.22-7.526 1.903-13.73 1.903-18.381h-16c0 3.349-.517 8.545-1.697 15.819zm1.8-17.1h8c0-6.93-.751-13.204-2.477-18.626L558 100.9l-7.623 2.426c1.074 3.378 1.723 7.904 1.723 13.774zm-2.1-16.2 7.718-2.105q-1.792-6.57-3.281-12.231L554.7 88.6l-7.737 2.036a1455 1455 0 0 0 3.319 12.369zm-3.3-12.3 7.795-1.799c-2.328-10.09-.66-13.485.105-14.291L556.8 67l-5.8-5.51c-6.835 7.194-6.567 18.198-4.095 28.909zm2.1-21.6 5.657 5.657C564.805 70.308 567.798 69 572.1 69V53c-8.098 0-15.305 2.691-20.957 8.343zm15.3-6v8c4.582 0 7.645 1.36 9.943 3.657L587.7 67l5.657-5.657C587.655 55.641 580.318 53 572.1 53zm15.6 6-5.367 5.932c2.349 2.126 4.973 6.747 6.842 15.533L597 86.8l7.825-1.665c-2.131-10.014-5.707-18.593-11.758-24.067zm9.3 19.8-7.796 1.797 32.7 141.899 7.796-1.796 7.796-1.796-32.7-141.9zm32.7 141.9 7.568 2.595c9.637-28.111 16.535-51.001 20.624-68.583L650.1 160.9l-7.792-1.812c-3.911 16.818-10.613 39.128-20.176 67.017zm20.4-67.8 7.772 1.898c4.235-17.346 6.528-31.206 6.528-41.198h-16c0 8.008-1.907 20.348-6.072 37.402zm6.3-39.3h8c0-9.341-.4-16.938-1.3-22.564l-7.9 1.264-7.9 1.264c.7 4.374 1.1 10.977 1.1 20.036zm-1.2-21.3 7.9-1.264c-.834-5.209-1.807-9.72-2.964-13.422L652.5 88l-7.636 2.386c.843 2.698 1.67 6.387 2.436 11.178zM652.5 88l7.787-1.832a36.4 36.4 0 0 1-.987-8.368h-16c0 4.034.475 8.048 1.413 12.032zm-1.2-10.2h8c0-2.883.975-5.678 3.474-8.594L656.7 64l-6.074-5.206c-4.701 5.484-7.326 11.89-7.326 19.006zm5.4-13.8 5.932 5.367c1.645-1.817 5.158-3.667 12.668-3.667v-16c-9.69 0-18.577 2.35-24.532 8.933zm18.6-6.3v8c4.373 0 6.977 1.436 8.9 4l6.4-4.8 6.4-4.8c-5.277-7.036-12.873-10.4-21.7-10.4zm15.3 7.2-6.4 4.8c2.71 3.614 4.69 8.274 5.715 14.252L697.8 82.6l7.885-1.352C704.31 73.226 701.49 66.086 697 60.1zm7.2 17.7-7.845 1.569C691.26 90.694 691.9 96.968 691.9 103h16c0-7.168-.76-14.494-2.255-21.969zm2.1 20.4h-8c0 8.801-1.033 19.11-3.173 30.98l7.873 1.42 7.873 1.42c2.26-12.53 3.427-23.821 3.427-33.82zm-3.3 32.4-7.873-1.42c-2.153 11.94-4.996 24.3-8.537 37.085l7.71 2.135 7.71 2.135q5.491-19.824 8.863-38.515zm-8.7 37.8-7.732-2.054q-5.02 18.9-11.205 36.271l7.537 2.683 7.537 2.683q6.416-18.029 11.595-37.529zm-11.4 36.9-7.537-2.683c-4.128 11.599-8.216 21.509-12.252 29.772l7.189 3.511 7.189 3.511c4.364-8.937 8.676-19.427 12.948-31.428zm-12.6 30.6-7.227-3.43c-5.431 11.444-10.48 18.715-14.901 22.662l5.328 5.968 5.328 5.968c6.779-6.053 12.93-15.582 18.699-27.738zm-16.8 25.2-5.328-5.968c-4.203 3.753-8.727 5.468-13.872 5.468v16c9.255 0 17.531-3.285 24.528-9.532z",mask:"url(#path-16-outside-1_1_76)"}),jsxRuntimeExports.jsx("path",{stroke:"#C6D6E6",strokeDasharray:"11 8",strokeWidth:"8",d:"m405.933 157.001 180-3"}),jsxRuntimeExports.jsx("path",{fill:"#2C333A",d:"M464.5 170.5 463 165l-7-26.5 11.5-3L482 149v14l-4.5 4.5zM516 137.5l-11 1-8 6.5v21l3 4.5 8 1 15.5-3zM551 173.5l-10.5-3 2-7.5 7-25.5 10.5 3 6 7.5v15z"}),jsxRuntimeExports.jsx("circle",{cx:"585.5",cy:"154.5",r:"11.5",fill:"#C6D6E6"}),jsxRuntimeExports.jsx("circle",{cx:"405.5",cy:"154.5",r:"11.5",fill:"#C6D6E6"}),jsxRuntimeExports.jsx("circle",{cx:"549.5",cy:"154.5",r:"11.5",fill:"red"}),jsxRuntimeExports.jsx("circle",{cx:"513.5",cy:"154.5",r:"11.5",fill:"red"}),jsxRuntimeExports.jsx("circle",{cx:"463.5",cy:"154.5",r:"11.5",fill:"red"}),jsxRuntimeExports.jsx("path",{stroke:"red",strokeLinecap:"round",strokeWidth:"10",d:"M441 254c-10.539 10.737-17.715 19.039-22.732 26.096-7.086 9.411-14.271 18.913-22.438 30.138-1.224 1.966-1.523 2.853-1.83 3.766"}),jsxRuntimeExports.jsx("path",{stroke:"red",strokeLinecap:"round",strokeWidth:"10",d:"M397 271c9.599 1.766 13.707 3.558 20.694 7.906 3.317 3.421 19.057 14.659 22.826 19.279 1.058 1.338 2.251 3.104 3.48 5.815"})]}),jsxRuntimeExports.jsx("rect",{width:"327",height:"327",x:"374",y:"14",stroke:"#708090",strokeWidth:"6",rx:"7"})]})]}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("clipPath",{id:"clip0_1_76",children:jsxRuntimeExports.jsx("path",{fill:"#fff",d:"M0 0h713v355H0z"})}),jsxRuntimeExports.jsx("clipPath",{id:"clip1_1_76",children:jsxRuntimeExports.jsx("rect",{width:"333",height:"333",x:"9",y:"11",fill:"#fff",rx:"10"})}),jsxRuntimeExports.jsx("clipPath",{id:"clip2_1_76",children:jsxRuntimeExports.jsx("rect",{width:"333",height:"333",x:"371",y:"11",fill:"#fff",rx:"10"})}),jsxRuntimeExports.jsxs("filter",{id:"filter0_i_1_76",width:"333",height:"333",x:"9",y:"11",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),jsxRuntimeExports.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),jsxRuntimeExports.jsx("feMorphology",{in:"SourceAlpha",radius:"8",result:"effect1_innerShadow_1_76"}),jsxRuntimeExports.jsx("feOffset",{}),jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"2"}),jsxRuntimeExports.jsx("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),jsxRuntimeExports.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),jsxRuntimeExports.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow_1_76"})]}),jsxRuntimeExports.jsxs("filter",{id:"filter1_i_1_76",width:"333",height:"333",x:"371",y:"11",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),jsxRuntimeExports.jsx("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),jsxRuntimeExports.jsx("feMorphology",{in:"SourceAlpha",radius:"8",result:"effect1_innerShadow_1_76"}),jsxRuntimeExports.jsx("feOffset",{}),jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"2"}),jsxRuntimeExports.jsx("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),jsxRuntimeExports.jsx("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),jsxRuntimeExports.jsx("feBlend",{in2:"shape",result:"effect1_innerShadow_1_76"})]})]})]}),"SvgIcon");function CyberSpaghettiControlsInterior({controls}){const state=reactExports.useSyncExternalStore(controls.subscribeInternal.bind(controls),controls.getSnapshot.bind(controls));reactExports.useEffect(()=>{updateAnimationSpeed(state.speed)},[]);const timeline=useTimeline(),update=__name(patch=>{const next={...state,...patch};controls.setData(next)},"update"),updateAnimationSpeed=__name(speed=>{speed=1-speed;const loopLength=15+485*speed;timeline==null||timeline.projectTools.updateFocusRange([0,Math.floor(loopLength)],!0)},"updateAnimationSpeed"),setPreset=__name(preset=>{preset.speed&&updateAnimationSpeed(preset.speed),update({...preset})},"setPreset");return jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"20px",flexDirection:"column",backgroundColor:"var(--gray1)",width:"100vw",minWidth:"400px",height:"100vh",padding:"1rem",color:"var(--gray6)",overflow:"scroll",scrollbarColor:"var(--gray3) var(--gray1)"},children:[jsxRuntimeExports.jsx("h2",{style:{color:"var(--gray7)",fontWeight:"normal"},children:"EchoKnight (Beta)"}),jsxRuntimeExports.jsx("div",{children:"Version 0.0.1."}),jsxRuntimeExports.jsx("hr",{}),"Pick a preset to get started",jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(PresetButton,{label:"Daisy",preset:presets.daisy,onClick:setPreset}),jsxRuntimeExports.jsx(PresetButton,{label:"Arcade",preset:presets.arcade,onClick:setPreset}),jsxRuntimeExports.jsx(PresetButton,{label:"Love",preset:presets.love,onClick:setPreset})]}),"Customize to your liking",jsxRuntimeExports.jsxs(CollapsibleSection,{title:"General",iconName:"settings",children:[jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["canvas size ",jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.width,min:100,max:1920*2,step:10,onCommit:__name(c=>update({width:c}),"onCommit")}),jsxRuntimeExports.jsx("span",{children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.height,min:100,max:1080*2,step:10,onCommit:__name(c=>update({height:c}),"onCommit")})]})]}),jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["animation speed ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.speed,min:.1,max:1,step:.01,onChange:__name(c=>{update({speed:c})},"onChange"),onCommit:__name(c=>{updateAnimationSpeed(c),update({speed:c})},"onCommit")})]}),jsxRuntimeExports.jsx(SwitchableSection,{label:"export perfect loop",activeOnToggled:!1,checked:state.exportPerfectLoop,onToggle:__name(checked=>update({exportPerfectLoop:checked}),"onToggle"),children:jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["export duration (seconds) ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.exportDuration,min:1,max:30,step:1,onCommit:__name(c=>{update({exportDuration:c})},"onCommit")})]})})]}),jsxRuntimeExports.jsxs(CollapsibleSection,{title:"Composition",iconName:"grid_on",children:[jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["center point ",jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasPoint[0],min:-1,max:1,step:.01,onChange:__name(c=>update({canvasPoint:[c,state.canvasPoint[1]]}),"onChange")}),jsxRuntimeExports.jsx("span",{children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasPoint[1],min:-1,max:1,step:.01,onChange:__name(c=>update({canvasPoint:[state.canvasPoint[0],c]}),"onChange")})]})]}),jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["ripple scale ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.canvasScale,min:.01,max:2,step:.01,onChange:__name(c=>{update({canvasScale:c})},"onChange")})]}),jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["perspective strength ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.perspectiveFactor,min:.1,max:1,step:.01,onChange:__name(c=>{update({perspectiveFactor:c})},"onChange")})]}),jsxRuntimeExports.jsx("hr",{style:{borderColor:"var(--gray2)"}}),jsxRuntimeExports.jsx(SwitchableSection,{label:"overlay shape",checked:state.overlayShape,onToggle:__name(checked=>update({overlayShape:checked}),"onToggle"),children:jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["shape scale ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.shapeScale,min:.01,max:2,step:.01,onChange:__name(c=>{update({shapeScale:c})},"onChange")})]})})]}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Colors",iconName:"palette",children:jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100px",padding:"1rem"},children:jsxRuntimeExports.jsx(GradientPicker,{stops:state.colorStops,onChange:__name(colors=>{update({colorStops:colors})},"onChange"),style:{width:"100%",height:"200px"}})})}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Shape",iconName:"shapes",children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[jsxRuntimeExports.jsx(ImageUploader,{updateState:update,selectedImage:state.shapeImageAssetId,images:state.shapeImageAssetIds}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Some shapes may not work as expected",iconName:"info",titleStyle:{fontWeight:"normal",color:"var(--gray6)",fontSize:"1rem"},children:jsxRuntimeExports.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 250px",gap:"1rem",alignItems:"start"},children:[jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.8rem"},children:["The algorithm used by this tool only works with certain kinds of shapes called ",jsxRuntimeExports.jsx("a",{style:{textDecoration:"underline",color:"var(--gray7)"},href:"https://en.wikipedia.org/wiki/Star_domain",target:"_blank",children:"star domains"}),". These are shapes where you can pick a center point, and every straight line from that center crosses the boundary only once."]}),jsxRuntimeExports.jsx(SvgIcon,{style:{width:"100%",height:"auto"}})]})}),jsxRuntimeExports.jsx(SwitchableSection,{label:"display shape inspector",checked:state.showShapeInspector,onToggle:__name(checked=>update({showShapeInspector:checked}),"onToggle"),children:jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["shape center point ",jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"center"},children:[jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.shapePoint[0],min:-1,max:1,step:.01,onChange:__name(c=>update({shapePoint:[c,state.shapePoint[1]]}),"onChange")}),jsxRuntimeExports.jsx("span",{children:"x"}),jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.shapePoint[1],min:-1,max:1,step:.01,onChange:__name(c=>update({shapePoint:[state.shapePoint[0],c]}),"onChange")})]})]})})]})}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Effects",iconName:"star",children:jsxRuntimeExports.jsx(SwitchableSection,{label:"enable grain",checked:state.grainEnabled,onToggle:__name(checked=>update({grainEnabled:checked}),"onToggle"),children:jsxRuntimeExports.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"space-between"},children:["grain intensity ",jsxRuntimeExports.jsx(SimpleCommittedNumberInput,{initialValue:state.grainIntensity,min:0,max:1,step:.01,onChange:__name(c=>{update({grainIntensity:c})},"onChange")})]})})}),jsxRuntimeExports.jsx(CollapsibleSection,{title:"Give Feedback",iconName:"favorite",children:jsxRuntimeExports.jsx("div",{style:{marginBottom:"1rem",color:"var(--gray6)"},children:jsxRuntimeExports.jsx(FeedbackBox,{preamble:"[FEEDBACK FROM ECHOKNIGHT] "})})})]})}__name(CyberSpaghettiControlsInterior,"CyberSpaghettiControlsInterior");function CyberSpaghettiExterior(){const controls=useControls();return controls?jsxRuntimeExports.jsx(CyberSpaghettiControlsInterior,{controls}):jsxRuntimeExports.jsx(FullscreenLoader,{})}__name(CyberSpaghettiExterior,"CyberSpaghettiExterior");function CyberSpaghettiControls(){return jsxRuntimeExports.jsx(AssetProvider,{children:jsxRuntimeExports.jsx(ControlsProvider,{children:jsxRuntimeExports.jsx(TimelineProvider,{shouldCreate:!1,defaultName:"liquidlissajous.timeline",children:jsxRuntimeExports.jsx(CyberSpaghettiExterior,{})})})})}__name(CyberSpaghettiControls,"CyberSpaghettiControls");const Default=__name(()=>jsxRuntimeExports.jsx("h1",{children:"Default Page"}),"Default");function App(p2){return reactExports.useEffect(()=>{const{renderedCallback}=p2;renderedCallback&&renderedCallback()},[]),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(StyleProvider,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Default,{})}),jsxRuntimeExports.jsx(Route,{path:"/asset-test-panel",element:jsxRuntimeExports.jsx(AssetTestPanel,{})}),jsxRuntimeExports.jsx(Route,{path:"/viewer",element:jsxRuntimeExports.jsx(Viewer,{})}),jsxRuntimeExports.jsx(Route,{path:"/neonshower",element:jsxRuntimeExports.jsx(CyberSpaghettiControls$1,{})}),jsxRuntimeExports.jsx(Route,{path:"/cyberspaghetti",element:jsxRuntimeExports.jsx(CyberSpaghetti,{})}),jsxRuntimeExports.jsx(Route,{path:"/cyberspaghetti-controlconsole",element:jsxRuntimeExports.jsx(CyberSpaghettiControls$3,{})}),jsxRuntimeExports.jsx(Route,{path:"/liquidlissajous",element:jsxRuntimeExports.jsx(LiquidLissajous$1,{})}),jsxRuntimeExports.jsx(Route,{path:"/liquidlissajous-controlconsole",element:jsxRuntimeExports.jsx(CyberSpaghettiControls$2,{})}),jsxRuntimeExports.jsx(Route,{path:"/echoknight",element:jsxRuntimeExports.jsx(LiquidLissajous,{})}),jsxRuntimeExports.jsx(Route,{path:"/echoknight-controlconsole",element:jsxRuntimeExports.jsx(CyberSpaghettiControls,{})})]})})})}__name(App,"App");const metadata_registry={},_CK_Adapter=class _CK_Adapter{constructor(installCallback){__publicField(this,"PASSWORD");__publicField(this,"installCallback");__publicField(this,"computing",!1);__publicField(this,"unitCallback");__publicField(this,"CK_INSTANCE_ID");__publicField(this,"CK_RESOURCE_ID");this.installCallback=installCallback,window.addEventListener("message",event=>{let m2=event.data;if(m2&&m2.type&&m2.type==="ck-message"){const payload=m2.payload,{CK_INSTALL}=payload;if(CK_INSTALL){const{pw,instanceId,resourceId}=payload;this.PASSWORD=pw,this.CK_INSTANCE_ID=instanceId,this.CK_RESOURCE_ID=resourceId,globalThis.CK_INSTANCE=this.CK_INSTANCE;const metadata=metadata_registry[resourceId];m2={...m2,payload:{...payload,metadata}},new Promise(resolve=>{this.installCallback&&this.installCallback(resolve,this.onUnit.bind(this),this.pushWorkload.bind(this))}).then(()=>{window.parent.postMessage(m2,"*")})}}}),window.addEventListener("message",event=>{const m2=event.data;if(m2&&m2.type&&m2.type==="ck-message"){const payload=m2.payload,{CK_COMPUTE}=payload;if(CK_COMPUTE){const{unit}=payload;this.computeUnit(unit)}}})}computeUnit(unit){this.computing=!0,new Promise(resolve=>{if(this.unitCallback){const onDispatch=__name(w2=>{this.computing=!1,resolve(void 0),window.parent.postMessage({type:"ck-message",payload:{CK_COMPUTE:!0,pw:this.PASSWORD,response:w2}},"*")},"onDispatch"),newWorkload=new CK_Workload_Class(onDispatch);this.unitCallback(unit,newWorkload);return}setTimeout(()=>{throw new Error("Timed out waiting for compute unit callback")},1e3)})}onUnit(callback){this.unitCallback=callback}get CK_INSTANCE(){if(!this.CK_INSTANCE_ID)throw new Error("CK_INSTANCE_ID is not set");return{instance_id:this.CK_INSTANCE_ID,resource_id:this.CK_RESOURCE_ID,modality:"iframe"}}pushWorkload(workload,metadata){window.parent.postMessage({type:"ck-message",payload:{PUSH_WORKLOAD:!0,pw:this.PASSWORD,workload,metadata:metadata||{}}},"*")}};__name(_CK_Adapter,"CK_Adapter");let CK_Adapter=_CK_Adapter;new CK_Adapter((cb,onUnit,pushWorkload)=>{const root=document.getElementById("root");root&&clientExports.createRoot(root).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(CK_Provider,{renderedCallback:cb,onUnit,pushWorkload,children:jsxRuntimeExports.jsx(CK_UnitProvider,{children:jsxRuntimeExports.jsx(App,{renderedCallback:cb})})})})}))});
